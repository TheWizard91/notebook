/*! For license information please see main.71ab0dbf.js.LICENSE.txt */
!function(){var e={142:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case f:case m:case v:case u:return e;default:return t}}case i:return t}}}function _(e){return w(e)===h}t.isForwardRef=function(e){return w(e)===f}},33:function(e,t,n){"use strict";e.exports=n(142)},630:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(618);n(7);var i=n(791);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var p=function(){function e(t){o(this,e),c(this,"handlers",void 0),this.handlers=t.slice(0)}return u(e,[{key:"addHandlers",value:function(t){for(var n=this.handlers.slice(0),r=t.length,i=0;i<r;i+=1)n.push(t[i]);return new e(n)}},{key:"dispatchEvent",value:function(e,t){var n=this.handlers.length-1;if(t){for(var r=n;r>=0;r-=1)this.handlers[r].called||(this.handlers[r].called=!0,this.handlers[r](e));for(var i=n;i>=0;i-=1)this.handlers[i].called=!1}else(0,this.handlers[n])(e)}},{key:"hasHandlers",value:function(){return this.handlers.length>0}},{key:"removeHandlers",value:function(t){for(var n=[],r=this.handlers.length,i=0;i<r;i+=1){var a=this.handlers[i];-1===t.indexOf(a)&&n.push(a)}return new e(n)}}]),e}();function v(e){var t=new Map;return e.forEach((function(e,n){t.set(n,e)})),t}function m(e){return Array.isArray(e)?e:[e]}function g(e){return"document"===e?document:"window"===e?window:function(e){return null!==e&&"object"===a(e)&&e.hasOwnProperty("current")}(e)?e.current||document:e||document}var y=function(){function e(t,n){o(this,e),c(this,"handlerSets",void 0),c(this,"poolName",void 0),this.handlerSets=n,this.poolName=t}return u(e,[{key:"addHandlers",value:function(t,n){var r=v(this.handlerSets);if(r.has(t)){var i=r.get(t);r.set(t,i.addHandlers(n))}else r.set(t,new p(n));return new e(this.poolName,r)}},{key:"dispatchEvent",value:function(e,t){var n=this.handlerSets.get(e),r="default"===this.poolName;n&&n.dispatchEvent(t,r)}},{key:"hasHandlers",value:function(e){if(!e)return this.handlerSets.size>0;var t=this.handlerSets.get(e);return!!t&&t.hasHandlers()}},{key:"removeHandlers",value:function(t,n){var r=v(this.handlerSets);if(!r.has(t))return new e(this.poolName,r);var i=r.get(t).removeHandlers(n);return i.hasHandlers()?r.set(t,i):r.delete(t),new e(this.poolName,r)}}]),e}();c(y,"createByType",(function(e,t,n){var r=new Map;return r.set(t,new p(n)),new y(e,r)}));var k=function(){function e(t){var n=this;o(this,e),c(this,"handlers",new Map),c(this,"pools",new Map),c(this,"target",void 0),c(this,"createEmitter",(function(e){return function(t){n.pools.forEach((function(n){n.dispatchEvent(e,t)}))}})),this.target=t}return u(e,[{key:"addHandlers",value:function(e,t,n){if(this.pools.has(e)){var r=this.pools.get(e);this.pools.set(e,r.addHandlers(t,n))}else this.pools.set(e,y.createByType(e,t,n));this.handlers.has(t)||this.addTargetHandler(t)}},{key:"hasHandlers",value:function(){return this.handlers.size>0}},{key:"removeHandlers",value:function(e,t,n){if(this.pools.has(e)){var r=this.pools.get(e).removeHandlers(t,n);r.hasHandlers()?this.pools.set(e,r):this.pools.delete(e);var i=!1;this.pools.forEach((function(e){return i=i||e.hasHandlers(t)})),i||this.removeTargetHandler(t)}}},{key:"addTargetHandler",value:function(e){var t=this.createEmitter(e);this.handlers.set(e,t),this.target.addEventListener(e,t,!0)}},{key:"removeTargetHandler",value:function(e){this.handlers.has(e)&&(this.target.removeEventListener(e,this.handlers.get(e),!0),this.handlers.delete(e))}}]),e}(),b=function(){function e(){var t=this;o(this,e),c(this,"targets",new Map),c(this,"getTarget",(function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=g(e);if(t.targets.has(r))return t.targets.get(r);if(!n)return null;var i=new k(r);return t.targets.set(r,i),i})),c(this,"removeTarget",(function(e){t.targets.delete(g(e))}))}return u(e,[{key:"sub",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.canUseDOM){var i=n.target,a=void 0===i?document:i,o=n.pool,s=void 0===o?"default":o;this.getTarget(a).addHandlers(s,e,m(t))}}},{key:"unsub",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.canUseDOM){var i=n.target,a=void 0===i?document:i,o=n.pool,s=void 0===o?"default":o,u=this.getTarget(a,!1);u&&(u.removeHandlers(s,e,m(t)),u.hasHandlers()||this.removeTarget(a))}}}]),e}(),w=new b,_=function(e){function t(){return o(this,t),d(this,h(t).apply(this,arguments))}return l(t,i.PureComponent),u(t,[{key:"componentDidMount",value:function(){this.subscribe(this.props)}},{key:"componentDidUpdate",value:function(e){this.unsubscribe(e),this.subscribe(this.props)}},{key:"componentWillUnmount",value:function(){this.unsubscribe(this.props)}},{key:"subscribe",value:function(e){var t=e.name,n=e.on,r=e.pool,i=e.target;w.sub(t,n,{pool:r,target:i})}},{key:"unsubscribe",value:function(e){var t=e.name,n=e.on,r=e.pool,i=e.target;w.unsub(t,n,{pool:r,target:i})}},{key:"render",value:function(){return null}}]),t}();c(_,"defaultProps",{pool:"default",target:"document"}),_.propTypes={},t.instance=w,t.default=_},775:function(e,t,n){"use strict";var r;r=n(630),e.exports=r.default,e.exports.instance=r.instance},694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},618:function(e,t,n){var r;!function(){"use strict";var i=!("undefined"===typeof window||!window.document||!window.document.createElement),a={canUseDOM:i,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()},176:function(e){"use strict";e.exports=function(e,t,n,r,i,a,o,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,s],l=0;(u=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},854:function(e){"use strict";for(var t=function(e){return null!==e&&!Array.isArray(e)&&"object"===typeof e},n={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],91:"OS",93:"ContextMenu",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"'],224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"},r=0;r<24;r+=1)n[112+r]="F"+(r+1);for(var i=0;i<26;i+=1){var a=i+65;n[a]=[String.fromCharCode(a+32),String.fromCharCode(a)]}var o={codes:n,getCode:function(e){return t(e)?e.keyCode||e.which||this[e.key]:this[e]},getKey:function(e){var r=t(e);if(r&&e.key)return e.key;var i=n[r?e.keyCode||e.which:e];return Array.isArray(i)&&(i=r?i[e.shiftKey?1:0]:i[0]),i},Cancel:3,Help:6,Backspace:8,Tab:9,Clear:12,Enter:13,Shift:16,Control:17,Alt:18,Pause:19,CapsLock:20,Escape:27,Convert:28,NonConvert:29,Accept:30,ModeChange:31," ":32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Select:41,Print:42,Execute:43,PrintScreen:44,Insert:45,Delete:46,0:48,")":48,1:49,"!":49,2:50,"@":50,3:51,"#":51,4:52,$:52,5:53,"%":53,6:54,"^":54,7:55,"&":55,8:56,"*":56,9:57,"(":57,a:65,A:65,b:66,B:66,c:67,C:67,d:68,D:68,e:69,E:69,f:70,F:70,g:71,G:71,h:72,H:72,i:73,I:73,j:74,J:74,k:75,K:75,l:76,L:76,m:77,M:77,n:78,N:78,o:79,O:79,p:80,P:80,q:81,Q:81,r:82,R:82,s:83,S:83,t:84,T:84,u:85,U:85,v:86,V:86,w:87,W:87,x:88,X:88,y:89,Y:89,z:90,Z:90,OS:91,ContextMenu:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NumLock:144,ScrollLock:145,VolumeMute:181,VolumeDown:182,VolumeUp:183,";":186,":":186,"=":187,"+":187,",":188,"<":188,"-":189,_:189,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222,Meta:224,AltGraph:225,Attn:246,CrSel:247,ExSel:248,EraseEof:249,Play:250,ZoomOut:251};o.Spacebar=o[" "],o.Digit0=o[0],o.Digit1=o[1],o.Digit2=o[2],o.Digit3=o[3],o.Digit4=o[4],o.Digit5=o[5],o.Digit6=o[6],o.Digit7=o[7],o.Digit8=o[8],o.Digit9=o[9],o.Tilde=o["~"],o.GraveAccent=o["`"],o.ExclamationPoint=o["!"],o.AtSign=o["@"],o.PoundSign=o["#"],o.PercentSign=o["%"],o.Caret=o["^"],o.Ampersand=o["&"],o.PlusSign=o["+"],o.MinusSign=o["-"],o.EqualsSign=o["="],o.DivisionSign=o["/"],o.MultiplicationSign=o["*"],o.Comma=o[","],o.Decimal=o["."],o.Colon=o[":"],o.Semicolon=o[";"],o.Pipe=o["|"],o.BackSlash=o["\\"],o.QuestionMark=o["?"],o.SingleQuote=o["'"],o.DoubleQuote=o['"'],o.LeftCurlyBrace=o["{"],o.RightCurlyBrace=o["}"],o.LeftParenthesis=o["("],o.RightParenthesis=o[")"],o.LeftAngleBracket=o["<"],o.RightAngleBracket=o[">"],o.LeftSquareBracket=o["["],o.RightSquareBracket=o["]"],e.exports=o},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var a,o,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var c in a=Object(arguments[u]))n.call(a,c)&&(s[c]=a[c]);if(t){o=t(a);for(var l=0;l<o.length;l++)r.call(a,o[l])&&(s[o[l]]=a[o[l]])}}return s}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(f.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,k);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,k);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,k);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=60103,x=60106,E=60107,I=60108,S=60114,C=60109,T=60110,N=60112,R=60113,P=60120,A=60115,D=60116,O=60121,L=60128,M=60129,F=60130,j=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;_=U("react.element"),x=U("react.portal"),E=U("react.fragment"),I=U("react.strict_mode"),S=U("react.profiler"),C=U("react.provider"),T=U("react.context"),N=U("react.forward_ref"),R=U("react.suspense"),P=U("react.suspense_list"),A=U("react.memo"),D=U("react.lazy"),O=U("react.block"),U("react.scope"),L=U("react.opaque.id"),M=U("react.debug_trace_mode"),F=U("react.offscreen"),j=U("react.legacy_hidden")}var q,V="function"===typeof Symbol&&Symbol.iterator;function z(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=V&&e[V]||e["@@iterator"])?e:null}function B(e){if(void 0===q)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);q=t&&t[1]||""}return"\n"+q+e}var W=!1;function H(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function G(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 22:return e=H(e.type._render,!1);case 1:return e=H(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case x:return"Portal";case S:return"Profiler";case I:return"StrictMode";case R:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case A:return K(e.type);case O:return K(e._render);case D:t=e._payload,e=e._init;try{return K(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function de(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,ve,me=(ve=function(e,t){if(e.namespaceURI!==he.svg||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ve(e,t)}))}:ve);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ye={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ke=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ye.hasOwnProperty(e)&&ye[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ye).forEach((function(e){ke.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ye[t]=ye[e]}))}));var _e=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ie(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Te=null;function Ne(e){if(e=ni(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ii(t),Se(e.stateNode,e.type,t))}}function Re(e){Ce?Te?Te.push(e):Te=[e]:Ce=e}function Pe(){if(Ce){var e=Ce,t=Te;if(Te=Ce=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Ae(e,t){return e(t)}function De(e,t,n,r,i){return e(t,n,r,i)}function Oe(){}var Le=Ae,Me=!1,Fe=!1;function je(){null===Ce&&null===Te||(Oe(),Pe())}function Ue(e,t){var n=e.stateNode;if(null===n)return null;var r=ii(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var qe=!1;if(h)try{var Ve={};Object.defineProperty(Ve,"passive",{get:function(){qe=!0}}),window.addEventListener("test",Ve,Ve),window.removeEventListener("test",Ve,Ve)}catch(ve){qe=!1}function ze(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Be=!1,We=null,He=!1,Ge=null,Ke={onError:function(e){Be=!0,We=e}};function Qe(e,t,n,r,i,a,o,s,u){Be=!1,We=null,ze.apply(Ke,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Ye(e)!==e)throw Error(o(188))}function $e(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Je(i),e;if(a===r)return Je(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ze(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,it=!1,at=[],ot=null,st=null,ut=null,ct=new Map,lt=new Map,ht=[],ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function pt(e,t){switch(e){case"focusin":case"focusout":ot=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ut=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":lt.delete(t.pointerId)}}function vt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=dt(t,n,r,i,a),null!==t&&(null!==(t=ni(t))&&tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ti(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ni(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function yt(e,t,n){gt(e)&&n.delete(t)}function kt(){for(it=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=ni(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&at.shift()}null!==ot&&gt(ot)&&(ot=null),null!==st&&gt(st)&&(st=null),null!==ut&&gt(ut)&&(ut=null),ct.forEach(yt),lt.forEach(yt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,kt)))}function wt(e){function t(t){return bt(t,e)}if(0<at.length){bt(at[0],e);for(var n=1;n<at.length;n++){var r=at[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ot&&bt(ot,e),null!==st&&bt(st,e),null!==ut&&bt(ut,e),ct.forEach(t),lt.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)mt(n),null===n.blockedOn&&ht.shift()}function _t(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xt={animationend:_t("Animation","AnimationEnd"),animationiteration:_t("Animation","AnimationIteration"),animationstart:_t("Animation","AnimationStart"),transitionend:_t("Transition","TransitionEnd")},Et={},It={};function St(e){if(Et[e])return Et[e];if(!xt[e])return e;var t,n=xt[e];for(t in n)if(n.hasOwnProperty(t)&&t in It)return Et[e]=n[t];return e}h&&(It=document.createElement("div").style,"AnimationEvent"in window||(delete xt.animationend.animation,delete xt.animationiteration.animation,delete xt.animationstart.animation),"TransitionEvent"in window||delete xt.transitionend.transition);var Ct=St("animationend"),Tt=St("animationiteration"),Nt=St("animationstart"),Rt=St("transitionend"),Pt=new Map,At=new Map,Dt=["abort","abort",Ct,"animationEnd",Tt,"animationIteration",Nt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Rt,"transitionEnd","waiting","waiting"];function Ot(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),At.set(r,t),Pt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Lt=8;function Mt(e){if(0!==(1&e))return Lt=15,1;if(0!==(2&e))return Lt=14,2;if(0!==(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!==(32&e)?(Lt=11,32):0!==(t=192&e)?(Lt=10,t):0!==(256&e)?(Lt=9,256):0!==(t=3584&e)?(Lt=8,t):0!==(4096&e)?(Lt=7,4096):0!==(t=4186112&e)?(Lt=6,t):0!==(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!==(134217728&e)?(Lt=3,134217728):0!==(t=805306368&e)?(Lt=2,t):0!==(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,i=Lt=15;else if(0!==(a=134217727&n)){var u=a&~o;0!==u?(r=Mt(u),i=Lt):0!==(s&=a)&&(r=Mt(s),i=Lt)}else 0!==(a=n&~o)?(r=Mt(a),i=Lt):0!==s&&(r=Mt(s),i=Lt);if(0===r)return 0;if(r=n&((0>(r=31-Bt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Mt(t),i<=Lt)return t;Lt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Bt(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ut(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=qt(24&~t))?Ut(10,t):e;case 10:return 0===(e=qt(192&~t))?Ut(8,t):e;case 8:return 0===(e=qt(3584&~t))&&(0===(e=qt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=qt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function qt(e){return e&-e}function Vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Bt(t)]=n}var Bt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Wt(e)/Ht|0)|0},Wt=Math.log,Ht=Math.LN2;var Gt=a.unstable_UserBlockingPriority,Kt=a.unstable_runWithPriority,Qt=!0;function Yt(e,t,n,r){Me||Oe();var i=Jt,a=Me;Me=!0;try{De(i,e,t,n,r)}finally{(Me=a)||je()}}function Xt(e,t,n,r){Kt(Gt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if(Qt)if((i=0===(4&t))&&0<at.length&&-1<ft.indexOf(e))e=dt(null,e,t,n,r),at.push(e);else{var a=$t(e,t,n,r);if(null===a)i&&pt(e,r);else{if(i){if(-1<ft.indexOf(e))return e=dt(a,e,t,n,r),void at.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ot=vt(ot,e,t,n,r,i),!0;case"dragenter":return st=vt(st,e,t,n,r,i),!0;case"mouseover":return ut=vt(ut,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return ct.set(a,vt(ct.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,lt.set(a,vt(lt.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;pt(e,r)}Or(e,t,r,null,n)}}}function $t(e,t,n,r){var i=Ie(r);if(null!==(i=ti(i))){var a=Ye(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Xe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Or(e,t,r,i,n),null}var Zt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return tn=i.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function an(){return!0}function on(){return!1}function sn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?an:on,this.isPropagationStopped=on,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var un,cn,ln,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fn=sn(hn),dn=i({},hn,{view:0,detail:0}),pn=sn(dn),vn=i({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(un=e.screenX-ln.screenX,cn=e.screenY-ln.screenY):cn=un=0,ln=e),un)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),mn=sn(vn),gn=sn(i({},vn,{dataTransfer:0})),yn=sn(i({},dn,{relatedTarget:0})),kn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(bn),_n=sn(i({},hn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Cn(){return Sn}var Tn=i({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=sn(Tn),Rn=sn(i({},vn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=sn(i({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),An=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=i({},vn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=sn(Dn),Ln=[9,13,27,32],Mn=h&&"CompositionEvent"in window,Fn=null;h&&"documentMode"in document&&(Fn=document.documentMode);var jn=h&&"TextEvent"in window&&!Fn,Un=h&&(!Mn||Fn&&8<Fn&&11>=Fn),qn=String.fromCharCode(32),Vn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Kn(e,t,n,r){Re(r),0<(t=Mr(t,"onChange")).length&&(n=new fn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Yn=null;function Xn(e){Tr(e,0)}function Jn(e){if(J(ri(e)))return e}function $n(e,t){if("change"===e)return t}var Zn=!1;if(h){var er;if(h){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"===typeof nr.oninput}er=tr}else er=!1;Zn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Qn&&(Qn.detachEvent("onpropertychange",ir),Yn=Qn=null)}function ir(e){if("value"===e.propertyName&&Jn(Yn)){var t=[];if(Kn(t,Yn,e,Ie(e)),e=Xn,Me)e(t);else{Me=!0;try{Ae(e,t)}finally{Me=!1,je()}}}}function ar(e,t,n){"focusin"===e?(rr(),Yn=n,(Qn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&rr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Yn)}function sr(e,t){if("click"===e)return Jn(t)}function ur(e,t){if("input"===e||"change"===e)return Jn(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},lr=Object.prototype.hasOwnProperty;function hr(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!lr.call(t,n[r])||!cr(e[n[r]],t[n[r]]))return!1;return!0}function fr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=fr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=fr(r)}}function pr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function vr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=h&&"documentMode"in document&&11>=document.documentMode,yr=null,kr=null,br=null,wr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==yr||yr!==$(r)||("selectionStart"in(r=yr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Mr(kr,"onSelect")).length&&(t=new fn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}Ot("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ot("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ot(Dt,2);for(var xr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<xr.length;Er++)At.set(xr[Er],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,c){if(Qe.apply(this,arguments),Be){if(!Be)throw Error(o(198));var l=We;Be=!1,We=null,He||(He=!0,Ge=l)}}(r,t,void 0,e),e.currentTarget=null}function Tr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Cr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Cr(i,s,c),a=u}}}if(He)throw e=Ge,He=!1,Ge=null,e}function Nr(e,t){var n=ai(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Rr="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){e[Rr]||(e[Rr]=!0,s.forEach((function(t){Sr.has(t)||Ar(t,!1,e,null),Ar(t,!0,e,null)})))}function Ar(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=ai(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),Dr(a,e,i,t),o.add(s))}function Dr(e,t,n,r){var i=At.get(t);switch(void 0===i?2:i){case 0:i=Yt;break;case 1:i=Xt;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!qe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Or(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=ti(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{return Le(e,t,n)}finally{Fe=!1,je()}}((function(){var r=a,i=Ie(n),o=[];e:{var s=Pt.get(e);if(void 0!==s){var u=fn,c=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":u=Nn;break;case"focusin":c="focus",u=yn;break;case"focusout":c="blur",u=yn;break;case"beforeblur":case"afterblur":u=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Pn;break;case Ct:case Tt:case Nt:u=kn;break;case Rt:u=An;break;case"scroll":u=pn;break;case"wheel":u=On;break;case"copy":case"cut":case"paste":u=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Rn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Ue(p,f))&&l.push(Lr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ti(c)&&!c[Zr])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ti(c):null)&&(c!==(h=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=mn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Rn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:ri(u),d=null==c?s:ri(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,ti(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Fr(d))p++;for(d=0,v=f;v;v=Fr(v))d++;for(;0<p-d;)l=Fr(l),p--;for(;0<d-p;)f=Fr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Fr(l),f=Fr(f)}l=null}else l=null;null!==u&&jr(o,s,u,l,!1),null!==c&&null!==h&&jr(o,h,c,l,!0)}if("select"===(u=(s=r?ri(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=$n;else if(Gn(s))if(Zn)m=ur;else{m=or;var g=ar}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=sr);switch(m&&(m=m(e,r))?Kn(o,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ie(s,"number",s.value)),g=r?ri(r):window,e){case"focusin":(Gn(g)||"true"===g.contentEditable)&&(yr=g,kr=r,br=null);break;case"focusout":br=kr=yr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,_r(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":_r(o,n,i)}var y;if(Mn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Wn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Un&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Wn&&(y=nn()):(en="value"in(Zt=i)?Zt.value:Zt.textContent,Wn=!0)),0<(g=Mr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:g}),y?k.data=y:null!==(y=Bn(n))&&(k.data=y))),(y=jn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,qn);case"textInput":return(e=t.data)===qn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Mn&&zn(e,t)?(e=nn(),tn=en=Zt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Mr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Tr(o,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ue(e,n))&&r.unshift(Lr(e,a,i)),null!=(a=Ue(e,t))&&r.push(Lr(e,a,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Ue(n,a))&&o.unshift(Lr(n,u,s)):i||null!=(u=Ue(n,a))&&o.push(Lr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Ur(){}var qr=null,Vr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Br(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Wr="function"===typeof setTimeout?setTimeout:void 0,Hr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Kr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Qr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var Xr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Xr,$r="__reactProps$"+Xr,Zr="__reactContainer$"+Xr,ei="__reactEvents$"+Xr;function ti(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zr]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Qr(e);null!==e;){if(n=e[Jr])return n;e=Qr(e)}return t}n=(e=n).parentNode}return null}function ni(e){return!(e=e[Jr]||e[Zr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ri(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ii(e){return e[$r]||null}function ai(e){var t=e[ei];return void 0===t&&(t=e[ei]=new Set),t}var oi=[],si=-1;function ui(e){return{current:e}}function ci(e){0>si||(e.current=oi[si],oi[si]=null,si--)}function li(e,t){si++,oi[si]=e.current,e.current=t}var hi={},fi=ui(hi),di=ui(!1),pi=hi;function vi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){ci(di),ci(fi)}function yi(e,t,n){if(fi.current!==hi)throw Error(o(168));li(fi,t),li(di,n)}function ki(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,K(t)||"Unknown",a));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,pi=fi.current,li(fi,e),li(di,di.current),!0}function wi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=ki(e,t,pi),r.__reactInternalMemoizedMergedChildContext=e,ci(di),ci(fi),li(fi,e)):ci(di),li(di,n)}var _i=null,xi=null,Ei=a.unstable_runWithPriority,Ii=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ti=a.unstable_requestPaint,Ni=a.unstable_now,Ri=a.unstable_getCurrentPriorityLevel,Pi=a.unstable_ImmediatePriority,Ai=a.unstable_UserBlockingPriority,Di=a.unstable_NormalPriority,Oi=a.unstable_LowPriority,Li=a.unstable_IdlePriority,Mi={},Fi=void 0!==Ti?Ti:function(){},ji=null,Ui=null,qi=!1,Vi=Ni(),zi=1e4>Vi?Ni:function(){return Ni()-Vi};function Bi(){switch(Ri()){case Pi:return 99;case Ai:return 98;case Di:return 97;case Oi:return 96;case Li:return 95;default:throw Error(o(332))}}function Wi(e){switch(e){case 99:return Pi;case 98:return Ai;case 97:return Di;case 96:return Oi;case 95:return Li;default:throw Error(o(332))}}function Hi(e,t){return e=Wi(e),Ei(e,t)}function Gi(e,t,n){return e=Wi(e),Ii(e,t,n)}function Ki(){if(null!==Ui){var e=Ui;Ui=null,Si(e)}Qi()}function Qi(){if(!qi&&null!==ji){qi=!0;var e=0;try{var t=ji;Hi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(n){throw null!==ji&&(ji=ji.slice(e+1)),Ii(Pi,Ki),n}finally{qi=!1}}}var Yi=w.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=ui(null),$i=null,Zi=null,ea=null;function ta(){ea=Zi=$i=null}function na(e){var t=Ji.current;ci(Ji),e.type._context._currentValue=t}function ra(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ia(e,t){$i=e,ea=Zi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Mo=!0),e.firstContext=null)}function aa(e,t){if(ea!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ea=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Zi){if(null===$i)throw Error(o(308));Zi=t,$i.dependencies={lanes:0,firstContext:t,responders:null}}else Zi=Zi.next=t;return e._currentValue}var oa=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ua(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ca(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function la(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fa(e,t,n,r){var a=e.updateQueue;oa=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var h=e.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==s&&(null===f?h.firstBaseUpdate=l:f.next=l,h.lastBaseUpdate=c)}}if(null!==o){for(f=a.baseState,s=0,h=l=c=null;;){u=o.lane;var d=o.eventTime;if((r&u)===u){null!==h&&(h=h.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(u=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,u);break e}f=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,f,u):p)||void 0===u)break e;f=i({},f,u);break e;case 2:oa=!0}}null!==o.callback&&(e.flags|=32,null===(u=a.effects)?a.effects=[o]:u.push(o))}else d={eventTime:d,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(l=h=d,c=f):h=h.next=d,s|=u;if(null===(o=o.next)){if(null===(u=a.shared.pending))break;o=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}null===h&&(c=f),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=h,Vs|=s,e.lanes=s,e.memoizedState=f}}function da(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var pa=(new r.Component).refs;function va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=fu(),i=du(e),a=ca(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),la(e,a),pu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=fu(),i=du(e),a=ca(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),la(e,a),pu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=fu(),r=du(e),i=ca(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),la(e,i),pu(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ya(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=aa(a):(i=mi(t)?pi:fi.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?vi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=pa,sa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=aa(a):(a=mi(t)?pi:fi.current,i.context=vi(e,a)),fa(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var wa=Array.isArray;function _a(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===pa&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function xa(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ea(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Gu(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Xu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=_a(e,t,n),r.return=e,r):((r=Ku(n.type,n.key,n.props,null,e.mode,r)).ref=_a(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ju(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Qu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Xu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Ku(t.type,t.key,t.props,null,e.mode,n)).ref=_a(e,null,t),n.return=e,n;case x:return(t=Ju(t,e.mode,n)).return=e,t}if(wa(t)||z(t))return(t=Qu(t,e.mode,n,null)).return=e,t;xa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?n.type===E?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null}if(wa(n)||z(n))return null!==i?null:h(e,t,n,r,null);xa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return e=e.get(null===r.key?n:r.key)||null,r.type===E?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(wa(r)||z(r))return h(t,e=e.get(n)||null,r,i,null);xa(t,r)}return null}function v(i,o,s,u){for(var c=null,l=null,h=o,v=o=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var g=d(i,h,s[v],u);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(i,h),o=a(g,o,v),null===l?c=g:l.sibling=g,l=g,h=m}if(v===s.length)return n(i,h),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(o=a(h,o,v),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);v<s.length;v++)null!==(m=p(h,i,v,s[v],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&h.forEach((function(e){return t(i,e)})),c}function m(i,s,u,c){var l=z(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var h=l=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var k=d(i,v,y.value,c);if(null===k){null===v&&(v=g);break}e&&v&&null===k.alternate&&t(i,v),s=a(k,s,m),null===h?l=k:h.sibling=k,h=k,v=g}if(y.done)return n(i,v),l;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=f(i,y.value,c))&&(s=a(y,s,m),null===h?l=y:h.sibling=y,h=y);return l}for(v=r(i,v);!y.done;m++,y=u.next())null!==(y=p(v,i,m,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=a(y,s,m),null===h?l=y:h.sibling=y,h=y);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,u){var c="object"===typeof a&&null!==a&&a.type===E&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case _:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===E){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=_a(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===E?((r=Qu(a.props.children,e.mode,u,a.key)).return=e,e=r):((u=Ku(a.type,a.key,a.props,null,e.mode,u)).ref=_a(e,r,a),u.return=e,e=u)}return s(e);case x:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ju(a,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Xu(a,e.mode,u)).return=e,e=r),s(e);if(wa(a))return v(e,r,a,u);if(z(a))return m(e,r,a,u);if(l&&xa(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,K(e.type)||"Component"))}return n(e,r)}}var Ia=Ea(!0),Sa=Ea(!1),Ca={},Ta=ui(Ca),Na=ui(Ca),Ra=ui(Ca);function Pa(e){if(e===Ca)throw Error(o(174));return e}function Aa(e,t){switch(li(Ra,t),li(Na,e),li(Ta,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:de(null,"");break;default:t=de(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ci(Ta),li(Ta,t)}function Da(){ci(Ta),ci(Na),ci(Ra)}function Oa(e){Pa(Ra.current);var t=Pa(Ta.current),n=de(t,e.type);t!==n&&(li(Na,e),li(Ta,n))}function La(e){Na.current===e&&(ci(Ta),ci(Na))}var Ma=ui(0);function Fa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ja=null,Ua=null,qa=!1;function Va(e,t){var n=Wu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ba(e){if(qa){var t=Ua;if(t){var n=t;if(!za(e,t)){if(!(t=Kr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,qa=!1,void(ja=e);Va(ja,n)}ja=e,Ua=Kr(t.firstChild)}else e.flags=-1025&e.flags|2,qa=!1,ja=e}}function Wa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ja=e}function Ha(e){if(e!==ja)return!1;if(!qa)return Wa(e),qa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Br(t,e.memoizedProps))for(t=Ua;t;)Va(e,t),t=Kr(t.nextSibling);if(Wa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ua=Kr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ua=null}}else Ua=ja?Kr(e.stateNode.nextSibling):null;return!0}function Ga(){Ua=ja=null,qa=!1}var Ka=[];function Qa(){for(var e=0;e<Ka.length;e++)Ka[e]._workInProgressVersionPrimary=null;Ka.length=0}var Ya=w.ReactCurrentDispatcher,Xa=w.ReactCurrentBatchConfig,Ja=0,$a=null,Za=null,eo=null,to=!1,no=!1;function ro(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function ao(e,t,n,r,i,a){if(Ja=a,$a=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ya.current=null===e||null===e.memoizedState?Ao:Do,e=n(r,i),no){a=0;do{if(no=!1,!(25>a))throw Error(o(301));a+=1,eo=Za=null,t.updateQueue=null,Ya.current=Oo,e=n(r,i)}while(no)}if(Ya.current=Po,t=null!==Za&&null!==Za.next,Ja=0,eo=Za=$a=null,to=!1,t)throw Error(o(300));return e}function oo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===eo?$a.memoizedState=eo=e:eo=eo.next=e,eo}function so(){if(null===Za){var e=$a.alternate;e=null!==e?e.memoizedState:null}else e=Za.next;var t=null===eo?$a.memoizedState:eo.next;if(null!==t)eo=t,Za=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Za=e).memoizedState,baseState:Za.baseState,baseQueue:Za.baseQueue,queue:Za.queue,next:null},null===eo?$a.memoizedState=eo=e:eo=eo.next=e}return eo}function uo(e,t){return"function"===typeof t?t(e):t}function co(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Za,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=a=null,c=i;do{var l=c.lane;if((Ja&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var h={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=h,a=r):u=u.next=h,$a.lanes|=l,Vs|=l}c=c.next}while(null!==c&&c!==i);null===u?a=r:u.next=s,cr(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function lo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);cr(a,t.memoizedState)||(Mo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Ja&e)===e)&&(t._workInProgressVersionPrimary=r,Ka.push(t))),e)return n(t._source);throw Ka.push(t),Error(o(350))}function fo(e,t,n,r){var i=Ds;if(null===i)throw Error(o(349));var a=t._getVersion,s=a(t._source),u=Ya.current,c=u.useState((function(){return ho(i,t,n)})),l=c[1],h=c[0];c=eo;var f=e.memoizedState,d=f.refs,p=d.getSnapshot,v=f.source;f=f.subscribe;var m=$a;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!cr(s,e)){e=n(t._source),cr(h,e)||(l(e),e=du(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var u=31-Bt(o),c=1<<u;r[u]|=e,o&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=du(m);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),cr(p,n)&&cr(v,t)&&cr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:uo,lastRenderedState:h}).dispatch=l=Ro.bind(null,$a,e),c.queue=e,c.baseQueue=null,h=ho(i,t,n),c.memoizedState=c.baseState=h),h}function po(e,t,n){return fo(so(),e,t,n)}function vo(e){var t=oo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:uo,lastRenderedState:e}).dispatch=Ro.bind(null,$a,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=$a.updateQueue)?(t={lastEffect:null},$a.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},oo().memoizedState=e}function yo(){return so().memoizedState}function ko(e,t,n,r){var i=oo();$a.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=void 0;if(null!==Za){var o=Za.memoizedState;if(a=o.destroy,null!==r&&io(r,o.deps))return void mo(t,n,a,r)}$a.flags|=e,i.memoizedState=mo(1|t,n,a,r)}function wo(e,t){return ko(516,4,e,t)}function _o(e,t){return bo(516,4,e,t)}function xo(e,t){return bo(4,2,e,t)}function Eo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Io(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Eo.bind(null,t,e),n)}function So(){}function Co(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function To(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function No(e,t){var n=Bi();Hi(98>n?98:n,(function(){e(!0)})),Hi(97<n?97:n,(function(){var n=Xa.transition;Xa.transition=1;try{e(!1),t()}finally{Xa.transition=n}}))}function Ro(e,t,n){var r=fu(),i=du(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===$a||null!==o&&o===$a)no=to=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(a.eagerReducer=o,a.eagerState=u,cr(u,s))return}catch(c){}pu(e,i,r)}}var Po={readContext:aa,useCallback:ro,useContext:ro,useEffect:ro,useImperativeHandle:ro,useLayoutEffect:ro,useMemo:ro,useReducer:ro,useRef:ro,useState:ro,useDebugValue:ro,useDeferredValue:ro,useTransition:ro,useMutableSource:ro,useOpaqueIdentifier:ro,unstable_isNewReconciler:!1},Ao={readContext:aa,useCallback:function(e,t){return oo().memoizedState=[e,void 0===t?null:t],e},useContext:aa,useEffect:wo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ko(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ko(4,2,e,t)},useMemo:function(e,t){var n=oo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=oo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ro.bind(null,$a,e),[r.memoizedState,e]},useRef:go,useState:vo,useDebugValue:So,useDeferredValue:function(e){var t=vo(e),n=t[0],r=t[1];return wo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=vo(!1),t=e[0];return go(e=No.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=oo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},fo(r,e,t,n)},useOpaqueIdentifier:function(){if(qa){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(o(355))})),n=vo(t)[1];return 0===(2&$a.mode)&&($a.flags|=516,mo(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return vo(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Do={readContext:aa,useCallback:Co,useContext:aa,useEffect:_o,useImperativeHandle:Io,useLayoutEffect:xo,useMemo:To,useReducer:co,useRef:yo,useState:function(){return co(uo)},useDebugValue:So,useDeferredValue:function(e){var t=co(uo),n=t[0],r=t[1];return _o((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=co(uo)[0];return[yo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return co(uo)[0]},unstable_isNewReconciler:!1},Oo={readContext:aa,useCallback:Co,useContext:aa,useEffect:_o,useImperativeHandle:Io,useLayoutEffect:xo,useMemo:To,useReducer:lo,useRef:yo,useState:function(){return lo(uo)},useDebugValue:So,useDeferredValue:function(e){var t=lo(uo),n=t[0],r=t[1];return _o((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=lo(uo)[0];return[yo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return lo(uo)[0]},unstable_isNewReconciler:!1},Lo=w.ReactCurrentOwner,Mo=!1;function Fo(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ia(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var a=t.ref;return ia(t,i),r=ao(e,t,n,r,a,i),null===e||Mo?(t.flags|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Uo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Hu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ku(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,qo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?as(e,t,a):(t.flags|=1,(e=Gu(o,r)).ref=t.ref,e.return=t,t.child=e)}function qo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Mo=!1,0===(a&i))return t.lanes=e.lanes,as(e,t,a);0!==(16384&e.flags)&&(Mo=!0)}return Bo(e,t,n,r,a)}function Vo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},_u(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},_u(t,e),null;t.memoizedState={baseLanes:0},_u(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,_u(t,r);return Fo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Bo(e,t,n,r,i){var a=mi(n)?pi:fi.current;return a=vi(t,a),ia(t,i),n=ao(e,t,n,r,a,i),null===e||Mo?(t.flags|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Wo(e,t,n,r,i){if(mi(n)){var a=!0;bi(t)}else a=!1;if(ia(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ya(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=aa(c):c=vi(t,c=mi(n)?pi:fi.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&ka(t,o,r,c),oa=!1;var f=t.memoizedState;o.state=f,fa(t,r,o,i),u=t.memoizedState,s!==r||f!==u||di.current||oa?("function"===typeof l&&(va(t,n,l,r),u=t.memoizedState),(s=oa||ga(t,n,s,r,f,u,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ua(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Xi(t.type,s),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=aa(u):u=vi(t,u=mi(n)?pi:fi.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&ka(t,o,r,u),oa=!1,f=t.memoizedState,o.state=f,fa(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||di.current||oa?("function"===typeof d&&(va(t,n,d,r),p=t.memoizedState),(c=oa||ga(t,n,c,r,f,p,u))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return Ho(e,t,n,r,a,i)}function Ho(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&wi(t,n,!1),as(e,t,a);r=t.stateNode,Lo.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ia(t,e.child,null,a),t.child=Ia(t,null,s,a)):Fo(e,t,s,a),t.memoizedState=r.state,i&&wi(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?yi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&yi(0,t.context,!1),Aa(e,t.containerInfo)}var Ko,Qo,Yo,Xo,Jo={dehydrated:null,retryLane:0};function $o(e,t,n){var r,i=t.pendingProps,a=Ma.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),li(Ma,1&a),null===e?(void 0!==i.fallback&&Ba(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,t.lanes=33554432,e):((n=Yu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=ts(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Jo,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Yu(t,i,0,null),n=Qu(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=Gu(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Gu(o,s),null!==e?r=Gu(e,r):(r=Qu(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ra(e.return,t)}function rs(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=Ma.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(li(Ma,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fa(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fa(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,a,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function as(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Gu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Gu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!qa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&gi(),null;case 3:return Da(),ci(di),ci(fi),Qa(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ha(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Qo(t),null;case 5:La(t);var a=Pa(Ra.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Pa(Ta.current),Ha(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Jr]=t,r[$r]=s,n){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(e=0;e<Ir.length;e++)Nr(Ir[e],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":ee(r,s),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Nr("invalid",r);break;case"textarea":ue(r,s),Nr("invalid",r)}for(var c in xe(n,s),e=null,s)s.hasOwnProperty(c)&&(a=s[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):u.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Nr("scroll",r));switch(n){case"input":X(r),re(r,s,!0);break;case"textarea":X(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Ur)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===he.html&&(e=fe(n)),e===he.html?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Jr]=t,e[$r]=r,Ko(e,t,!1,!1),t.stateNode=e,c=Ee(n,r),n){case"dialog":Nr("cancel",e),Nr("close",e),a=r;break;case"iframe":case"object":case"embed":Nr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Ir.length;a++)Nr(Ir[a],e);a=r;break;case"source":Nr("error",e),a=r;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),a=r;break;case"details":Nr("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Nr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Nr("invalid",e);break;case"textarea":ue(e,r),a=se(e,r),Nr("invalid",e);break;default:a=r}xe(n,a);var l=a;for(s in l)if(l.hasOwnProperty(s)){var h=l[s];"style"===s?we(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&me(e,h):"children"===s?"string"===typeof h?("textarea"!==n||""!==h)&&ge(e,h):"number"===typeof h&&ge(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Nr("scroll",e):null!=h&&b(e,s,h,c))}switch(n){case"input":X(e),re(e,r,!1);break;case"textarea":X(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Ur)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Xo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Pa(Ra.current),Pa(Ta.current),Ha(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return ci(Ma),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ha(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ma.current)?0===js&&(js=3):(0!==js&&3!==js||(js=4),null===Ds||0===(134217727&Vs)&&0===(134217727&zs)||yu(Ds,Ls))),(r||n)&&(t.flags|=4),null);case 4:return Da(),Qo(t),null===e&&Pr(t.stateNode.containerInfo),null;case 10:return na(t),null;case 19:if(ci(Ma),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)os(r,!1);else{if(0!==js||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Fa(e))){for(t.flags|=64,os(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return li(Ma,1&Ma.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Gs&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Fa(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!qa)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Gs&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Ma.current,li(Ma,s?1&t|2:1&t),n):null;case 23:case 24:return xu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function us(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Da(),ci(di),ci(fi),Qa(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return La(e),null;case 13:return ci(Ma),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ci(Ma),null;case 4:return Da(),null;case 10:return na(e),null;case 23:case 24:return xu(),null;default:return null}}function cs(e,t){try{var n="",r=t;do{n+=G(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Ko=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Qo=function(){},Yo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Pa(Ta.current);var o,s=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),s=[];break;case"option":a=ae(e,a),r=ae(e,r),s=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":a=se(e,a),r=se(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Ur)}for(h in xe(n,r),n=null,a)if(!r.hasOwnProperty(h)&&a.hasOwnProperty(h)&&null!=a[h])if("style"===h){var c=a[h];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(u.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var l=r[h];if(c=null!=a?a[h]:void 0,r.hasOwnProperty(h)&&l!==c&&(null!=l||null!=c))if("style"===h)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(h,n)),n=l;else"dangerouslySetInnerHTML"===h?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(h,l)):"children"===h?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(h,""+l):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(u.hasOwnProperty(h)?(null!=l&&"onScroll"===h&&Nr("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(s=s||[]).push(h,l))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},Xo=function(e,t,n,r){n!==r&&(t.flags|=4)};var hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=ca(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xs||(Xs=!0,Js=r),ls(0,t)},n}function ds(e,t,n){(n=ca(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ls(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===$s?$s=new Set([this]):$s.add(this),ls(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){qu(e,n)}else t.current=null}function ms(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function gs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fu(n,e),Mu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&da(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}da(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))))}throw Error(o(163))}function ys(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ks(e,t){if(xi&&"function"===typeof xi.onCommitFiberUnmount)try{xi.onCommitFiberUnmount(_i,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fu(t,n);else{r=t;try{i()}catch(a){qu(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){qu(t,a)}break;case 5:vs(t);break;case 4:Is(e,t)}}function bs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ws(e){return 5===e.tag||3===e.tag||4===e.tag}function _s(e){e:{for(var t=e.return;null!==t;){if(ws(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ws(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?xs(e,n,t):Es(e,n,t)}function xs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ur));else if(4!==r&&null!==(e=e.child))for(xs(e,t,n),e=e.sibling;null!==e;)xs(e,t,n),e=e.sibling}function Es(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Es(e,t,n),e=e.sibling;null!==e;)Es(e,t,n),e=e.sibling}function Is(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,c=u;;)if(ks(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ks(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Ss(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[$r]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?we(n,u):"dangerouslySetInnerHTML"===s?me(n,u):"children"===s?ge(n,u):b(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Hs=zi(),ys(t.child,!0)),void Cs(t);case 19:return void Cs(t);case 23:case 24:return void ys(t,null!==t.memoizedState)}throw Error(o(163))}function Cs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=zu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ts(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ns=Math.ceil,Rs=w.ReactCurrentDispatcher,Ps=w.ReactCurrentOwner,As=0,Ds=null,Os=null,Ls=0,Ms=0,Fs=ui(0),js=0,Us=null,qs=0,Vs=0,zs=0,Bs=0,Ws=null,Hs=0,Gs=1/0;function Ks(){Gs=zi()+500}var Qs,Ys=null,Xs=!1,Js=null,$s=null,Zs=!1,eu=null,tu=90,nu=[],ru=[],iu=null,au=0,ou=null,su=-1,uu=0,cu=0,lu=null,hu=!1;function fu(){return 0!==(48&As)?zi():-1!==su?su:su=zi()}function du(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Bi()?1:2;if(0===uu&&(uu=qs),0!==Yi.transition){0!==cu&&(cu=null!==Ws?Ws.pendingLanes:0),e=uu;var t=4186112&~cu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Bi(),0!==(4&As)&&98===e?e=Ut(12,uu):e=Ut(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,n){if(50<au)throw au=0,ou=null,Error(o(185));if(null===(e=vu(e,t)))return null;zt(e,t,n),e===Ds&&(zs|=t,4===js&&yu(e,Ls));var r=Bi();1===t?0!==(8&As)&&0===(48&As)?ku(e):(mu(e,n),0===As&&(Ks(),Ki())):(0===(4&As)||98!==r&&99!==r||(null===iu?iu=new Set([e]):iu.add(e)),mu(e,n)),Ws=e}function vu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function mu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Bt(s),c=1<<u,l=a[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Mt(c);var h=Lt;a[u]=10<=h?l+250:6<=h?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=Ft(e,e===Ds?Ls:0),t=Lt,0===r)null!==n&&(n!==Mi&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mi&&Si(n)}15===t?(n=ku.bind(null,e),null===ji?(ji=[n],Ui=Ii(Pi,Qi)):ji.push(n),n=Mi):14===t?n=Gi(99,ku.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,gu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function gu(e){if(su=-1,cu=uu=0,0!==(48&As))throw Error(o(327));var t=e.callbackNode;if(Lu()&&e.callbackNode!==t)return null;var n=Ft(e,e===Ds?Ls:0);if(0===n)return null;var r=n,i=As;As|=16;var a=Su();for(Ds===e&&Ls===r||(Ks(),Eu(e,r));;)try{Nu();break}catch(u){Iu(e,u)}if(ta(),Rs.current=a,As=i,null!==Os?r=0:(Ds=null,Ls=0,r=js),0!==(qs&zs))Eu(e,0);else if(0!==r){if(2===r&&(As|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=jt(e))&&(r=Cu(e,n))),1===r)throw t=Us,Eu(e,0),yu(e,n),mu(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Au(e);break;case 3:if(yu(e,n),(62914560&n)===n&&10<(r=Hs+500-zi())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){fu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Wr(Au.bind(null,e),r);break}Au(e);break;case 4:if(yu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Bt(n);a=1<<s,(s=r[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ns(n/1960))-n)){e.timeoutHandle=Wr(Au.bind(null,e),n);break}Au(e);break;default:throw Error(o(329))}}return mu(e,zi()),e.callbackNode===t?gu.bind(null,e):null}function yu(e,t){for(t&=~Bs,t&=~zs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Bt(t),r=1<<n;e[n]=-1,t&=~r}}function ku(e){if(0!==(48&As))throw Error(o(327));if(Lu(),e===Ds&&0!==(e.expiredLanes&Ls)){var t=Ls,n=Cu(e,t);0!==(qs&zs)&&(n=Cu(e,t=Ft(e,t)))}else n=Cu(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(As|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=jt(e))&&(n=Cu(e,t))),1===n)throw n=Us,Eu(e,0),yu(e,t),mu(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Au(e),mu(e,zi()),null}function bu(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(Ks(),Ki())}}function wu(e,t){var n=As;As&=-2,As|=8;try{return e(t)}finally{0===(As=n)&&(Ks(),Ki())}}function _u(e,t){li(Fs,Ms),Ms|=t,qs|=t}function xu(){Ms=Fs.current,ci(Fs)}function Eu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Hr(n)),null!==Os)for(n=Os.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Da(),ci(di),ci(fi),Qa();break;case 5:La(r);break;case 4:Da();break;case 13:case 19:ci(Ma);break;case 10:na(r);break;case 23:case 24:xu()}n=n.return}Ds=e,Os=Gu(e.current,null),Ls=Ms=qs=t,js=0,Us=null,Bs=zs=Vs=0}function Iu(e,t){for(;;){var n=Os;try{if(ta(),Ya.current=Po,to){for(var r=$a.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}to=!1}if(Ja=0,eo=Za=$a=null,no=!1,Ps.current=null,null===n||null===n.return){js=1,Us=t,Os=null;break}e:{var a=e,o=n.return,s=n,u=t;if(t=Ls,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&Ma.current),f=o;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=f.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!h)}}if(d){var m=f.updateQueue;if(null===m){var g=new Set;g.add(c),f.updateQueue=g}else m.add(c);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=ca(-1,1);y.tag=2,la(s,y)}s.lanes|=1;break e}u=void 0,s=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new hs,u=new Set,k.set(c,u)):void 0===(u=k.get(c))&&(u=new Set,k.set(c,u)),!u.has(s)){u.add(s);var b=Vu.bind(null,a,c,s);c.then(b,b)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((K(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==js&&(js=2),u=cs(u,s),f=o;do{switch(f.tag){case 3:a=u,f.flags|=4096,t&=-t,f.lanes|=t,ha(f,fs(0,a,t));break e;case 1:a=u;var w=f.type,_=f.stateNode;if(0===(64&f.flags)&&("function"===typeof w.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===$s||!$s.has(_)))){f.flags|=4096,t&=-t,f.lanes|=t,ha(f,ds(f,a,t));break e}}f=f.return}while(null!==f)}Pu(n)}catch(x){t=x,Os===n&&null!==n&&(Os=n=n.return);continue}break}}function Su(){var e=Rs.current;return Rs.current=Po,null===e?Po:e}function Cu(e,t){var n=As;As|=16;var r=Su();for(Ds===e&&Ls===t||Eu(e,t);;)try{Tu();break}catch(i){Iu(e,i)}if(ta(),As=n,Rs.current=r,null!==Os)throw Error(o(261));return Ds=null,Ls=0,js}function Tu(){for(;null!==Os;)Ru(Os)}function Nu(){for(;null!==Os&&!Ci();)Ru(Os)}function Ru(e){var t=Qs(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,null===t?Pu(e):Os=t,Ps.current=null}function Pu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Ms)))return void(Os=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ms)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Os=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Os=t);Os=t=e}while(null!==t);0===js&&(js=5)}function Au(e){var t=Bi();return Hi(99,Du.bind(null,e,t)),null}function Du(e,t){do{Lu()}while(null!==eu);if(0!==(48&As))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<a;){var c=31-Bt(a),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,a&=~l}if(null!==iu&&0===(24&r)&&iu.has(e)&&iu.delete(e),e===Ds&&(Os=Ds=null,Ls=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=As,As|=32,Ps.current=null,qr=Qt,mr(s=vr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(S){u=null;break e}var h=0,f=-1,d=-1,p=0,v=0,m=s,g=null;t:for(;;){for(var y;m!==u||0!==a&&3!==m.nodeType||(f=h+a),m!==c||0!==l&&3!==m.nodeType||(d=h+l),3===m.nodeType&&(h+=m.nodeValue.length),null!==(y=m.firstChild);)g=m,m=y;for(;;){if(m===s)break t;if(g===u&&++p===a&&(f=h),g===c&&++v===l&&(d=h),null!==(y=m.nextSibling))break;g=(m=g).parentNode}m=y}u=-1===f||-1===d?null:{start:f,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;Vr={focusedElem:s,selectionRange:u},Qt=!1,lu=null,hu=!1,Ys=r;do{try{Ou()}catch(S){if(null===Ys)throw Error(o(330));qu(Ys,S),Ys=Ys.nextEffect}}while(null!==Ys);lu=null,Ys=r;do{try{for(s=e;null!==Ys;){var k=Ys.flags;if(16&k&&ge(Ys.stateNode,""),128&k){var b=Ys.alternate;if(null!==b){var w=b.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&k){case 2:_s(Ys),Ys.flags&=-3;break;case 6:_s(Ys),Ys.flags&=-3,Ss(Ys.alternate,Ys);break;case 1024:Ys.flags&=-1025;break;case 1028:Ys.flags&=-1025,Ss(Ys.alternate,Ys);break;case 4:Ss(Ys.alternate,Ys);break;case 8:Is(s,u=Ys);var _=u.alternate;bs(u),null!==_&&bs(_)}Ys=Ys.nextEffect}}catch(S){if(null===Ys)throw Error(o(330));qu(Ys,S),Ys=Ys.nextEffect}}while(null!==Ys);if(w=Vr,b=vr(),k=w.focusedElem,s=w.selectionRange,b!==k&&k&&k.ownerDocument&&pr(k.ownerDocument.documentElement,k)){null!==s&&mr(k)&&(b=s.start,void 0===(w=s.end)&&(w=b),"selectionStart"in k?(k.selectionStart=b,k.selectionEnd=Math.min(w,k.value.length)):(w=(b=k.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),u=k.textContent.length,_=Math.min(s.start,u),s=void 0===s.end?_:Math.min(s.end,u),!w.extend&&_>s&&(u=s,s=_,_=u),u=dr(k,_),a=dr(k,s),u&&a&&(1!==w.rangeCount||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((b=b.createRange()).setStart(u.node,u.offset),w.removeAllRanges(),_>s?(w.addRange(b),w.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),w.addRange(b))))),b=[];for(w=k;w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<b.length;k++)(w=b[k]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Qt=!!qr,Vr=qr=null,e.current=n,Ys=r;do{try{for(k=e;null!==Ys;){var x=Ys.flags;if(36&x&&gs(k,Ys.alternate,Ys),128&x){b=void 0;var E=Ys.ref;if(null!==E){var I=Ys.stateNode;Ys.tag,b=I,"function"===typeof E?E(b):E.current=b}}Ys=Ys.nextEffect}}catch(S){if(null===Ys)throw Error(o(330));qu(Ys,S),Ys=Ys.nextEffect}}while(null!==Ys);Ys=null,Fi(),As=i}else e.current=n;if(Zs)Zs=!1,eu=e,tu=t;else for(Ys=r;null!==Ys;)t=Ys.nextEffect,Ys.nextEffect=null,8&Ys.flags&&((x=Ys).sibling=null,x.stateNode=null),Ys=t;if(0===(r=e.pendingLanes)&&($s=null),1===r?e===ou?au++:(au=0,ou=e):au=0,n=n.stateNode,xi&&"function"===typeof xi.onCommitFiberRoot)try{xi.onCommitFiberRoot(_i,n,void 0,64===(64&n.current.flags))}catch(S){}if(mu(e,zi()),Xs)throw Xs=!1,e=Js,Js=null,e;return 0!==(8&As)||Ki(),null}function Ou(){for(;null!==Ys;){var e=Ys.alternate;hu||null===lu||(0!==(8&Ys.flags)?Ze(Ys,lu)&&(hu=!0):13===Ys.tag&&Ts(e,Ys)&&Ze(Ys,lu)&&(hu=!0));var t=Ys.flags;0!==(256&t)&&ms(e,Ys),0===(512&t)||Zs||(Zs=!0,Gi(97,(function(){return Lu(),null}))),Ys=Ys.nextEffect}}function Lu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Hi(e,ju)}return!1}function Mu(e,t){nu.push(t,e),Zs||(Zs=!0,Gi(97,(function(){return Lu(),null})))}function Fu(e,t){ru.push(t,e),Zs||(Zs=!0,Gi(97,(function(){return Lu(),null})))}function ju(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&As))throw Error(o(331));var t=As;As|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===a)throw Error(o(330));qu(a,c)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===a)throw Error(o(330));qu(a,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return As=t,Ki(),!0}function Uu(e,t,n){la(e,t=fs(0,t=cs(n,t),1)),t=fu(),null!==(e=vu(e,1))&&(zt(e,1,t),mu(e,t))}function qu(e,t){if(3===e.tag)Uu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Uu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===$s||!$s.has(r))){var i=ds(n,e=cs(t,e),1);if(la(n,i),i=fu(),null!==(n=vu(n,1)))zt(n,1,i),mu(n,i);else if("function"===typeof r.componentDidCatch&&(null===$s||!$s.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Vu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=fu(),e.pingedLanes|=e.suspendedLanes&n,Ds===e&&(Ls&n)===n&&(4===js||3===js&&(62914560&Ls)===Ls&&500>zi()-Hs?Eu(e,0):Bs|=n),mu(e,t)}function zu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Bi()?1:2:(0===uu&&(uu=qs),0===(t=qt(62914560&~uu))&&(t=4194304))),n=fu(),null!==(e=vu(e,t))&&(zt(e,t,n),mu(e,n))}function Bu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Wu(e,t,n,r){return new Bu(e,t,n,r)}function Hu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gu(e,t){var n=e.alternate;return null===n?((n=Wu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ku(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Hu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Qu(n.children,i,a,t);case M:s=8,i|=16;break;case I:s=8,i|=1;break;case S:return(e=Wu(12,n,t,8|i)).elementType=S,e.type=S,e.lanes=a,e;case R:return(e=Wu(13,n,t,i)).type=R,e.elementType=R,e.lanes=a,e;case P:return(e=Wu(19,n,t,i)).elementType=P,e.lanes=a,e;case F:return Yu(n,i,a,t);case j:return(e=Wu(24,n,t,i)).elementType=j,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case T:s=9;break e;case N:s=11;break e;case A:s=14;break e;case D:s=16,r=null;break e;case O:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Wu(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qu(e,t,n,r){return(e=Wu(7,e,r,t)).lanes=n,e}function Yu(e,t,n,r){return(e=Wu(23,e,r,t)).elementType=F,e.lanes=n,e}function Xu(e,t,n){return(e=Wu(6,e,null,t)).lanes=n,e}function Ju(e,t,n){return(t=Wu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $u(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Vt(0),this.expirationTimes=Vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vt(0),this.mutableSourceEagerHydrationData=null}function Zu(e,t,n,r){var i=t.current,a=fu(),s=du(i);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(mi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=ki(n,c,u);break e}}n=u}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=ca(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),la(i,t),pu(i,s,a),s}function ec(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function nc(e,t){tc(e,t),(e=e.alternate)&&tc(e,t)}function rc(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new $u(e,t,null!=n&&!0===n.hydrate),t=Wu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,sa(t),e[Zr]=n.current,Pr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ic(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ac(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=ec(o);s.call(e)}}Zu(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new rc(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var u=i;i=function(){var e=ec(o);u.call(e)}}wu((function(){Zu(t,o,e,i)}))}return ec(o)}function oc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ic(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Qs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||di.current)Mo=!0;else{if(0===(n&r)){switch(Mo=!1,t.tag){case 3:Go(t),Ga();break;case 5:Oa(t);break;case 1:mi(t.type)&&bi(t);break;case 4:Aa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;li(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?$o(e,t,n):(li(Ma,1&Ma.current),null!==(t=as(e,t,n))?t.sibling:null);li(Ma,1&Ma.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),li(Ma,Ma.current),r)break;return null;case 23:case 24:return t.lanes=0,Vo(e,t,n)}return as(e,t,n)}Mo=0!==(16384&e.flags)}else Mo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=vi(t,fi.current),ia(t,n),i=ao(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&va(t,r,s,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,ba(t,r,e,n),t=Ho(null,t,r,!0,a,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Hu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===A)return 14}return 2}(i),e=Xi(i,e),a){case 0:t=Bo(null,t,i,e,n);break e;case 1:t=Wo(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Uo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Bo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Wo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ua(e,t),fa(t,r,null,n),(r=t.memoizedState.element)===i)Ga(),t=as(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Ua=Kr(t.stateNode.containerInfo.firstChild),ja=t,a=qa=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Ka.push(a);for(n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fo(e,t,r,n),Ga();t=t.child}return t;case 5:return Oa(t),null===e&&Ba(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Br(r,i)?s=null:null!==a&&Br(r,a)&&(t.flags|=16),zo(e,t),Fo(e,t,s,n),t.child;case 6:return null===e&&Ba(t),null;case 13:return $o(e,t,n);case 4:return Aa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ia(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var u=t.type._context;if(li(Ji,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=cr(u,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!di.current){t=as(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===u.tag&&((l=ca(-1,n&-n)).tag=2,la(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),ra(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,ia(t,n),r=r(i=aa(i,a.unstable_observedBits)),t.flags|=1,Fo(e,t,r,n),t.child;case 14:return a=Xi(i=t.type,t.pendingProps),Uo(e,t,i,a=Xi(i.type,a),r,n);case 15:return qo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,bi(t)):e=!1,ia(t,n),ya(t,r,i),ba(t,r,i,n),Ho(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return Vo(e,t,n)}throw Error(o(156,t.tag))},rc.prototype.render=function(e){Zu(e,this._internalRoot,null,null)},rc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zu(null,e,null,(function(){t[Zr]=null}))},et=function(e){13===e.tag&&(pu(e,4,fu()),nc(e,4))},tt=function(e){13===e.tag&&(pu(e,67108864,fu()),nc(e,67108864))},nt=function(e){if(13===e.tag){var t=fu(),n=du(e);pu(e,n,t),nc(e,n)}},rt=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ii(r);if(!i)throw Error(o(90));J(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Ae=bu,De=function(e,t,n,r,i){var a=As;As|=4;try{return Hi(98,e.bind(null,t,n,r,i))}finally{0===(As=a)&&(Ks(),Ki())}},Oe=function(){0===(49&As)&&(function(){if(null!==iu){var e=iu;iu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,mu(e,zi())}))}Ki()}(),Lu())},Le=function(e,t){var n=As;As|=2;try{return e(t)}finally{0===(As=n)&&(Ks(),Ki())}};var sc={Events:[ni,ri,ii,Re,Pe,Lu,{current:!1}]},uc={findFiberByHostInstance:ti,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cc={bundleType:uc.bundleType,version:uc.version,rendererPackageName:uc.rendererPackageName,rendererConfig:uc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:uc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{_i=lc.inject(cc),xi=lc}catch(ve){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=oc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e,t){var n=As;if(0!==(48&n))return e(t);As|=1;try{if(e)return Hi(99,e.bind(null,t))}finally{As=n,Ki()}},t.hydrate=function(e,t,n){if(!ic(t))throw Error(o(200));return ac(null,e,t,!0,n)},t.render=function(e,t,n){if(!ic(t))throw Error(o(200));return ac(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ic(e))throw Error(o(40));return!!e._reactRootContainer&&(wu((function(){ac(null,null,e,!1,(function(){e._reactRootContainer=null,e[Zr]=null}))})),!0)},t.unstable_batchedUpdates=bu,t.unstable_createPortal=function(e,t){return oc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ic(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ac(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),a=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),s=h("react.context"),u=h("react.forward_ref"),t.Suspense=h("react.suspense"),c=h("react.memo"),l=h("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var k=y.prototype=new g;k.constructor=y,r(k,m.prototype),k.isPureReactComponent=!0;var b={current:null},w=Object.prototype.hasOwnProperty,_={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!_.hasOwnProperty(r)&&(a[r]=t[r]);var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===a[r]&&(a[r]=u[r]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:b.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var I=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case a:u=!0}}if(u)return o=o(u=e),e=""===r?"."+S(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(I,"$&/")+"/"),C(o,t,n,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+S(s=e[c],c);u+=C(s,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=C(s=s.value,t,n,l=r+S(s,c++),o);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function T(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var R={current:null};function P(){var e=R.current;if(null===e)throw Error(d(321));return e}var A={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!_.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return P().useCallback(e,t)},t.useContext=function(e,t){return P().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return P().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return P().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return P().useLayoutEffect(e,t)},t.useMemo=function(e,t){return P().useMemo(e,t)},t.useReducer=function(e,t,n){return P().useReducer(e,t,n)},t.useRef=function(e){return P().useRef(e)},t.useState=function(e){return P().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,h=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(h,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,g=-1,y=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,w=b.port2;b.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();k=e+y;try{m(!0,e)?w.postMessage(null):(v=!1,m=null)}catch(n){throw w.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,w.postMessage(null))},r=function(e,n){g=f((function(){e(t.unstable_now())}),n)},i=function(){d(g),g=-1}}function _(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<I(i,t)))break e;e[r]=t,e[n]=i,n=r}}function x(e){return void 0===(e=e[0])?null:e}function E(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&0>I(o,n))void 0!==u&&0>I(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==u&&0>I(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function I(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var S=[],C=[],T=1,N=null,R=3,P=!1,A=!1,D=!1;function O(e){for(var t=x(C);null!==t;){if(null===t.callback)E(C);else{if(!(t.startTime<=e))break;E(C),t.sortIndex=t.expirationTime,_(S,t)}t=x(C)}}function L(e){if(D=!1,O(e),!A)if(null!==x(S))A=!0,n(M);else{var t=x(C);null!==t&&r(L,t.startTime-e)}}function M(e,n){A=!1,D&&(D=!1,i()),P=!0;var a=R;try{for(O(n),N=x(S);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,R=N.priorityLevel;var s=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?N.callback=s:N===x(S)&&E(S),O(n)}else E(S);N=x(S)}if(null!==N)var u=!0;else{var c=x(C);null!==c&&r(L,c.startTime-n),u=!1}return u}finally{N=null,R=a,P=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){A||P||(A=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_getFirstCallbackNode=function(){return x(S)},t.unstable_next=function(e){switch(R){case 1:case 2:case 3:var t=3;break;default:t=R}var n=R;R=t;try{return e()}finally{R=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=R;R=e;try{return t()}finally{R=n}},t.unstable_scheduleCallback=function(e,a,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:T++,callback:a,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,_(C,e),null===x(S)&&e===x(C)&&(D?i():D=!0,r(L,o-s))):(e.sortIndex=u,_(S,e),A||P||(A=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=R;return function(){var n=R;R=t;try{return e.apply(this,arguments)}finally{R=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},613:function(e){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<a.length;u++){var c=a[u];if(!s(c))return!1;var l=e[c],h=t[c];if(!1===(i=n?n.call(r,l,h,c):void 0)||void 0===i&&l!==h)return!1}return!0}},610:function(e,t,n){var r=n(669),i=n(560),a=i;a.v1=r,a.v4=i,e.exports=a},874:function(e){for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,i=t;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},180:function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},669:function(e,t,n){var r,i,a=n(180),o=n(874),s=0,u=0;e.exports=function(e,t,n){var c=t&&n||0,l=t||[],h=(e=e||{}).node||r,f=void 0!==e.clockseq?e.clockseq:i;if(null==h||null==f){var d=a();null==h&&(h=r=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==f&&(f=i=16383&(d[6]<<8|d[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:u+1,m=p-s+(v-u)/1e4;if(m<0&&void 0===e.clockseq&&(f=f+1&16383),(m<0||p>s)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=p,u=v,i=f;var g=(1e4*(268435455&(p+=122192928e5))+v)%4294967296;l[c++]=g>>>24&255,l[c++]=g>>>16&255,l[c++]=g>>>8&255,l[c++]=255&g;var y=p/4294967296*1e4&268435455;l[c++]=y>>>8&255,l[c++]=255&y,l[c++]=y>>>24&15|16,l[c++]=y>>>16&255,l[c++]=f>>>8|128,l[c++]=255&f;for(var k=0;k<6;++k)l[c+k]=h[k];return t||o(l)}},560:function(e,t,n){var r=n(180),i=n(874);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[a+s]=o[s];return t||i(o)}},391:function(e){"use strict";var t=function(){};e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Br},SDK_VERSION:function(){return va},_DEFAULT_ENTRY_NAME:function(){return na},_addComponent:function(){return oa},_addOrOverwriteComponent:function(){return sa},_apps:function(){return ia},_clearComponents:function(){return ha},_components:function(){return aa},_getProvider:function(){return ca},_registerComponent:function(){return ua},_removeServiceInstance:function(){return la},deleteApp:function(){return ka},getApp:function(){return ga},getApps:function(){return ya},initializeApp:function(){return ma},onLog:function(){return _a},registerVersion:function(){return wa},setLogLevel:function(){return xa}});var t=n(791),r=n.t(t,2),i=n(164);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function o(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=o(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var s=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=o(e))&&(r&&(r+=" "),r+=t);return r},u={1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten",11:"eleven",12:"twelve",13:"thirteen",14:"fourteen",15:"fifteen",16:"sixteen"};function c(e){var t=typeof e;return"string"===t||"number"===t?u[e]||e:""}var l=function(e,t){return e&&t},h=function(e,t){return e&&!0!==e&&e+" "+t},f=function(e,t){return e&&(!0===e?t:e+" "+t)},d=function(e,t){return e&&!0!==e?e.replace("large screen","large-screen").replace(/ vertically/g,"-vertically").split(" ").map((function(e){return e.replace("-"," ")+" "+t})).join(" "):null},p=function(e){return"justified"===e?"justified":h(e,"aligned")},v=function(e){return h(e,"aligned")},m=function(e,t,n){if(void 0===t&&(t=""),void 0===n&&(n=!1),n&&"equal"===e)return"equal width";var r=typeof e;return"string"!==r&&"number"!==r||!t?c(e):c(e)+" "+t},g=function(e,t){var n=e.handledProps,r=void 0===n?[]:n;return Object.keys(t).reduce((function(e,n){return"childKey"===n||-1===r.indexOf(n)&&(e[n]=t[n]),e}),{})};var y=function(e,t,n){var r=e.defaultProps,i=void 0===r?{}:r;if(t.as&&t.as!==i.as)return t.as;if(n){var a=n();if(a)return a}return t.href?"a":i.as||"div"};var k=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var b=function(){this.__data__=[],this.size=0};var w=function(e,t){return e===t||e!==e&&t!==t};var _=function(e,t){for(var n=e.length;n--;)if(w(e[n][0],t))return n;return-1},x=Array.prototype.splice;var E=function(e){var t=this.__data__,n=_(t,e);return!(n<0)&&(n==t.length-1?t.pop():x.call(t,n,1),--this.size,!0)};var I=function(e){var t=this.__data__,n=_(t,e);return n<0?void 0:t[n][1]};var S=function(e){return _(this.__data__,e)>-1};var C=function(e,t){var n=this.__data__,r=_(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function T(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}T.prototype.clear=b,T.prototype.delete=E,T.prototype.get=I,T.prototype.has=S,T.prototype.set=C;var N=T;var R=function(){this.__data__=new N,this.size=0};var P=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var A=function(e){return this.__data__.get(e)};var D=function(e){return this.__data__.has(e)},O="object"==typeof global&&global&&global.Object===Object&&global,L="object"==typeof self&&self&&self.Object===Object&&self,M=O||L||Function("return this")(),F=M.Symbol,j=Object.prototype,U=j.hasOwnProperty,q=j.toString,V=F?F.toStringTag:void 0;var z=function(e){var t=U.call(e,V),n=e[V];try{e[V]=void 0;var r=!0}catch(a){}var i=q.call(e);return r&&(t?e[V]=n:delete e[V]),i},B=Object.prototype.toString;var W=function(e){return B.call(e)},H=F?F.toStringTag:void 0;var G=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":H&&H in Object(e)?z(e):W(e)};var K=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var Q=function(e){if(!K(e))return!1;var t=G(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Y=M["__core-js_shared__"],X=function(){var e=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var J=function(e){return!!X&&X in e},$=Function.prototype.toString;var Z=function(e){if(null!=e){try{return $.call(e)}catch(t){}try{return e+""}catch(t){}}return""},ee=/^\[object .+?Constructor\]$/,te=Function.prototype,ne=Object.prototype,re=te.toString,ie=ne.hasOwnProperty,ae=RegExp("^"+re.call(ie).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var oe=function(e){return!(!K(e)||J(e))&&(Q(e)?ae:ee).test(Z(e))};var se=function(e,t){return null==e?void 0:e[t]};var ue=function(e,t){var n=se(e,t);return oe(n)?n:void 0},ce=ue(M,"Map"),le=ue(Object,"create");var he=function(){this.__data__=le?le(null):{},this.size=0};var fe=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},de=Object.prototype.hasOwnProperty;var pe=function(e){var t=this.__data__;if(le){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return de.call(t,e)?t[e]:void 0},ve=Object.prototype.hasOwnProperty;var me=function(e){var t=this.__data__;return le?void 0!==t[e]:ve.call(t,e)};var ge=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=le&&void 0===t?"__lodash_hash_undefined__":t,this};function ye(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ye.prototype.clear=he,ye.prototype.delete=fe,ye.prototype.get=pe,ye.prototype.has=me,ye.prototype.set=ge;var ke=ye;var be=function(){this.size=0,this.__data__={hash:new ke,map:new(ce||N),string:new ke}};var we=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var _e=function(e,t){var n=e.__data__;return we(t)?n["string"==typeof t?"string":"hash"]:n.map};var xe=function(e){var t=_e(this,e).delete(e);return this.size-=t?1:0,t};var Ee=function(e){return _e(this,e).get(e)};var Ie=function(e){return _e(this,e).has(e)};var Se=function(e,t){var n=_e(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Ce(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ce.prototype.clear=be,Ce.prototype.delete=xe,Ce.prototype.get=Ee,Ce.prototype.has=Ie,Ce.prototype.set=Se;var Te=Ce;var Ne=function(e,t){var n=this.__data__;if(n instanceof N){var r=n.__data__;if(!ce||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Te(r)}return n.set(e,t),this.size=n.size,this};function Re(e){var t=this.__data__=new N(e);this.size=t.size}Re.prototype.clear=R,Re.prototype.delete=P,Re.prototype.get=A,Re.prototype.has=D,Re.prototype.set=Ne;var Pe=Re;var Ae=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var De=function(e){return this.__data__.has(e)};function Oe(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Te;++t<n;)this.add(e[t])}Oe.prototype.add=Oe.prototype.push=Ae,Oe.prototype.has=De;var Le=Oe;var Me=function(e,t){return e.has(t)};var Fe=function(e,t,n,r,i,a){var o=1&n,s=e.length,u=t.length;if(s!=u&&!(o&&u>s))return!1;var c=a.get(e),l=a.get(t);if(c&&l)return c==t&&l==e;var h=-1,f=!0,d=2&n?new Le:void 0;for(a.set(e,t),a.set(t,e);++h<s;){var p=e[h],v=t[h];if(r)var m=o?r(v,p,h,t,e,a):r(p,v,h,e,t,a);if(void 0!==m){if(m)continue;f=!1;break}if(d){if(!k(t,(function(e,t){if(!Me(d,t)&&(p===e||i(p,e,n,r,a)))return d.push(t)}))){f=!1;break}}else if(p!==v&&!i(p,v,n,r,a)){f=!1;break}}return a.delete(e),a.delete(t),f},je=M.Uint8Array;var Ue=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};var qe=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},Ve=F?F.prototype:void 0,ze=Ve?Ve.valueOf:void 0;var Be=function(e,t,n,r,i,a,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new je(e),new je(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return w(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Ue;case"[object Set]":var u=1&r;if(s||(s=qe),e.size!=t.size&&!u)return!1;var c=o.get(e);if(c)return c==t;r|=2,o.set(e,t);var l=Fe(s(e),s(t),r,i,a,o);return o.delete(e),l;case"[object Symbol]":if(ze)return ze.call(e)==ze.call(t)}return!1};var We=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},He=Array.isArray;var Ge=function(e,t,n){var r=t(e);return He(e)?r:We(r,n(e))};var Ke=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a};var Qe=function(){return[]},Ye=Object.prototype.propertyIsEnumerable,Xe=Object.getOwnPropertySymbols,Je=Xe?function(e){return null==e?[]:(e=Object(e),Ke(Xe(e),(function(t){return Ye.call(e,t)})))}:Qe;var $e=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var Ze=function(e){return null!=e&&"object"==typeof e};var et=function(e){return Ze(e)&&"[object Arguments]"==G(e)},tt=Object.prototype,nt=tt.hasOwnProperty,rt=tt.propertyIsEnumerable,it=et(function(){return arguments}())?et:function(e){return Ze(e)&&nt.call(e,"callee")&&!rt.call(e,"callee")},at=it;var ot=function(){return!1},st="object"==typeof exports&&exports&&!exports.nodeType&&exports,ut=st&&"object"==typeof module&&module&&!module.nodeType&&module,ct=ut&&ut.exports===st?M.Buffer:void 0,lt=(ct?ct.isBuffer:void 0)||ot,ht=/^(?:0|[1-9]\d*)$/;var ft=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ht.test(e))&&e>-1&&e%1==0&&e<t};var dt=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},pt={};pt["[object Float32Array]"]=pt["[object Float64Array]"]=pt["[object Int8Array]"]=pt["[object Int16Array]"]=pt["[object Int32Array]"]=pt["[object Uint8Array]"]=pt["[object Uint8ClampedArray]"]=pt["[object Uint16Array]"]=pt["[object Uint32Array]"]=!0,pt["[object Arguments]"]=pt["[object Array]"]=pt["[object ArrayBuffer]"]=pt["[object Boolean]"]=pt["[object DataView]"]=pt["[object Date]"]=pt["[object Error]"]=pt["[object Function]"]=pt["[object Map]"]=pt["[object Number]"]=pt["[object Object]"]=pt["[object RegExp]"]=pt["[object Set]"]=pt["[object String]"]=pt["[object WeakMap]"]=!1;var vt=function(e){return Ze(e)&&dt(e.length)&&!!pt[G(e)]};var mt=function(e){return function(t){return e(t)}},gt="object"==typeof exports&&exports&&!exports.nodeType&&exports,yt=gt&&"object"==typeof module&&module&&!module.nodeType&&module,kt=yt&&yt.exports===gt&&O.process,bt=function(){try{var e=yt&&yt.require&&yt.require("util").types;return e||kt&&kt.binding&&kt.binding("util")}catch(t){}}(),wt=bt&&bt.isTypedArray,_t=wt?mt(wt):vt,xt=Object.prototype.hasOwnProperty;var Et=function(e,t){var n=He(e),r=!n&&at(e),i=!n&&!r&&lt(e),a=!n&&!r&&!i&&_t(e),o=n||r||i||a,s=o?$e(e.length,String):[],u=s.length;for(var c in e)!t&&!xt.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ft(c,u))||s.push(c);return s},It=Object.prototype;var St=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||It)};var Ct=function(e,t){return function(n){return e(t(n))}},Tt=Ct(Object.keys,Object),Nt=Object.prototype.hasOwnProperty;var Rt=function(e){if(!St(e))return Tt(e);var t=[];for(var n in Object(e))Nt.call(e,n)&&"constructor"!=n&&t.push(n);return t};var Pt=function(e){return null!=e&&dt(e.length)&&!Q(e)};var At=function(e){return Pt(e)?Et(e):Rt(e)};var Dt=function(e){return Ge(e,At,Je)},Ot=Object.prototype.hasOwnProperty;var Lt=function(e,t,n,r,i,a){var o=1&n,s=Dt(e),u=s.length;if(u!=Dt(t).length&&!o)return!1;for(var c=u;c--;){var l=s[c];if(!(o?l in t:Ot.call(t,l)))return!1}var h=a.get(e),f=a.get(t);if(h&&f)return h==t&&f==e;var d=!0;a.set(e,t),a.set(t,e);for(var p=o;++c<u;){var v=e[l=s[c]],m=t[l];if(r)var g=o?r(m,v,l,t,e,a):r(v,m,l,e,t,a);if(!(void 0===g?v===m||i(v,m,n,r,a):g)){d=!1;break}p||(p="constructor"==l)}if(d&&!p){var y=e.constructor,k=t.constructor;y==k||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof k&&k instanceof k||(d=!1)}return a.delete(e),a.delete(t),d},Mt=ue(M,"DataView"),Ft=ue(M,"Promise"),jt=ue(M,"Set"),Ut=ue(M,"WeakMap"),qt="[object Map]",Vt="[object Promise]",zt="[object Set]",Bt="[object WeakMap]",Wt="[object DataView]",Ht=Z(Mt),Gt=Z(ce),Kt=Z(Ft),Qt=Z(jt),Yt=Z(Ut),Xt=G;(Mt&&Xt(new Mt(new ArrayBuffer(1)))!=Wt||ce&&Xt(new ce)!=qt||Ft&&Xt(Ft.resolve())!=Vt||jt&&Xt(new jt)!=zt||Ut&&Xt(new Ut)!=Bt)&&(Xt=function(e){var t=G(e),n="[object Object]"==t?e.constructor:void 0,r=n?Z(n):"";if(r)switch(r){case Ht:return Wt;case Gt:return qt;case Kt:return Vt;case Qt:return zt;case Yt:return Bt}return t});var Jt=Xt,$t="[object Arguments]",Zt="[object Array]",en="[object Object]",tn=Object.prototype.hasOwnProperty;var nn=function(e,t,n,r,i,a){var o=He(e),s=He(t),u=o?Zt:Jt(e),c=s?Zt:Jt(t),l=(u=u==$t?en:u)==en,h=(c=c==$t?en:c)==en,f=u==c;if(f&&lt(e)){if(!lt(t))return!1;o=!0,l=!1}if(f&&!l)return a||(a=new Pe),o||_t(e)?Fe(e,t,n,r,i,a):Be(e,t,u,n,r,i,a);if(!(1&n)){var d=l&&tn.call(e,"__wrapped__"),p=h&&tn.call(t,"__wrapped__");if(d||p){var v=d?e.value():e,m=p?t.value():t;return a||(a=new Pe),i(v,m,n,r,a)}}return!!f&&(a||(a=new Pe),Lt(e,t,n,r,i,a))};var rn=function e(t,n,r,i,a){return t===n||(null==t||null==n||!Ze(t)&&!Ze(n)?t!==t&&n!==n:nn(t,n,r,i,e,a))};var an=function(e,t,n,r){var i=n.length,a=i,o=!r;if(null==e)return!a;for(e=Object(e);i--;){var s=n[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var u=(s=n[i])[0],c=e[u],l=s[1];if(o&&s[2]){if(void 0===c&&!(u in e))return!1}else{var h=new Pe;if(r)var f=r(c,l,u,e,t,h);if(!(void 0===f?rn(l,c,3,r,h):f))return!1}}return!0};var on=function(e){return e===e&&!K(e)};var sn=function(e){for(var t=At(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,on(i)]}return t};var un=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};var cn=function(e){var t=sn(e);return 1==t.length&&t[0][2]?un(t[0][0],t[0][1]):function(n){return n===e||an(n,e,t)}};var ln=function(e){return"symbol"==typeof e||Ze(e)&&"[object Symbol]"==G(e)},hn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,fn=/^\w*$/;var dn=function(e,t){if(He(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ln(e))||(fn.test(e)||!hn.test(e)||null!=t&&e in Object(t))};function pn(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(pn.Cache||Te),n}pn.Cache=Te;var vn=pn;var mn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gn=/\\(\\)?/g,yn=function(e){var t=vn(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(mn,(function(e,n,r,i){t.push(r?i.replace(gn,"$1"):n||e)})),t}));var kn=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},bn=F?F.prototype:void 0,wn=bn?bn.toString:void 0;var _n=function e(t){if("string"==typeof t)return t;if(He(t))return kn(t,e)+"";if(ln(t))return wn?wn.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var xn=function(e){return null==e?"":_n(e)};var En=function(e,t){return He(e)?e:dn(e,t)?[e]:yn(xn(e))};var In=function(e){if("string"==typeof e||ln(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};var Sn=function(e,t){for(var n=0,r=(t=En(t,e)).length;null!=e&&n<r;)e=e[In(t[n++])];return n&&n==r?e:void 0};var Cn=function(e,t,n){var r=null==e?void 0:Sn(e,t);return void 0===r?n:r};var Tn=function(e,t){return null!=e&&t in Object(e)};var Nn=function(e,t,n){for(var r=-1,i=(t=En(t,e)).length,a=!1;++r<i;){var o=In(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&dt(i)&&ft(o,i)&&(He(e)||at(e))};var Rn=function(e,t){return null!=e&&Nn(e,t,Tn)};var Pn=function(e,t){return dn(e)&&on(t)?un(In(e),t):function(n){var r=Cn(n,e);return void 0===r&&r===t?Rn(n,e):rn(t,r,3)}};var An=function(e){return e};var Dn=function(e){return function(t){return null==t?void 0:t[e]}};var On=function(e){return function(t){return Sn(t,e)}};var Ln=function(e){return dn(e)?Dn(In(e)):On(e)};var Mn=function(e){return"function"==typeof e?e:null==e?An:"object"==typeof e?He(e)?Pn(e[0],e[1]):cn(e):Ln(e)};var Fn=function(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var u=o[e?s:++i];if(!1===n(a[u],u,a))break}return t}}();var jn=function(e,t){return e&&Fn(e,t,At)};var Un=function(e,t){return function(n,r){if(null==n)return n;if(!Pt(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Object(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}(jn);var qn=function(e,t){var n;return Un(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n};var Vn=function(e,t,n){if(!K(n))return!1;var r=typeof t;return!!("number"==r?Pt(n)&&ft(t,n.length):"string"==r&&t in n)&&w(n[t],e)};var zn=function(e,t,n){var r=He(e)?k:qn;return n&&Vn(e,t,n)&&(t=void 0),r(e,Mn(t,3))},Bn=function(e){return null===e||void 0===e||Array.isArray(e)&&0===e.length};function Wn(e){var n=e.children,r=e.className,i=e.compact,o=e.content,u=e.horizontal,c=e.piled,h=e.raised,f=e.size,d=e.stacked,p=s("ui",f,l(i,"compact"),l(u,"horizontal"),l(c,"piled"),l(h,"raised"),l(d,"stacked"),"segments",r),v=g(Wn,e),m=y(Wn,e);return t.createElement(m,a({},v,{className:p}),Bn(n)?o:n)}Wn.handledProps=["as","children","className","compact","content","horizontal","piled","raised","size","stacked"],Wn.propTypes={};var Hn=Wn;function Gn(e){var n=e.children,r=e.className,i=e.content,o=s("inline",r),u=g(Gn,e),c=y(Gn,e);return t.createElement(c,a({},u,{className:o}),Bn(n)?i:n)}Gn.handledProps=["as","children","className","content"],Gn.propTypes={};var Kn=Gn;function Qn(e){var n=e.attached,r=e.basic,i=e.children,o=e.circular,u=e.className,c=e.clearing,d=e.color,v=e.compact,m=e.content,k=e.disabled,b=e.floated,w=e.inverted,_=e.loading,x=e.placeholder,E=e.padded,I=e.piled,S=e.raised,C=e.secondary,T=e.size,N=e.stacked,R=e.tertiary,P=e.textAlign,A=e.vertical,D=s("ui",d,T,l(r,"basic"),l(o,"circular"),l(c,"clearing"),l(v,"compact"),l(k,"disabled"),l(w,"inverted"),l(_,"loading"),l(x,"placeholder"),l(I,"piled"),l(S,"raised"),l(C,"secondary"),l(N,"stacked"),l(R,"tertiary"),l(A,"vertical"),f(n,"attached"),f(E,"padded"),p(P),h(b,"floated"),"segment",u),O=g(Qn,e),L=y(Qn,e);return t.createElement(L,a({},O,{className:D}),Bn(i)?m:i)}Qn.handledProps=["as","attached","basic","children","circular","className","clearing","color","compact","content","disabled","floated","inverted","loading","padded","piled","placeholder","raised","secondary","size","stacked","tertiary","textAlign","vertical"],Qn.Group=Hn,Qn.Inline=Kn,Qn.propTypes={};var Yn=Qn;function Xn(e){var n=e.children,r=e.className,i=e.content,o=e.fluid,u=e.text,c=e.textAlign,h=s("ui",l(u,"text"),l(o,"fluid"),p(c),"container",r),f=g(Xn,e),d=y(Xn,e);return t.createElement(d,a({},f,{className:h}),Bn(n)?i:n)}Xn.handledProps=["as","children","className","content","fluid","text","textAlign"],Xn.propTypes={};var Jn=Xn;function $n(e){if(Array.isArray(e))return e}function Zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function er(e,t){if(e){if("string"===typeof e)return Zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zn(e,t):void 0}}function tr(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nr(e,t){return $n(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||er(e,t)||tr()}function rr(e){return rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rr(e)}function ir(e){var t=function(e,t){if("object"!==rr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==rr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===rr(t)?t:String(t)}function ar(e,t,n){return(t=ir(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function or(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ir(r.key),r)}}function ur(e,t,n){return t&&sr(e.prototype,t),n&&sr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function cr(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=er(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hr(e,t){return hr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hr(e,t)}function fr(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hr(e,t)}function dr(e){return dr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dr(e)}function pr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function vr(e){var t=pr();return function(){var n,r=dr(e);if(t){var i=dr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===rr(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return lr(e)}(this,n)}}function mr(e,t,n){return mr=pr()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&hr(i,n.prototype),i},mr.apply(null,arguments)}function gr(e){var t="function"===typeof Map?new Map:void 0;return gr=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"===typeof e}}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return mr(e,arguments,dr(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),hr(n,e)},gr(e)}var yr=!1,kr=!1,br="${JSCORE_VERSION}",wr=function(e,t){if(!e)throw _r(t)},_r=function(e){return new Error("Firebase Database ("+br+") INTERNAL ASSERT FAILED: "+e)},xr=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Er={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(xr(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new Ir;var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Ir=function(e){fr(n,e);var t=vr(n);function n(){var e;return or(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return ur(n)}(gr(Error)),Sr=function(e){var t=xr(e);return Er.encodeByteArray(t,!0)},Cr=function(e){return Sr(e).replace(/\./g,"")},Tr=function(e){try{return Er.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Nr(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Nr(e[n],t[n]));return e}var Rr=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Pr=function(){try{return Rr()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/notebook",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDE-Cl5RxG1byLc4pjoBxD3aXWO3wi43P8",REACT_APP_FIREBASE_AUTH_DOMAIN:"diary-6211f.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"diary-6211f",REACT_APP_FIREBASE_STORAGE_BUCKET:"diary-6211f.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"765031385372",REACT_APP_FIREBASE_APP_ID:"1:765031385372:web:9b72a3164df87c4c9712d9",REACT_APP_FIREBASE_MEASUMENT_ID:"G-5VWBRJH7V4"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&Tr(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Ar=function(){var e;return null===(e=Pr())||void 0===e?void 0:e.config},Dr=function(){function e(){var t=this;or(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return ur(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Or(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Cr(JSON.stringify({alg:"none",type:"JWT"})),Cr(JSON.stringify(a)),""].join(".")}function Lr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Mr(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lr())}function Fr(){var e,t=null===(e=Pr())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function jr(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ur(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function qr(){var e=Lr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Vr(){return!0===yr||!0===kr}function zr(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Br=function(e){fr(n,e);var t=vr(n);function n(e,r,i){var a;return or(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(lr(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(lr(a),Wr.prototype.create),a}return ur(n)}(gr(Error)),Wr=function(){function e(t,n,r){or(this,e),this.service=t,this.serviceName=n,this.errors=r}return ur(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Hr,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Br(n,a,t)}}]),e}();var Hr=/\{\$([^}]+)}/g;function Gr(e){return JSON.parse(e)}function Kr(e){return JSON.stringify(e)}var Qr=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Gr(Tr(a[0])||""),n=Gr(Tr(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Yr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Xr(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Jr(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function $r(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Zr(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(ei(s)&&ei(u)){if(!Zr(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function ei(e){return null!==e&&"object"===typeof e}function ti(e){for(var t=[],n=function(){var e=nr(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ni(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=nr(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ri(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var ii=function(){function e(){or(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return ur(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^l&(h^f),u=1518500249):(s=l^h^f,u=1859775393):p<60?(s=l&h|f&(l|h),u=2400959708):(s=l^h^f,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function ai(e,t){var n=new oi(e,t);return n.subscribe.bind(n)}var oi=function(){function e(t,n){var r=this;or(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return ur(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=cr(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=si),void 0===r.error&&(r.error=si),void 0===r.complete&&(r.complete=si);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function si(){}var ui=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function ci(e,t){return"".concat(e," failed: ").concat(t," argument ")}function li(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(ci(e,t)+"must be a valid function.")}function hi(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(ci(e,t)+"must be a valid context object.")}var fi=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function di(e){return e&&e._delegate?e._delegate:e}function pi(){pi=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),s=new R(r||[]);return i(o,"_invoke",{value:S(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",d="suspendedYield",p="executing",v="completed",m={};function g(){}function y(){}function k(){}var b={};c(b,o,(function(){return this}));var w=Object.getPrototypeOf,_=w&&w(w(P([])));_&&_!==n&&r.call(_,o)&&(b=_);var x=k.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,s){var u=h(e[i],e,a);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==rr(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(l).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function S(t,n,r){var i=f;return function(a,o){if(i===p)throw new Error("Generator is already running");if(i===v){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=C(s,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?v:d,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=v,r.method="throw",r.arg=c.arg)}}}function C(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=h(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(rr(t)+" is not iterable")}return y.prototype=k,i(x,"constructor",{value:k,configurable:!0}),i(k,"constructor",{value:y,configurable:!0}),y.displayName=c(k,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,c(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},E(I.prototype),c(I.prototype,s,(function(){return this})),t.AsyncIterator=I,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new I(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(x),c(x,u,"Generator"),c(x,o,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function vi(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function mi(e){return function(e){if(Array.isArray(e))return Zn(e)}(e)||vi(e)||er(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gi(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(aq){return void n(aq)}s.done?t(u):Promise.resolve(u).then(r,i)}function yi(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){gi(a,r,i,o,s,"next",e)}function s(e){gi(a,r,i,o,s,"throw",e)}o(void 0)}))}}var ki=function(){function e(t,n,r){or(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ur(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),bi="[DEFAULT]",wi=function(){function e(t,n){or(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ur(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Dr;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:bi})}catch(u){}var t,n=cr(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=nr(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bi;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=yi(pi().mark((function e(){var t;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(mi(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),mi(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bi;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bi;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=cr(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=nr(i.value,2),u=s[0],c=s[1];r===this.normalizeInstanceIdentifier(u)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=cr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(qO){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===bi?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(qO){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bi;return this.component?this.component.multipleInstances?e:bi:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var _i,xi,Ei=function(){function e(t){or(this,e),this.name=t,this.providers=new Map}return ur(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new wi(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ii=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(xi||(xi={}));var Si={debug:xi.DEBUG,verbose:xi.VERBOSE,info:xi.INFO,warn:xi.WARN,error:xi.ERROR,silent:xi.SILENT},Ci=xi.INFO,Ti=(ar(_i={},xi.DEBUG,"log"),ar(_i,xi.VERBOSE,"log"),ar(_i,xi.INFO,"info"),ar(_i,xi.WARN,"warn"),ar(_i,xi.ERROR,"error"),_i),Ni=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Ti[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Ri=function(){function e(t){or(this,e),this.name=t,this._logLevel=Ci,this._logHandler=Ni,this._userLogHandler=null,Ii.push(this)}return ur(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in xi))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Si[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,xi.DEBUG].concat(t)),this._logHandler.apply(this,[this,xi.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,xi.VERBOSE].concat(t)),this._logHandler.apply(this,[this,xi.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,xi.INFO].concat(t)),this._logHandler.apply(this,[this,xi.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,xi.WARN].concat(t)),this._logHandler.apply(this,[this,xi.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,xi.ERROR].concat(t)),this._logHandler.apply(this,[this,xi.ERROR].concat(t))}}]),e}();function Pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ai(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pi(Object(n),!0).forEach((function(t){ar(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Di,Oi,Li=function(e,t){return t.some((function(t){return e instanceof t}))};var Mi=new WeakMap,Fi=new WeakMap,ji=new WeakMap,Ui=new WeakMap,qi=new WeakMap;var Vi={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Fi.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ji.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wi(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function zi(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Oi||(Oi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Hi(this),n),Wi(Mi.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Wi(e.apply(Hi(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Hi(this),t].concat(r));return ji.set(a,t.sort?t.sort():[t]),Wi(a)}}function Bi(e){return"function"===typeof e?zi(e):(e instanceof IDBTransaction&&function(e){if(!Fi.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Fi.set(e,t)}}(e),Li(e,Di||(Di=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Vi):e)}function Wi(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Wi(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Mi.set(t,e)})).catch((function(){})),qi.set(t,e),t}(e);if(Ui.has(e))return Ui.get(e);var t=Bi(e);return t!==e&&(Ui.set(e,t),qi.set(t,e)),t}var Hi=function(e){return qi.get(e)};var Gi,Ki,Qi=["get","getKey","getAll","getAllKeys","count"],Yi=["put","add","delete","clear"],Xi=new Map;function Ji(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Xi.get(t))return Xi.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Yi.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Qi.includes(n))){var a=function(){var e=yi(pi().mark((function e(t){var a,o,s,u,c,l,h=arguments;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Xi.set(t,a),a}}}Vi=function(e){return Ai(Ai({},e),{},{get:function(t,n,r){return Ji(t,n)||e.get(t,n,r)},has:function(t,n){return!!Ji(t,n)||e.has(t,n)}})}(Vi);var $i=function(){function e(t){or(this,e),this.container=t}return ur(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Zi="@firebase/app",ea="0.9.13",ta=new Ri("@firebase/app"),na="[DEFAULT]",ra=(ar(Gi={},Zi,"fire-core"),ar(Gi,"@firebase/app-compat","fire-core-compat"),ar(Gi,"@firebase/analytics","fire-analytics"),ar(Gi,"@firebase/analytics-compat","fire-analytics-compat"),ar(Gi,"@firebase/app-check","fire-app-check"),ar(Gi,"@firebase/app-check-compat","fire-app-check-compat"),ar(Gi,"@firebase/auth","fire-auth"),ar(Gi,"@firebase/auth-compat","fire-auth-compat"),ar(Gi,"@firebase/database","fire-rtdb"),ar(Gi,"@firebase/database-compat","fire-rtdb-compat"),ar(Gi,"@firebase/functions","fire-fn"),ar(Gi,"@firebase/functions-compat","fire-fn-compat"),ar(Gi,"@firebase/installations","fire-iid"),ar(Gi,"@firebase/installations-compat","fire-iid-compat"),ar(Gi,"@firebase/messaging","fire-fcm"),ar(Gi,"@firebase/messaging-compat","fire-fcm-compat"),ar(Gi,"@firebase/performance","fire-perf"),ar(Gi,"@firebase/performance-compat","fire-perf-compat"),ar(Gi,"@firebase/remote-config","fire-rc"),ar(Gi,"@firebase/remote-config-compat","fire-rc-compat"),ar(Gi,"@firebase/storage","fire-gcs"),ar(Gi,"@firebase/storage-compat","fire-gcs-compat"),ar(Gi,"@firebase/firestore","fire-fst"),ar(Gi,"@firebase/firestore-compat","fire-fst-compat"),ar(Gi,"fire-js","fire-js"),ar(Gi,"firebase","fire-js-all"),Gi),ia=new Map,aa=new Map;function oa(e,t){try{e.container.addComponent(t)}catch(n){ta.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function sa(e,t){e.container.addOrOverwriteComponent(t)}function ua(e){var t=e.name;if(aa.has(t))return ta.debug("There were multiple attempts to register component ".concat(t,".")),!1;aa.set(t,e);var n,r=cr(ia.values());try{for(r.s();!(n=r.n()).done;){oa(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function ca(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function la(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:na;ca(e,t).clearInstance(n)}function ha(){aa.clear()}var fa=(ar(Ki={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),ar(Ki,"bad-app-name","Illegal App name: '{$appName}"),ar(Ki,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),ar(Ki,"app-deleted","Firebase App named '{$appName}' already deleted"),ar(Ki,"no-options","Need to provide options, when not being deployed to hosting via source."),ar(Ki,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ar(Ki,"invalid-log-argument","First argument to `onLog` must be null or a function."),ar(Ki,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),ar(Ki,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),ar(Ki,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),ar(Ki,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Ki),da=new Wr("app","Firebase",fa),pa=function(){function e(t,n,r){var i=this;or(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ki("app",(function(){return i}),"PUBLIC"))}return ur(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw da.create("app-deleted",{appName:this._name})}}]),e}(),va="9.23.0";function ma(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:na,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw da.create("bad-app-name",{appName:String(i)});if(n||(n=Ar()),!n)throw da.create("no-options");var a=ia.get(i);if(a){if(Zr(n,a.options)&&Zr(r,a.config))return a;throw da.create("duplicate-app",{appName:i})}var o,s=new Ei(i),u=cr(aa.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(h){u.e(h)}finally{u.f()}var l=new pa(n,r,s);return ia.set(i,l),l}function ga(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:na,t=ia.get(e);if(!t&&e===na&&Ar())return ma();if(!t)throw da.create("no-app",{appName:e});return t}function ya(){return Array.from(ia.values())}function ka(e){return ba.apply(this,arguments)}function ba(){return ba=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!ia.has(n)){e.next=6;break}return ia.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),ba.apply(this,arguments)}function wa(e,t,n){var r,i=null!==(r=ra[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ta.warn(s.join(" "))}ua(new ki("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function _a(e,t){if(null!==e&&"function"!==typeof e)throw da.create("invalid-log-argument");!function(e,t){var n,r=cr(Ii);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Si[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:xi[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function xa(e){var t;t=e,Ii.forEach((function(e){e.setLogLevel(t)}))}var Ea="firebase-heartbeat-database",Ia=1,Sa="firebase-heartbeat-store",Ca=null;function Ta(){return Ca||(Ca=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=Wi(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Wi(s.result),e.oldVersion,e.newVersion,Wi(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}(Ea,Ia,{upgrade:function(e,t){if(0===t)e.createObjectStore(Sa)}}).catch((function(e){throw da.create("idb-open",{originalErrorMessage:e.message})}))),Ca}function Na(e){return Ra.apply(this,arguments)}function Ra(){return Ra=yi(pi().mark((function e(t){var n,r,i;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ta();case 3:return n=e.sent,e.next=6,n.transaction(Sa).objectStore(Sa).get(Da(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof Br?ta.warn(e.t0.message):(i=da.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),ta.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Ra.apply(this,arguments)}function Pa(e,t){return Aa.apply(this,arguments)}function Aa(){return Aa=yi(pi().mark((function e(t,n){var r,i,a,o;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ta();case 3:return r=e.sent,i=r.transaction(Sa,"readwrite"),a=i.objectStore(Sa),e.next=8,a.put(n,Da(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof Br?ta.warn(e.t0.message):(o=da.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),ta.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Aa.apply(this,arguments)}function Da(e){return"".concat(e.name,"!").concat(e.options.appId)}var Oa=function(){function e(t){var n=this;or(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Ua(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return ur(e,[{key:"triggerHeartbeat",value:function(){var e=yi(pi().mark((function e(){var t,n,r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=La(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=yi(pi().mark((function e(){var t,n,r,i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=La(),n=Ma(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Cr(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function La(){return(new Date).toISOString().substring(0,10)}function Ma(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=cr(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),qa(r)>n)return a.dates.pop(),0}else if(r.push({agent:e.agent,dates:[e.date]}),qa(r)>n)return r.pop(),0;i=i.slice(1)};for(a.s();!(t=a.n()).done&&0!==o(););}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Fa,ja,Ua=function(){function e(t){or(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return ur(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zr()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(aq){t(aq)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=yi(pi().mark((function e(){var t;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Na(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=yi(pi().mark((function e(t){var n,r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Pa(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=yi(pi().mark((function e(t){var n,r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Pa(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(mi(r.heartbeats),mi(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function qa(e){return Cr(JSON.stringify({version:2,heartbeats:e})).length}Fa="",ua(new ki("platform-logger",(function(e){return new $i(e)}),"PRIVATE")),ua(new ki("heartbeat",(function(e){return new Oa(e)}),"PRIVATE")),wa(Zi,ea,Fa),wa(Zi,ea,"esm2017"),wa("fire-js","");var Va=function(){function e(t,n){var r=this;or(this,e),this._delegate=t,this.firebase=n,oa(t,new ki("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return ur(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),ka(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:na;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:na;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){oa(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){sa(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),za=(ar(ja={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),ar(ja,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ja),Ba=new Wr("app-compat","Firebase",za);var Wa=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=ma(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Yr(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:wa,setLogLevel:xa,onLog:_a,apps:null,SDK_VERSION:va,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(ua(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Ba.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Nr(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Yr(n,e=e||na))throw Ba.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Va);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Nr(n,e)},createSubscribe:ai,ErrorFactory:Wr,deepExtend:Nr}),n}(),Ha=new Ri("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Ha.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Ga=self.firebase.SDK_VERSION;Ga&&Ga.indexOf("LITE")>=0&&Ha.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ka=Wa;!function(e){wa("@firebase/app-compat","0.2.13",e)}();function Qa(e){return $n(e)||vi(e)||er(e)||tr()}function Ya(){return Ya="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dr(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ya.apply(this,arguments)}Ka.registerVersion("firebase","9.23.0","app-compat");function Xa(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var Ja,$a={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Za="EMAIL_SIGNIN",eo="PASSWORD_RESET",to="RECOVER_EMAIL",no="REVERT_SECOND_FACTOR_ADDITION",ro="VERIFY_AND_CHANGE_EMAIL",io="VERIFY_EMAIL";function ao(){return ar({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var oo=function(){var e;return ar(e={},"admin-restricted-operation","This operation is restricted to administrators only."),ar(e,"argument-error",""),ar(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),ar(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),ar(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),ar(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),ar(e,"cordova-not-ready","Cordova framework is not ready."),ar(e,"cors-unsupported","This browser is not supported."),ar(e,"credential-already-in-use","This credential is already associated with a different user account."),ar(e,"custom-token-mismatch","The custom token corresponds to a different audience."),ar(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),ar(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),ar(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),ar(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),ar(e,"email-already-in-use","The email address is already in use by another account."),ar(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),ar(e,"expired-action-code","The action code has expired."),ar(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),ar(e,"internal-error","An internal AuthError has occurred."),ar(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),ar(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),ar(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),ar(e,"invalid-auth-event","An internal AuthError has occurred."),ar(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),ar(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),ar(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),ar(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),ar(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),ar(e,"invalid-email","The email address is badly formatted."),ar(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),ar(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),ar(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),ar(e,"invalid-credential","The supplied auth credential is malformed or has expired."),ar(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),ar(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),ar(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),ar(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),ar(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),ar(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),ar(e,"wrong-password","The password is invalid or the user does not have a password."),ar(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),ar(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),ar(e,"invalid-provider-id","The specified provider ID is invalid."),ar(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),ar(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),ar(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),ar(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),ar(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),ar(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),ar(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),ar(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),ar(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),ar(e,"missing-continue-uri","A continue URL must be provided in the request."),ar(e,"missing-iframe-start","An internal AuthError has occurred."),ar(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),ar(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),ar(e,"missing-password","A non-empty password must be provided"),ar(e,"missing-multi-factor-info","No second factor identifier is provided."),ar(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),ar(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),ar(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),ar(e,"app-deleted","This instance of FirebaseApp has been deleted."),ar(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),ar(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),ar(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),ar(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),ar(e,"no-auth-event","An internal AuthError has occurred."),ar(e,"no-such-provider","User was not linked to an account with the given provider."),ar(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),ar(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),ar(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),ar(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),ar(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),ar(e,"provider-already-linked","User can only be linked to one identity for the given provider."),ar(e,"quota-exceeded","The project's quota for this operation has been exceeded."),ar(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),ar(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),ar(e,"rejected-credential","The request contains malformed or mismatching credentials."),ar(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),ar(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),ar(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),ar(e,"timeout","The operation has timed out."),ar(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),ar(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),ar(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),ar(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),ar(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),ar(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),ar(e,"unverified-email","The operation requires a verified email."),ar(e,"user-cancelled","The user did not grant your application the permissions it requested."),ar(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),ar(e,"user-disabled","The user account has been disabled by an administrator."),ar(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),ar(e,"user-signed-out",""),ar(e,"weak-password","The password must be 6 characters long or more."),ar(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),ar(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),ar(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),ar(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),ar(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),ar(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),ar(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),ar(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),ar(e,"invalid-req-type","Invalid request parameters."),ar(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},so=ao,uo=new Wr("auth","Firebase",ao()),co=new Ri("@firebase/auth");function lo(e){if(co.logLevel<=xi.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];co.warn.apply(co,["Auth (".concat(va,"): ").concat(e)].concat(n))}}function ho(e){if(co.logLevel<=xi.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];co.error.apply(co,["Auth (".concat(va,"): ").concat(e)].concat(n))}}function fo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw go.apply(void 0,[e].concat(n))}function po(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return go.apply(void 0,[e].concat(n))}function vo(e,t,n){var r=Object.assign(Object.assign({},so()),ar({},t,n));return new Wr("auth","Firebase",r).create(t,{appName:e.name})}function mo(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&fo(e,"argument-error"),vo(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function go(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=mi(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(mi(o)))}return uo.create.apply(uo,[e].concat(n))}function yo(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw go.apply(void 0,[t].concat(r))}}function ko(e){var t="INTERNAL ASSERTION FAILED: "+e;throw ho(t),new Error(t)}function bo(e,t){e||ko(t)}function wo(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function _o(){return"http:"===xo()||"https:"===xo()}function xo(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Eo=function(){function e(t,n){or(this,e),this.shortDelay=t,this.longDelay=n,bo(n>t,"Short delay should be less than long delay!"),this.isMobile=Mr()||Ur()}return ur(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(_o()||jr()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Io(e,t){bo(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var So=function(){function e(){or(this,e)}return ur(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void ko("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void ko("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void ko("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Co=(ar(Ja={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),ar(Ja,"MISSING_CUSTOM_TOKEN","internal-error"),ar(Ja,"INVALID_IDENTIFIER","invalid-email"),ar(Ja,"MISSING_CONTINUE_URI","internal-error"),ar(Ja,"INVALID_PASSWORD","wrong-password"),ar(Ja,"MISSING_PASSWORD","missing-password"),ar(Ja,"EMAIL_EXISTS","email-already-in-use"),ar(Ja,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),ar(Ja,"INVALID_IDP_RESPONSE","invalid-credential"),ar(Ja,"INVALID_PENDING_TOKEN","invalid-credential"),ar(Ja,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),ar(Ja,"MISSING_REQ_TYPE","internal-error"),ar(Ja,"EMAIL_NOT_FOUND","user-not-found"),ar(Ja,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),ar(Ja,"EXPIRED_OOB_CODE","expired-action-code"),ar(Ja,"INVALID_OOB_CODE","invalid-action-code"),ar(Ja,"MISSING_OOB_CODE","internal-error"),ar(Ja,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),ar(Ja,"INVALID_ID_TOKEN","invalid-user-token"),ar(Ja,"TOKEN_EXPIRED","user-token-expired"),ar(Ja,"USER_NOT_FOUND","user-token-expired"),ar(Ja,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),ar(Ja,"INVALID_CODE","invalid-verification-code"),ar(Ja,"INVALID_SESSION_INFO","invalid-verification-id"),ar(Ja,"INVALID_TEMPORARY_PROOF","invalid-credential"),ar(Ja,"MISSING_SESSION_INFO","missing-verification-id"),ar(Ja,"SESSION_EXPIRED","code-expired"),ar(Ja,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),ar(Ja,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),ar(Ja,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),ar(Ja,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),ar(Ja,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),ar(Ja,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),ar(Ja,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),ar(Ja,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),ar(Ja,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),ar(Ja,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),ar(Ja,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),ar(Ja,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),ar(Ja,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),ar(Ja,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),ar(Ja,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),ar(Ja,"MISSING_CLIENT_TYPE","missing-client-type"),ar(Ja,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),ar(Ja,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),ar(Ja,"INVALID_REQ_TYPE","invalid-req-type"),Ja),To=new Eo(3e4,6e4);function No(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Ro(e,t,n,r){return Po.apply(this,arguments)}function Po(){return Po=yi(pi().mark((function e(t,n,r,i){var a,o=arguments;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Ao(t,a,yi(pi().mark((function e(){var a,o,s,u;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=ti(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",So.fetch()(Mo(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Po.apply(this,arguments)}function Ao(e,t,n){return Do.apply(this,arguments)}function Do(){return Do=yi(pi().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,d;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Co),n),e.prev=2,a=new Fo(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw jo(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),l=nr(c,2),h=l[0],f=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw jo(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw jo(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw jo(t,"user-disabled",s);case 29:if(d=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!f){e.next=34;break}throw vo(t,d,f);case 34:fo(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Br)){e.next=41;break}throw e.t0;case 41:fo(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Do.apply(this,arguments)}function Oo(e,t,n,r){return Lo.apply(this,arguments)}function Lo(){return Lo=yi(pi().mark((function e(t,n,r,i){var a,o,s=arguments;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Ro(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&fo(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Lo.apply(this,arguments)}function Mo(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Io(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Fo=function(){function e(t){var n=this;or(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(po(n.auth,"network-request-failed"))}),To.get())}))}return ur(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function jo(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=po(e,t,r);return i.customData._tokenResponse=n,i}function Uo(e,t){return qo.apply(this,arguments)}function qo(){return qo=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ro(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),qo.apply(this,arguments)}function Vo(e,t){return zo.apply(this,arguments)}function zo(){return zo=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ro(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),zo.apply(this,arguments)}function Bo(e,t){return Wo.apply(this,arguments)}function Wo(){return Wo=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ro(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Wo.apply(this,arguments)}function Ho(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Go(){return Go=yi(pi().mark((function e(t){var n,r,i,a,o,s,u=arguments;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=di(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,yo((a=Qo(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Ho(Ko(a.auth_time)),issuedAtTime:Ho(Ko(a.iat)),expirationTime:Ho(Ko(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Go.apply(this,arguments)}function Ko(e){return 1e3*Number(e)}function Qo(e){var t=nr(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return ho("JWT malformed, contained fewer than 3 sections"),null;try{var a=Tr(r);return a?JSON.parse(a):(ho("Failed to decode base64 JWT payload"),null)}catch(o){return ho("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function Yo(e,t){return Xo.apply(this,arguments)}function Xo(){return Xo=yi(pi().mark((function e(t,n){var r=arguments;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Br&&Jo(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Xo.apply(this,arguments)}function Jo(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var $o=function(){function e(t){or(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return ur(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(yi(pi().mark((function t(){return pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Zo=function(){function e(t,n){or(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return ur(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Ho(this.lastLoginAt),this.creationTime=Ho(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function es(e){return ts.apply(this,arguments)}function ts(){return ts=yi(pi().mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Yo(t,Bo(r,{idToken:i}));case 6:yo(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=Xa(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],u=rs(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Zo(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),ts.apply(this,arguments)}function ns(){return(ns=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=di(t),e.next=3,es(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rs(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(mi(n),mi(t))}function is(e,t){return as.apply(this,arguments)}function as(){return as=yi(pi().mark((function e(t,n){var r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ao(t,{},yi(pi().mark((function e(){var r,i,a,o,s,u;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ti({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=Mo(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",So.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),as.apply(this,arguments)}var os=function(){function e(){or(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return ur(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){yo(e.idToken,"internal-error"),yo("undefined"!==typeof e.idToken,"internal-error"),yo("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Qo(e);return yo(t,"internal-error"),yo("undefined"!==typeof t.exp,"internal-error"),yo("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=yi(pi().mark((function e(t){var n,r=arguments;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],yo(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=yi(pi().mark((function e(t,n){var r,i,a,o;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,is(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return ko("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(yo("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(yo("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(yo("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function ss(e,t){yo("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var us=function(){function e(t){or(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Xa(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $o(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?mi(a.providerData):[],this.metadata=new Zo(a.createdAt||void 0,a.lastLoginAt||void 0)}return ur(e,[{key:"getIdToken",value:function(){var e=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yo(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(yo(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Go.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ns.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(yo(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){yo(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=yi(pi().mark((function e(t){var n,r,i=arguments;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,es(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=yi(pi().mark((function e(){var t;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Yo(this,Uo(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,g=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;yo(k&&x,t,"internal-error");var E=os.fromJSON(this.name,x);yo("string"===typeof k,t,"internal-error"),ss(h,t.name),ss(f,t.name),yo("boolean"===typeof b,t,"internal-error"),yo("boolean"===typeof w,t,"internal-error"),ss(d,t.name),ss(p,t.name),ss(v,t.name),ss(m,t.name),ss(g,t.name),ss(y,t.name);var I=new e({uid:k,auth:t,email:f,emailVerified:b,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(I.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(I._redirectEventId=m),I}},{key:"_fromIdTokenResponse",value:function(){var t=yi(pi().mark((function t(n,r){var i,a,o,s=arguments;return pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new os).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,es(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),cs=new Map;function ls(e){bo(e instanceof Function,"Expected a class definition");var t=cs.get(e);return t?(bo(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,cs.set(e,t),t)}var hs=function(){function e(){or(this,e),this.type="NONE",this.storage={}}return ur(e,[{key:"_isAvailable",value:function(){var e=yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();hs.type="NONE";var fs=hs;function ds(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var ps=function(){function e(t,n,r){or(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=ds(this.userKey,a.apiKey,o),this.fullPersistenceKey=ds("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return ur(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=yi(pi().mark((function e(){var t;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?us._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=yi(pi().mark((function t(n,r){var i,a,o,s,u,c,l,h,f,d,p,v=arguments;return pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(ls(fs),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||ls(fs),s=ds(i,n.config.apiKey,n.name),u=null,c=cr(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return d=us._fromJSON(n,f),h!==o&&(u=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function vs(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ks(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ms(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ws(t))return"Blackberry";if(_s(t))return"Webos";if(gs(t))return"Safari";if((t.includes("chrome/")||ys(t))&&!t.includes("edge/"))return"Chrome";if(bs(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function ms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr();return/firefox\//i.test(e)}function gs(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ys(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr();return/crios\//i.test(e)}function ks(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr();return/iemobile/i.test(e)}function bs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr();return/android/i.test(e)}function ws(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr();return/blackberry/i.test(e)}function _s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr();return/webos/i.test(e)}function xs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Es(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr();return xs(e)||bs(e)||_s(e)||ws(e)||/windows phone/i.test(e)||ks(e)}function Is(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=vs(Lr());break;case"Worker":t="".concat(vs(Lr()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(va,"/").concat(r)}function Ss(e){return Cs.apply(this,arguments)}function Cs(){return Cs=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ro(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Cs.apply(this,arguments)}function Ts(e,t){return Ns.apply(this,arguments)}function Ns(){return Ns=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ro(t,"GET","/v2/recaptchaConfig",No(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ns.apply(this,arguments)}function Rs(e){return void 0!==e&&void 0!==e.getResponse}function Ps(e){return void 0!==e&&void 0!==e.enterprise}var As=ur((function e(t){if(or(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function Ds(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=po("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Os(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Ls=function(){function e(t){or(this,e),this.type="recaptcha-enterprise",this.auth=qs(t)}return ur(e,[{key:"verify",value:function(){var e=yi(pi().mark((function e(){var t,n,r,i,a,o=this,s=arguments;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;Ps(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=yi(pi().mark((function e(n,r){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ts(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new As(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=s.length>0&&void 0!==s[0]?s[0]:"verify",n=s.length>1&&void 0!==s[1]&&s[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&Ps(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));Ds("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ms(e,t,n){return Fs.apply(this,arguments)}function Fs(){return Fs=yi(pi().mark((function e(t,n,r){var i,a,o,s,u=arguments;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>3&&void 0!==u[3]&&u[3],a=new Ls(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return s=Object.assign({},n),i?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),Fs.apply(this,arguments)}var js=function(){function e(t){or(this,e),this.auth=t,this.queue=[]}return ur(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=yi(pi().mark((function e(t){var n,r,i,a,o,s,u;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=cr(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=cr(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Us=function(){function e(t,n,r,i){or(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vs(this),this.idTokenSubscription=new Vs(this),this.beforeStateQueue=new js(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uo,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return ur(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=ls(t)),this._initializationPromise=this.queue(yi(pi().mark((function r(){var i,a;return pi().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,ps.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=yi(pi().mark((function e(){var t;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=yi(pi().mark((function e(t){var n,r,i,a,o,s,u;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return yo(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,es(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?di(t):null)&&yo(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=yi(pi().mark((function e(t){var n,r=this,i=arguments;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&yo(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(yi(pi().mark((function n(){return pi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(ls(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=yi(pi().mark((function e(){var t,n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ts(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new As(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new Ls(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Wr("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=yi(pi().mark((function e(t,n){var r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return yo(n=t&&ls(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,ps.create(this,[ls(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=yi(pi().mark((function e(t){var n,r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=yi(pi().mark((function e(t){var n=this;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return yo(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return yo(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Is(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=yi(pi().mark((function e(){var t,n,r,i;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ar({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=yi(pi().mark((function e(){var t,n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&lo("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function qs(e){return di(e)}var Vs=function(){function e(t){var n=this;or(this,e),this.auth=t,this.observer=null,this.addObserver=ai((function(e){return n.observer=e}))}return ur(e,[{key:"next",get:function(){return yo(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function zs(e,t,n){var r=qs(e);yo(r._canInitEmulator,r,"emulator-config-failed"),yo(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Bs(t),o=function(e){var t=Bs(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Ws(r.substr(a.length+1))}}var o=nr(r.split(":"),2);return{host:o[0],port:Ws(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Bs(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ws(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Hs=function(){function e(t,n){or(this,e),this.providerId=t,this.signInMethod=n}return ur(e,[{key:"toJSON",value:function(){return ko("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return ko("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return ko("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return ko("not implemented")}}]),e}();function Gs(e,t){return Ks.apply(this,arguments)}function Ks(){return Ks=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ro(t,"POST","/v1/accounts:resetPassword",No(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ks.apply(this,arguments)}function Qs(e,t){return Ys.apply(this,arguments)}function Ys(){return Ys=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ro(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Ys.apply(this,arguments)}function Xs(e,t){return Js.apply(this,arguments)}function Js(){return Js=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ro(t,"POST","/v1/accounts:update",No(t,n)));case 1:case"end":return e.stop()}}),e)}))),Js.apply(this,arguments)}function $s(e,t){return Zs.apply(this,arguments)}function Zs(){return Zs=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oo(t,"POST","/v1/accounts:signInWithPassword",No(t,n)));case 1:case"end":return e.stop()}}),e)}))),Zs.apply(this,arguments)}function eu(e,t){return tu.apply(this,arguments)}function tu(){return tu=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ro(t,"POST","/v1/accounts:sendOobCode",No(t,n)));case 1:case"end":return e.stop()}}),e)}))),tu.apply(this,arguments)}function nu(e,t){return ru.apply(this,arguments)}function ru(){return ru=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eu(t,n));case 1:case"end":return e.stop()}}),e)}))),ru.apply(this,arguments)}function iu(e,t){return au.apply(this,arguments)}function au(){return au=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eu(t,n));case 1:case"end":return e.stop()}}),e)}))),au.apply(this,arguments)}function ou(e,t){return su.apply(this,arguments)}function su(){return su=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eu(t,n));case 1:case"end":return e.stop()}}),e)}))),su.apply(this,arguments)}function uu(e,t){return cu.apply(this,arguments)}function cu(){return cu=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eu(t,n));case 1:case"end":return e.stop()}}),e)}))),cu.apply(this,arguments)}function lu(e,t){return hu.apply(this,arguments)}function hu(){return hu=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oo(t,"POST","/v1/accounts:signInWithEmailLink",No(t,n)));case 1:case"end":return e.stop()}}),e)}))),hu.apply(this,arguments)}function fu(e,t){return du.apply(this,arguments)}function du(){return du=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oo(t,"POST","/v1/accounts:signInWithEmailLink",No(t,n)));case 1:case"end":return e.stop()}}),e)}))),du.apply(this,arguments)}var pu=function(e){fr(n,e);var t=vr(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return or(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return ur(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=yi(pi().mark((function e(t){var n,r,i;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,Ms(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",$s(t,i));case 11:return e.abrupt("return",$s(t,r).catch(function(){var e=yi(pi().mark((function e(n){var i;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Ms(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",$s(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",lu(t,{email:this._email,oobCode:this._password}));case 13:fo(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Qs(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",fu(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:fo(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Hs);function vu(e,t){return mu.apply(this,arguments)}function mu(){return mu=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oo(t,"POST","/v1/accounts:signInWithIdp",No(t,n)));case 1:case"end":return e.stop()}}),e)}))),mu.apply(this,arguments)}var gu=function(e){fr(n,e);var t=vr(n);function n(){var e;return or(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return ur(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return vu(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,vu(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,vu(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ti(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fo("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Xa(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Hs);function yu(e,t){return ku.apply(this,arguments)}function ku(){return ku=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ro(t,"POST","/v1/accounts:sendVerificationCode",No(t,n)));case 1:case"end":return e.stop()}}),e)}))),ku.apply(this,arguments)}function bu(){return bu=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oo(t,"POST","/v1/accounts:signInWithPhoneNumber",No(t,n)));case 1:case"end":return e.stop()}}),e)}))),bu.apply(this,arguments)}function wu(){return wu=yi(pi().mark((function e(t,n){var r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oo(t,"POST","/v1/accounts:signInWithPhoneNumber",No(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw jo(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),wu.apply(this,arguments)}var _u=ar({},"USER_NOT_FOUND","user-not-found");function xu(){return xu=yi(pi().mark((function e(t,n){var r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Oo(t,"POST","/v1/accounts:signInWithPhoneNumber",No(t,r),_u));case 2:case"end":return e.stop()}}),e)}))),xu.apply(this,arguments)}var Eu=function(e){fr(n,e);var t=vr(n);function n(e){var r;return or(this,n),(r=t.call(this,"phone","phone")).params=e,r}return ur(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return bu.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return wu.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return xu.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Hs);var Iu=function(){function e(t){var n,r,i,a,o,s;or(this,e);var u=ni(ri(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);yo(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return ur(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ni(ri(e)).link,n=t?ni(ri(t)).deep_link_id:null,r=ni(ri(e)).deep_link_id;return(r?ni(ri(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(qO){return null}}}]),e}();var Su=function(){function e(){or(this,e),this.providerId=e.PROVIDER_ID}return ur(e,null,[{key:"credential",value:function(e,t){return pu._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Iu.parseLink(t);return yo(n,"argument-error"),pu._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Su.PROVIDER_ID="password",Su.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Su.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Cu=function(){function e(t){or(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return ur(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Tu=function(e){fr(n,e);var t=vr(n);function n(){var e;return or(this,n),(e=t.apply(this,arguments)).scopes=[],e}return ur(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return mi(this.scopes)}}]),n}(Cu),Nu=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.apply(this,arguments)}return ur(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return yo(e.idToken||e.accessToken,"argument-error"),gu._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return yo("providerId"in t&&"signInMethod"in t,"argument-error"),gu._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(Tu),Ru=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.call(this,"facebook.com")}return ur(n,null,[{key:"credential",value:function(e){return gu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(qO){return null}}}]),n}(Tu);Ru.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ru.PROVIDER_ID="facebook.com";var Pu=function(e){fr(n,e);var t=vr(n);function n(){var e;return or(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return ur(n,null,[{key:"credential",value:function(e,t){return gu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(qO){return null}}}]),n}(Tu);Pu.GOOGLE_SIGN_IN_METHOD="google.com",Pu.PROVIDER_ID="google.com";var Au=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.call(this,"github.com")}return ur(n,null,[{key:"credential",value:function(e){return gu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(qO){return null}}}]),n}(Tu);Au.GITHUB_SIGN_IN_METHOD="github.com",Au.PROVIDER_ID="github.com";var Du=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return ur(n,[{key:"_getIdTokenResponse",value:function(e){return vu(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,vu(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,vu(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Hs),Ou=function(e){fr(n,e);var t=vr(n);function n(e){return or(this,n),yo(e.startsWith("saml."),"argument-error"),t.call(this,e)}return ur(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Du.fromJSON(e);return yo(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Du._create(r,n)}catch(i){return null}}}]),n}(Cu),Lu=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.call(this,"twitter.com")}return ur(n,null,[{key:"credential",value:function(e,t){return gu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(qO){return null}}}]),n}(Tu);function Mu(e,t){return Fu.apply(this,arguments)}function Fu(){return Fu=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oo(t,"POST","/v1/accounts:signUp",No(t,n)));case 1:case"end":return e.stop()}}),e)}))),Fu.apply(this,arguments)}Lu.TWITTER_SIGN_IN_METHOD="twitter.com",Lu.PROVIDER_ID="twitter.com";var ju=function(){function e(t){or(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return ur(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=yi(pi().mark((function t(n,r,i){var a,o,s,u,c=arguments;return pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,us._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=Uu(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=yi(pi().mark((function t(n,r,i){var a;return pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Uu(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Uu(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function qu(){return qu=yi(pi().mark((function e(t){var n,r,i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qs(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new ju({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Mu(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,ju._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),qu.apply(this,arguments)}var Vu=function(e){fr(n,e);var t=vr(n);function n(e,r,i,a){var o,s;return or(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(lr(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return ur(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Br);function zu(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Vu._fromErrorAndOperation(e,n,t,r);throw n}))}function Bu(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Wu(e,t){return Hu.apply(this,arguments)}function Hu(){return Hu=yi(pi().mark((function e(t,n){var r,i,a,o;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=di(t),e.next=3,Qu(!0,r,n);case 3:return e.t0=Vo,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Bu(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Hu.apply(this,arguments)}function Gu(e,t){return Ku.apply(this,arguments)}function Ku(){return Ku=yi(pi().mark((function e(t,n){var r,i,a=arguments;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Yo,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",ju._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Ku.apply(this,arguments)}function Qu(e,t,n){return Yu.apply(this,arguments)}function Yu(){return(Yu=yi(pi().mark((function e(t,n,r){var i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,es(n);case 2:i=Bu(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",yo(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xu(e,t){return Ju.apply(this,arguments)}function Ju(){return Ju=yi(pi().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Yo(t,zu(i,a,n,t),r);case 6:return yo((o=e.sent).idToken,i,"internal-error"),yo(s=Qo(o.idToken),i,"internal-error"),u=s.sub,yo(t.uid===u,i,"user-mismatch"),e.abrupt("return",ju._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&fo(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Ju.apply(this,arguments)}function $u(e,t){return Zu.apply(this,arguments)}function Zu(){return Zu=yi(pi().mark((function e(t,n){var r,i,a,o,s=arguments;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,zu(t,i,n);case 4:return a=e.sent,e.next=7,ju._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Zu.apply(this,arguments)}function ec(e,t){return tc.apply(this,arguments)}function tc(){return tc=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$u(qs(t),n));case 1:case"end":return e.stop()}}),e)}))),tc.apply(this,arguments)}function nc(e,t){return rc.apply(this,arguments)}function rc(){return(rc=yi(pi().mark((function e(t,n){var r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=di(t),e.next=3,Qu(!1,r,n.providerId);case 3:return e.abrupt("return",Gu(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ic(e,t){return ac.apply(this,arguments)}function ac(){return(ac=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xu(di(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oc(e,t){return sc.apply(this,arguments)}function sc(){return sc=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oo(t,"POST","/v1/accounts:signInWithCustomToken",No(t,n)));case 1:case"end":return e.stop()}}),e)}))),sc.apply(this,arguments)}function uc(){return uc=yi(pi().mark((function e(t,n){var r,i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qs(t),e.next=3,oc(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,ju._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),uc.apply(this,arguments)}var cc=function(){function e(t,n){or(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return ur(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?lc._fromServerResponse(e,t):"totpInfo"in t?hc._fromServerResponse(e,t):fo(e,"internal-error")}}]),e}(),lc=function(e){fr(n,e);var t=vr(n);function n(e){var r;return or(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return ur(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(cc),hc=function(e){fr(n,e);var t=vr(n);function n(e){return or(this,n),t.call(this,"totp",e)}return ur(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(cc);function fc(e,t,n){var r;yo((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),yo("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(yo(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(yo(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function dc(){return dc=yi(pi().mark((function e(t,n,r){var i,a,o,s;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=qs(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,Ms(a,o,"getOobCode",!0);case 5:return s=e.sent,r&&fc(a,s,r),e.next=9,iu(a,s);case 9:e.next=14;break;case 11:return r&&fc(a,o,r),e.next=14,iu(a,o).catch(function(){var e=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,Ms(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&fc(a,n,r),e.next=8,iu(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),dc.apply(this,arguments)}function pc(){return pc=yi(pi().mark((function e(t,n,r){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gs(di(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),pc.apply(this,arguments)}function vc(){return vc=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xs(di(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),vc.apply(this,arguments)}function mc(e,t){return gc.apply(this,arguments)}function gc(){return gc=yi(pi().mark((function e(t,n){var r,i,a,o;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=di(t),e.next=3,Gs(r,{oobCode:n});case 3:i=e.sent,yo(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return yo(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:yo(i.mfaInfo,r,"internal-error");case 13:yo(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=cc._fromServerResponse(qs(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),gc.apply(this,arguments)}function yc(){return yc=yi(pi().mark((function e(t,n){var r,i;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mc(di(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),yc.apply(this,arguments)}function kc(e,t,n){return bc.apply(this,arguments)}function bc(){return bc=yi(pi().mark((function e(t,n,r){var i,a,o,s,u,c,l;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=qs(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,Ms(a,o,"signUpPassword");case 5:u=e.sent,s=Mu(a,u),e.next=10;break;case 9:s=Mu(a,o).catch(function(){var e=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,Ms(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",Mu(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,s.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,ju._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),bc.apply(this,arguments)}function wc(){return wc=yi(pi().mark((function e(t,n,r){var i,a,o,s,u;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(e,t){yo(t.handleCodeInApp,a,"argument-error"),t&&fc(a,e,t)},a=qs(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,Ms(a,o,"getOobCode",!0);case 6:return u=e.sent,s(u,r),e.next=10,ou(a,u);case 10:e.next=15;break;case 12:return s(o,r),e.next=15,ou(a,o).catch(function(){var e=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Ms(a,o,"getOobCode",!0);case 4:return n=e.sent,s(n,r),e.next=8,ou(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),wc.apply(this,arguments)}function _c(){return _c=yi(pi().mark((function e(t,n,r){var i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=di(t),yo((a=Su.credentialWithLink(n,r||wo()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",ec(i,a));case 4:case"end":return e.stop()}}),e)}))),_c.apply(this,arguments)}function xc(e,t){return Ec.apply(this,arguments)}function Ec(){return Ec=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ro(t,"POST","/v1/accounts:createAuthUri",No(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ec.apply(this,arguments)}function Ic(){return Ic=yi(pi().mark((function e(t,n){var r,i,a,o;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_o()?wo():"http://localhost",i={identifier:n,continueUri:r},e.next=4,xc(di(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Ic.apply(this,arguments)}function Sc(){return(Sc=yi(pi().mark((function e(t,n){var r,i,a,o;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=di(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&fc(r.auth,a,n),e.next=8,nu(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cc(){return(Cc=yi(pi().mark((function e(t,n,r){var i,a,o,s;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=di(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&fc(i.auth,o,r),e.next=8,uu(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tc(e,t){return Nc.apply(this,arguments)}function Nc(){return Nc=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ro(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Nc.apply(this,arguments)}function Rc(){return(Rc=yi(pi().mark((function e(t,n){var r,i,a,o,s,u,c;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=di(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Yo(a,Tc(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pc(e,t,n){return Ac.apply(this,arguments)}function Ac(){return Ac=yi(pi().mark((function e(t,n,r){var i,a,o,s;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Yo(t,Qs(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),Ac.apply(this,arguments)}var Dc=ur((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};or(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Oc=function(e){fr(n,e);var t=vr(n);function n(e,r,i,a){var o;return or(this,n),(o=t.call(this,e,r,i)).username=a,o}return ur(n)}(Dc),Lc=function(e){fr(n,e);var t=vr(n);function n(e,r){return or(this,n),t.call(this,e,"facebook.com",r)}return ur(n)}(Dc),Mc=function(e){fr(n,e);var t=vr(n);function n(e,r){return or(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return ur(n)}(Oc),Fc=function(e){fr(n,e);var t=vr(n);function n(e,r){return or(this,n),t.call(this,e,"google.com",r)}return ur(n)}(Dc),jc=function(e){fr(n,e);var t=vr(n);function n(e,r,i){return or(this,n),t.call(this,e,"twitter.com",r,i)}return ur(n)}(Oc);function Uc(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Qo(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Dc(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Lc(a,i);case"github.com":return new Mc(a,i);case"google.com":return new Fc(a,i);case"twitter.com":return new jc(a,i,e.screenName||null);case"custom":case"anonymous":return new Dc(a,null);default:return new Dc(a,r,i)}}(n)}var qc=function(){function e(t,n,r){or(this,e),this.type=t,this.credential=n,this.auth=r}return ur(e,[{key:"toJSON",value:function(){return{multiFactorSession:ar({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Vc=function(){function e(t,n,r){or(this,e),this.session=t,this.hints=n,this.signInResolver=r}return ur(e,[{key:"resolveSignIn",value:function(){var e=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=qs(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return cc._fromServerResponse(r,e)}));yo(i.mfaPendingCredential,r,"internal-error");var o=qc._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=yi(pi().mark((function e(t){var a,s,u;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,ju._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return yo(n.user,r,"internal-error"),e.abrupt("return",ju._forOperation(n.user,n.operationType,s));case 17:fo(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function zc(e,t){return Ro(e,"POST","/v2/accounts/mfaEnrollment:start",No(e,t))}function Bc(e,t){return Ro(e,"POST","/v2/accounts/mfaEnrollment:start",No(e,t))}function Wc(e,t){return Ro(e,"POST","/v2/accounts/mfaEnrollment:finalize",No(e,t))}function Hc(e,t){return Ro(e,"POST","/v2/accounts/mfaEnrollment:withdraw",No(e,t))}var Gc=function(){function e(t){var n=this;or(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return cc._fromServerResponse(t.auth,e)})))}))}return ur(e,[{key:"getSession",value:function(){var e=yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=qc,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=yi(pi().mark((function e(t,n){var r,i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Yo(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=yi(pi().mark((function e(t){var n,r,i;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,Yo(this.user,Hc(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Kc=new WeakMap;var Qc="__sak",Yc=function(){function e(t,n){or(this,e),this.storageRetriever=t,this.type=n}return ur(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Qc,"1"),this.storage.removeItem(Qc),Promise.resolve(!0)):Promise.resolve(!1)}catch(qO){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Xc=function(e){fr(n,e);var t=vr(n);function n(){var e;return or(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Lr();return gs(e)||xs(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Es(),e._shouldAllowMigration=!0,e}return ur(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);qr()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=yi(pi().mark((function e(t,r){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ya(dr(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=yi(pi().mark((function e(t){var r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ya(dr(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ya(dr(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Yc);Xc.type="LOCAL";var Jc=Xc,$c=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return ur(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Yc);$c.type="SESSION";var Zc=$c;function el(e){return Promise.all(e.map(function(){var e=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var tl=function(){function e(t){or(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return ur(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=yi(pi().mark((function e(t){var n,r,i,a,o,s,u,c;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,el(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function nl(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}tl.receivers=[];var rl=function(){function e(t){or(this,e),this.target=t,this.handlers=new Set}return ur(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=yi(pi().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=nl("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function il(){return window}function al(e){il().location.href=e}function ol(){return"undefined"!==typeof il().WorkerGlobalScope&&"function"===typeof il().importScripts}function sl(){return ul.apply(this,arguments)}function ul(){return(ul=yi(pi().mark((function e(){var t;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function cl(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var ll="firebaseLocalStorageDb",hl="firebaseLocalStorage",fl="fbase_key",dl=function(){function e(t){or(this,e),this.request=t}return ur(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function pl(e,t){return e.transaction([hl],t?"readwrite":"readonly").objectStore(hl)}function vl(){var e=indexedDB.deleteDatabase(ll);return new dl(e).toPromise()}function ml(){var e=indexedDB.open(ll,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(hl,{keyPath:fl})}catch(r){n(r)}})),e.addEventListener("success",yi(pi().mark((function n(){var r;return pi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(hl)){n.next=12;break}return r.close(),n.next=5,vl();case 5:return n.t0=t,n.next=8,ml();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function gl(e,t,n){return yl.apply(this,arguments)}function yl(){return yl=yi(pi().mark((function e(t,n,r){var i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=pl(t,!0).put((ar(i={},fl,n),ar(i,"value",r),i)),e.abrupt("return",new dl(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),yl.apply(this,arguments)}function kl(e,t){return bl.apply(this,arguments)}function bl(){return bl=yi(pi().mark((function e(t,n){var r,i;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pl(t,!1).get(n),e.next=3,new dl(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),bl.apply(this,arguments)}function wl(e,t){var n=pl(e,!0).delete(t);return new dl(n).toPromise()}var _l=function(){function e(){or(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return ur(e,[{key:"_openDb",value:function(){var e=yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,ml();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=yi(pi().mark((function e(t){var n,r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ol()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=yi(pi().mark((function e(){var t=this;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=tl._getInstance(ol()?self:null),this.receiver._subscribe("keyChanged",function(){var e=yi(pi().mark((function e(n,r){var i;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=yi(pi().mark((function e(){var t,n,r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sl();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new rl(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&cl()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=yi(pi().mark((function e(){var t;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,ml();case 5:return t=e.sent,e.next=8,gl(t,Qc,"1");case 8:return e.next=10,wl(t,Qc);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=yi(pi().mark((function e(t,n){var r=this;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return gl(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return kl(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=yi(pi().mark((function e(t){var n=this;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return wl(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=yi(pi().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=pl(e,!1).getAll();return new dl(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=cr(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(yi(pi().mark((function t(){return pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();_l.type="LOCAL";var xl=_l;function El(e,t){return Ro(e,"POST","/v2/accounts/mfaSignIn:start",No(e,t))}function Il(e,t){return Ro(e,"POST","/v2/accounts/mfaSignIn:finalize",No(e,t))}var Sl=1e12,Cl=function(){function e(t){or(this,e),this.auth=t,this.counter=Sl,this._widgets=new Map}return ur(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Tl(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Sl;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Sl;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=yi(pi().mark((function e(t){var n,r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Sl,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Tl=function(){function e(t,n,r){var i=this;or(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;yo(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return ur(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Nl=Os("rcb"),Rl=new Eo(3e4,6e4),Pl=function(){function e(){var t;or(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=il().grecaptcha)||void 0===t?void 0:t.render)}return ur(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return yo(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&Rs(il().grecaptcha)?Promise.resolve(il().grecaptcha):new Promise((function(r,i){var a=il().setTimeout((function(){i(po(e,"network-request-failed"))}),Rl.get());il()[Nl]=function(){il().clearTimeout(a),delete il()[Nl];var o=il().grecaptcha;if(o&&Rs(o)){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(po(e,"internal-error"))},Ds("".concat("https://www.google.com/recaptcha/api.js?","?").concat(ti({onload:Nl,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(po(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=il().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var Al=function(){function e(){or(this,e)}return ur(e,[{key:"load",value:function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Cl(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Dl="recaptcha",Ol={theme:"light",type:"image"},Ll=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Ol),r=arguments.length>2?arguments[2]:void 0;or(this,e),this.parameters=n,this.type=Dl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=qs(r),this.isInvisible="invisible"===this.parameters.size,yo("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;yo(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Al:new Pl,this.validateStartingState()}return ur(e,[{key:"verify",value:function(){var e=yi(pi().mark((function e(){var t,n,r,i=this;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){yo(!this.parameters.sitekey,this.auth,"argument-error"),yo(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),yo("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=il()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){yo(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=yi(pi().mark((function e(){var t,n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=yi(pi().mark((function e(){var t;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yo(_o()&&!ol(),this.auth,"internal-error"),e.next=3,Ml();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Ss(this.auth);case 8:yo(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return yo(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Ml(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Fl=function(){function e(t,n){or(this,e),this.verificationId=t,this.onConfirmation=n}return ur(e,[{key:"confirm",value:function(e){var t=Eu._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function jl(){return jl=yi(pi().mark((function e(t,n,r){var i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qs(t),e.next=3,zl(i,n,di(r));case 3:return a=e.sent,e.abrupt("return",new Fl(a,(function(e){return ec(i,e)})));case 5:case"end":return e.stop()}}),e)}))),jl.apply(this,arguments)}function Ul(e,t,n){return ql.apply(this,arguments)}function ql(){return(ql=yi(pi().mark((function e(t,n,r){var i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=di(t),e.next=3,Qu(!1,i,"phone");case 3:return e.next=5,zl(i.auth,n,di(r));case 5:return a=e.sent,e.abrupt("return",new Fl(a,(function(e){return nc(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vl(){return(Vl=yi(pi().mark((function e(t,n,r){var i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=di(t),e.next=3,zl(i.auth,n,di(r));case 3:return a=e.sent,e.abrupt("return",new Fl(a,(function(e){return ic(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zl(e,t,n){return Bl.apply(this,arguments)}function Bl(){return Bl=yi(pi().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,yo("string"===typeof a,t,"argument-error"),yo(r.type===Dl,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return yo("enroll"===s.type,t,"internal-error"),e.next=13,zc(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return yo("signin"===s.type,t,"internal-error"),yo(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,El(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,yu(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Bl.apply(this,arguments)}function Wl(){return(Wl=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gu(di(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hl=function(){function e(t){or(this,e),this.providerId=e.PROVIDER_ID,this.auth=qs(t)}return ur(e,[{key:"verifyPhoneNumber",value:function(e,t){return zl(this.auth,e,di(t))}}],[{key:"credential",value:function(e,t){return Eu._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Eu._fromTokenResponse(n,r):null}}]),e}();function Gl(e,t){return t?ls(t):(yo(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Hl.PROVIDER_ID="phone",Hl.PHONE_SIGN_IN_METHOD="phone";var Kl=function(e){fr(n,e);var t=vr(n);function n(e){var r;return or(this,n),(r=t.call(this,"custom","custom")).params=e,r}return ur(n,[{key:"_getIdTokenResponse",value:function(e){return vu(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return vu(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return vu(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Hs);function Ql(e){return $u(e.auth,new Kl(e),e.bypassAuthState)}function Yl(e){var t=e.auth,n=e.user;return yo(n,t,"internal-error"),Xu(n,new Kl(e),e.bypassAuthState)}function Xl(e){return Jl.apply(this,arguments)}function Jl(){return Jl=yi(pi().mark((function e(t){var n,r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,yo(r=t.user,n,"internal-error"),e.abrupt("return",Gu(r,new Kl(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Jl.apply(this,arguments)}var $l=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];or(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return ur(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=yi(pi().mark((function t(n,r){return pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=yi(pi().mark((function e(t){var n,r,i,a,o,s,u;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ql;case"linkViaPopup":case"linkViaRedirect":return Xl;case"reauthViaPopup":case"reauthViaRedirect":return Yl;default:fo(this.auth,"internal-error")}}},{key:"resolve",value:function(e){bo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){bo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Zl=new Eo(2e3,1e4);function eh(e,t,n){return th.apply(this,arguments)}function th(){return th=yi(pi().mark((function e(t,n,r){var i,a,o;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qs(t),mo(t,n,Cu),a=Gl(i,r),o=new ah(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),th.apply(this,arguments)}function nh(){return(nh=yi(pi().mark((function e(t,n,r){var i,a,o;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mo((i=di(t)).auth,n,Cu),a=Gl(i.auth,r),o=new ah(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rh(e,t,n){return ih.apply(this,arguments)}function ih(){return(ih=yi(pi().mark((function e(t,n,r){var i,a,o;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mo((i=di(t)).auth,n,Cu),a=Gl(i.auth,r),o=new ah(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ah=function(e){fr(n,e);var t=vr(n);function n(e,r,i,a,o){var s;return or(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=lr(s),s}return ur(n,[{key:"executeNotNull",value:function(){var e=yi(pi().mark((function e(){var t;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return yo(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=yi(pi().mark((function e(){var t,n=this;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bo(1===this.filter.length,"Popup operations only handle one event"),t=nl(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(po(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(po(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(po(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,Zl.get())}()}}]),n}($l);ah.currentPopupAction=null;var oh="pendingRedirect",sh=new Map,uh=function(e){fr(n,e);var t=vr(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return or(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return ur(n,[{key:"execute",value:function(){var e=yi(pi().mark((function e(){var t,r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=sh.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,ch(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Ya(dr(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:sh.set(this.auth._key(),t);case 21:return this.bypassAuthState||sh.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=yi(pi().mark((function e(t){var r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Ya(dr(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Ya(dr(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}($l);function ch(e,t){return lh.apply(this,arguments)}function lh(){return lh=yi(pi().mark((function e(t,n){var r,i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vh(n),i=ph(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),lh.apply(this,arguments)}function hh(e,t){return fh.apply(this,arguments)}function fh(){return fh=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ph(t)._set(vh(n),"true"));case 1:case"end":return e.stop()}}),e)}))),fh.apply(this,arguments)}function dh(e,t){sh.set(e._key(),t)}function ph(e){return ls(e._redirectPersistence)}function vh(e){return ds(oh,e.config.apiKey,e.name)}function mh(e,t,n){return function(e,t,n){return gh.apply(this,arguments)}(e,t,n)}function gh(){return gh=yi(pi().mark((function e(t,n,r){var i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qs(t),mo(t,n,Cu),e.next=4,i._initializationPromise;case 4:return a=Gl(i,r),e.next=7,hh(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),gh.apply(this,arguments)}function yh(e,t,n){return function(e,t,n){return kh.apply(this,arguments)}(e,t,n)}function kh(){return(kh=yi(pi().mark((function e(t,n,r){var i,a,o;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mo((i=di(t)).auth,n,Cu),e.next=4,i.auth._initializationPromise;case 4:return a=Gl(i.auth,r),e.next=7,hh(a,i.auth);case 7:return e.next=9,Sh(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bh(e,t,n){return function(e,t,n){return wh.apply(this,arguments)}(e,t,n)}function wh(){return(wh=yi(pi().mark((function e(t,n,r){var i,a,o;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mo((i=di(t)).auth,n,Cu),e.next=4,i.auth._initializationPromise;case 4:return a=Gl(i.auth,r),e.next=7,Qu(!1,i,n.providerId);case 7:return e.next=9,hh(a,i.auth);case 9:return e.next=11,Sh(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _h(e,t){return xh.apply(this,arguments)}function xh(){return xh=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qs(t)._initializationPromise;case 2:return e.abrupt("return",Eh(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),xh.apply(this,arguments)}function Eh(e,t){return Ih.apply(this,arguments)}function Ih(){return Ih=yi(pi().mark((function e(t,n){var r,i,a,o,s,u=arguments;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=qs(t),a=Gl(i,n),o=new uh(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),Ih.apply(this,arguments)}function Sh(e){return Ch.apply(this,arguments)}function Ch(){return(Ch=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=nl("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Th=function(){function e(t){or(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return ur(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rh(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Rh(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(po(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nh(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Nh(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Nh(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Rh(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Ph(e){return Ah.apply(this,arguments)}function Ah(){return Ah=yi(pi().mark((function e(t){var n,r=arguments;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Ro(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Ah.apply(this,arguments)}var Dh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Oh=/^https?/;function Lh(){return Lh=yi(pi().mark((function e(t){var n,r,i,a,o;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ph(t);case 4:n=e.sent,r=n.authorizedDomains,i=cr(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Mh(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:fo(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Lh.apply(this,arguments)}function Mh(e){var t=wo(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Oh.test(r))return!1;if(Dh.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Fh=new Eo(3e4,6e4);function jh(){var e=il().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=mi(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Uh=null;function qh(e){return Uh=Uh||function(e){return new Promise((function(t,n){var r,i,a;function o(){jh(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){jh(),n(po(e,"network-request-failed"))},timeout:Fh.get()})}if(null===(i=null===(r=il().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=il().gapi)||void 0===a?void 0:a.load)){var s=Os("iframefcb");return il()[s]=function(){gapi.load?o():n(po(e,"network-request-failed"))},Ds("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Uh=null,e}))}(e),Uh}var Vh=new Eo(5e3,15e3),zh="__/auth/iframe",Bh="emulator/auth/iframe",Wh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gh(e){var t=e.config;yo(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Io(t,Bh):"https://".concat(e.config.authDomain,"/").concat(zh),r={apiKey:t.apiKey,appName:e.name,v:va},i=Hh.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(ti(r).slice(1))}function Kh(e){return Qh.apply(this,arguments)}function Qh(){return Qh=yi(pi().mark((function e(t){var n,r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qh(t);case 2:return n=e.sent,yo(r=il().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Gh(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wh,dontclear:!0},(function(e){return new Promise(function(){var n=yi(pi().mark((function n(r,i){var a,o,s;return pi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){il().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=po(t,"network-request-failed"),o=il().setTimeout((function(){i(a)}),Vh.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Qh.apply(this,arguments)}var Yh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Xh=function(){function e(t){or(this,e),this.window=t,this.associatedEvent=null}return ur(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Jh(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},Yh),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Lr().toLowerCase();n&&(s=ys(c)?"_blank":n),ms(c)&&(t=t||"http://localhost",u.scrollbars="yes");var l=Object.entries(u).reduce((function(e,t){var n=nr(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return xs(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new Xh(null);var h=window.open(t||"",s,l);yo(h,e,"popup-blocked");try{h.focus()}catch(f){}return new Xh(h)}var $h="__/auth/handler",Zh="emulator/auth/handler",ef=encodeURIComponent("fac");function tf(e,t,n,r,i,a){return nf.apply(this,arguments)}function nf(){return nf=yi(pi().mark((function e(t,n,r,i,a,o){var s,u,c,l,h,f,d,p,v,m,g,y,k;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(yo(t.config.authDomain,t,"auth-domain-config-required"),yo(t.config.apiKey,t,"invalid-api-key"),s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:va,eventId:a},n instanceof Cu)for(n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",Jr(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters())),u=0,c=Object.entries(o||{});u<c.length;u++)l=nr(c[u],2),h=l[0],f=l[1],s[h]=f;for(n instanceof Tu&&(d=n.getScopes().filter((function(e){return""!==e}))).length>0&&(s.scopes=d.join(",")),t.tenantId&&(s.tid=t.tenantId),p=s,v=0,m=Object.keys(p);v<m.length;v++)g=m[v],void 0===p[g]&&delete p[g];return e.next=10,t._getAppCheckToken();case 10:return y=e.sent,k=y?"#".concat(ef,"=").concat(encodeURIComponent(y)):"",e.abrupt("return","".concat(rf(t),"?").concat(ti(p).slice(1)).concat(k));case 13:case"end":return e.stop()}}),e)}))),nf.apply(this,arguments)}function rf(e){var t=e.config;return t.emulator?Io(t,Zh):"https://".concat(t.authDomain,"/").concat($h)}var af="webStorageSupport",of=function(){function e(){or(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zc,this._completeRedirectFn=Eh,this._overrideRedirectResult=dh}return ur(e,[{key:"_openPopup",value:function(){var e=yi(pi().mark((function e(t,n,r,i){var a,o;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bo(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,tf(t,n,r,wo(),i);case 3:return o=e.sent,e.abrupt("return",Jh(t,o,nl()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=yi(pi().mark((function e(t,n,r,i){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,tf(t,n,r,wo(),i);case 4:return al(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(bo(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=yi(pi().mark((function e(t){var n,r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kh(t);case 2:return n=e.sent,r=new Th(t),n.register("authEvent",(function(e){return yo(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(af,{type:af},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[af];void 0!==i&&t(!!i),fo(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Lh.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Es()||gs()||xs()}}]),e}(),sf=of,uf=function(){function e(t){or(this,e),this.factorId=t}return ur(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return ko("unexpected MultiFactorSessionType")}}}]),e}(),cf=function(e){fr(n,e);var t=vr(n);function n(e){var r;return or(this,n),(r=t.call(this,"phone")).credential=e,r}return ur(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Ro(e,"POST","/v2/accounts/mfaEnrollment:finalize",No(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Ro(e,"POST","/v2/accounts/mfaSignIn:finalize",No(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(uf),lf=function(){function e(){or(this,e)}return ur(e,null,[{key:"assertion",value:function(e){return cf._fromCredential(e)}}]),e}();lf.FACTOR_ID="phone";var hf=function(){function e(){or(this,e)}return ur(e,null,[{key:"assertionForEnrollment",value:function(e,t){return ff._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return ff._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=yi(pi().mark((function e(t){var n,r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yo("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,Bc(n.auth,{idToken:n.credential,totpEnrollmentInfo:{}});case 4:return r=e.sent,e.abrupt("return",df._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();hf.FACTOR_ID="totp";var ff=function(e){fr(n,e);var t=vr(n);function n(e,r,i){var a;return or(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return ur(n,[{key:"_finalizeEnroll",value:function(){var e=yi(pi().mark((function e(t,n,r){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yo("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",Wc(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=yi(pi().mark((function e(t,n){var r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yo(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",Il(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(uf),df=function(){function e(t,n,r,i,a,o,s){or(this,e),this.sessionInfo=o,this.auth=s,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return ur(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(pf(e)||pf(t))&&(r=!0),r&&(pf(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),pf(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function pf(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var vf="@firebase/auth",mf="0.23.2",gf=function(){function e(t){or(this,e),this.auth=t,this.internalListeners=new Map}return ur(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){yo(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var yf;!function(e){var t;null===(t=Pr())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function kf(){return window}yf="Browser",ua(new ki("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,s=o.apiKey,u=o.authDomain;yo(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:s,authDomain:u,clientPlatform:yf,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Is(yf)},l=new Us(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ls);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),ua(new ki("auth-internal",(function(e){return function(e){return new gf(e)}(qs(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),wa(vf,mf,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(yf)),wa(vf,mf,"esm2017");var bf=2e3;function wf(e,t,n){return _f.apply(this,arguments)}function _f(){return _f=yi(pi().mark((function e(t,n,r){var i,a,o,s,u;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=kf(),o=a.BuildInfo,bo(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Tf(n.sessionId);case 4:return s=e.sent,u={},xs()?u.ibi=o.packageName:bs()?u.apn=o.packageName:fo(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",tf(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),_f.apply(this,arguments)}function xf(){return xf=yi(pi().mark((function e(t){var n,r,i;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=kf(),r=n.BuildInfo,i={},xs()?i.iosBundleId=r.packageName:bs()?i.androidPackageName=r.packageName:fo(t,"operation-not-supported-in-this-environment"),e.next=5,Ph(t,i);case 5:case"end":return e.stop()}}),e)}))),xf.apply(this,arguments)}function Ef(e){var t=kf().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function If(e,t,n){return Sf.apply(this,arguments)}function Sf(){return Sf=yi(pi().mark((function e(t,n,r){var i,a,o;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=kf(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(po(t,"redirect-cancelled-by-user"))}),bf))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),bs()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Sf.apply(this,arguments)}function Cf(e){var t,n,r,i,a,o,s,u,c,l,h=kf();yo("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),yo("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),yo("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),yo("function"===typeof(null===(u=null===(s=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),yo("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Tf(e){return Nf.apply(this,arguments)}function Nf(){return(Nf=yi(pi().mark((function e(t){var n,r,i;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Rf(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rf(e){if(bo(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Pf=20,Af=function(e){fr(n,e);var t=vr(n);function n(){var e;return or(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return ur(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Ya(dr(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Th);function Df(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:jf(),postBody:null,tenantId:e.tenantId,error:po(e,"no-auth-event")}}function Of(e,t){return Uf()._set(qf(e),t)}function Lf(e){return Mf.apply(this,arguments)}function Mf(){return Mf=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uf()._get(qf(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Uf()._remove(qf(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Mf.apply(this,arguments)}function Ff(e,t){var n,r,i=function(e){var t=Vf(e),n=t.link?decodeURIComponent(t.link):void 0,r=Vf(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Vf(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Vf(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?po(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function jf(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<Pf;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function Uf(){return ls(Jc)}function qf(e){return ds("authEvent",e.config.apiKey,e.name)}function Vf(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=Qa(e.split("?"));t[0];return ni(t.slice(1).join("?"))}var zf=function(){function e(){or(this,e),this._redirectPersistence=Zc,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Eh,this._overrideRedirectResult=dh}return ur(e,[{key:"_initialize",value:function(){var e=yi(pi().mark((function e(t){var n,r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Af(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){fo(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=yi(pi().mark((function e(t,n,r,i){var a,o,s,u;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cf(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),sh.clear(),e.next=10,this._originValidation(t);case 10:return o=Df(t,r,i),e.next=13,Of(t,o);case 13:return e.next=15,wf(t,o,n);case 15:return s=e.sent,e.next=18,Ef(s);case 18:return u=e.sent,e.abrupt("return",If(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return xf.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=kf(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(yi(pi().mark((function n(){return pi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Lf(e);case 2:t.onEvent(Wf());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=yi(pi().mark((function n(r){var i,a;return pi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Lf(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Ff(i,r.url)),t.onEvent(a||Wf());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");kf().handleOpenURL=function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Bf=zf;function Wf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:po("no-auth-event")}}var Hf=1e3;function Gf(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Kf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr();return!("file:"!==Gf()&&"ionic:"!==Gf()&&"capacitor:"!==Gf()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Qf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr();return qr()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr();return/Edge\/\d+/.test(e)}(e)}function Yf(){try{var e=self.localStorage,t=nl();if(e)return e.setItem(t,"1"),e.removeItem(t),!Qf()||zr()}catch(n){return Xf()&&zr()}return!1}function Xf(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Jf(){return("http:"===Gf()||"https:"===Gf()||jr()||Kf())&&!(Ur()||Fr())&&Yf()&&!Xf()}function $f(){return Kf()&&"undefined"!==typeof document}function Zf(){return ed.apply(this,arguments)}function ed(){return(ed=yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($f()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),Hf);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var td={LOCAL:"local",NONE:"none",SESSION:"session"},nd=yo,rd="persistence";function id(e,t){nd(Object.values(td).includes(t),e,"invalid-persistence-type"),Ur()?nd(t!==td.SESSION,e,"unsupported-persistence-type"):Fr()?nd(t===td.NONE,e,"unsupported-persistence-type"):Xf()?nd(t===td.NONE||t===td.LOCAL&&zr(),e,"unsupported-persistence-type"):nd(t===td.NONE||Yf(),e,"unsupported-persistence-type")}function ad(e){return od.apply(this,arguments)}function od(){return od=yi(pi().mark((function e(t){var n,r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=sd(),r=ds(rd,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),od.apply(this,arguments)}function sd(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var ud=yo,cd=function(){function e(){or(this,e),this.browserResolver=ls(sf),this.cordovaResolver=ls(Bf),this.underlyingResolver=null,this._redirectPersistence=Zc,this._completeRedirectFn=Eh,this._overrideRedirectResult=dh}return ur(e,[{key:"_initialize",value:function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=yi(pi().mark((function e(t,n,r,i){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=yi(pi().mark((function e(t,n,r,i){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return $f()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return ud(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=yi(pi().mark((function e(){var t;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Zf();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ld(e){return e.unwrap()}function hd(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new md(e,function(e,t){var n,r=di(e),i=t;return yo(t.customData.operationType,r,"argument-error"),yo(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Vc._fromError(r,i)}(e,t));else if(r){var i=fd(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function fd(e){var t=(e instanceof Br?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Br)&&"temporaryProof"in t&&"phoneNumber"in t)return Hl.credentialFromResult(e);var n,r=t.providerId;if(!r||r===$a.PASSWORD)return null;switch(r){case $a.GOOGLE:n=Pu;break;case $a.FACEBOOK:n=Ru;break;case $a.GITHUB:n=Au;break;case $a.TWITTER:n=Lu;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?Du._create(r,s):gu._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new Nu(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof Br?n.credentialFromError(e):n.credentialFromResult(e)}function dd(e,t){return t.catch((function(t){throw t instanceof Br&&hd(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,fd(t)),additionalUserInfo:Uc(e),user:gd.getOrCreate(r)}}))}function pd(e,t){return vd.apply(this,arguments)}function vd(){return vd=yi(pi().mark((function e(t,n){var r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return dd(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),vd.apply(this,arguments)}var md=function(){function e(t,n){or(this,e),this.resolver=n,this.auth=t.wrapped()}return ur(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return dd(ld(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),gd=function(){function e(t){or(this,e),this._delegate=t,this.multiFactor=function(e){var t=di(e);return Kc.has(t)||Kc.set(t,Gc._fromUser(t)),Kc.get(t)}(t)}return ur(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dd(this.auth,nc(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pd(this.auth,Ul(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dd(this.auth,rh(this._delegate,t,cd)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ad(qs(this.auth));case 2:return e.abrupt("return",bh(this._delegate,t,cd));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dd(this.auth,ic(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return pd(this.auth,function(e,t,n){return Vl.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return dd(this.auth,function(e,t,n){return nh.apply(this,arguments)}(this._delegate,e,cd))}},{key:"reauthenticateWithRedirect",value:function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ad(qs(this.auth));case 2:return e.abrupt("return",yh(this._delegate,t,cd));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Sc.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wu(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Pc(di(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Pc(di(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Wl.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Rc.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Cc.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();gd.USER_MAP=new WeakMap;var yd=yo,kd=function(){function e(t,n){if(or(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;yd(r,"invalid-api-key",{appName:t.name}),yd(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?cd:void 0;this._delegate=n.initialize({options:{persistence:wd(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(oo),this.linkUnderlyingAuth()}return ur(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?gd.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){zs(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return vc.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return mc(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return pc.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dd(this._delegate,kc(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Ic.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Iu.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=yi(pi().mark((function e(){var t;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yd(Jf(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,_h(this._delegate,cd);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",dd(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){qs(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=bd(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=bd(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return wc.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return dc.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=yi(pi().mark((function e(t){var n,r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:id(this._delegate,t),e.t0=t,e.next=e.t0===td.SESSION?4:e.t0===td.LOCAL?6:e.t0===td.NONE?11:13;break;case 4:return n=Zc,e.abrupt("break",14);case 6:return e.next=8,ls(xl)._isAvailable();case 8:return r=e.sent,n=r?xl:Jc,e.abrupt("break",14);case 11:return n=fs,e.abrupt("break",14);case 13:return e.abrupt("return",fo("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return dd(this._delegate,function(e){return qu.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return dd(this._delegate,ec(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return dd(this._delegate,function(e,t){return uc.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return dd(this._delegate,function(e,t,n){return ec(di(e),Su.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return dd(this._delegate,function(e,t,n){return _c.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return pd(this._delegate,function(e,t,n){return jl.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yd(Jf(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",dd(this._delegate,eh(this._delegate,t,cd)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yd(Jf(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,ad(this._delegate);case 3:return e.abrupt("return",mh(this._delegate,t,cd));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return yc.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function bd(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&gd.getOrCreate(e))},error:t,complete:n}}function wd(e,t){var n=function(e,t){var n=sd();if(!n)return[];var r=ds(rd,e,t);switch(n.getItem(r)){case td.NONE:return[fs];case td.LOCAL:return[xl,Zc];case td.SESSION:return[Zc];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(xl)||n.push(xl),"undefined"!==typeof window)for(var r=0,i=[Jc,Zc];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(fs)||n.push(fs),n}kd.Persistence=td;var _d=function(){function e(){or(this,e),this.providerId="phone",this._delegate=new Hl(ld(Ka.auth()))}return ur(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Hl.credential(e,t)}}]),e}();_d.PHONE_SIGN_IN_METHOD=Hl.PHONE_SIGN_IN_METHOD,_d.PROVIDER_ID=Hl.PROVIDER_ID;var xd,Ed=yo,Id=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ka.app();or(this,e),Ed(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Ll(t,n,i.auth()),this.type=this._delegate.type}return ur(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(xd=Ka).INTERNAL.registerComponent(new ki("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new kd(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Za,PASSWORD_RESET:eo,RECOVER_EMAIL:to,REVERT_SECOND_FACTOR_ADDITION:no,VERIFY_AND_CHANGE_EMAIL:ro,VERIFY_EMAIL:io}},EmailAuthProvider:Su,FacebookAuthProvider:Ru,GithubAuthProvider:Au,GoogleAuthProvider:Pu,OAuthProvider:Nu,SAMLAuthProvider:Ou,PhoneAuthProvider:_d,PhoneMultiFactorGenerator:lf,RecaptchaVerifier:Id,TwitterAuthProvider:Lu,Auth:kd,AuthCredential:Hs,Error:Br}).setInstantiationMode("LAZY").setMultipleInstances(!1)),xd.registerVersion("@firebase/auth-compat","0.4.2");var Sd=function(){function e(t){or(this,e),this.uid=t}return ur(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Sd.UNAUTHENTICATED=new Sd(null),Sd.GOOGLE_CREDENTIALS=new Sd("google-credentials-uid"),Sd.FIRST_PARTY=new Sd("first-party-uid"),Sd.MOCK_USER=new Sd("mock-user");var Cd="9.23.0",Td=new Ri("@firebase/firestore");function Nd(e){if(Td.logLevel<=xi.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Pd);Td.debug.apply(Td,["Firestore (".concat(Cd,"): ").concat(e)].concat(mi(i)))}}function Rd(e){if(Td.logLevel<=xi.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Pd);Td.error.apply(Td,["Firestore (".concat(Cd,"): ").concat(e)].concat(mi(i)))}}function Pd(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ad(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Cd,") INTERNAL ASSERTION FAILED: ")+e;throw Rd(t),new Error(t)}function Dd(e,t){e||Ad()}var Od="invalid-argument",Ld="failed-precondition",Md=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return ur(n)}(Br),Fd=ur((function e(t,n){or(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),jd=function(){function e(){or(this,e)}return ur(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Sd.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Ud=function(){function e(t){var n=this;or(this,e),this.auth=null,t.onInit((function(e){n.auth=e}))}return ur(e,[{key:"getToken",value:function(){var e=this;return this.auth?this.auth.getToken().then((function(t){return t?(Dd("string"==typeof t.accessToken),new Fd(t.accessToken,new Sd(e.auth.getUid()))):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){}},{key:"shutdown",value:function(){}}]),e}(),qd=function(){function e(t,n,r){or(this,e),this.t=t,this.i=n,this.o=r,this.type="FirstParty",this.user=Sd.FIRST_PARTY,this.u=new Map}return ur(e,[{key:"h",value:function(){return this.o?this.o():null}},{key:"headers",get:function(){this.u.set("X-Goog-AuthUser",this.t);var e=this.h();return e&&this.u.set("Authorization",e),this.i&&this.u.set("X-Goog-Iam-Authorization-Token",this.i),this.u}}]),e}(),Vd=function(){function e(t,n,r){or(this,e),this.t=t,this.i=n,this.o=r}return ur(e,[{key:"getToken",value:function(){return Promise.resolve(new qd(this.t,this.i,this.o))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Sd.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),zd=ur((function e(t){or(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Bd=function(){function e(t){var n=this;or(this,e),this.l=t,this.appCheck=null,t.onInit((function(e){n.appCheck=e}))}return ur(e,[{key:"getToken",value:function(){return this.appCheck?this.appCheck.getToken().then((function(e){return e?(Dd("string"==typeof e.token),new zd(e.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){}},{key:"shutdown",value:function(){}}]),e}(),Wd=function(){function e(t,n){or(this,e),this.projectId=t,this.database=n||"(default)"}return ur(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Hd(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var Gd,Kd;(Kd=Gd||(Gd={}))[Kd.OK=0]="OK",Kd[Kd.CANCELLED=1]="CANCELLED",Kd[Kd.UNKNOWN=2]="UNKNOWN",Kd[Kd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kd[Kd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kd[Kd.NOT_FOUND=5]="NOT_FOUND",Kd[Kd.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kd[Kd.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kd[Kd.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kd[Kd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kd[Kd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kd[Kd.ABORTED=10]="ABORTED",Kd[Kd.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kd[Kd.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kd[Kd.INTERNAL=13]="INTERNAL",Kd[Kd.UNAVAILABLE=14]="UNAVAILABLE",Kd[Kd.DATA_LOSS=15]="DATA_LOSS";function Qd(e,t){return e<t?-1:e>t?1:0}var Yd=function(e){fr(n,e);var t=vr(n);function n(){var e;return or(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return ur(n)}(gr(Error)),Xd=function(e){function t(e){or(this,t),this.binaryString=e}return ur(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Qd(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Yd("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Xd.EMPTY_BYTE_STRING=new Xd("");var Jd=function(){function e(t,n,r,i,a){or(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return ur(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Ad();if(this.right.isRed())throw Ad();var e=this.left.check();if(e!==this.right.check())throw Ad();return e+(this.isRed()?0:1)}}]),e}();Jd.EMPTY=null,Jd.RED=!0,Jd.BLACK=!1,Jd.EMPTY=new(function(){function e(){or(this,e),this.size=0}return ur(e,[{key:"key",get:function(){throw Ad()}},{key:"value",get:function(){throw Ad()}},{key:"color",get:function(){throw Ad()}},{key:"left",get:function(){throw Ad()}},{key:"right",get:function(){throw Ad()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Jd(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var $d=new Map;var Zd=function(){function e(t){var n,r;if(or(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Md(Od,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Md(Od,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}!function(e,t,n,r){if(!0===t&&!0===r)throw new Md(Od,"".concat("experimentalForceLongPolling"," and ").concat("experimentalAutoDetectLongPolling"," cannot be used together."))}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Hd(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Md(Od,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Md(Od,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Md(Od,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return ur(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),ep=function(){function e(t,n,r,i){or(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zd({}),this._settingsFrozen=!1}return ur(e,[{key:"app",get:function(){if(!this._app)throw new Md(Ld,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Md(Ld,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zd(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new jd;switch(e.type){case"firstParty":return new Vd(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Md(Od,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=$d.get(e);t&&(Nd("ComponentProvider","Removing Datastore"),$d.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();var tp;tp="".concat(va,"_lite"),Cd=tp,ua(new ki("firestore/lite",(function(e,t){var n=t.instanceIdentifier,r=t.options,i=e.getProvider("app").getImmediate(),a=new ep(new Ud(e.getProvider("auth-internal")),new Bd(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Md(Od,'"projectId" not provided in firebase.initializeApp.');return new Wd(e.options.projectId,t)}(i,n),i);return r&&a._setSettings(r),a}),"PUBLIC").setMultipleInstances(!0)),wa("firestore-lite","3.13.0",""),wa("firestore-lite","3.13.0","esm2017");var np,rp=Ka.initializeApp({apiKey:"AIzaSyDE-Cl5RxG1byLc4pjoBxD3aXWO3wi43P8",authDomain:"diary-6211f.firebaseapp.com",projectId:"diary-6211f",storageBucket:"diary-6211f.appspot.com",messagingSenderId:"765031385372",appId:"1:765031385372:web:9b72a3164df87c4c9712d9",measurementId:"G-5VWBRJH7V4"}),ip=rp.auth(),ap=n(184),op=t.createContext();function sp(){return(0,t.useContext)(op)}function up(e){var n=e.children,r=nr((0,t.useState)(),2),i=r[0],a=r[1],o=nr((0,t.useState)(!0),2),s=o[0],u=o[1];(0,t.useEffect)((function(){return ip.onAuthStateChanged((function(e){a(e),u(!1)}))}),[]);var c={currentUser:i,signup:function(e,t){return ip.createUserWithEmailAndPassword(e,t)},login:function(e,t){return ip.signInWithEmailAndPassword(e,t)},logout:function(){return ip.signOut()},resetPassword:function(e){return ip.sendPasswordResetEmail(e)},updateEmail:function(e){return i.updateEmail(e)},updatePassword:function(e){return i.updatePassword(e)},setUserId:function(){return i}};return(0,ap.jsx)(op.Provider,{value:c,children:!s&&n})}function cp(){return cp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cp.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(np||(np={}));var lp,hp="popstate";function fp(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function dp(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function pp(e,t){return{usr:e.state,key:e.key,idx:t}}function vp(e,t,n,r){return void 0===n&&(n=null),cp({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?gp(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function mp(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function gp(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function yp(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,s=i.v5Compat,u=void 0!==s&&s,c=o.history,l=np.Pop,h=null,f=d();function d(){return(c.state||{idx:null}).idx}function p(){l=np.Pop;var e=d(),t=null==e?null:e-f;f=e,h&&h({action:l,location:m.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:mp(e);return fp(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==f&&(f=0,c.replaceState(cp({},c.state,{idx:f}),""));var m={get action(){return l},get location(){return e(o,c)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(hp,p),h=e,function(){o.removeEventListener(hp,p),h=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=np.Push;var r=vp(m.location,e,t);n&&n(r,e);var i=pp(r,f=d()+1),a=m.createHref(r);try{c.pushState(i,"",a)}catch(aq){if(aq instanceof DOMException&&"DataCloneError"===aq.name)throw aq;o.location.assign(a)}u&&h&&h({action:l,location:m.location,delta:1})},replace:function(e,t){l=np.Replace;var r=vp(m.location,e,t);n&&n(r,e);var i=pp(r,f=d()),a=m.createHref(r);c.replaceState(i,"",a),u&&h&&h({action:l,location:m.location,delta:0})},go:function(e){return c.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(lp||(lp={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function kp(e,t,n){void 0===n&&(n="/");var r=Dp(("string"===typeof t?gp(t):t).pathname||"/",n);if(null==r)return null;var i=bp(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=Rp(i[o],Ap(r));return a}function bp(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(fp(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=Fp([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(fp(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),bp(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:Np(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=cr(wp(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function wp(e){var t=e.split("/");if(0===t.length)return[];var n=Qa(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var s=wp(i.join("/")),u=[];return u.push.apply(u,mi(s.map((function(e){return""===e?o:[o,e].join("/")})))),a&&u.push.apply(u,mi(s)),u.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var _p=/^:\w+$/,xp=3,Ep=2,Ip=1,Sp=10,Cp=-2,Tp=function(e){return"*"===e};function Np(e,t){var n=e.split("/"),r=n.length;return n.some(Tp)&&(r+=Cp),t&&(r+=Ep),n.filter((function(e){return!Tp(e)})).reduce((function(e,t){return e+(_p.test(t)?xp:""===t?Ip:Sp)}),r)}function Rp(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=Pp({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var h=s.route;a.push({params:r,pathname:Fp([i,l.pathname]),pathnameBase:jp(Fp([i,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(i=Fp([i,l.pathnameBase]))}return a}function Pp(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);dp("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=nr(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1),l=a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(aq){return dp(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+aq+")."),e}}(c[n]||"",t),e}),{});return{params:l,pathname:s,pathnameBase:u,pattern:e}}function Ap(e){try{return decodeURI(e)}catch(aq){return dp(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+aq+")."),e}}function Dp(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Op(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Lp(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function Mp(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=gp(e):(fp(!(i=cp({},e)).pathname||!i.pathname.includes("?"),Op("?","pathname","search",i)),fp(!i.pathname||!i.pathname.includes("#"),Op("#","pathname","hash",i)),fp(!i.search||!i.search.includes("#"),Op("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;i.pathname=c.join("/")}a=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?gp(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:Up(a),hash:qp(s)}}(i,a),h=s&&"/"!==s&&s.endsWith("/"),f=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!h&&!f||(l.pathname+="/"),l}var Fp=function(e){return e.join("/").replace(/\/\/+/g,"/")},jp=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},Up=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},qp=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},Vp=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.apply(this,arguments)}return ur(n)}(gr(Error));function zp(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Bp=["post","put","patch","delete"],Wp=(new Set(Bp),["get"].concat(Bp));new Set(Wp),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Hp(){return Hp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hp.apply(this,arguments)}var Gp=t.createContext(null);var Kp=t.createContext(null);var Qp=t.createContext(null);var Yp=t.createContext(null);var Xp=t.createContext(null);var Jp=t.createContext({outlet:null,matches:[],isDataRoute:!1});var $p=t.createContext(null);function Zp(){return null!=t.useContext(Xp)}function ev(){return Zp()||fp(!1),t.useContext(Xp).location}function tv(e){t.useContext(Yp).static||t.useLayoutEffect(e)}function nv(){return t.useContext(Jp).isDataRoute?function(){var e=dv(hv.UseNavigateStable).router,n=vv(fv.UseNavigateStable),r=t.useRef(!1);tv((function(){r.current=!0}));var i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,Hp({fromRouteId:n},i)))}),[e,n]);return i}():function(){Zp()||fp(!1);var e=t.useContext(Gp),n=t.useContext(Yp),r=n.basename,i=n.navigator,a=t.useContext(Jp).matches,o=ev().pathname,s=JSON.stringify(Lp(a).map((function(e){return e.pathnameBase}))),u=t.useRef(!1);tv((function(){u.current=!0}));var c=t.useCallback((function(t,n){if(void 0===n&&(n={}),u.current)if("number"!==typeof t){var a=Mp(t,JSON.parse(s),o,"path"===n.relative);null==e&&"/"!==r&&(a.pathname="/"===a.pathname?r:Fp([r,a.pathname])),(n.replace?i.replace:i.push)(a,n.state,n)}else i.go(t)}),[r,i,s,o,e]);return c}()}var rv=t.createContext(null);function iv(e,n){var r=(void 0===n?{}:n).relative,i=t.useContext(Jp).matches,a=ev().pathname,o=JSON.stringify(Lp(i).map((function(e){return e.pathnameBase})));return t.useMemo((function(){return Mp(e,JSON.parse(o),a,"path"===r)}),[e,o,a,r])}function av(e,n,r){Zp()||fp(!1);var i,a=t.useContext(Yp).navigator,o=t.useContext(Jp).matches,s=o[o.length-1],u=s?s.params:{},c=(s&&s.pathname,s?s.pathnameBase:"/"),l=(s&&s.route,ev());if(n){var h,f="string"===typeof n?gp(n):n;"/"===c||(null==(h=f.pathname)?void 0:h.startsWith(c))||fp(!1),i=f}else i=l;var d=i.pathname||"/",p=kp(e,{pathname:"/"===c?d:d.slice(c.length)||"/"});var v=lv(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:Fp([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:Fp([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,r);return n&&v?t.createElement(Xp.Provider,{value:{location:Hp({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:np.Pop}},v):v}function ov(){var e=function(){var e,n=t.useContext($p),r=pv(fv.UseRouteError),i=vv(fv.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=zp(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}var sv=t.createElement(ov,null),uv=function(e){fr(r,e);var n=vr(r);function r(e){var t;return or(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return ur(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(Jp.Provider,{value:this.props.routeContext},t.createElement($p.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(t.Component);function cv(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(Gp);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(Jp.Provider,{value:n},i)}function lv(e,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==e){var a;if(null==(a=r)||!a.errors)return null;e=r.matches}var o=e,s=null==(i=r)?void 0:i.errors;if(null!=s){var u=o.findIndex((function(e){return e.route.id&&(null==s?void 0:s[e.route.id])}));u>=0||fp(!1),o=o.slice(0,Math.min(o.length,u+1))}return o.reduceRight((function(e,i,a){var u=i.route.id?null==s?void 0:s[i.route.id]:null,c=null;r&&(c=i.route.errorElement||sv);var l=n.concat(o.slice(0,a+1)),h=function(){var n;return n=u?c:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(cv,{match:i,routeContext:{outlet:e,matches:l,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?t.createElement(uv,{location:r.location,revalidation:r.revalidation,component:c,error:u,children:h(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):h()}),null)}var hv=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(hv||{}),fv=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fv||{});function dv(e){var n=t.useContext(Gp);return n||fp(!1),n}function pv(e){var n=t.useContext(Kp);return n||fp(!1),n}function vv(e){var n=function(e){var n=t.useContext(Jp);return n||fp(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||fp(!1),r.route.id}r.startTransition;function mv(e){var n=e.to,r=e.replace,i=e.state,a=e.relative;Zp()||fp(!1);var o=t.useContext(Jp).matches,s=ev().pathname,u=nv(),c=Mp(n,Lp(o).map((function(e){return e.pathnameBase})),s,"path"===a),l=JSON.stringify(c);return t.useEffect((function(){return u(JSON.parse(l),{replace:r,state:i,relative:a})}),[u,l,a,r,i]),null}function gv(e){return function(e){var n=t.useContext(Jp).outlet;return n?t.createElement(rv.Provider,{value:e},n):n}(e.context)}function yv(e){fp(!1)}function kv(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,s=e.navigationType,u=void 0===s?np.Pop:s,c=e.navigator,l=e.static,h=void 0!==l&&l;Zp()&&fp(!1);var f=r.replace(/^\/*/,"/"),d=t.useMemo((function(){return{basename:f,navigator:c,static:h}}),[f,c,h]);"string"===typeof o&&(o=gp(o));var p=o,v=p.pathname,m=void 0===v?"/":v,g=p.search,y=void 0===g?"":g,k=p.hash,b=void 0===k?"":k,w=p.state,_=void 0===w?null:w,x=p.key,E=void 0===x?"default":x,I=t.useMemo((function(){var e=Dp(m,f);return null==e?null:{location:{pathname:e,search:y,hash:b,state:_,key:E},navigationType:u}}),[f,m,y,b,_,E,u]);return null==I?null:t.createElement(Yp.Provider,{value:d},t.createElement(Xp.Provider,{children:a,value:I}))}function bv(e){var t=e.children,n=e.location;return av(xv(t),n)}var wv=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(wv||{}),_v=new Promise((function(){}));t.Component;function xv(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e)){var a=[].concat(mi(n),[i]);if(e.type!==t.Fragment){e.type!==yv&&fp(!1),e.props.index&&e.props.children&&fp(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=xv(e.props.children,a)),r.push(o)}else r.push.apply(r,xv(e.props.children,a))}})),r}function Ev(){return Ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ev.apply(this,arguments)}function Iv(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var Sv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];var Cv=r.startTransition;function Tv(e){var n=e.basename,r=e.children,i=e.future,a=e.window,o=t.useRef();null==o.current&&(o.current=function(e){return void 0===e&&(e={}),yp((function(e,t){var n=e.location;return vp("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:mp(t)}),null,e)}({window:a,v5Compat:!0}));var s=o.current,u=nr(t.useState({action:s.action,location:s.location}),2),c=u[0],l=u[1],h=(i||{}).v7_startTransition,f=t.useCallback((function(e){h&&Cv?Cv((function(){return l(e)})):l(e)}),[l,h]);return t.useLayoutEffect((function(){return s.listen(f)}),[s,f]),t.createElement(kv,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:s})}var Nv="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Rv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pv=t.forwardRef((function(e,n){var r,i=e.onClick,a=e.relative,o=e.reloadDocument,s=e.replace,u=e.state,c=e.target,l=e.to,h=e.preventScrollReset,f=e.unstable_viewTransition,d=Iv(e,Sv),p=t.useContext(Yp).basename,v=!1;if("string"===typeof l&&Rv.test(l)&&(r=l,Nv))try{var m=new URL(window.location.href),g=l.startsWith("//")?new URL(m.protocol+l):new URL(l),y=Dp(g.pathname,p);g.origin===m.origin&&null!=y?l=y+g.search+g.hash:v=!0}catch(w){}var k=function(e,n){var r=(void 0===n?{}:n).relative;Zp()||fp(!1);var i=t.useContext(Yp),a=i.basename,o=i.navigator,s=iv(e,{relative:r}),u=s.hash,c=s.pathname,l=s.search,h=c;return"/"!==a&&(h="/"===c?a:Fp([a,c])),o.createHref({pathname:h,search:l,hash:u})}(l,{relative:a}),b=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,s=r.preventScrollReset,u=r.relative,c=r.unstable_viewTransition,l=nv(),h=ev(),f=iv(e,{relative:u});return t.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:mp(h)===mp(f);l(e,{replace:n,state:o,preventScrollReset:s,relative:u,unstable_viewTransition:c})}}),[h,l,f,a,o,i,e,s,u,c])}(l,{replace:s,state:u,target:c,preventScrollReset:h,relative:a,unstable_viewTransition:f});return t.createElement("a",Ev({},d,{href:r||k,onClick:v||o?i:function(e){i&&i(e),e.defaultPrevented||b(e)},ref:n,target:c}))}));var Av,Dv;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Av||(Av={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Dv||(Dv={}));var Ov=function(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1};var Lv=function(e){return e!==e};var Mv=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1};var Fv=function(e,t,n){return t===t?Mv(e,t,n):Ov(e,Lv,n)};var jv=function(e,t){return!!(null==e?0:e.length)&&Fv(e,t,0)>-1};var Uv=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1};var qv=function(){},Vv=jt&&1/qe(new jt([,-0]))[1]==1/0?function(e){return new jt(e)}:qv,zv=Vv;var Bv=function(e,t,n){var r=-1,i=jv,a=e.length,o=!0,s=[],u=s;if(n)o=!1,i=Uv;else if(a>=200){var c=t?null:zv(e);if(c)return qe(c);o=!1,i=Me,u=new Le}else u=t?[]:s;e:for(;++r<a;){var l=e[r],h=t?t(l):l;if(l=n||0!==l?l:0,o&&h===h){for(var f=u.length;f--;)if(u[f]===h)continue e;t&&u.push(h),s.push(l)}else i(u,h,n)||(u!==s&&u.push(h),s.push(l))}return s};var Wv=function(e){return e&&e.length?Bv(e):[]},Hv=Ct(Object.getPrototypeOf,Object),Gv=Function.prototype,Kv=Object.prototype,Qv=Gv.toString,Yv=Kv.hasOwnProperty,Xv=Qv.call(Object);var Jv=function(e){if(!Ze(e)||"[object Object]"!=G(e))return!1;var t=Hv(e);if(null===t)return!0;var n=Yv.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Qv.call(n)==Xv};var $v=function(e){return"number"==typeof e||Ze(e)&&"[object Number]"==G(e)};var Zv=function(e){return"string"==typeof e||!He(e)&&Ze(e)&&"[object String]"==G(e)};var em=function(e){return!0===e||!1===e||Ze(e)&&"[object Boolean]"==G(e)};var tm=function(e){return null==e};function nm(e,n,r,i){if(void 0===i&&(i={}),"function"!==typeof e&&"string"!==typeof e)throw new Error("createShorthand() Component must be a string or function.");if(tm(r)||em(r))return null;var o=Zv(r),u=$v(r),c=Q(r),l=t.isValidElement(r),h=Jv(r),f=o||u||He(r);if(!c&&!l&&!h&&!f)return null;var d=i.defaultProps,p=void 0===d?{}:d,v=l&&r.props||h&&r||f&&n(r),m=i.overrideProps,g=void 0===m?{}:m;g=Q(g)?g(a({},p,v)):g;var y=a({},p,v,g);if(p.className||g.className||v.className){var k=s(p.className,g.className,v.className);y.className=Wv(k.split(" ")).join(" ")}if((p.style||g.style||v.style)&&(y.style=a({},p.style,v.style,g.style)),tm(y.key)){var b=y.childKey,w=i.autoGenerateKey,_=void 0===w||w;tm(b)?_&&(o||u)&&(y.key=r):(y.key="function"===typeof b?b(y):b,delete y.childKey)}return l?t.cloneElement(r,y):"function"===typeof y.children?y.children(e,a({},y,{children:void 0})):f||h?t.createElement(e,y):c?r(e,y,y.children):void 0}function rm(e,t){if("function"!==typeof e&&"string"!==typeof e)throw new Error("createShorthandFactory() Component must be a string or function.");return function(n,r){return nm(e,t,n,r)}}var im=rm("input",(function(e){return{type:e}})),am=rm("label",(function(e){return{children:e}}));function om(e){var n=e.children,r=e.className,i=e.computer,o=e.color,u=e.floated,c=e.largeScreen,f=e.mobile,k=e.only,b=e.stretched,w=e.tablet,_=e.textAlign,x=e.verticalAlign,E=e.widescreen,I=e.width,S=s(o,l(b,"stretched"),d(k,"only"),p(_),h(u,"floated"),v(x),m(i,"wide computer"),m(c,"wide large screen"),m(f,"wide mobile"),m(w,"wide tablet"),m(E,"wide widescreen"),m(I,"wide"),"column",r),C=g(om,e),T=y(om,e);return t.createElement(T,a({},C,{className:S}),n)}om.handledProps=["as","children","className","color","computer","floated","largeScreen","mobile","only","stretched","tablet","textAlign","verticalAlign","widescreen","width"],om.propTypes={},om.create=rm(om,(function(e){return{children:e}}));var sm=om;function um(e){var n=e.centered,r=e.children,i=e.className,o=e.color,u=e.columns,c=e.divided,h=e.only,f=e.reversed,k=e.stretched,b=e.textAlign,w=e.verticalAlign,_=s(o,l(n,"centered"),l(c,"divided"),l(k,"stretched"),d(h,"only"),d(f,"reversed"),p(b),v(w),m(u,"column",!0),"row",i),x=g(um,e),E=y(um,e);return t.createElement(E,a({},x,{className:_}),r)}um.handledProps=["as","centered","children","className","color","columns","divided","only","reversed","stretched","textAlign","verticalAlign"],um.propTypes={};var cm=um;function lm(e){var n=e.celled,r=e.centered,i=e.children,o=e.className,u=e.columns,c=e.container,h=e.divided,k=e.doubling,b=e.inverted,w=e.padded,_=e.relaxed,x=e.reversed,E=e.stackable,I=e.stretched,S=e.textAlign,C=e.verticalAlign,T=s("ui",l(r,"centered"),l(c,"container"),l(k,"doubling"),l(b,"inverted"),l(E,"stackable"),l(I,"stretched"),f(n,"celled"),f(h,"divided"),f(w,"padded"),f(_,"relaxed"),d(x,"reversed"),p(S),v(C),m(u,"column",!0),"grid",o),N=g(lm,e),R=y(lm,e);return t.createElement(R,a({},N,{className:T}),i)}lm.handledProps=["as","celled","centered","children","className","columns","container","divided","doubling","inverted","padded","relaxed","reversed","stackable","stretched","textAlign","verticalAlign"],lm.Column=sm,lm.Row=cm,lm.propTypes={};var hm=lm;function fm(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,hr(e,t)}var dm=/\s/;var pm=function(e){for(var t=e.length;t--&&dm.test(e.charAt(t)););return t},vm=/^\s+/;var mm=function(e){return e?e.slice(0,pm(e)+1).replace(vm,""):e},gm=/^[-+]0x[0-9a-f]+$/i,ym=/^0b[01]+$/i,km=/^0o[0-7]+$/i,bm=parseInt;var wm=function(e){if("number"==typeof e)return e;if(ln(e))return NaN;if(K(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=K(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=mm(e);var n=ym.test(e);return n||km.test(e)?bm(e.slice(2),n?2:8):gm.test(e)?NaN:+e},_m=1/0;var xm=function(e){return e?(e=wm(e))===_m||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0};var Em=function(e){var t=xm(e),n=t%1;return t===t?n?t-n:t:0};var Im=function(e,t){return kn(t,(function(t){return e[t]}))};var Sm=function(e){return null==e?[]:Im(e,At(e))},Cm=Math.max;var Tm=function(e,t,n,r){e=Pt(e)?e:Sm(e),n=n&&!r?Em(n):0;var i=e.length;return n<0&&(n=Cm(i+n,0)),Zv(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Fv(e,t,n)>-1};var Nm=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e};var Rm=function(e){return"function"==typeof e?e:An};var Pm=function(e,t){return(He(e)?Nm:Un)(e,Rm(t))},Am=["selected","defaultValue","defaultChecked","accept","autoCapitalize","autoComplete","autoCorrect","autoFocus","checked","disabled","enterKeyHint","form","id","inputMode","lang","list","max","maxLength","min","minLength","multiple","name","pattern","placeholder","readOnly","required","step","title","type","value"],Dm=[].concat(Am,["onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onClick","onContextMenu","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"]),Om=["alt","height","src","srcSet","width","loading"],Lm=function(e,t){void 0===t&&(t={});var n=t,r=n.htmlProps,i=void 0===r?Dm:r,a=n.includeAria,o=void 0===a||a,s={},u={};return Pm(e,(function(e,t){var n=o&&(/^aria-.*$/.test(t)||"role"===t);(Tm(i,t)||n?s:u)[t]=e})),[s,u]},Mm="object"===typeof document&&null!==document,Fm="object"===typeof window&&null!==window&&window.self===window,jm=function e(){return tm(e.override)?Mm&&Fm:e.override};var Um=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var qm=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var Vm=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a};var zm=function(e,t){return t.length<2?e:Sn(e,Vm(t,0,-1))};var Bm=function(e,t,n){t=En(t,e);var r=null==(e=zm(e,t))?e:e[In(qm(t))];return null==r?void 0:Um(r,e,n)},Wm=Math.max;var Hm=function(e,t,n){return t=Wm(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=Wm(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(o),Um(e,this,s)}};var Gm=function(e){return function(){return e}},Km=function(){try{var e=ue(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),Qm=Km?function(e,t){return Km(e,"toString",{configurable:!0,enumerable:!1,value:Gm(t),writable:!0})}:An,Ym=Date.now;var Xm=function(e){var t=0,n=0;return function(){var r=Ym(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},Jm=Xm(Qm);var $m=function(e,t){return Jm(Hm(e,t,An),e+"")},Zm=$m(Bm),eg=n(775),tg=n.n(eg),ng=function(e,t){"function"!==typeof e?null!==e&&"object"===typeof e&&(e.current=t):e(t)};function rg(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var ig=n(33);var ag=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).prevNode=void 0,t}fm(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=i.findDOMNode(this);this.prevNode=e,ng(this.props.innerRef,e)},n.componentDidUpdate=function(e){var t=i.findDOMNode(this);this.prevNode!==t&&(this.prevNode=t,ng(this.props.innerRef,t)),e.innerRef!==this.props.innerRef&&ng(this.props.innerRef,t)},n.componentWillUnmount=function(){ng(this.props.innerRef,null),delete this.prevNode},n.render=function(){return this.props.children},t}(t.Component),og=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).currentNode=void 0,t.handleRefOverride=function(e){var n=t.props,r=n.children,i=n.innerRef;ng(r.ref,e),ng(i,e),t.currentNode=e},t}fm(n,e);var r=n.prototype;return r.componentDidUpdate=function(e){e.innerRef!==this.props.innerRef&&ng(this.props.innerRef,this.currentNode)},r.componentWillUnmount=function(){delete this.currentNode},r.render=function(){var e=this.props.children;return t.cloneElement(e,{ref:this.handleRefOverride})},n}(t.Component),sg=["children","innerRef"],ug=function(e){var n=e.children,r=e.innerRef,i=rg(e,sg),a=t.Children.only(n),o=ig.isForwardRef(a)?og:ag,s=a&&i&&Object.keys(i).length>0?t.cloneElement(a,i):a;return t.createElement(o,{innerRef:r},s)},cg=n(854),lg=n.n(cg),hg=Math.max,fg=Math.min;var dg=function(e,t,n){return e>=fg(t,n)&&e<hg(t,n)};var pg=function(e,t,n){return t=xm(t),void 0===n?(n=t,t=0):n=xm(n),e=wm(e),dg(e,t,n)};var vg=function(e){return e&&e.length?e[0]:void 0},mg=function(e,t){if(zn([t,e],tm))return!1;if(t.target&&(Zm(t.target,"setAttribute","data-suir-click-target",!0),document.querySelector("[data-suir-click-target=true]")))return Zm(t.target,"removeAttribute","data-suir-click-target"),e.contains(t.target);var n=t.clientX,r=t.clientY;if(zn([n,r],tm))return!1;var i=e.getClientRects();if(!e.offsetWidth||!e.offsetHeight||!i||!i.length)return!1;var a=vg(i),o=a.top,s=a.bottom,u=a.left,c=a.right;return!zn([o,s,u,c],tm)&&(pg(r,o,s+.001)&&pg(n,u,c+.001))};var gg=function(e){return void 0===e},yg=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=(t=e.call.apply(e,[this].concat(r))||this).constructor,s=o.autoControlledProps,u=o.getAutoControlledStateFromProps,c=Zm(lr(t),"getInitialAutoControlledState",t.props)||{},l=s.reduce((function(e,n){return e[n]=function(e,t,n,r){void 0===r&&(r=!1);var i,a=t[e];if(void 0!==a)return a;if(r){var o=t[(i=e,"default"+(i[0].toUpperCase()+i.slice(1)))];if(void 0!==o)return o;if(n){var s=n[e];if(void 0!==s)return s}}return"checked"!==e&&("value"===e?t.multiple?[]:"":void 0)}(n,t.props,c,!0),e}),{});return t.state=a({},c,l,{autoControlledProps:s,getAutoControlledStateFromProps:u}),t}return fm(t,e),t.getDerivedStateFromProps=function(e,t){var n=t.autoControlledProps,r=t.getAutoControlledStateFromProps,i=n.reduce((function(t,n){return!gg(e[n])&&(t[n]=e[n]),t}),{});if(r){var o=r(e,a({},t,i),t);return a({},i,o)}return i},t.getAutoControlledStateFromProps=function(){return null},t}(t.Component),kg=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleRef=function(e){ng(t.props.innerRef,e)},t}fm(n,e);var r=n.prototype;return r.componentDidMount=function(){Zm(this.props,"onMount",null,this.props)},r.componentWillUnmount=function(){Zm(this.props,"onUnmount",null,this.props)},r.render=function(){if(!jm())return null;var e=this.props,n=e.children,r=e.mountNode,a=void 0===r?document.body:r;return(0,i.createPortal)(t.createElement(ug,{innerRef:this.handleRef},n),a)},n}(t.Component);kg.handledProps=["children","innerRef","mountNode","onMount","onUnmount"],kg.propTypes={};var bg=kg,wg=function(e){function n(){for(var n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=e.call.apply(e,[this].concat(i))||this).contentRef=t.createRef(),n.triggerRef=t.createRef(),n.latestDocumentMouseDownEvent=null,n.handleDocumentMouseDown=function(e){n.latestDocumentMouseDownEvent=e},n.handleDocumentClick=function(e){var t=n.props.closeOnDocumentClick,r=n.latestDocumentMouseDownEvent;n.latestDocumentMouseDownEvent=null,!n.contentRef.current||mg(n.triggerRef.current,e)||r&&mg(n.contentRef.current,r)||mg(n.contentRef.current,e)||t&&n.close(e)},n.handleEscape=function(e){n.props.closeOnEscape&&lg().getCode(e)===lg().Escape&&n.close(e)},n.handlePortalMouseLeave=function(e){var t=n.props,r=t.closeOnPortalMouseLeave,i=t.mouseLeaveDelay;r&&e.target===n.contentRef.current&&(n.mouseLeaveTimer=n.closeWithTimeout(e,i))},n.handlePortalMouseEnter=function(){n.props.closeOnPortalMouseLeave&&clearTimeout(n.mouseLeaveTimer)},n.handleTriggerBlur=function(e){for(var t=n.props,r=t.trigger,i=t.closeOnTriggerBlur,a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];Zm.apply(void 0,[r,"props.onBlur",e].concat(o));var u=e.relatedTarget||document.activeElement,c=Zm(n.contentRef.current,"contains",u);i&&!c&&n.close(e)},n.handleTriggerClick=function(e){for(var t=n.props,r=t.trigger,i=t.closeOnTriggerClick,a=t.openOnTriggerClick,o=n.state.open,s=arguments.length,u=new Array(s>1?s-1:0),c=1;c<s;c++)u[c-1]=arguments[c];Zm.apply(void 0,[r,"props.onClick",e].concat(u)),o&&i?n.close(e):!o&&a&&n.open(e)},n.handleTriggerFocus=function(e){for(var t=n.props,r=t.trigger,i=t.openOnTriggerFocus,a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];Zm.apply(void 0,[r,"props.onFocus",e].concat(o)),i&&n.open(e)},n.handleTriggerMouseLeave=function(e){clearTimeout(n.mouseEnterTimer);for(var t=n.props,r=t.trigger,i=t.closeOnTriggerMouseLeave,a=t.mouseLeaveDelay,o=arguments.length,s=new Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];Zm.apply(void 0,[r,"props.onMouseLeave",e].concat(s)),i&&(n.mouseLeaveTimer=n.closeWithTimeout(e,a))},n.handleTriggerMouseEnter=function(e){clearTimeout(n.mouseLeaveTimer);for(var t=n.props,r=t.trigger,i=t.mouseEnterDelay,a=t.openOnTriggerMouseEnter,o=arguments.length,s=new Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];Zm.apply(void 0,[r,"props.onMouseEnter",e].concat(s)),a&&(n.mouseEnterTimer=n.openWithTimeout(e,i))},n.open=function(e){Zm(n.props,"onOpen",e,a({},n.props,{open:!0})),n.setState({open:!0})},n.openWithTimeout=function(e,t){var r=a({},e);return setTimeout((function(){return n.open(r)}),t||0)},n.close=function(e){n.setState({open:!1}),Zm(n.props,"onClose",e,a({},n.props,{open:!1}))},n.closeWithTimeout=function(e,t){var r=a({},e);return setTimeout((function(){return n.close(r)}),t||0)},n.handleMount=function(){Zm(n.props,"onMount",null,n.props)},n.handleUnmount=function(){Zm(n.props,"onUnmount",null,n.props)},n.handleTriggerRef=function(e){n.triggerRef.current=e,ng(n.props.triggerRef,e)},n}fm(n,e);var r=n.prototype;return r.componentWillUnmount=function(){clearTimeout(this.mouseEnterTimer),clearTimeout(this.mouseLeaveTimer)},r.render=function(){var e=this.props,n=e.children,r=e.eventPool,i=e.mountNode,a=e.trigger,o=this.state.open;return t.createElement(t.Fragment,null,o&&t.createElement(t.Fragment,null,t.createElement(bg,{innerRef:this.contentRef,mountNode:i,onMount:this.handleMount,onUnmount:this.handleUnmount},n),t.createElement(tg(),{name:"mouseleave",on:this.handlePortalMouseLeave,pool:r,target:this.contentRef}),t.createElement(tg(),{name:"mouseenter",on:this.handlePortalMouseEnter,pool:r,target:this.contentRef}),t.createElement(tg(),{name:"mousedown",on:this.handleDocumentMouseDown,pool:r}),t.createElement(tg(),{name:"click",on:this.handleDocumentClick,pool:r}),t.createElement(tg(),{name:"keydown",on:this.handleEscape,pool:r})),a&&t.createElement(ug,{innerRef:this.handleTriggerRef},t.cloneElement(a,{onBlur:this.handleTriggerBlur,onClick:this.handleTriggerClick,onFocus:this.handleTriggerFocus,onMouseLeave:this.handleTriggerMouseLeave,onMouseEnter:this.handleTriggerMouseEnter})))},n}(yg);wg.handledProps=["children","closeOnDocumentClick","closeOnEscape","closeOnPortalMouseLeave","closeOnTriggerBlur","closeOnTriggerClick","closeOnTriggerMouseLeave","defaultOpen","eventPool","mountNode","mouseEnterDelay","mouseLeaveDelay","onClose","onMount","onOpen","onUnmount","open","openOnTriggerClick","openOnTriggerFocus","openOnTriggerMouseEnter","trigger","triggerRef"],wg.propTypes={},wg.defaultProps={closeOnDocumentClick:!0,closeOnEscape:!0,eventPool:"default",openOnTriggerClick:!0},wg.autoControlledProps=["open"],wg.Inner=bg;var _g=wg;function xg(e){var n=e.blurring,r=e.className,i=e.children,o=e.content,u=e.dimmed,c=s(l(n,"blurring"),l(u,"dimmed"),"dimmable",r),h=g(xg,e),f=y(xg,e);return t.createElement(f,a({},h,{className:c}),Bn(i)?o:i)}xg.handledProps=["as","blurring","children","className","content","dimmed"],xg.propTypes={};var Eg=xg,Ig=function(e){function n(){for(var n,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=e.call.apply(e,[this].concat(i))||this).containerRef=(0,t.createRef)(),n.contentRef=(0,t.createRef)(),n.handleClick=function(e){var t=n.contentRef.current;Zm(n.props,"onClick",e,n.props),t&&t!==e.target&&mg(t,e)||Zm(n.props,"onClickOutside",e,n.props)},n}fm(n,e);var r=n.prototype;return r.componentDidMount=function(){var e=this.props.active;this.toggleStyles(e)},r.componentDidUpdate=function(e){var t=this.props.active;e.active!==t&&this.toggleStyles(t)},r.toggleStyles=function(e){var t=this.containerRef.current;t&&t.style&&(e?t.style.setProperty("display","flex","important"):t.style.removeProperty("display"))},r.render=function(){var e=this.props,r=e.active,i=e.children,o=e.className,u=e.content,c=e.disabled,h=e.inverted,f=e.page,d=e.simple,p=e.verticalAlign,m=s("ui",l(r,"active transition visible"),l(c,"disabled"),l(h,"inverted"),l(f,"page"),l(d,"simple"),v(p),"dimmer",o),k=g(n,this.props),b=y(n,this.props),w=Bn(i)?u:i;return t.createElement(ug,{innerRef:this.containerRef},t.createElement(b,a({},k,{className:m,onClick:this.handleClick}),w&&t.createElement("div",{className:"content",ref:this.contentRef},w)))},n}(t.Component);Ig.handledProps=["active","as","children","className","content","disabled","inverted","onClick","onClickOutside","page","simple","verticalAlign"],Ig.propTypes={};var Sg=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handlePortalMount=function(){jm()&&(document.body.classList.add("dimmed"),document.body.classList.add("dimmable"))},t.handlePortalUnmount=function(){jm()&&(document.body.classList.remove("dimmed"),document.body.classList.remove("dimmable"))},t}return fm(n,e),n.prototype.render=function(){var e=this.props,r=e.active,i=e.page,o=g(n,this.props);return i?t.createElement(_g,{closeOnEscape:!1,closeOnDocumentClick:!1,onMount:this.handlePortalMount,onUnmount:this.handlePortalUnmount,open:r,openOnTriggerClick:!1},t.createElement(Ig,a({},o,{active:r,page:i}))):t.createElement(Ig,a({},o,{active:r,page:i}))},n}(t.Component);function Cg(e){var n=e.children,r=e.className,i=e.content,o=e.size,u=s(o,"icons",r),c=g(Cg,e),l=y(Cg,e);return t.createElement(l,a({},c,{className:u}),Bn(n)?i:n)}Sg.handledProps=["active","page"],Sg.propTypes={},Sg.Dimmable=Eg,Sg.Inner=Ig,Sg.create=rm(Sg,(function(e){return{content:e}})),Cg.handledProps=["as","children","className","content","size"],Cg.propTypes={},Cg.defaultProps={as:"i"};var Tg=Cg,Ng=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled?e.preventDefault():Zm(t.props,"onClick",e,t.props)},t}fm(n,e);var r=n.prototype;return r.getIconAriaOptions=function(){var e={},t=this.props,n=t["aria-label"],r=t["aria-hidden"];return tm(n)?e["aria-hidden"]="true":e["aria-label"]=n,tm(r)||(e["aria-hidden"]=r),e},r.render=function(){var e=this.props,r=e.bordered,i=e.circular,o=e.className,u=e.color,c=e.corner,d=e.disabled,p=e.fitted,v=e.flipped,m=e.inverted,k=e.link,b=e.loading,w=e.name,_=e.rotated,x=e.size,E=s(u,w,x,l(r,"bordered"),l(i,"circular"),l(d,"disabled"),l(p,"fitted"),l(m,"inverted"),l(k,"link"),l(b,"loading"),f(c,"corner"),h(v,"flipped"),h(_,"rotated"),"icon",o),I=g(n,this.props),S=y(n,this.props),C=this.getIconAriaOptions();return t.createElement(S,a({},I,C,{className:E,onClick:this.handleClick}))},n}(t.PureComponent);Ng.handledProps=["aria-hidden","aria-label","as","bordered","circular","className","color","corner","disabled","fitted","flipped","inverted","link","loading","name","rotated","size"],Ng.propTypes={},Ng.defaultProps={as:"i"},Ng.Group=Tg,Ng.create=rm(Ng,(function(e){return{name:e}}));var Rg=Ng;function Pg(e){var n=e.children,r=e.className,i=e.content,o=s("detail",r),u=g(Pg,e),c=y(Pg,e);return t.createElement(c,a({},u,{className:o}),Bn(n)?i:n)}Pg.handledProps=["as","children","className","content"],Pg.propTypes={},Pg.create=rm(Pg,(function(e){return{content:e}}));var Ag=Pg;function Dg(e){var n=e.children,r=e.circular,i=e.className,o=e.color,u=e.content,c=e.size,h=e.tag,f=s("ui",o,c,l(r,"circular"),l(h,"tag"),"labels",i),d=g(Dg,e),p=y(Dg,e);return t.createElement(p,a({},d,{className:f}),Bn(n)?u:n)}Dg.handledProps=["as","children","circular","className","color","content","size","tag"],Dg.propTypes={};var Og=Dg,Lg=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props.onClick;n&&n(e,t.props)},t.handleIconOverrides=function(e){return{onClick:function(n){Zm(e,"onClick",n),Zm(t.props,"onRemove",n,t.props)}}},t}return fm(n,e),n.prototype.render=function(){var e=this.props,r=e.active,i=e.attached,o=e.basic,u=e.children,c=e.circular,d=e.className,p=e.color,v=e.content,m=e.corner,k=e.detail,b=e.empty,w=e.floating,_=e.horizontal,x=e.icon,E=e.image,I=e.onRemove,S=e.pointing,C=e.prompt,T=e.removeIcon,N=e.ribbon,R=e.size,P=e.tag,A=s("ui",p,(!0===S?"pointing":("left"===S||"right"===S)&&S+" pointing")||("above"===S||"below"===S)&&"pointing "+S,R,l(r,"active"),l(o,"basic"),l(c,"circular"),l(b,"empty"),l(w,"floating"),l(_,"horizontal"),l(!0===E,"image"),l(C,"prompt"),l(P,"tag"),f(m,"corner"),f(N,"ribbon"),h(i,"attached"),"label",d),D=g(n,this.props),O=y(n,this.props);if(!Bn(u))return t.createElement(O,a({},D,{className:A,onClick:this.handleClick}),u);var L=gg(T)?"delete":T;return t.createElement(O,a({className:A,onClick:this.handleClick},D),Rg.create(x,{autoGenerateKey:!1}),"boolean"!==typeof E&&Ug.create(E,{autoGenerateKey:!1}),v,Ag.create(k,{autoGenerateKey:!1}),I&&Rg.create(L,{autoGenerateKey:!1,overrideProps:this.handleIconOverrides}))},n}(t.Component);function Mg(e){var n=e.children,r=e.className,i=e.content,o=e.size,u=s("ui",o,r,"images"),c=g(Mg,e),l=y(Mg,e);return t.createElement(l,a({},c,{className:u}),Bn(n)?i:n)}Lg.handledProps=["active","as","attached","basic","children","circular","className","color","content","corner","detail","empty","floating","horizontal","icon","image","onClick","onRemove","pointing","prompt","removeIcon","ribbon","size","tag"],Lg.propTypes={},Lg.Detail=Ag,Lg.Group=Og,Lg.create=rm(Lg,(function(e){return{content:e}})),Mg.handledProps=["as","children","className","content","size"],Mg.propTypes={};var Fg=Mg;function jg(e){var n=e.avatar,r=e.bordered,i=e.centered,o=e.children,u=e.circular,c=e.className,d=e.content,p=e.dimmer,m=e.disabled,k=e.floated,b=e.fluid,w=e.hidden,_=e.href,x=e.inline,E=e.label,I=e.rounded,S=e.size,C=e.spaced,T=e.verticalAlign,N=e.wrapped,R=e.ui,P=s(l(R,"ui"),S,l(n,"avatar"),l(r,"bordered"),l(u,"circular"),l(i,"centered"),l(m,"disabled"),l(b,"fluid"),l(w,"hidden"),l(x,"inline"),l(I,"rounded"),f(C,"spaced"),h(k,"floated"),v(T),"image",c),A=g(jg,e),D=Lm(A,{htmlProps:Om}),O=D[0],L=D[1],M=y(jg,e,(function(){if(!tm(p)||!tm(E)||!tm(N)||!Bn(o))return"div"}));return Bn(o)?Bn(d)?"img"===M?t.createElement(M,a({},L,O,{className:P})):t.createElement(M,a({},L,{className:P,href:_}),Sg.create(p,{autoGenerateKey:!1}),Lg.create(E,{autoGenerateKey:!1}),t.createElement("img",O)):t.createElement(M,a({},A,{className:P}),d):t.createElement(M,a({},A,{className:P}),o)}jg.handledProps=["as","avatar","bordered","centered","children","circular","className","content","dimmer","disabled","floated","fluid","hidden","href","inline","label","rounded","size","spaced","ui","verticalAlign","wrapped"],jg.Group=Fg,jg.propTypes={},jg.defaultProps={as:"img",ui:!0},jg.create=rm(jg,(function(e){return{src:e}}));var Ug=jg;function qg(e){var n=e.children,r=e.className,i=e.content,o=e.textAlign,u=s(p(o),"description",r),c=g(qg,e),l=y(qg,e);return t.createElement(l,a({},c,{className:u}),Bn(n)?i:n)}qg.handledProps=["as","children","className","content","textAlign"],qg.propTypes={};var Vg=qg;function zg(e){var n=e.children,r=e.className,i=e.content,o=e.textAlign,u=s(p(o),"header",r),c=g(zg,e),l=y(zg,e);return t.createElement(l,a({},c,{className:u}),Bn(n)?i:n)}zg.handledProps=["as","children","className","content","textAlign"],zg.propTypes={};var Bg=zg;function Wg(e){var n=e.children,r=e.className,i=e.content,o=e.textAlign,u=s(p(o),"meta",r),c=g(Wg,e),l=y(Wg,e);return t.createElement(l,a({},c,{className:u}),Bn(n)?i:n)}Wg.handledProps=["as","children","className","content","textAlign"],Wg.propTypes={};var Hg=Wg;function Gg(e){var n=e.children,r=e.className,i=e.content,o=e.description,u=e.extra,c=e.header,h=e.meta,f=e.textAlign,d=s(l(u,"extra"),p(f),"content",r),v=g(Gg,e),m=y(Gg,e);return Bn(n)?Bn(i)?t.createElement(m,a({},v,{className:d}),nm(Bg,(function(e){return{content:e}}),c,{autoGenerateKey:!1}),nm(Hg,(function(e){return{content:e}}),h,{autoGenerateKey:!1}),nm(Vg,(function(e){return{content:e}}),o,{autoGenerateKey:!1})):t.createElement(m,a({},v,{className:d}),i):t.createElement(m,a({},v,{className:d}),n)}Gg.handledProps=["as","children","className","content","description","extra","header","meta","textAlign"],Gg.propTypes={};var Kg=Gg;var Qg=function(e,t){var n=-1,r=Pt(e)?Array(e.length):[];return Un(e,(function(e,i,a){r[++n]=t(e,i,a)})),r};var Yg=function(e,t){return(He(e)?kn:Qg)(e,Mn(t,3))};function Xg(e){var n=e.centered,r=e.children,i=e.className,o=e.content,u=e.doubling,c=e.items,h=e.itemsPerRow,f=e.stackable,d=e.textAlign,v=s("ui",l(n,"centered"),l(u,"doubling"),l(f,"stackable"),p(d),m(h),"cards",i),k=g(Xg,e),b=y(Xg,e);if(!Bn(r))return t.createElement(b,a({},k,{className:v}),r);if(!Bn(o))return t.createElement(b,a({},k,{className:v}),o);var w=Yg(c,(function(e){var n,r=null!=(n=e.key)?n:[e.header,e.description].join("-");return t.createElement($g,a({key:r},e))}));return t.createElement(b,a({},k,{className:v}),w)}Xg.handledProps=["as","centered","children","className","content","doubling","items","itemsPerRow","stackable","textAlign"],Xg.propTypes={};var Jg=Xg,$g=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props.onClick;n&&n(e,t.props)},t}return fm(n,e),n.prototype.render=function(){var e=this.props,r=e.centered,i=e.children,o=e.className,u=e.color,c=e.content,h=e.description,f=e.extra,d=e.fluid,p=e.header,v=e.href,m=e.image,k=e.link,b=e.meta,w=e.onClick,_=e.raised,x=s("ui",u,l(r,"centered"),l(d,"fluid"),l(k,"link"),l(_,"raised"),"card",o),E=g(n,this.props),I=y(n,this.props,(function(){if(w)return"a"}));return Bn(i)?Bn(c)?t.createElement(I,a({},E,{className:x,href:v,onClick:this.handleClick}),Ug.create(m,{autoGenerateKey:!1,defaultProps:{ui:!1,wrapped:!0}}),(h||p||b)&&t.createElement(Kg,{description:h,header:p,meta:b}),f&&t.createElement(Kg,{extra:!0},f)):t.createElement(I,a({},E,{className:x,href:v,onClick:this.handleClick}),c):t.createElement(I,a({},E,{className:x,href:v,onClick:this.handleClick}),i)},n}(t.Component);function Zg(e){var n=e.children,r=e.className,i=e.content,o=e.hidden,u=e.visible,c=s(l(u,"visible"),l(o,"hidden"),"content",r),h=g(Zg,e),f=y(Zg,e);return t.createElement(f,a({},h,{className:c}),Bn(n)?i:n)}$g.handledProps=["as","centered","children","className","color","content","description","extra","fluid","header","href","image","link","meta","onClick","raised"],$g.propTypes={},$g.Content=Kg,$g.Description=Vg,$g.Group=Jg,$g.Header=Bg,$g.Meta=Hg,Zg.handledProps=["as","children","className","content","hidden","visible"],Zg.propTypes={};var ey=Zg;function ty(e){var n=e.attached,r=e.basic,i=e.buttons,o=e.children,u=e.className,c=e.color,d=e.compact,p=e.content,v=e.floated,k=e.fluid,b=e.icon,w=e.inverted,_=e.labeled,x=e.negative,E=e.positive,I=e.primary,S=e.secondary,C=e.size,T=e.toggle,N=e.vertical,R=e.widths,P=s("ui",c,C,l(r,"basic"),l(d,"compact"),l(k,"fluid"),l(b,"icon"),l(w,"inverted"),l(_,"labeled"),l(x,"negative"),l(E,"positive"),l(I,"primary"),l(S,"secondary"),l(T,"toggle"),l(N,"vertical"),f(n,"attached"),h(v,"floated"),m(R),"buttons",u),A=g(ty,e),D=y(ty,e);return tm(i)?t.createElement(D,a({},A,{className:P}),Bn(o)?p:o):t.createElement(D,a({},A,{className:P}),Yg(i,(function(e){return oy.create(e)})))}ty.handledProps=["as","attached","basic","buttons","children","className","color","compact","content","floated","fluid","icon","inverted","labeled","negative","positive","primary","secondary","size","toggle","vertical","widths"],ty.propTypes={};var ny=ty;function ry(e){var n=e.className,r=e.text,i=s("or",n),o=g(ry,e),u=y(ry,e);return t.createElement(u,a({},o,{className:i,"data-text":r}))}ry.handledProps=["as","className","text"],ry.propTypes={};var iy=ry,ay=function(e){function n(){for(var n,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=e.call.apply(e,[this].concat(i))||this).ref=(0,t.createRef)(),n.computeElementType=function(){var e=n.props,t=e.attached,r=e.label;if(!tm(t)||!tm(r))return"div"},n.computeTabIndex=function(e){var t=n.props,r=t.disabled,i=t.tabIndex;return tm(i)?r?-1:"div"===e?0:void 0:i},n.focus=function(e){return Zm(n.ref.current,"focus",e)},n.handleClick=function(e){n.props.disabled?e.preventDefault():Zm(n.props,"onClick",e,n.props)},n.hasIconClass=function(){var e=n.props,t=e.labelPosition,r=e.children,i=e.content,a=e.icon;return!0===a||a&&(t||Bn(r)&&tm(i))},n}fm(n,e);var r=n.prototype;return r.computeButtonAriaRole=function(e){var t=this.props.role;return tm(t)?"button"!==e?"button":void 0:t},r.render=function(){var e=this.props,r=e.active,i=e.animated,o=e.attached,u=e.basic,c=e.children,d=e.circular,p=e.className,v=e.color,m=e.compact,k=e.content,b=e.disabled,w=e.floated,_=e.fluid,x=e.icon,E=e.inverted,I=e.label,S=e.labelPosition,C=e.loading,T=e.negative,N=e.positive,R=e.primary,P=e.secondary,A=e.size,D=e.toggle,O=e.type,L=s(v,A,l(r,"active"),l(u,"basic"),l(d,"circular"),l(m,"compact"),l(_,"fluid"),l(this.hasIconClass(),"icon"),l(E,"inverted"),l(C,"loading"),l(T,"negative"),l(N,"positive"),l(R,"primary"),l(P,"secondary"),l(D,"toggle"),f(i,"animated"),f(o,"attached")),M=s(f(S||!!I,"labeled")),F=s(l(b,"disabled"),h(w,"floated")),j=g(n,this.props),U=y(n,this.props,this.computeElementType),q=this.computeTabIndex(U);if(!tm(I)){var V=s("ui",L,"button",p),z=s("ui",M,"button",p,F),B=Lg.create(I,{defaultProps:{basic:!0,pointing:"left"===S?"right":"left"},autoGenerateKey:!1});return t.createElement(U,a({},j,{className:z,onClick:this.handleClick}),"left"===S&&B,t.createElement(ug,{innerRef:this.ref},t.createElement("button",{className:V,"aria-pressed":D?!!r:void 0,disabled:b,type:O,tabIndex:q},Rg.create(x,{autoGenerateKey:!1})," ",k)),("right"===S||!S)&&B)}var W=s("ui",L,F,M,"button",p),H=!Bn(c),G=this.computeButtonAriaRole(U);return t.createElement(ug,{innerRef:this.ref},t.createElement(U,a({},j,{className:W,"aria-pressed":D?!!r:void 0,disabled:b&&"button"===U||void 0,onClick:this.handleClick,role:G,type:O,tabIndex:q}),H&&c,!H&&Rg.create(x,{autoGenerateKey:!1}),!H&&k))},n}(t.Component);ay.handledProps=["active","animated","as","attached","basic","children","circular","className","color","compact","content","disabled","floated","fluid","icon","inverted","label","labelPosition","loading","negative","onClick","positive","primary","role","secondary","size","tabIndex","toggle","type"],ay.propTypes={},ay.defaultProps={as:"button"},ay.Content=ey,ay.Group=ny,ay.Or=iy,ay.create=rm(ay,(function(e){return{content:e}}));var oy=ay;var sy=function(e,t,n){"__proto__"==t&&Km?Km(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},uy=Object.prototype.hasOwnProperty;var cy=function(e,t,n){var r=e[t];uy.call(e,t)&&w(r,n)&&(void 0!==n||t in e)||sy(e,t,n)};var ly=function(e,t,n,r){if(!K(e))return e;for(var i=-1,a=(t=En(t,e)).length,o=a-1,s=e;null!=s&&++i<a;){var u=In(t[i]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=o){var l=s[u];void 0===(c=r?r(l,u,s):void 0)&&(c=K(l)?l:ft(t[i+1])?[]:{})}cy(s,u,c),s=s[u]}return e};var hy=function(e,t,n){return null==e?e:ly(e,t,n)},fy=function(e){function n(){for(var n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=e.call.apply(e,[this].concat(i))||this).inputRef=(0,t.createRef)(),n.labelRef=(0,t.createRef)(),n.canToggle=function(){var e=n.props,t=e.disabled,r=e.radio,i=e.readOnly,a=n.state.checked;return!t&&!i&&!(r&&a)},n.computeTabIndex=function(){var e=n.props,t=e.disabled,r=e.tabIndex;return tm(r)?t?-1:0:r},n.handleClick=function(e){var t=n.props.id,r=n.state,i=r.checked,o=r.indeterminate,s=Zm(n.inputRef.current,"contains",e.target),u=Zm(n.labelRef.current,"contains",e.target),c=!u&&!s,l=!tm(t);u&&l||Zm(n.props,"onClick",e,a({},n.props,{checked:!i,indeterminate:!!o})),n.isClickFromMouse&&(n.isClickFromMouse=!1,u&&!l&&n.handleChange(e),c&&n.handleChange(e),u&&l&&e.stopPropagation())},n.handleChange=function(e){var t=n.state.checked;n.canToggle()&&(Zm(n.props,"onChange",e,a({},n.props,{checked:!t,indeterminate:!1})),n.setState({checked:!t,indeterminate:!1}))},n.handleMouseDown=function(e){var t=n.state,r=t.checked,i=t.indeterminate;Zm(n.props,"onMouseDown",e,a({},n.props,{checked:!!r,indeterminate:!!i})),e.defaultPrevented||Zm(n.inputRef.current,"focus"),e.preventDefault()},n.handleMouseUp=function(e){var t=n.state,r=t.checked,i=t.indeterminate;n.isClickFromMouse=!0,Zm(n.props,"onMouseUp",e,a({},n.props,{checked:!!r,indeterminate:!!i}))},n.setIndeterminate=function(){var e=n.state.indeterminate;hy(n.inputRef,"current.indeterminate",!!e)},n}fm(n,e);var r=n.prototype;return r.componentDidMount=function(){this.setIndeterminate()},r.componentDidUpdate=function(){this.setIndeterminate()},r.render=function(){var e=this.props,r=e.className,i=e.disabled,o=e.label,u=e.id,c=e.name,h=e.radio,f=e.readOnly,d=e.slider,p=e.toggle,v=e.type,m=e.value,k=this.state,b=k.checked,w=k.indeterminate,_=s("ui",l(b,"checked"),l(i,"disabled"),l(w,"indeterminate"),l(tm(o),"fitted"),l(h,"radio"),l(f,"read-only"),l(d,"slider"),l(p,"toggle"),"checkbox",r),x=g(n,this.props),E=y(n,this.props),I=Lm(x,{htmlProps:Am}),S=I[0],C=I[1],T=am(o,{defaultProps:{htmlFor:u},autoGenerateKey:!1})||t.createElement("label",{htmlFor:u});return t.createElement(E,a({},C,{className:_,onClick:this.handleClick,onChange:this.handleChange,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp}),t.createElement(ug,{innerRef:this.inputRef},t.createElement("input",a({},S,{checked:b,className:"hidden",disabled:i,id:u,name:c,readOnly:!0,tabIndex:this.computeTabIndex(),type:v,value:m}))),t.createElement(ug,{innerRef:this.labelRef},T))},n}(yg);function dy(e){var n=e.slider,r=e.toggle,i=e.type,o=g(dy,e),s=!(n||r)||void 0;return t.createElement(fy,a({},o,{type:i,radio:s,slider:n,toggle:r}))}fy.handledProps=["as","checked","className","defaultChecked","defaultIndeterminate","disabled","fitted","id","indeterminate","label","name","onChange","onClick","onMouseDown","onMouseUp","radio","readOnly","slider","tabIndex","toggle","type","value"],fy.propTypes={},fy.defaultProps={type:"checkbox"},fy.autoControlledProps=["checked","indeterminate"],dy.handledProps=["slider","toggle","type"],dy.propTypes={},dy.defaultProps={type:"radio"};var py=dy;function vy(e){var n=e.children,r=e.className,i=e.content,o=e.control,u=e.disabled,c=e.error,h=e.inline,f=e.label,d=e.required,p=e.type,v=e.width,k=e.id,b=s(l(u,"disabled"),l(c,"error"),l(h,"inline"),l(d,"required"),m(v,"wide"),"field",r),w=g(vy,e),_=y(vy,e),x=Cn(c,"pointing","above"),E=Lg.create(c,{autoGenerateKey:!1,defaultProps:{prompt:!0,pointing:x,id:k?k+"-error-message":void 0,role:"alert","aria-atomic":!0}}),I=("below"===x||"right"===x)&&E,S=("above"===x||"left"===x)&&E;if(tm(o))return tm(f)?t.createElement(_,a({},w,{className:b,id:k}),Bn(n)?i:n):t.createElement(_,a({},w,{className:b,id:k}),I,am(f,{autoGenerateKey:!1}),S);var C={"aria-describedby":k&&c?k+"-error-message":null,"aria-invalid":!!c||void 0},T=a({},w,{content:i,children:n,disabled:u,required:d,type:p,id:k});return"input"!==o||"checkbox"!==p&&"radio"!==p?o===fy||o===py?t.createElement(_,{className:b},I,(0,t.createElement)(o,a({},C,T,{label:f})),S):t.createElement(_,{className:b},am(f,{defaultProps:{htmlFor:k},autoGenerateKey:!1}),I,(0,t.createElement)(o,a({},C,T)),S):t.createElement(_,{className:b},t.createElement("label",null,I,(0,t.createElement)(o,a({},C,T))," ",f,S))}vy.handledProps=["as","children","className","content","control","disabled","error","id","inline","label","required","type","width"],vy.propTypes={};var my=vy;function gy(e){var n=e.control,r=g(gy,e),i=y(gy,e);return t.createElement(i,a({},r,{control:n}))}gy.handledProps=["as","control"],gy.propTypes={},gy.defaultProps={as:my,control:oy};var yy=gy;function ky(e){var n=e.control,r=g(ky,e),i=y(ky,e);return t.createElement(i,a({},r,{control:n}))}ky.handledProps=["as","control"],ky.propTypes={},ky.defaultProps={as:my,control:fy};var by=ky;var wy=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i};var _y=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0};var xy=function(e,t){var n=!0;return Un(e,(function(e,r,i){return n=!!t(e,r,i)})),n};var Ey=function(e,t,n){var r=He(e)?_y:xy;return n&&Vn(e,t,n)&&(t=void 0),r(e,Mn(t,3))};var Iy=function(e,t,n,r){var i=-1,a=jv,o=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=kn(t,mt(n))),r?(a=Uv,o=!1):t.length>=200&&(a=Me,o=!1,t=new Le(t));e:for(;++i<s;){var l=e[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,o&&h===h){for(var f=c;f--;)if(t[f]===h)continue e;u.push(l)}else a(t,h,r)||u.push(l)}return u};var Sy=function(e){return Ze(e)&&Pt(e)},Cy=$m((function(e,t){return Sy(e)?Iy(e,t):[]})),Ty=Cy;var Ny=function(e){return function(t,n,r){var i=Object(t);if(!Pt(t)){var a=Mn(n,3);t=At(t),n=function(e){return a(i[e],e,i)}}var o=e(t,n,r);return o>-1?i[a?t[o]:o]:void 0}},Ry=Math.max;var Py=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Em(n);return i<0&&(i=Ry(r+i,0)),Ov(e,Mn(t,3),i)},Ay=Ny(Py);var Dy=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||void 0===t?1:Em(t),Vm(e,0,(t=r-t)<0?0:t)):[]},Oy=Object.prototype.hasOwnProperty;var Ly=function(e){if(null==e)return!0;if(Pt(e)&&(He(e)||"string"==typeof e||"function"==typeof e.splice||lt(e)||_t(e)||at(e)))return!e.length;var t=Jt(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(St(e))return!Rt(e).length;for(var n in e)if(Oy.call(e,n))return!1;return!0},My=Dn("length"),Fy=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var jy=function(e){return Fy.test(e)},Uy="\\ud800-\\udfff",qy="["+Uy+"]",Vy="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",zy="\\ud83c[\\udffb-\\udfff]",By="[^"+Uy+"]",Wy="(?:\\ud83c[\\udde6-\\uddff]){2}",Hy="[\\ud800-\\udbff][\\udc00-\\udfff]",Gy="(?:"+Vy+"|"+zy+")"+"?",Ky="[\\ufe0e\\ufe0f]?",Qy=Ky+Gy+("(?:\\u200d(?:"+[By,Wy,Hy].join("|")+")"+Ky+Gy+")*"),Yy="(?:"+[By+Vy+"?",Vy,Wy,Hy,qy].join("|")+")",Xy=RegExp(zy+"(?="+zy+")|"+Yy+Qy,"g");var Jy=function(e){for(var t=Xy.lastIndex=0;Xy.test(e);)++t;return t};var $y=function(e){return jy(e)?Jy(e):My(e)};var Zy=function(e){if(null==e)return 0;if(Pt(e))return Zv(e)?$y(e):e.length;var t=Jt(e);return"[object Map]"==t||"[object Set]"==t?e.size:Rt(e).length},ek=F?F.isConcatSpreadable:void 0;var tk=function(e){return He(e)||at(e)||!!(ek&&e&&e[ek])};var nk=function e(t,n,r,i,a){var o=-1,s=t.length;for(r||(r=tk),a||(a=[]);++o<s;){var u=t[o];n>0&&r(u)?n>1?e(u,n-1,r,i,a):We(a,u):i||(a[a.length]=u)}return a},rk=$m((function(e,t){return Sy(e)?Iy(e,nk(t,1,Sy,!0)):[]})),ik=rk,ak=$m((function(e){return Bv(nk(e,1,Sy,!0))}));var ok=function(e,t){return rn(e,t)};var sk=function(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=Sn(e,o);n(s,o)&&ly(a,En(o,e),s)}return a};var uk=function(e,t){return sk(e,t,(function(t,n){return Rn(e,n)}))};var ck=function(e){return(null==e?0:e.length)?nk(e,1):[]};var lk=function(e){return Jm(Hm(e,void 0,ck),e+"")}((function(e,t){return null==e?{}:uk(e,t)})),hk=n(613),fk=n.n(hk),dk=function(e){function n(){return e.apply(this,arguments)||this}return fm(n,e),n.prototype.render=function(){var e=this.props,r=e.className,i=e.name,o=s(i,"flag",r),u=g(n,this.props),c=y(n,this.props);return t.createElement(c,a({},u,{className:o}))},n}(t.PureComponent);dk.handledProps=["as","className","name"],dk.propTypes={},dk.defaultProps={as:"i"},dk.create=rm(dk,(function(e){return{name:e}}));var pk=dk;function vk(e){var n=e.className,r=s("divider",n),i=g(vk,e),o=y(vk,e);return t.createElement(o,a({},i,{className:r}))}vk.handledProps=["as","className"],vk.propTypes={};var mk=vk,gk=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){Zm(t.props,"onClick",e,t.props)},t}return fm(n,e),n.prototype.render=function(){var e=this.props,r=e.active,i=e.children,o=e.className,u=e.content,c=e.disabled,h=e.description,f=e.flag,d=e.icon,p=e.image,v=e.label,m=e.selected,k=e.text,b=s(l(r,"active"),l(c,"disabled"),l(m,"selected"),"item",o),w=tm(d)?function(e,n){return zn(t.Children.toArray(e),{type:n})}(i,"DropdownMenu")&&"dropdown":d,_=g(n,this.props),x=y(n,this.props),E={role:"option","aria-disabled":c,"aria-checked":r,"aria-selected":m};if(!Bn(i))return t.createElement(x,a({},_,E,{className:b,onClick:this.handleClick}),i);var I=pk.create(f,{autoGenerateKey:!1}),S=Rg.create(w,{autoGenerateKey:!1}),C=Ug.create(p,{autoGenerateKey:!1}),T=Lg.create(v,{autoGenerateKey:!1}),N=nm("span",(function(e){return{children:e}}),h,{defaultProps:{className:"description"},autoGenerateKey:!1}),R=nm("span",(function(e){return{children:e}}),Bn(u)?k:u,{defaultProps:{className:"text"},autoGenerateKey:!1});return t.createElement(x,a({},_,E,{className:b,onClick:this.handleClick}),C,S,I,T,N,R)},n}(t.Component);gk.handledProps=["active","as","children","className","content","description","disabled","flag","icon","image","label","onClick","selected","text","value"],gk.propTypes={},gk.create=rm(gk,(function(e){return e}));var yk=gk;function kk(e){var n=e.children,r=e.className,i=e.content,o=e.icon,u=s("header",r),c=g(kk,e),l=y(kk,e);return Bn(n)?t.createElement(l,a({},c,{className:u}),Rg.create(o,{autoGenerateKey:!1}),i):t.createElement(l,a({},c,{className:u}),n)}kk.handledProps=["as","children","className","content","icon"],kk.propTypes={},kk.create=rm(kk,(function(e){return{content:e}}));var bk=kk;function wk(e){var n=e.children,r=e.className,i=e.content,o=e.direction,u=e.open,c=e.scrolling,h=s(o,l(u,"visible"),l(c,"scrolling"),"menu transition",r),f=g(wk,e),d=y(wk,e);return t.createElement(d,a({},f,{className:h}),Bn(n)?i:n)}wk.handledProps=["as","children","className","content","direction","open","scrolling"],wk.propTypes={};var _k=wk,xk=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleChange=function(e){var n=Cn(e,"target.value");Zm(t.props,"onChange",e,a({},t.props,{value:n}))},t}return fm(n,e),n.prototype.render=function(){var e=this.props,r=e.autoComplete,i=e.className,o=e.tabIndex,u=e.type,c=e.value,l=s("search",i),h=g(n,this.props);return t.createElement("input",a({},h,{"aria-autocomplete":"list",autoComplete:r,className:l,onChange:this.handleChange,tabIndex:o,type:u,value:c}))},n}(t.Component);xk.handledProps=["as","autoComplete","className","tabIndex","type","value"],xk.propTypes={},xk.defaultProps={autoComplete:"off",type:"text"},xk.create=rm(xk,(function(e){return{type:e}}));var Ek=xk;function Ik(e){var n=e.children,r=e.className,i=e.content,o=s("divider",r),u=g(Ik,e),c=y(Ik,e);return t.createElement(c,a({"aria-atomic":!0,"aria-live":"polite",role:"alert"},u,{className:o}),Bn(n)?i:n)}Ik.handledProps=["as","children","className","content"],Ik.propTypes={},Ik.create=rm(Ik,(function(e){return{content:e}}));var Sk=Ik,Ck=/[\\^$.*+?()[\]{}|]/g,Tk=RegExp(Ck.source);var Nk=function(e){return(e=xn(e))&&Tk.test(e)?e.replace(Ck,"\\$&"):e};var Rk=function(e){return function(t){return null==e?void 0:e[t]}}({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),Pk=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ak=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var Dk=function(e){return(e=xn(e))&&e.replace(Pk,Rk).replace(Ak,"")};var Ok=function(e,t){var n=[];return Un(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n};var Lk=function(e,t){return(He(e)?Ke:Ok)(e,Mn(t,3))};function Mk(e){var n=e.additionLabel,r=e.additionPosition,i=e.allowAdditions,a=e.deburr,o=e.multiple,s=e.options,u=e.search,c=e.searchQuery,l=e.value,h=s;if(o&&(h=Lk(h,(function(e){return!Tm(l,e.value)}))),u&&c)if(Q(u))h=u(h,c);else{var f=a?Dk(c):c,d=new RegExp(Nk(f),"i");h=Lk(h,(function(e){return d.test(a?Dk(e.text):e.text)}))}if(i&&u&&c&&!zn(h,{text:c})){var p={key:"addition",text:[t.isValidElement(n)?t.cloneElement(n,{key:"addition-label"}):n||"",t.createElement("b",{key:"addition-query"},c)],value:c,className:"addition","data-additional":!0};"top"===r?h.unshift(p):h.push(p)}return h}Mk.handledProps=[];var Fk=function(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n};var jk=function(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n};var Uk=function(e,t,n){var r=He(e)?Fk:jk,i=arguments.length<3;return r(e,Mn(t,4),n,i,Un)};function qk(e){var t,n=e.additionLabel,r=e.additionPosition,i=e.allowAdditions,a=e.deburr,o=e.multiple,s=e.options,u=e.search,c=e.searchQuery,l=e.selectedIndex,h=e.value,f=Mk({value:h,options:s,searchQuery:c,additionLabel:n,additionPosition:r,allowAdditions:i,deburr:a,multiple:o,search:u}),d=Uk(f,(function(e,t,n){return t.disabled||e.push(n),e}),[]);if(!l||l<0){var p=d[0];t=o?p:Py(f,["value",h])||d[0]}else if(o)t=Ay(d,(function(e){return e>=l})),l>=f.length-1&&(t=d[d.length-1]);else{var v=Py(f,["value",h]);t=Tm(d,v)?v:void 0}return(!t||t<0)&&(t=d[0]),t}var Vk=function(e,t){return tm(e)?t:e},zk=function(e){return e?e.map((function(e){return lk(e,["key","value"])})):e};function Bk(e){var n=e.flag,r=e.image,i=e.text;return Q(i)?i:{content:t.createElement(t.Fragment,null,pk.create(n),Ug.create(r),i)}}var Wk=function(e){function n(){for(var n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=e.call.apply(e,[this].concat(i))||this).searchRef=(0,t.createRef)(),n.sizerRef=(0,t.createRef)(),n.ref=(0,t.createRef)(),n.handleChange=function(e,t){Zm(n.props,"onChange",e,a({},n.props,{value:t}))},n.closeOnChange=function(e){var t=n.props,r=t.closeOnChange,i=t.multiple;(gg(r)?!i:r)&&n.close(e,qv)},n.closeOnEscape=function(e){n.props.closeOnEscape&&lg().getCode(e)===lg().Escape&&(e.preventDefault(),n.close(e))},n.moveSelectionOnKeyDown=function(e){var t,r=n.props,i=r.multiple,a=r.selectOnNavigation;if(n.state.open){var o=((t={})[lg().ArrowDown]=1,t[lg().ArrowUp]=-1,t)[lg().getCode(e)];if(void 0!==o){e.preventDefault();var s=n.getSelectedIndexAfterMove(o);!i&&a&&n.makeSelectedItemActive(e,s),n.setState({selectedIndex:s})}}},n.openOnSpace=function(e){var t,r,i,a=n.state.focus&&!n.state.open&&lg().getCode(e)===lg().Spacebar,o="INPUT"!==(null==(t=e.target)?void 0:t.tagName)&&"TEXTAREA"!==(null==(r=e.target)?void 0:r.tagName)&&!0!==(null==(i=e.target)?void 0:i.isContentEditable);a&&(o&&e.preventDefault(),n.open(e))},n.openOnArrow=function(e){var t=n.state,r=t.focus,i=t.open;if(r&&!i){var a=lg().getCode(e);a!==lg().ArrowDown&&a!==lg().ArrowUp||(e.preventDefault(),n.open(e))}},n.makeSelectedItemActive=function(e,t){var r=n.state,i=r.open,o=r.value,s=n.props.multiple,u=n.getSelectedItem(t),c=Cn(u,"value"),l=Cn(u,"disabled");if(tm(c)||!i||l)return o;var h=s?ak(o,[c]):c;return(s?!!ik(h,o).length:h!==o)&&(n.setState({value:h}),n.handleChange(e,h),u["data-additional"]&&Zm(n.props,"onAddItem",e,a({},n.props,{value:c}))),o},n.selectItemOnEnter=function(e){var t=n.props.search,r=n.state,i=r.open,a=r.selectedIndex;if(i&&(lg().getCode(e)===lg().Enter||!t&&lg().getCode(e)===lg().Spacebar)){e.preventDefault();var o=Zy(Mk({value:n.state.value,options:n.props.options,searchQuery:n.state.searchQuery,additionLabel:n.props.additionLabel,additionPosition:n.props.additionPosition,allowAdditions:n.props.allowAdditions,deburr:n.props.deburr,multiple:n.props.multiple,search:n.props.search}));if(!t||0!==o){var s=n.makeSelectedItemActive(e,a);n.setState({selectedIndex:qk({additionLabel:n.props.additionLabel,additionPosition:n.props.additionPosition,allowAdditions:n.props.allowAdditions,deburr:n.props.deburr,multiple:n.props.multiple,search:n.props.search,selectedIndex:a,value:s,options:n.props.options,searchQuery:""})}),n.closeOnChange(e),n.clearSearchQuery(),t&&Zm(n.searchRef.current,"focus")}}},n.removeItemOnBackspace=function(e){var t=n.props,r=t.multiple,i=t.search,a=n.state,o=a.searchQuery,s=a.value;if(lg().getCode(e)===lg().Backspace&&!o&&i&&r&&!Ly(s)){e.preventDefault();var u=Dy(s);n.setState({value:u}),n.handleChange(e,u)}},n.closeOnDocumentClick=function(e){n.props.closeOnBlur&&(n.ref.current&&mg(n.ref.current,e)||n.close())},n.handleMouseDown=function(e){n.isMouseDown=!0,Zm(n.props,"onMouseDown",e,n.props),document.addEventListener("mouseup",n.handleDocumentMouseUp)},n.handleDocumentMouseUp=function(){n.isMouseDown=!1,document.removeEventListener("mouseup",n.handleDocumentMouseUp)},n.handleClick=function(e){var t=n.props,r=t.minCharacters,i=t.search,a=n.state,o=a.open,s=a.searchQuery;if(Zm(n.props,"onClick",e,n.props),e.stopPropagation(),!i)return n.toggle(e);o?Zm(n.searchRef.current,"focus"):s.length>=r||1===r?n.open(e):Zm(n.searchRef.current,"focus")},n.handleIconClick=function(e){var t=n.props.clearable,r=n.hasValue();Zm(n.props,"onClick",e,n.props),e.stopPropagation(),t&&r?n.clearValue(e):n.toggle(e)},n.handleItemClick=function(e,t){var r=n.props,i=r.multiple,o=r.search,s=n.state.value,u=t.value;if(e.stopPropagation(),(i||t.disabled)&&e.nativeEvent.stopImmediatePropagation(),!t.disabled){var c=t["data-additional"],l=i?ak(n.state.value,[u]):u;(i?!!ik(l,s).length:l!==s)&&(n.setState({value:l}),n.handleChange(e,l)),n.clearSearchQuery(),Zm(o?n.searchRef.current:n.ref.current,"focus"),n.closeOnChange(e),c&&Zm(n.props,"onAddItem",e,a({},n.props,{value:u}))}},n.handleFocus=function(e){n.state.focus||(Zm(n.props,"onFocus",e,n.props),n.setState({focus:!0}))},n.handleBlur=function(e){var t=Cn(e,"currentTarget");if(!t||!t.contains(document.activeElement)){var r=n.props,i=r.closeOnBlur,a=r.multiple,o=r.selectOnBlur;n.isMouseDown||(Zm(n.props,"onBlur",e,n.props),o&&!a&&(n.makeSelectedItemActive(e,n.state.selectedIndex),i&&n.close()),n.setState({focus:!1}),n.clearSearchQuery())}},n.handleSearchChange=function(e,t){var r=t.value;e.stopPropagation();var i=n.props.minCharacters,o=n.state.open,s=r;Zm(n.props,"onSearchChange",e,a({},n.props,{searchQuery:s})),n.setState({searchQuery:s,selectedIndex:0}),!o&&s.length>=i?n.open():o&&1!==i&&s.length<i&&n.close()},n.handleKeyDown=function(e){n.moveSelectionOnKeyDown(e),n.openOnArrow(e),n.openOnSpace(e),n.selectItemOnEnter(e),Zm(n.props,"onKeyDown",e)},n.getSelectedItem=function(e){var t=Mk({value:n.state.value,options:n.props.options,searchQuery:n.state.searchQuery,additionLabel:n.props.additionLabel,additionPosition:n.props.additionPosition,allowAdditions:n.props.allowAdditions,deburr:n.props.deburr,multiple:n.props.multiple,search:n.props.search});return Cn(t,"["+e+"]")},n.getItemByValue=function(e){var t=n.props.options;return Ay(t,{value:e})},n.getDropdownAriaOptions=function(){var e=n.props,t=e.loading,r=e.disabled,i=e.search,a=e.multiple,o={role:i?"combobox":"listbox","aria-busy":t,"aria-disabled":r,"aria-expanded":!!n.state.open};return"listbox"===o.role&&(o["aria-multiselectable"]=a),o},n.clearSearchQuery=function(){var e=n.state.searchQuery;void 0!==e&&""!==e&&n.setState({searchQuery:""})},n.handleLabelClick=function(e,t){e.stopPropagation(),n.setState({selectedLabel:t.value}),Zm(n.props,"onLabelClick",e,t)},n.handleLabelRemove=function(e,t){e.stopPropagation();var r=n.state.value,i=Ty(r,t.value);n.setState({value:i}),n.handleChange(e,i)},n.getSelectedIndexAfterMove=function(e,t){void 0===t&&(t=n.state.selectedIndex);var r=Mk({value:n.state.value,options:n.props.options,searchQuery:n.state.searchQuery,additionLabel:n.props.additionLabel,additionPosition:n.props.additionPosition,allowAdditions:n.props.allowAdditions,deburr:n.props.deburr,multiple:n.props.multiple,search:n.props.search});if(void 0!==r&&!Ey(r,"disabled")){var i=r.length-1,a=t+e;return!n.props.wrapSelection&&(a>i||a<0)?a=t:a>i?a=0:a<0&&(a=i),r[a].disabled?n.getSelectedIndexAfterMove(e,a):a}},n.handleIconOverrides=function(e){var t=n.props.clearable;return{className:s(t&&n.hasValue()&&"clear",e.className),onClick:function(t){Zm(e,"onClick",t,e),n.handleIconClick(t)}}},n.clearValue=function(e){var t=n.props.multiple?[]:"";n.setState({value:t}),n.handleChange(e,t)},n.computeSearchInputTabIndex=function(){var e=n.props,t=e.disabled,r=e.tabIndex;return tm(r)?t?-1:0:r},n.computeSearchInputWidth=function(){var e=n.state.searchQuery;if(n.sizerRef.current&&e){n.sizerRef.current.style.display="inline",n.sizerRef.current.textContent=e;var t=Math.ceil(n.sizerRef.current.getBoundingClientRect().width);return n.sizerRef.current.style.removeProperty("display"),t}},n.computeTabIndex=function(){var e=n.props,t=e.disabled,r=e.search,i=e.tabIndex;if(!r)return t?-1:tm(i)?0:i},n.handleSearchInputOverrides=function(e){return{onChange:function(t,r){Zm(e,"onChange",t,r),n.handleSearchChange(t,r)}}},n.hasValue=function(){var e=n.props.multiple,t=n.state.value;return e?!Ly(t):!tm(t)&&""!==t},n.scrollSelectedItemIntoView=function(){if(n.ref.current){var e=n.ref.current.querySelector(".menu.visible");if(e){var t=e.querySelector(".item.selected");if(t){var r=t.offsetTop<e.scrollTop,i=t.offsetTop+t.clientHeight>e.scrollTop+e.clientHeight;r?e.scrollTop=t.offsetTop:i&&(e.scrollTop=t.offsetTop+t.clientHeight-e.clientHeight)}}}},n.setOpenDirection=function(){if(n.ref.current){var e=n.ref.current.querySelector(".menu.visible");if(e){var t=n.ref.current.getBoundingClientRect(),r=e.clientHeight,i=document.documentElement.clientHeight-t.top-t.height-r,a=t.top-r,o=i<0&&a>i;!o!==!n.state.upward&&n.setState({upward:o})}}},n.open=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!0);var r=n.props,i=r.disabled,a=r.search;i||(a&&Zm(n.searchRef.current,"focus"),Zm(n.props,"onOpen",e,n.props),t&&n.setState({open:!0}),n.scrollSelectedItemIntoView())},n.close=function(e,t){void 0===t&&(t=n.handleClose),n.state.open&&(Zm(n.props,"onClose",e,n.props),n.setState({open:!1},t))},n.handleClose=function(){var e=document.activeElement===n.searchRef.current;!e&&n.ref.current&&n.ref.current.blur();var t=document.activeElement===n.ref.current,r=e||t;n.setState({focus:r})},n.toggle=function(e){return n.state.open?n.close(e):n.open(e)},n.renderText=function(){var e,t=n.props,r=t.multiple,i=t.placeholder,a=t.search,o=t.text,u=n.state,c=u.searchQuery,l=u.selectedIndex,h=u.value,f=u.open,d=n.hasValue(),p=s(i&&!d&&"default","text",a&&c&&"filtered"),v=i;return o?v=o:f&&!r?e=n.getSelectedItem(l):d&&(e=n.getItemByValue(h)),Sk.create(e?Bk(e):v,{defaultProps:{className:p}})},n.renderSearchInput=function(){var e=n.props,r=e.search,i=e.searchInput,a=n.state.searchQuery;return r&&t.createElement(ug,{innerRef:n.searchRef},Ek.create(i,{defaultProps:{style:{width:n.computeSearchInputWidth()},tabIndex:n.computeSearchInputTabIndex(),value:a},overrideProps:n.handleSearchInputOverrides}))},n.renderSearchSizer=function(){var e=n.props,r=e.search,i=e.multiple;return r&&i&&t.createElement("span",{className:"sizer",ref:n.sizerRef})},n.renderLabels=function(){var e=n.props,t=e.multiple,r=e.renderLabel,i=n.state,a=i.selectedLabel,o=i.value;if(t&&!Ly(o)){var s=Yg(o,n.getItemByValue);return Yg(wy(s),(function(e,t){var i={active:e.value===a,as:"a",key:Vk(e.key,e.value),onClick:n.handleLabelClick,onRemove:n.handleLabelRemove,value:e.value};return Lg.create(r(e,t,i),{defaultProps:i})}))}},n.renderOptions=function(){var e=n.props,r=e.lazyLoad,i=e.multiple,o=e.search,s=e.noResultsMessage,u=n.state,c=u.open,l=u.selectedIndex,h=u.value;if(r&&!c)return null;var f=Mk({value:n.state.value,options:n.props.options,searchQuery:n.state.searchQuery,additionLabel:n.props.additionLabel,additionPosition:n.props.additionPosition,allowAdditions:n.props.allowAdditions,deburr:n.props.deburr,multiple:n.props.multiple,search:n.props.search});if(null!==s&&o&&Ly(f))return t.createElement("div",{className:"message"},s);var d=i?function(e){return Tm(h,e)}:function(e){return e===h};return Yg(f,(function(e,t){return yk.create(a({active:d(e.value),selected:l===t},e,{key:Vk(e.key,e.value),style:a({},e.style,{pointerEvents:"all"})}),{generateKey:!1,overrideProps:function(e){return{onClick:function(t,r){null==e.onClick||e.onClick(t,r),n.handleItemClick(t,r)}}}})}))},n.renderMenu=function(){var e=n.props,r=e.children,i=e.direction,o=e.header,u=n.state.open,c=n.getDropdownMenuAriaOptions();if(!Bn(r)){var h=t.Children.only(r),f=s(i,l(u,"visible"),h.props.className);return(0,t.cloneElement)(h,a({className:f},c))}return t.createElement(_k,a({},c,{direction:i,open:u}),bk.create(o,{autoGenerateKey:!1}),n.renderOptions())},n}fm(n,e);var r=n.prototype;return r.getInitialAutoControlledState=function(){return{focus:!1,searchQuery:""}},n.getAutoControlledStateFromProps=function(e,t,n){var r={__options:e.options,__value:t.value};return(!fk()(n.__value,t.value)||!ok(zk(e.options),zk(n.__options)))&&(r.selectedIndex=qk({additionLabel:e.additionLabel,additionPosition:e.additionPosition,allowAdditions:e.allowAdditions,deburr:e.deburr,multiple:e.multiple,search:e.search,selectedIndex:t.selectedIndex,value:t.value,options:e.options,searchQuery:t.searchQuery})),r},r.componentDidMount=function(){this.state.open&&this.open(null,!1)},r.shouldComponentUpdate=function(e,t){return!fk()(e,this.props)||!fk()(t,this.state)},r.componentDidUpdate=function(e,t){var n=this.props,r=n.closeOnBlur,i=n.minCharacters,a=n.openOnFocus,o=n.search;if(!t.focus&&this.state.focus){if(!this.isMouseDown){var s=!o||o&&1===i&&!this.state.open;a&&s&&this.open()}}else t.focus&&!this.state.focus&&!this.isMouseDown&&r&&this.close();!t.open&&this.state.open?(this.setOpenDirection(),this.scrollSelectedItemIntoView()):t.open&&this.state.open,t.selectedIndex!==this.state.selectedIndex&&this.scrollSelectedItemIntoView()},r.getDropdownMenuAriaOptions=function(){var e=this.props,t=e.search,n=e.multiple,r={};return t&&(r["aria-multiselectable"]=n,r.role="listbox"),r},r.render=function(){var e=this.props,r=e.basic,i=e.button,o=e.className,u=e.compact,c=e.disabled,h=e.error,d=e.fluid,p=e.floating,v=e.icon,m=e.inline,k=e.item,b=e.labeled,w=e.loading,_=e.multiple,x=e.pointing,E=e.search,I=e.selection,S=e.scrolling,C=e.simple,T=e.trigger,N=this.state,R=N.focus,P=N.open,A=N.upward,D=s("ui",l(P,"active visible"),l(c,"disabled"),l(h,"error"),l(w,"loading"),l(r,"basic"),l(i,"button"),l(u,"compact"),l(d,"fluid"),l(p,"floating"),l(m,"inline"),l(b,"labeled"),l(k,"item"),l(_,"multiple"),l(E,"search"),l(I,"selection"),l(C,"simple"),l(S,"scrolling"),l(A,"upward"),f(x,"pointing"),"dropdown",o),O=g(n,this.props),L=y(n,this.props),M=this.getDropdownAriaOptions(L,this.props);return t.createElement(ug,{innerRef:this.ref},t.createElement(L,a({},O,M,{className:D,onBlur:this.handleBlur,onClick:this.handleClick,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onFocus:this.handleFocus,onChange:this.handleChange,tabIndex:this.computeTabIndex()}),this.renderLabels(),this.renderSearchInput(),this.renderSearchSizer(),T||this.renderText(),Rg.create(v,{overrideProps:this.handleIconOverrides,autoGenerateKey:!1}),this.renderMenu(),P&&t.createElement(tg(),{name:"keydown",on:this.closeOnEscape}),P&&t.createElement(tg(),{name:"click",on:this.closeOnDocumentClick}),R&&t.createElement(tg(),{name:"keydown",on:this.removeItemOnBackspace})))},n}(yg);function Hk(e){var n=e.control,r=g(Hk,e),i=y(Hk,e);return t.createElement(i,a({},r,{control:n}))}Wk.handledProps=["additionLabel","additionPosition","allowAdditions","as","basic","button","children","className","clearable","closeOnBlur","closeOnChange","closeOnEscape","compact","deburr","defaultOpen","defaultSearchQuery","defaultSelectedLabel","defaultUpward","defaultValue","direction","disabled","error","floating","fluid","header","icon","inline","item","labeled","lazyLoad","loading","minCharacters","multiple","noResultsMessage","onAddItem","onBlur","onChange","onClick","onClose","onFocus","onLabelClick","onMouseDown","onOpen","onSearchChange","open","openOnFocus","options","placeholder","pointing","renderLabel","scrolling","search","searchInput","searchQuery","selectOnBlur","selectOnNavigation","selectedLabel","selection","simple","tabIndex","text","trigger","upward","value","wrapSelection"],Wk.propTypes={},Wk.defaultProps={additionLabel:"Add ",additionPosition:"top",closeOnBlur:!0,closeOnEscape:!0,deburr:!1,icon:"dropdown",minCharacters:1,noResultsMessage:"No results found.",openOnFocus:!0,renderLabel:Bk,searchInput:"text",selectOnBlur:!0,selectOnNavigation:!0,wrapSelection:!0},Wk.autoControlledProps=["open","searchQuery","selectedLabel","value","upward"],Wk.Divider=mk,Wk.Header=bk,Wk.Item=yk,Wk.Menu=_k,Wk.SearchInput=Ek,Wk.Text=Sk,Hk.handledProps=["as","control"],Hk.propTypes={},Hk.defaultProps={as:my,control:Wk};var Gk=Hk;function Kk(e){var n=e.children,r=e.className,i=e.grouped,o=e.inline,u=e.unstackable,c=e.widths,h=s(l(i,"grouped"),l(o,"inline"),l(u,"unstackable"),m(c,null,!0),"fields",r),f=g(Kk,e),d=y(Kk,e);return t.createElement(d,a({},f,{className:h}),n)}Kk.handledProps=["as","children","className","grouped","inline","unstackable","widths"],Kk.propTypes={};var Qk=Kk,Yk=function(e){function n(){for(var r,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(r=e.call.apply(e,[this].concat(o))||this).inputRef=(0,t.createRef)(),r.computeIcon=function(){var e=r.props,t=e.loading,n=e.icon;return tm(n)?t?"spinner":void 0:n},r.computeTabIndex=function(){var e=r.props,t=e.disabled,n=e.tabIndex;return tm(n)?t?-1:void 0:n},r.focus=function(e){return r.inputRef.current.focus(e)},r.select=function(){return r.inputRef.current.select()},r.handleChange=function(e){var t=Cn(e,"target.value");Zm(r.props,"onChange",e,a({},r.props,{value:t}))},r.handleChildOverrides=function(e,t){return a({},t,e.props,{ref:function(t){ng(e.ref,t),r.inputRef.current=t}})},r.partitionProps=function(){var e=r.props,t=e.disabled,i=e.type,o=r.computeTabIndex(),s=g(n,r.props),u=Lm(s),c=u[0],l=u[1];return[a({},c,{disabled:t,type:i,tabIndex:o,onChange:r.handleChange,ref:r.inputRef}),l]},r}return fm(n,e),n.prototype.render=function(){var e=this,r=this.props,i=r.action,o=r.actionPosition,u=r.children,c=r.className,f=r.disabled,d=r.error,p=r.fluid,v=r.focus,m=r.icon,g=r.iconPosition,k=r.input,b=r.inverted,w=r.label,_=r.labelPosition,x=r.loading,E=r.size,I=r.transparent,S=r.type,C=s("ui",E,l(f,"disabled"),l(d,"error"),l(p,"fluid"),l(v,"focus"),l(b,"inverted"),l(x,"loading"),l(I,"transparent"),h(o,"action")||l(i,"action"),h(g,"icon")||l(m||x,"icon"),h(_,"labeled")||l(w,"labeled"),"input",c),T=y(n,this.props),N=this.partitionProps(),R=N[0],P=N[1];if(!Bn(u)){var A=Yg(t.Children.toArray(u),(function(n){return"input"!==n.type?n:(0,t.cloneElement)(n,e.handleChildOverrides(n,R))}));return t.createElement(T,a({},P,{className:C}),A)}var D=oy.create(i,{autoGenerateKey:!1}),O=Lg.create(w,{defaultProps:{className:s("label",Tm(_,"corner")&&_)},autoGenerateKey:!1});return t.createElement(T,a({},P,{className:C}),"left"===o&&D,"right"!==_&&O,im(k||S,{defaultProps:R,autoGenerateKey:!1}),Rg.create(this.computeIcon(),{autoGenerateKey:!1}),"left"!==o&&D,"right"===_&&O)},n}(t.Component);Yk.handledProps=["action","actionPosition","as","children","className","disabled","error","fluid","focus","icon","iconPosition","input","inverted","label","labelPosition","loading","onChange","size","tabIndex","transparent","type"],Yk.propTypes={},Yk.defaultProps={type:"text"},Yk.create=rm(Yk,(function(e){return{type:e}}));var Xk=Yk;function Jk(e){var n=e.control,r=g(Jk,e),i=y(Jk,e);return t.createElement(i,a({},r,{control:n}))}Jk.handledProps=["as","control"],Jk.propTypes={},Jk.defaultProps={as:my,control:Xk};var $k=Jk;function Zk(e){var n=e.control,r=g(Zk,e),i=y(Zk,e);return t.createElement(i,a({},r,{control:n}))}Zk.handledProps=["as","control"],Zk.propTypes={},Zk.defaultProps={as:my,control:py};var eb=Zk;function tb(e){return t.createElement(Wk,a({},e,{selection:!0}))}tb.handledProps=["options"],tb.propTypes={},tb.Divider=Wk.Divider,tb.Header=Wk.Header,tb.Item=Wk.Item,tb.Menu=Wk.Menu;var nb=tb;function rb(e){var n=e.control,r=e.options,i=g(rb,e),o=y(rb,e);return t.createElement(o,a({},i,{control:n,options:r}))}rb.handledProps=["as","control","options"],rb.propTypes={},rb.defaultProps={as:my,control:nb};var ib=rb,ab=function(e){function n(){for(var n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=e.call.apply(e,[this].concat(i))||this).ref=(0,t.createRef)(),n.focus=function(){return n.ref.current.focus()},n.handleChange=function(e){var t=Cn(e,"target.value");Zm(n.props,"onChange",e,a({},n.props,{value:t}))},n.handleInput=function(e){var t=Cn(e,"target.value");Zm(n.props,"onInput",e,a({},n.props,{value:t}))},n}return fm(n,e),n.prototype.render=function(){var e=this.props,r=e.rows,i=e.value,o=g(n,this.props),s=y(n,this.props);return t.createElement(ug,{innerRef:this.ref},t.createElement(s,a({},o,{onChange:this.handleChange,onInput:this.handleInput,rows:r,value:i})))},n}(t.Component);ab.handledProps=["as","onChange","onInput","rows","value"],ab.propTypes={},ab.defaultProps={as:"textarea",rows:3};var ob=ab;function sb(e){var n=e.control,r=g(sb,e),i=y(sb,e);return t.createElement(i,a({},r,{control:n}))}sb.handledProps=["as","control"],sb.propTypes={},sb.defaultProps={as:my,control:ob};var ub=sb,cb=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleSubmit=function(e){"string"!==typeof t.props.action&&Zm(e,"preventDefault");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Zm.apply(void 0,[t.props,"onSubmit",e,t.props].concat(r))},t}return fm(n,e),n.prototype.render=function(){var e=this.props,r=e.action,i=e.children,o=e.className,u=e.error,c=e.inverted,h=e.loading,f=e.reply,d=e.size,p=e.success,v=e.unstackable,k=e.warning,b=e.widths,w=s("ui",d,l(u,"error"),l(c,"inverted"),l(h,"loading"),l(f,"reply"),l(p,"success"),l(v,"unstackable"),l(k,"warning"),m(b,null,!0),"form",o),_=g(n,this.props),x=y(n,this.props);return t.createElement(x,a({},_,{action:r,className:w,onSubmit:this.handleSubmit}),i)},n}(t.Component);cb.handledProps=["action","as","children","className","error","inverted","loading","onSubmit","reply","size","success","unstackable","warning","widths"],cb.propTypes={},cb.defaultProps={as:"form"},cb.Field=my,cb.Button=yy,cb.Checkbox=by,cb.Dropdown=Gk,cb.Group=Qk,cb.Input=$k,cb.Radio=eb,cb.Select=ib,cb.TextArea=ub;var lb,hb=cb,fb="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},db={},pb=pb||{},vb=fb||self;function mb(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function gb(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var yb="closure_uid_"+(1e9*Math.random()>>>0),kb=0;function bb(e,t,n){return e.call.apply(e.bind,arguments)}function wb(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function _b(e,t,n){return(_b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bb:wb).apply(null,arguments)}function xb(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Eb(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Ib(){this.s=this.s,this.o=this.o}Ib.prototype.s=!1,Ib.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,yb)&&e[yb]||(e[yb]=++kb))},Ib.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Sb=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Cb(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Tb(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(mb(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Nb(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Nb.prototype.h=function(){this.defaultPrevented=!0};var Rb=function(){if(!vb.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{vb.addEventListener("test",(function(){}),t),vb.removeEventListener("test",(function(){}),t)}catch(mX){}return e}();function Pb(e){return/^[\s\xa0]*$/.test(e)}function Ab(){var e=vb.navigator;return e&&(e=e.userAgent)?e:""}function Db(e){return-1!=Ab().indexOf(e)}function Ob(e){return Ob[" "](e),e}Ob[" "]=function(){};var Lb,Mb,Fb=Db("Opera"),jb=Db("Trident")||Db("MSIE"),Ub=Db("Edge"),qb=Ub||jb,Vb=Db("Gecko")&&!(-1!=Ab().toLowerCase().indexOf("webkit")&&!Db("Edge"))&&!(Db("Trident")||Db("MSIE"))&&!Db("Edge"),zb=-1!=Ab().toLowerCase().indexOf("webkit")&&!Db("Edge");function Bb(){var e=vb.document;return e?e.documentMode:void 0}e:{var Wb="",Hb=function(){var e=Ab();return Vb?/rv:([^\);]+)(\)|;)/.exec(e):Ub?/Edge\/([\d\.]+)/.exec(e):jb?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):zb?/WebKit\/(\S+)/.exec(e):Fb?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Hb&&(Wb=Hb?Hb[1]:""),jb){var Gb=Bb();if(null!=Gb&&Gb>parseFloat(Wb)){Lb=String(Gb);break e}}Lb=Wb}if(vb.document&&jb){var Kb=Bb();Mb=Kb||(parseInt(Lb,10)||void 0)}else Mb=void 0;var Qb=Mb;function Yb(e,t){if(Nb.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Vb){e:{try{Ob(t.nodeName);var i=!0;break e}catch(EX){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Xb[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Yb.$.h.call(this)}}Eb(Yb,Nb);var Xb={2:"touch",3:"pen",4:"mouse"};Yb.prototype.h=function(){Yb.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Jb="closure_listenable_"+(1e6*Math.random()|0),$b=0;function Zb(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++$b,this.fa=this.ia=!1}function ew(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function tw(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function nw(e){var t={};for(var n in e)t[n]=e[n];return t}var rw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function iw(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<rw.length;a++)n=rw[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function aw(e){this.src=e,this.g={},this.h=0}function ow(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Sb(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ew(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function sw(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}aw.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=sw(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Zb(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var uw="closure_lm_"+(1e6*Math.random()|0),cw={};function lw(e,t,n,r,i){if(r&&r.once)return fw(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)lw(e,t[a],n,r,i);return null}return n=kw(n),e&&e[Jb]?e.O(t,n,gb(r)?!!r.capture:!!r,i):hw(e,t,n,!1,r,i)}function hw(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=gb(i)?!!i.capture:!!i,s=gw(e);if(s||(e[uw]=s=new aw(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=mw;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Rb||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(vw(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function fw(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)fw(e,t[a],n,r,i);return null}return n=kw(n),e&&e[Jb]?e.P(t,n,gb(r)?!!r.capture:!!r,i):hw(e,t,n,!0,r,i)}function dw(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)dw(e,t[a],n,r,i);else r=gb(r)?!!r.capture:!!r,n=kw(n),e&&e[Jb]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=sw(a=e.g[t],n,r,i))&&(ew(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=gw(e))&&(t=e.g[t.toString()],e=-1,t&&(e=sw(t,n,r,i)),(n=-1<e?t[e]:null)&&pw(n))}function pw(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Jb])ow(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(vw(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=gw(t))?(ow(n,e),0==n.h&&(n.src=null,t[uw]=null)):ew(e)}}}function vw(e){return e in cw?cw[e]:cw[e]="on"+e}function mw(e,t){if(e.fa)e=!0;else{t=new Yb(t,this);var n=e.listener,r=e.la||e.src;e.ia&&pw(e),e=n.call(r,t)}return e}function gw(e){return(e=e[uw])instanceof aw?e:null}var yw="__closure_events_fn_"+(1e9*Math.random()>>>0);function kw(e){return"function"===typeof e?e:(e[yw]||(e[yw]=function(t){return e.handleEvent(t)}),e[yw])}function bw(){Ib.call(this),this.i=new aw(this),this.S=this,this.J=null}function ww(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Nb(t,e);else if(t instanceof Nb)t.target=t.target||e;else{var i=t;iw(t=new Nb(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=_w(o,r,!0,t)&&i}if(i=_w(o=t.g=e,r,!0,t)&&i,i=_w(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=_w(o=t.g=n[a],r,!1,t)&&i}function _w(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var s=o.listener,u=o.la||o.src;o.ia&&ow(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Eb(bw,Ib),bw.prototype[Jb]=!0,bw.prototype.removeEventListener=function(e,t,n,r){dw(this,e,t,n,r)},bw.prototype.N=function(){if(bw.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ew(n[r]);delete t.g[e],t.h--}}this.J=null},bw.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},bw.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var xw=vb.JSON.stringify,Ew=function(){function e(t,n){or(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return ur(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Iw(){var e=Dw,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Sw=function(){function e(){or(this,e),this.h=this.g=null}return ur(e,[{key:"add",value:function(e,t){var n=Cw.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Cw=new Ew((function(){return new Tw}),(function(e){return e.reset()})),Tw=function(){function e(){or(this,e),this.next=this.g=this.h=null}return ur(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Nw(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Rw(e){vb.setTimeout((function(){throw e}),0)}var Pw,Aw=!1,Dw=new Sw,Ow=function(){var e=vb.Promise.resolve(void 0);Pw=function(){e.then(Lw)}},Lw=function(){for(var e;e=Iw();){try{e.h.call(e.g)}catch(mX){Rw(mX)}var t=Cw;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Aw=!1};function Mw(e,t){bw.call(this),this.h=e||1,this.g=t||vb,this.j=_b(this.qb,this),this.l=Date.now()}function Fw(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function jw(e,t,n){if("function"===typeof e)n&&(e=_b(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=_b(e.handleEvent,e)}return 2147483647<Number(t)?-1:vb.setTimeout(e,t||0)}function Uw(e){e.g=jw((function(){e.g=null,e.i&&(e.i=!1,Uw(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Eb(Mw,bw),(lb=Mw.prototype).ga=!1,lb.T=null,lb.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ww(this,"tick"),this.ga&&(Fw(this),this.start()))}},lb.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},lb.N=function(){Mw.$.N.call(this),Fw(this),delete this.g};var qw=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return ur(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Uw(this)}},{key:"N",value:function(){Ya(dr(n.prototype),"N",this).call(this),this.g&&(vb.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Ib);function Vw(e){Ib.call(this),this.h=e,this.g={}}Eb(Vw,Ib);var zw=[];function Bw(e,t,n,r){Array.isArray(n)||(n&&(zw[0]=n.toString()),n=zw);for(var i=0;i<n.length;i++){var a=lw(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ww(e){tw(e.g,(function(e,t){this.g.hasOwnProperty(t)&&pw(e)}),e),e.g={}}function Hw(){this.g=!0}function Gw(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return xw(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}Vw.prototype.N=function(){Vw.$.N.call(this),Ww(this)},Vw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Hw.prototype.Ea=function(){this.g=!1},Hw.prototype.info=function(){};var Kw={},Qw=null;function Yw(){return Qw=Qw||new bw}function Xw(e){Nb.call(this,Kw.Ta,e)}function Jw(e){var t=Yw();ww(t,new Xw(t))}function $w(e,t){Nb.call(this,Kw.STAT_EVENT,e),this.stat=t}function Zw(e){var t=Yw();ww(t,new $w(t,e))}function e_(e,t){Nb.call(this,Kw.Ua,e),this.size=t}function t_(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return vb.setTimeout((function(){e()}),t)}Kw.Ta="serverreachability",Eb(Xw,Nb),Kw.STAT_EVENT="statevent",Eb($w,Nb),Kw.Ua="timingevent",Eb(e_,Nb);var n_={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},r_={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function i_(){}function a_(e){return e.h||(e.h=e.i())}function o_(){}i_.prototype.h=null;var s_,u_={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function c_(){Nb.call(this,"d")}function l_(){Nb.call(this,"c")}function h_(){}function f_(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Vw(this),this.P=p_,e=qb?125:void 0,this.V=new Mw(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new d_}function d_(){this.i=null,this.g="",this.h=!1}Eb(c_,Nb),Eb(l_,Nb),Eb(h_,i_),h_.prototype.g=function(){return new XMLHttpRequest},h_.prototype.i=function(){return{}},s_=new h_;var p_=45e3,v_={},m_={};function g_(e,t,n){e.L=1,e.v=M_(P_(t)),e.s=n,e.S=!0,y_(e,null)}function y_(e,t){e.G=Date.now(),__(e),e.A=P_(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Y_(n.i,"t",r),e.C=0,n=e.l.J,e.h=new d_,e.g=Xx(e.l,n?t:null,!e.s),0<e.O&&(e.M=new qw(_b(e.Pa,e,e.g),e.O)),Bw(e.U,e.g,"readystatechange",e.nb),t=e.I?nw(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Jw(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function k_(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function b_(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=w_(e,n))==m_){4==t&&(e.o=4,Zw(14),i=!1),Gw(e.j,e.m,null,"[Incomplete Response]");break}if(r==v_){e.o=4,Zw(15),Gw(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Gw(e.j,e.m,r,null),C_(e,r)}k_(e)&&r!=m_&&r!=v_&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Zw(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),zx(t),t.M=!0,Zw(11))):(Gw(e.j,e.m,n,"[Invalid Chunked Response]"),S_(e),I_(e))}function w_(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?m_:(n=Number(t.substring(n,r)),isNaN(n)?v_:(r+=1)+n>t.length?m_:(t=t.slice(r,r+n),e.C=r+n,t))}function __(e){e.Y=Date.now()+e.P,x_(e,e.P)}function x_(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=t_(_b(e.lb,e),t)}function E_(e){e.B&&(vb.clearTimeout(e.B),e.B=null)}function I_(e){0==e.l.H||e.J||Hx(e.l,e)}function S_(e){E_(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Fw(e.V),Ww(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function C_(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||nx(n.i,e)))if(!e.K&&nx(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Wx(n),Ox(n)}Vx(n),Zw(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=t_(_b(n.ib,n),6e3));if(1>=tx(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else Kx(n,11)}else if((e.K||n.g==e)&&Wx(n),!Pb(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var s=a[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;h.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(rx(h,h.h),h.h=null))}if(r.F){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.Da=f,L_(r.I,r.F,f))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Yx(r,r.J?r.pa:null,r.Y),d.K){ix(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(E_(p),__(p)),r.g=d}else qx(r);0<n.j.length&&Mx(n)}else"stop"!=a[0]&&"close"!=a[0]||Kx(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Kx(n,7):Dx(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Jw()}catch(a){}}function T_(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(mb(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(mb(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(mb(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(lb=f_.prototype).setTimeout=function(e){this.P=e},lb.nb=function(e){e=e.target;var t=this.M;t&&3==Cx(e)?t.l():this.Pa(e)},lb.Pa=function(e){try{if(e==this.g)e:{var t=Cx(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||qb||this.g&&(this.h.h||this.g.ja()||Tx(this.g)))){this.J||4!=t||7==n||Jw(),E_(this);var r=this.g.da();this.ca=r;t:if(k_(this)){var i=Tx(this.g);e="";var a=i.length,o=4==Cx(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){S_(this),I_(this);var s="";break t}this.h.i=new vb.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pb(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Zw(12),S_(this),I_(this);break e}Gw(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,C_(this,r)}this.S?(b_(this,t,s),qb&&this.i&&3==t&&(Bw(this.U,this.V,"tick",this.mb),this.V.start())):(Gw(this.j,this.m,s,null),C_(this,s)),4==t&&S_(this),this.i&&!this.J&&(4==t?Hx(this.l,this):(this.i=!1,__(this)))}else(function(e){var t={};e=(e.g&&2<=Cx(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!Pb(e[n])){var r=Nw(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<s.indexOf("Unknown SID")?(this.o=3,Zw(12)):(this.o=0,Zw(13)),S_(this),I_(this)}}}catch(t){}},lb.mb=function(){if(this.g){var e=Cx(this.g),t=this.g.ja();this.C<t.length&&(E_(this),b_(this,e,t),this.i&&4!=e&&__(this))}},lb.cancel=function(){this.J=!0,S_(this)},lb.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Jw(),Zw(17)),S_(this),this.o=2,I_(this)):x_(this,this.Y-e)};var N_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function R_(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof R_){this.h=e.h,A_(this,e.j),this.s=e.s,this.g=e.g,D_(this,e.m),this.l=e.l;var t=e.i,n=new H_;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),O_(this,n),this.o=e.o}else e&&(t=String(e).match(N_))?(this.h=!1,A_(this,t[1]||"",!0),this.s=F_(t[2]||""),this.g=F_(t[3]||"",!0),D_(this,t[4]),this.l=F_(t[5]||"",!0),O_(this,t[6]||"",!0),this.o=F_(t[7]||"")):(this.h=!1,this.i=new H_(null,this.h))}function P_(e){return new R_(e)}function A_(e,t,n){e.j=n?F_(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function D_(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function O_(e,t,n){t instanceof H_?(e.i=t,function(e,t){t&&!e.j&&(G_(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(K_(this,t),Y_(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=j_(t,B_)),e.i=new H_(t,e.h))}function L_(e,t,n){e.i.set(t,n)}function M_(e){return L_(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function F_(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function j_(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,U_),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function U_(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}R_.prototype.toString=function(){var e=[],t=this.j;t&&e.push(j_(t,q_,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(j_(t,q_,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(j_(n,"/"==n.charAt(0)?z_:V_,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",j_(n,W_)),e.join("")};var q_=/[#\/\?@]/g,V_=/[#\?:]/g,z_=/[#\?]/g,B_=/[#\?@]/g,W_=/#/g;function H_(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function G_(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function K_(e,t){G_(e),t=X_(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Q_(e,t){return G_(e),t=X_(e,t),e.g.has(t)}function Y_(e,t,n){K_(e,t),0<n.length&&(e.i=null,e.g.set(X_(e,t),Cb(n)),e.h+=n.length)}function X_(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(lb=H_.prototype).add=function(e,t){G_(this),this.i=null,e=X_(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},lb.forEach=function(e,t){G_(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},lb.ta=function(){G_(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},lb.Z=function(e){G_(this);var t=[];if("string"===typeof e)Q_(this,e)&&(t=t.concat(this.g.get(X_(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},lb.set=function(e,t){return G_(this),this.i=null,Q_(this,e=X_(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},lb.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},lb.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var J_=ur((function e(t,n){or(this,e),this.g=t,this.map=n}));function $_(e){this.l=e||Z_,vb.PerformanceNavigationTiming?e=0<(e=vb.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(vb.g&&vb.g.Ka&&vb.g.Ka()&&vb.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Z_=10;function ex(e){return!!e.h||!!e.g&&e.g.size>=e.j}function tx(e){return e.h?1:e.g?e.g.size:0}function nx(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function rx(e,t){e.g?e.g.add(t):e.h=t}function ix(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ax(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=cr(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return Cb(e.i)}$_.prototype.cancel=function(){if(this.i=ax(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=cr(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var ox,sx=function(){function e(){or(this,e)}return ur(e,[{key:"stringify",value:function(e){return vb.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return vb.JSON.parse(e,void 0)}}]),e}();function ux(){this.g=new sx}function cx(e,t,n){var r=n||"";try{T_(e,(function(e,n){var i=e;gb(e)&&(i=xw(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function lx(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(EX){}}function hx(e){this.l=e.fc||null,this.j=e.ob||!1}function fx(e,t){bw.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=dx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Eb(hx,i_),hx.prototype.g=function(){return new fx(this.l,this.j)},hx.prototype.i=(ox={},function(){return ox}),Eb(fx,bw);var dx=0;function px(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function vx(e){e.readyState=4,e.l=null,e.j=null,e.A=null,mx(e)}function mx(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(lb=fx.prototype).open=function(e,t){if(this.readyState!=dx)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,mx(this)},lb.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||vb).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},lb.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,vx(this)),this.readyState=dx},lb.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,mx(this)),this.g&&(this.readyState=3,mx(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof vb.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;px(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},lb.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?vx(this):mx(this),3==this.readyState&&px(this)}},lb.Za=function(e){this.g&&(this.response=this.responseText=e,vx(this))},lb.Ya=function(e){this.g&&(this.response=e,vx(this))},lb.ka=function(){this.g&&vx(this)},lb.setRequestHeader=function(e,t){this.v.append(e,t)},lb.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},lb.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(fx.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var gx=vb.JSON.parse;function yx(e){bw.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=kx,this.L=this.M=!1}Eb(yx,bw);var kx="",bx=/^https?$/i,wx=["POST","PUT"];function _x(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,xx(e),Ix(e)}function xx(e){e.F||(e.F=!0,ww(e,"complete"),ww(e,"error"))}function Ex(e){if(e.h&&"undefined"!=typeof pb&&(!e.C[1]||4!=Cx(e)||2!=e.da()))if(e.v&&4==Cx(e))jw(e.La,0,e);else if(ww(e,"readystatechange"),4==Cx(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(N_)[1]||null;!a&&vb.self&&vb.self.location&&(a=vb.self.location.protocol.slice(0,-1)),i=!bx.test(a?a.toLowerCase():"")}t=i}if(t)ww(e,"complete"),ww(e,"success");else{e.m=6;try{var o=2<Cx(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",xx(e)}}finally{Ix(e)}}}function Ix(e,t){if(e.g){Sx(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||ww(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Sx(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(vb.clearTimeout(e.A),e.A=null)}function Cx(e){return e.g?e.g.readyState:0}function Tx(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case kx:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Ad){return null}}function Nx(e){var t="";return tw(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Rx(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Nx(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):L_(e,t,n))}function Px(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ax(e){this.Ga=0,this.j=[],this.l=new Hw,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Px("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Px("baseRetryDelayMs",5e3,e),this.hb=Px("retryDelaySeedMs",1e4,e),this.eb=Px("forwardChannelMaxRetries",2,e),this.xa=Px("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new $_(e&&e.concurrentRequestLimit),this.Ja=new ux,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Dx(e){if(Lx(e),3==e.H){var t=e.W++,n=P_(e.I);if(L_(n,"SID",e.K),L_(n,"RID",t),L_(n,"TYPE","terminate"),jx(e,n),(t=new f_(e,e.l,t)).L=2,t.v=M_(P_(n)),n=!1,vb.navigator&&vb.navigator.sendBeacon)try{n=vb.navigator.sendBeacon(t.v.toString(),"")}catch(Sd){}!n&&vb.Image&&((new Image).src=t.v,n=!0),n||(t.g=Xx(t.l,null),t.g.ha(t.v)),t.G=Date.now(),__(t)}Qx(e)}function Ox(e){e.g&&(zx(e),e.g.cancel(),e.g=null)}function Lx(e){Ox(e),e.u&&(vb.clearTimeout(e.u),e.u=null),Wx(e),e.i.cancel(),e.m&&("number"===typeof e.m&&vb.clearTimeout(e.m),e.m=null)}function Mx(e){if(!ex(e.i)&&!e.m){e.m=!0;var t=e.Na;Pw||Ow(),Aw||(Pw(),Aw=!0),Dw.add(t,e),e.C=0}}function Fx(e,t){var n;n=t?t.m:e.W++;var r=P_(e.I);L_(r,"SID",e.K),L_(r,"RID",n),L_(r,"AID",e.V),jx(e,r),e.o&&e.s&&Rx(r,e.o,e.s),n=new f_(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Ux(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),rx(e.i,n),g_(n,r,t)}function jx(e,t){e.na&&tw(e.na,(function(e,n){L_(t,n,e)})),e.h&&T_({},(function(e,n){L_(t,n,e)}))}function Ux(e,t,n){n=Math.min(e.j.length,n);var r=e.h?_b(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].g,l=i[u].map;if(0>(c-=a))a=Math.max(0,i[u].g-100),s=!1;else try{cx(l,o,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function qx(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Pw||Ow(),Aw||(Pw(),Aw=!0),Dw.add(t,e),e.A=0}}function Vx(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=t_(_b(e.Ma,e),Gx(e,e.A)),e.A++,!0)}function zx(e){null!=e.B&&(vb.clearTimeout(e.B),e.B=null)}function Bx(e){e.g=new f_(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=P_(e.wa);L_(t,"RID","rpc"),L_(t,"SID",e.K),L_(t,"AID",e.V),L_(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&L_(t,"TO",e.qa),L_(t,"TYPE","xmlhttp"),jx(e,t),e.o&&e.s&&Rx(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=M_(P_(t)),n.s=null,n.S=!0,y_(n,e)}function Wx(e){null!=e.v&&(vb.clearTimeout(e.v),e.v=null)}function Hx(e,t){var n=null;if(e.g==t){Wx(e),zx(e),e.g=null;var r=2}else{if(!nx(e.i,t))return;n=t.F,ix(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;ww(r=Yw(),new e_(r,n)),Mx(e)}else qx(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(tx(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=t_(_b(e.Na,e,t),Gx(e,e.C)),e.C++,!0))}(e,t)||2==r&&Vx(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Kx(e,5);break;case 4:Kx(e,10);break;case 3:Kx(e,6);break;default:Kx(e,2)}}function Gx(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Kx(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=_b(e.pb,e);n||(n=new R_("//www.google.com/images/cleardot.gif"),vb.location&&"http"==vb.location.protocol||A_(n,"https"),M_(n)),function(e,t){var n=new Hw;if(vb.Image){var r=new Image;r.onload=xb(lx,n,r,"TestLoadImage: loaded",!0,t),r.onerror=xb(lx,n,r,"TestLoadImage: error",!1,t),r.onabort=xb(lx,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=xb(lx,n,r,"TestLoadImage: timeout",!1,t),vb.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Zw(2);e.H=0,e.h&&e.h.za(t),Qx(e),Lx(e)}function Qx(e){if(e.H=0,e.ma=[],e.h){var t=ax(e.i);0==t.length&&0==e.j.length||(Tb(e.ma,t),Tb(e.ma,e.j),e.i.i.length=0,Cb(e.j),e.j.length=0),e.h.ya()}}function Yx(e,t,n){var r=n instanceof R_?P_(n):new R_(n);if(""!=r.g)t&&(r.g=t+"."+r.g),D_(r,r.m);else{var i=vb.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new R_(null);r&&A_(a,r),t&&(a.g=t),i&&D_(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&L_(r,n,t),L_(r,"VER",e.ra),jx(e,r),r}function Xx(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new yx(new hx({ob:!0})):new yx(e.va)).Oa(e.J),t}function Jx(){}function $x(){if(jb&&!(10<=Number(Qb)))throw Error("Environmental error: no available transport.")}function Zx(e,t){bw.call(this),this.g=new Ax(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Pb(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Pb(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new nE(this)}function eE(e){c_.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function tE(){l_.call(this),this.status=1}function nE(e){this.g=e}function rE(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function iE(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function aE(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(lb=yx.prototype).Oa=function(e){this.M=e},lb.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():s_.g(),this.C=this.u?a_(this.u):a_(s_),this.g.onreadystatechange=_b(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void _x(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=cr(r.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=vb.FormData&&e instanceof vb.FormData,!(0<=Sb(wx,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var u,c=cr(n);try{for(c.s();!(u=c.n()).done;){var l=nr(u.value,2),h=l[0],f=l[1];this.g.setRequestHeader(h,f)}}catch(d){c.e(d)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Sx(this),0<this.B&&((this.L=function(e){return jb&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_b(this.ua,this)):this.A=jw(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){_x(this,s)}},lb.ua=function(){"undefined"!=typeof pb&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ww(this,"timeout"),this.abort(8))},lb.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ww(this,"complete"),ww(this,"abort"),Ix(this))},lb.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ix(this,!0)),yx.$.N.call(this)},lb.La=function(){this.s||(this.G||this.v||this.l?Ex(this):this.kb())},lb.kb=function(){Ex(this)},lb.isActive=function(){return!!this.g},lb.da=function(){try{return 2<Cx(this)?this.g.status:-1}catch(ox){return-1}},lb.ja=function(){try{return this.g?this.g.responseText:""}catch(ox){return""}},lb.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),gx(t)}},lb.Ia=function(){return this.m},lb.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(lb=Ax.prototype).ra=8,lb.H=1,lb.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new f_(this,this.l,e),n=this.s;if(this.U&&(n?iw(n=nw(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ux(this,t,r),L_(i=P_(this.I),"RID",e),L_(i,"CVER",22),this.F&&L_(i,"X-HTTP-Session-Id",this.F),jx(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Nx(n)))+"&"+r:this.o&&Rx(i,this.o,n)),rx(this.i,t),this.bb&&L_(i,"TYPE","init"),this.P?(L_(i,"$req",r),L_(i,"SID","null"),t.aa=!0,g_(t,i,null)):g_(t,i,r),this.H=2}}else 3==this.H&&(e?Fx(this,e):0==this.j.length||ex(this.i)||Fx(this))},lb.Ma=function(){if(this.u=null,Bx(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=t_(_b(this.jb,this),e)}},lb.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Zw(10),Ox(this),Bx(this))},lb.ib=function(){null!=this.v&&(this.v=null,Ox(this),Vx(this),Zw(19))},lb.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Zw(2)):(this.l.info("Failed to ping google.com"),Zw(1))},lb.isActive=function(){return!!this.h&&this.h.isActive(this)},(lb=Jx.prototype).Ba=function(){},lb.Aa=function(){},lb.za=function(){},lb.ya=function(){},lb.isActive=function(){return!0},lb.Va=function(){},$x.prototype.g=function(e,t){return new Zx(e,t)},Eb(Zx,bw),Zx.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Zw(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Yx(e,null,e.Y),Mx(e)},Zx.prototype.close=function(){Dx(this.g)},Zx.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=xw(e),e=n);t.j.push(new J_(t.fb++,e)),3==t.H&&Mx(t)},Zx.prototype.N=function(){this.g.h=null,delete this.j,Dx(this.g),delete this.g,Zx.$.N.call(this)},Eb(eE,c_),Eb(tE,l_),Eb(nE,Jx),nE.prototype.Ba=function(){ww(this.g,"a")},nE.prototype.Aa=function(e){ww(this.g,new eE(e))},nE.prototype.za=function(e){ww(this.g,new tE)},nE.prototype.ya=function(){ww(this.g,"b")},Eb(rE,(function(){this.blockSize=-1})),rE.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},rE.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)iE(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){iE(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){iE(this,r),i=0;break}}this.h=i,this.i+=t},rE.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var oE={};function sE(e){return-128<=e&&128>e?function(e,t){var n=oE;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new aE([0|e],0>e?-1:0)})):new aE([0|e],0>e?-1:0)}function uE(e){if(isNaN(e)||!isFinite(e))return lE;if(0>e)return vE(uE(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=cE;return new aE(t,0)}var cE=4294967296,lE=sE(0),hE=sE(1),fE=sE(16777216);function dE(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function pE(e){return-1==e.h}function vE(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new aE(n,~e.h).add(hE)}function mE(e,t){return e.add(vE(t))}function gE(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function yE(e,t){this.g=e,this.h=t}function kE(e,t){if(dE(t))throw Error("division by zero");if(dE(e))return new yE(lE,lE);if(pE(e))return t=kE(vE(e),t),new yE(vE(t.g),vE(t.h));if(pE(t))return t=kE(e,vE(t)),new yE(vE(t.g),t.h);if(30<e.g.length){if(pE(e)||pE(t))throw Error("slowDivide_ only works with positive integers.");for(var n=hE,r=t;0>=r.X(e);)n=bE(n),r=bE(r);var i=wE(n,1),a=wE(r,1);for(r=wE(r,2),n=wE(n,2);!dE(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=wE(r,1),n=wE(n,1)}return t=mE(e,i.R(t)),new yE(i,t)}for(i=lE;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=uE(n)).R(t);pE(o)||0<o.X(e);)o=(a=uE(n-=r)).R(t);dE(a)&&(a=hE),i=i.add(a),e=mE(e,o)}return new yE(i,e)}function bE(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new aE(n,e.h)}function wE(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new aE(i,e.h)}(lb=aE.prototype).ea=function(){if(pE(this))return-vE(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:cE+r)*t,t*=cE}return e},lb.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(dE(this))return"0";if(pE(this))return"-"+vE(this).toString(e);for(var t=uE(Math.pow(e,6)),n=this,r="";;){var i=kE(n,t).g,a=((0<(n=mE(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(dE(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},lb.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},lb.X=function(e){return pE(e=mE(this,e))?-1:dE(e)?0:1},lb.abs=function(){return pE(this)?vE(this):this},lb.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new aE(n,-2147483648&n[n.length-1]?-1:0)},lb.R=function(e){if(dE(this)||dE(e))return lE;if(pE(this))return pE(e)?vE(this).R(vE(e)):vE(vE(this).R(e));if(pE(e))return vE(this.R(vE(e)));if(0>this.X(fE)&&0>e.X(fE))return uE(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),s=e.D(i)>>>16,u=65535&e.D(i);n[2*r+2*i]+=o*u,gE(n,2*r+2*i),n[2*r+2*i+1]+=a*u,gE(n,2*r+2*i+1),n[2*r+2*i+1]+=o*s,gE(n,2*r+2*i+1),n[2*r+2*i+2]+=a*s,gE(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new aE(n,0)},lb.gb=function(e){return kE(this,e).h},lb.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new aE(n,this.h&e.h)},lb.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new aE(n,this.h|e.h)},lb.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new aE(n,this.h^e.h)},$x.prototype.createWebChannel=$x.prototype.g,Zx.prototype.send=Zx.prototype.u,Zx.prototype.open=Zx.prototype.m,Zx.prototype.close=Zx.prototype.close,n_.NO_ERROR=0,n_.TIMEOUT=8,n_.HTTP_ERROR=6,r_.COMPLETE="complete",o_.EventType=u_,u_.OPEN="a",u_.CLOSE="b",u_.ERROR="c",u_.MESSAGE="d",bw.prototype.listen=bw.prototype.O,yx.prototype.listenOnce=yx.prototype.P,yx.prototype.getLastError=yx.prototype.Sa,yx.prototype.getLastErrorCode=yx.prototype.Ia,yx.prototype.getStatus=yx.prototype.da,yx.prototype.getResponseJson=yx.prototype.Wa,yx.prototype.getResponseText=yx.prototype.ja,yx.prototype.send=yx.prototype.ha,yx.prototype.setWithCredentials=yx.prototype.Oa,rE.prototype.digest=rE.prototype.l,rE.prototype.reset=rE.prototype.reset,rE.prototype.update=rE.prototype.j,aE.prototype.add=aE.prototype.add,aE.prototype.multiply=aE.prototype.R,aE.prototype.modulo=aE.prototype.gb,aE.prototype.compare=aE.prototype.X,aE.prototype.toNumber=aE.prototype.ea,aE.prototype.toString=aE.prototype.toString,aE.prototype.getBits=aE.prototype.D,aE.fromNumber=uE,aE.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return vE(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=uE(Math.pow(n,8)),i=lE,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),s=parseInt(t.substring(a,a+o),n);8>o?(o=uE(Math.pow(n,o)),i=i.R(o).add(uE(s))):i=(i=i.R(r)).add(uE(s))}return i};var _E=db.createWebChannelTransport=function(){return new $x},xE=db.getStatEventTarget=function(){return Yw()},EE=db.ErrorCode=n_,IE=db.EventType=r_,SE=db.Event=Kw,CE=db.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},TE=db.FetchXmlHttpFactory=hx,NE=db.WebChannel=o_,RE=db.XhrIo=yx,PE=db.Md5=rE,AE=db.Integer=aE,DE="@firebase/firestore",OE=function(){function e(t){or(this,e),this.uid=t}return ur(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();OE.UNAUTHENTICATED=new OE(null),OE.GOOGLE_CREDENTIALS=new OE("google-credentials-uid"),OE.FIRST_PARTY=new OE("first-party-uid"),OE.MOCK_USER=new OE("mock-user");var LE="9.23.0",ME=new Ri("@firebase/firestore");function FE(){return ME.logLevel}function jE(e){if(ME.logLevel<=xi.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(VE);ME.debug.apply(ME,["Firestore (".concat(LE,"): ").concat(e)].concat(mi(i)))}}function UE(e){if(ME.logLevel<=xi.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(VE);ME.error.apply(ME,["Firestore (".concat(LE,"): ").concat(e)].concat(mi(i)))}}function qE(e){if(ME.logLevel<=xi.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(VE);ME.warn.apply(ME,["Firestore (".concat(LE,"): ").concat(e)].concat(mi(i)))}}function VE(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function zE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(LE,") INTERNAL ASSERTION FAILED: ")+e;throw UE(t),new Error(t)}function BE(e,t){e||zE()}function WE(e,t){return e}var HE={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},GE=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return ur(n)}(Br),KE=ur((function e(){var t=this;or(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),QE=ur((function e(t,n){or(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),YE=function(){function e(){or(this,e)}return ur(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(OE.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),XE=function(){function e(t){or(this,e),this.token=t,this.changeListener=null}return ur(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),JE=function(){function e(t){or(this,e),this.t=t,this.currentUser=OE.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return ur(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new KE;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new KE,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){jE("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(jE("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new KE)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(jE("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(BE("string"==typeof n.accessToken),new QE(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return BE(null===e||"string"==typeof e),new OE(e)}}]),e}(),$E=function(){function e(t,n,r){or(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=OE.FIRST_PARTY,this.g=new Map}return ur(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),ZE=function(){function e(t,n,r){or(this,e),this.h=t,this.l=n,this.m=r}return ur(e,[{key:"getToken",value:function(){return Promise.resolve(new $E(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(OE.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),eI=ur((function e(t){or(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),tI=function(){function e(t){or(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return ur(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&jE("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,jE("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){jE("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):jE("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(BE("string"==typeof t.token),e.T=t.token,new eI(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function nI(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var rI=function(){function e(){or(this,e)}return ur(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=nI(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function iI(e,t){return e<t?-1:e>t?1:0}function aI(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function oI(e){return e+"\0"}var sI=function(){function e(t,n){if(or(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new GE(HE.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new GE(HE.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new GE(HE.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new GE(HE.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return ur(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?iI(this.nanoseconds,e.nanoseconds):iI(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),uI=function(){function e(t){or(this,e),this.timestamp=t}return ur(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new sI(0,0))}},{key:"max",value:function(){return new e(new sI(253402300799,999999999))}}]),e}(),cI=function(){function e(t,n,r){or(this,e),void 0===n?n=0:n>t.length&&zE(),void 0===r?r=t.length-n:r>t.length-n&&zE(),this.segments=t,this.offset=n,this.len=r}return ur(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),lI=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.apply(this,arguments)}return ur(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new GE(HE.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,mi(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(cI),hI=/^[_a-zA-Z][_a-zA-Z0-9]*$/,fI=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.apply(this,arguments)}return ur(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return hI.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new GE(HE.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new GE(HE.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new GE(HE.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new GE(HE.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(cI),dI=function(){function e(t){or(this,e),this.path=t}return ur(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===lI.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(lI.fromString(t))}},{key:"fromName",value:function(t){return new e(lI.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(lI.emptyPath())}},{key:"comparator",value:function(e,t){return lI.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new lI(t.slice()))}}]),e}(),pI=ur((function e(t,n,r,i){or(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function vI(e){return e.fields.find((function(e){return 2===e.kind}))}function mI(e){return e.fields.filter((function(e){return 2!==e.kind}))}pI.UNKNOWN_ID=-1;var gI=ur((function e(t,n){or(this,e),this.fieldPath=t,this.kind=n}));var yI=function(){function e(t,n){or(this,e),this.sequenceNumber=t,this.offset=n}return ur(e,null,[{key:"empty",value:function(){return new e(0,wI.min())}}]),e}();function kI(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=uI.fromTimestamp(1e9===r?new sI(n+1,0):new sI(n,r));return new wI(i,dI.empty(),t)}function bI(e){return new wI(e.readTime,e.key,-1)}var wI=function(){function e(t,n,r){or(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return ur(e,null,[{key:"min",value:function(){return new e(uI.min(),dI.empty(),-1)}},{key:"max",value:function(){return new e(uI.max(),dI.empty(),-1)}}]),e}();function _I(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=dI.comparator(e.documentKey,t.documentKey))?n:iI(e.largestBatchId,t.largestBatchId)}var xI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",EI=function(){function e(){or(this,e),this.onCommittedListeners=[]}return ur(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function II(e){return SI.apply(this,arguments)}function SI(){return SI=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===HE.FAILED_PRECONDITION&&t.message===xI){e.next=2;break}throw t;case 2:jE("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),SI.apply(this,arguments)}var CI=function(){function e(t){var n=this;or(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return ur(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&zE(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=cr(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),TI=function(){function e(t,n){var r=this;or(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.v=new KE,this.transaction.oncomplete=function(){r.v.resolve()},this.transaction.onabort=function(){n.error?r.v.reject(new PI(t,n.error)):r.v.resolve()},this.transaction.onerror=function(e){var n=MI(e.target.error);r.v.reject(new PI(t,n))}}return ur(e,[{key:"R",get:function(){return this.v.promise}},{key:"abort",value:function(e){e&&this.v.reject(e),this.aborted||(jE("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new DI(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new PI(n,t)}}}]),e}(),NI=function(){function e(t,n,r){or(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(Lr())&&UE("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return ur(e,[{key:"$",value:function(){var e=yi(pi().mark((function e(t){var n=this;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return jE("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new PI(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new GE(HE.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new GE(HE.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new PI(t,n))},i.onupgradeneeded=function(e){jE("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.O(t,i.transaction,e.oldVersion,n.version).next((function(){jE("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=yi(pi().mark((function e(t,n,r,i){var a,o,s,u,c=this;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,s=pi().mark((function e(){var n,s,u,l;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=TI.open(c.db,t,a?"readonly":"readwrite",r),s=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),CI.reject(e)})).toPromise(),s.catch((function(){})),e.next=9,n.R;case 9:return e.t0=s,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),u=e.t1,l="FirebaseError"!==u.name&&o<3,jE("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(u)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(s(),"t0",4);case 4:if(!(u=e.t0)){e.next=7;break}return e.abrupt("return",u.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return jE("SimpleDb","Removing database:",e),OI(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!zr())return!1;if(e.C())return!0;var t=Lr(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/notebook",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDE-Cl5RxG1byLc4pjoBxD3aXWO3wi43P8",REACT_APP_FIREBASE_AUTH_DOMAIN:"diary-6211f.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"diary-6211f",REACT_APP_FIREBASE_STORAGE_BUCKET:"diary-6211f.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"765031385372",REACT_APP_FIREBASE_APP_ID:"1:765031385372:web:9b72a3164df87c4c9712d9",REACT_APP_FIREBASE_MEASUMENT_ID:"G-5VWBRJH7V4"})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),RI=function(){function e(t){or(this,e),this.L=t,this.q=!1,this.U=null}return ur(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return OI(this.L.delete())}}]),e}(),PI=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this,HE.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return ur(n)}(GE);function AI(e){return"IndexedDbTransactionError"===e.name}var DI=function(){function e(t){or(this,e),this.store=t}return ur(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(jE("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(jE("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),OI(n)}},{key:"add",value:function(e){return jE("SimpleDb","ADD",this.store.name,e,e),OI(this.store.add(e))}},{key:"get",value:function(e){var t=this;return OI(this.store.get(e)).next((function(n){return void 0===n&&(n=null),jE("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return jE("SimpleDb","DELETE",this.store.name,e),OI(this.store.delete(e))}},{key:"count",value:function(){return jE("SimpleDb","COUNT",this.store.name),OI(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new CI((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new CI((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){jE("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new CI((function(n,r){t.onerror=function(e){var t=MI(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new CI((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new RI(i),o=t(i.primaryKey,i.value,a);if(o instanceof CI){var s=o.catch((function(e){return a.done(),CI.reject(e)}));n.push(s)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return CI.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function OI(e){return new CI((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=MI(e.target.error);n(t)}}))}var LI=!1;function MI(e){var t=NI.S(Lr());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new GE("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return LI||(LI=!0,setTimeout((function(){throw r}),0)),r}}return e}var FI=function(){function e(t,n){or(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return ur(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;jE("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=jE,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!AI(e.t4)){e.next=17;break}jE("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,II(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),jI=function(){function e(t,n){or(this,e),this.localStore=t,this.persistence=n}return ur(e,[{key:"nt",value:function(){var e=yi(pi().mark((function e(){var t,n=this,r=arguments;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return CI.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return jE("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return jE("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=bI(t);_I(r,n)>0&&(n=r)})),new wI(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),UI=function(){function e(t,n){var r=this;or(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return ur(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function qI(e){return null==e}function VI(e){return 0===e&&1/e==-1/0}function zI(e){return"number"==typeof e&&Number.isInteger(e)&&!VI(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function BI(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=HI(t)),t=WI(e.get(n),t);return HI(t)}function WI(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function HI(e){return e+"\x01\x01"}function GI(e){var t=e.length;if(BE(t>=2),2===t)return BE("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),lI.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&zE(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:zE()}a=o+2}return new lI(r)}UI.ct=-1;var KI=["userId","batchId"];function QI(e,t){return[e,BI(t)]}function YI(e,t,n){return[e,BI(t),n]}var XI={},JI=["prefixPath","collectionGroup","readTime","documentId"],$I=["prefixPath","collectionGroup","documentId"],ZI=["collectionGroup","readTime","prefixPath","documentId"],eS=["canonicalId","targetId"],tS=["targetId","path"],nS=["path","targetId"],rS=["collectionId","parent"],iS=["indexId","uid"],aS=["uid","sequenceNumber"],oS=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sS=["indexId","uid","orderedDocumentKey"],uS=["userId","collectionPath","documentId"],cS=["userId","collectionPath","largestBatchId"],lS=["userId","collectionGroup","largestBatchId"],hS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),fS=[].concat(mi(hS),["documentOverlays"]),dS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pS=dS,vS=[].concat(pS,["indexConfiguration","indexState","indexEntries"]),mS=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this)).ht=e,i.currentSequenceNumber=r,i}return ur(n)}(EI);function gS(e,t){var n=WE(e);return NI.M(n.ht,t)}function yS(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function kS(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function bS(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var wS=function(){function e(t,n){or(this,e),this.comparator=t,this.root=n||xS.EMPTY}return ur(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,xS.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,xS.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new _S(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new _S(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new _S(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new _S(this.root,e,this.comparator,!0)}}]),e}(),_S=function(){function e(t,n,r,i){or(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return ur(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),xS=function(){function e(t,n,r,i,a){or(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return ur(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw zE();if(this.right.isRed())throw zE();var e=this.left.check();if(e!==this.right.check())throw zE();return e+(this.isRed()?0:1)}}]),e}();xS.EMPTY=null,xS.RED=!0,xS.BLACK=!1,xS.EMPTY=new(function(){function e(){or(this,e),this.size=0}return ur(e,[{key:"key",get:function(){throw zE()}},{key:"value",get:function(){throw zE()}},{key:"color",get:function(){throw zE()}},{key:"left",get:function(){throw zE()}},{key:"right",get:function(){throw zE()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new xS(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var ES=function(){function e(t){or(this,e),this.comparator=t,this.data=new wS(this.comparator)}return ur(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new IS(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new IS(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),IS=function(){function e(t){or(this,e),this.iter=t}return ur(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function SS(e){return e.hasNext()?e.getNext():void 0}var CS=function(){function e(t){or(this,e),this.fields=t,t.sort(fI.comparator)}return ur(e,[{key:"unionWith",value:function(t){var n,r=new ES(fI.comparator),i=cr(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=cr(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=cr(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return aI(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),TS=function(e){fr(n,e);var t=vr(n);function n(){var e;return or(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return ur(n)}(gr(Error));var NS=function(e){function t(e){or(this,t),this.binaryString=e}return ur(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return iI(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new TS("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();NS.EMPTY_BYTE_STRING=new NS("");var RS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function PS(e){if(BE(!!e),"string"==typeof e){var t=0,n=RS.exec(e);if(BE(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:AS(e.seconds),nanos:AS(e.nanos)}}function AS(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function DS(e){return"string"==typeof e?NS.fromBase64String(e):NS.fromUint8Array(e)}function OS(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function LS(e){var t=e.mapValue.fields.__previous_value__;return OS(t)?LS(t):t}function MS(e){var t=PS(e.mapValue.fields.__local_write_time__.timestampValue);return new sI(t.seconds,t.nanos)}var FS=ur((function e(t,n,r,i,a,o,s,u,c){or(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=c})),jS=function(){function e(t,n){or(this,e),this.projectId=t,this.database=n||"(default)"}return ur(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),US={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},qS={nullValue:"NULL_VALUE"};function VS(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?OS(e)?4:tC(e)?9007199254740991:10:zE()}function zS(e,t){if(e===t)return!0;var n=VS(e);if(n!==VS(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return MS(e).isEqual(MS(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=PS(e.timestampValue),r=PS(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return DS(e.bytesValue).isEqual(DS(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return AS(e.geoPointValue.latitude)===AS(t.geoPointValue.latitude)&&AS(e.geoPointValue.longitude)===AS(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return AS(e.integerValue)===AS(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=AS(e.doubleValue),r=AS(t.doubleValue);return n===r?VI(n)===VI(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return aI(e.arrayValue.values||[],t.arrayValue.values||[],zS);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(yS(n)!==yS(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!zS(n[i],r[i])))return!1;return!0}(e,t);default:return zE()}}function BS(e,t){return void 0!==(e.values||[]).find((function(e){return zS(e,t)}))}function WS(e,t){if(e===t)return 0;var n=VS(e),r=VS(t);if(n!==r)return iI(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return iI(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=AS(e.integerValue||e.doubleValue),r=AS(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return HS(e.timestampValue,t.timestampValue);case 4:return HS(MS(e),MS(t));case 5:return iI(e.stringValue,t.stringValue);case 6:return function(e,t){var n=DS(e),r=DS(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=iI(n[i],r[i]);if(0!==a)return a}return iI(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=iI(AS(e.latitude),AS(t.latitude));return 0!==n?n:iI(AS(e.longitude),AS(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=WS(n[i],r[i]);if(a)return a}return iI(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===US.mapValue&&t===US.mapValue)return 0;if(e===US.mapValue)return 1;if(t===US.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=iI(r[o],a[o]);if(0!==s)return s;var u=WS(n[r[o]],i[a[o]]);if(0!==u)return u}return iI(r.length,a.length)}(e.mapValue,t.mapValue);default:throw zE()}}function HS(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return iI(e,t);var n=PS(e),r=PS(t),i=iI(n.seconds,r.seconds);return 0!==i?i:iI(n.nanos,r.nanos)}function GS(e){return KS(e)}function KS(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=PS(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?DS(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,dI.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=cr(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=KS(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=cr(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(KS(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):zE();var t,n}function QS(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function YS(e){return!!e&&"integerValue"in e}function XS(e){return!!e&&"arrayValue"in e}function JS(e){return!!e&&"nullValue"in e}function $S(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ZS(e){return!!e&&"mapValue"in e}function eC(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return kS(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=eC(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=eC(e.arrayValue.values[r]);return n}return Object.assign({},e)}function tC(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function nC(e){return"nullValue"in e?qS:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?QS(jS.empty(),dI.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:zE()}function rC(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?QS(jS.empty(),dI.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?US:zE()}function iC(e,t){var n=WS(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function aC(e,t){var n=WS(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var oC=function(){function e(t){or(this,e),this.value=t}return ur(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ZS(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=eC(t)}},{key:"setAll",value:function(e){var t=this,n=fI.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=eC(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ZS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return zS(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ZS(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){kS(t,(function(t,n){return e[t]=n}));var r,i=cr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(eC(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function sC(e){var t=[];return kS(e.fields,(function(e,n){var r=new fI([e]);if(ZS(n)){var i=sC(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=cr(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new CS(t)}var uC=function(){function e(t,n,r,i,a,o,s){or(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return ur(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(uI.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=oC.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=oC.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=uI.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,uI.min(),uI.min(),uI.min(),oC.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,uI.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,uI.min(),uI.min(),oC.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,uI.min(),uI.min(),oC.empty(),2)}}]),e}(),cC=ur((function e(t,n){or(this,e),this.position=t,this.inclusive=n}));function lC(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?dI.comparator(dI.fromName(o.referenceValue),n.key):WS(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function hC(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!zS(e.position[n],t.position[n]))return!1;return!0}var fC=ur((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";or(this,e),this.field=t,this.dir=n}));function dC(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var pC=ur((function e(){or(this,e)})),vC=function(e){fr(n,e);var t=vr(n);function n(e,r,i){var a;return or(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return ur(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(WS(t,this.value)):null!==t&&VS(this.value)===VS(t)&&this.matchesComparison(WS(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return zE()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new IC(e,t,r):"array-contains"===t?new NC(e,r):"in"===t?new RC(e,r):"not-in"===t?new PC(e,r):"array-contains-any"===t?new AC(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new SC(e,n):new CC(e,n)}}]),n}(pC),mC=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this)).filters=e,i.op=r,i.lt=null,i}return ur(n,[{key:"matches",value:function(e){return gC(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t,n=cr(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(pC);function gC(e){return"and"===e.op}function yC(e){return"or"===e.op}function kC(e){return bC(e)&&gC(e)}function bC(e){var t,n=cr(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof mC)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function wC(e){if(e instanceof vC)return e.field.canonicalString()+e.op.toString()+GS(e.value);if(kC(e))return e.filters.map((function(e){return wC(e)})).join(",");var t=e.filters.map((function(e){return wC(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function _C(e,t){return e instanceof vC?function(e,t){return t instanceof vC&&e.op===t.op&&e.field.isEqual(t.field)&&zS(e.value,t.value)}(e,t):e instanceof mC?function(e,t){return t instanceof mC&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&_C(n,t.filters[r])}),!0)}(e,t):void zE()}function xC(e,t){var n=e.filters.concat(t);return mC.create(n,e.op)}function EC(e){return e instanceof vC?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(GS(e.value))}(e):e instanceof mC?function(e){return e.op.toString()+" {"+e.getFilters().map(EC).join(" ,")+"}"}(e):"Filter"}var IC=function(e){fr(n,e);var t=vr(n);function n(e,r,i){var a;return or(this,n),(a=t.call(this,e,r,i)).key=dI.fromName(i.referenceValue),a}return ur(n,[{key:"matches",value:function(e){var t=dI.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(vC),SC=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this,e,"in",r)).keys=TC("in",r),i}return ur(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(vC),CC=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this,e,"not-in",r)).keys=TC("not-in",r),i}return ur(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(vC);function TC(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return dI.fromName(e.referenceValue)}))}var NC=function(e){fr(n,e);var t=vr(n);function n(e,r){return or(this,n),t.call(this,e,"array-contains",r)}return ur(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return XS(t)&&BS(t.arrayValue,this.value)}}]),n}(vC),RC=function(e){fr(n,e);var t=vr(n);function n(e,r){return or(this,n),t.call(this,e,"in",r)}return ur(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&BS(this.value.arrayValue,t)}}]),n}(vC),PC=function(e){fr(n,e);var t=vr(n);function n(e,r){return or(this,n),t.call(this,e,"not-in",r)}return ur(n,[{key:"matches",value:function(e){if(BS(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!BS(this.value.arrayValue,t)}}]),n}(vC),AC=function(e){fr(n,e);var t=vr(n);function n(e,r){return or(this,n),t.call(this,e,"array-contains-any",r)}return ur(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!XS(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return BS(t.value.arrayValue,e)}))}}]),n}(vC),DC=ur((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;or(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.dt=null}));function OC(e){return new DC(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function LC(e){var t=WE(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return wC(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),qI(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return GS(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return GS(e)})).join(",")),t.dt=n}return t.dt}function MC(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!dC(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!_C(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!hC(e.startAt,t.startAt)&&hC(e.endAt,t.endAt)}function FC(e){return dI.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function jC(e,t){return e.filters.filter((function(e){return e instanceof vC&&e.field.isEqual(t)}))}function UC(e,t,n){var r,i=qS,a=!0,o=cr(jC(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=qS,c=!0;switch(s.op){case"<":case"<=":u=nC(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=qS}iC({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];iC({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function qC(e,t,n){var r,i=US,a=!0,o=cr(jC(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=US,c=!0;switch(s.op){case">=":case">":u=rC(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=US}aC({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];aC({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var VC=ur((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;or(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.wt=null,this._t=null,this.startAt,this.endAt}));function zC(e,t,n,r,i,a,o,s){return new VC(e,t,n,r,i,a,o,s)}function BC(e){return new VC(e)}function WC(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function HC(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function GC(e){var t,n=cr(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function KC(e){return null!==e.collectionGroup}function QC(e){var t=WE(e);if(null===t.wt){t.wt=[];var n=GC(t),r=HC(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new fC(n)),t.wt.push(new fC(fI.keyField(),"asc"));else{var i,a=!1,o=cr(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.wt.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new fC(fI.keyField(),u))}}}return t.wt}function YC(e){var t=WE(e);if(!t._t)if("F"===t.limitType)t._t=OC(t.path,t.collectionGroup,QC(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=cr(QC(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new fC(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new cC(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new cC(t.startAt.position,t.startAt.inclusive):null;t._t=OC(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t._t}function XC(e,t){t.getFirstInequalityField(),GC(e);var n=e.filters.concat([t]);return new VC(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function JC(e,t,n){return new VC(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function $C(e,t){return MC(YC(e),YC(t))&&e.limitType===t.limitType}function ZC(e){return"".concat(LC(YC(e)),"|lt:").concat(e.limitType)}function eT(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return EC(e)})).join(", "),"]")),qI(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return GS(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return GS(e)})).join(",")),"Target(".concat(t,")")}(YC(e)),"; limitType=").concat(e.limitType,")")}function tT(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):dI.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=cr(QC(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=cr(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=lC(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,QC(e),t))&&!(e.endAt&&!function(e,t,n){var r=lC(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,QC(e),t))}(e,t)}function nT(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function rT(e){return function(t,n){var r,i=!1,a=cr(QC(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=iT(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function iT(e,t,n){var r=e.field.isKeyField()?dI.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?WS(r,i):zE()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return zE()}}var aT=function(){function e(t,n){or(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return ur(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=cr(n);try{for(i.s();!(r=i.n()).done;){var a=nr(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){kS(this.inner,(function(t,n){var r,i=cr(n);try{for(i.s();!(r=i.n()).done;){var a=nr(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return bS(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),oT=new wS(dI.comparator);function sT(){return oT}var uT=new wS(dI.comparator);function cT(){for(var e=uT,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function lT(e){var t=uT;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function hT(){return dT()}function fT(){return dT()}function dT(){return new aT((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var pT=new wS(dI.comparator),vT=new ES(dI.comparator);function mT(){for(var e=vT,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var gT=new ES(iI);function yT(){return gT}function kT(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:VI(t)?"-0":t}}function bT(e){return{integerValue:""+e}}function wT(e,t){return zI(t)?bT(t):kT(e,t)}var _T=ur((function e(){or(this,e),this._=void 0}));function xT(e,t,n){return e instanceof ST?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&OS(t)&&(t=LS(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof CT?TT(e,t):e instanceof NT?RT(e,t):function(e,t){var n=IT(e,t),r=AT(n)+AT(e.gt);return YS(n)&&YS(e.gt)?bT(r):kT(e.serializer,r)}(e,t)}function ET(e,t,n){return e instanceof CT?TT(e,t):e instanceof NT?RT(e,t):n}function IT(e,t){return e instanceof PT?YS(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var ST=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.apply(this,arguments)}return ur(n)}(_T),CT=function(e){fr(n,e);var t=vr(n);function n(e){var r;return or(this,n),(r=t.call(this)).elements=e,r}return ur(n)}(_T);function TT(e,t){var n,r=DT(t),i=cr(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return zS(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var NT=function(e){fr(n,e);var t=vr(n);function n(e){var r;return or(this,n),(r=t.call(this)).elements=e,r}return ur(n)}(_T);function RT(e,t){var n,r=DT(t),i=cr(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!zS(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var PT=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this)).serializer=e,i.gt=r,i}return ur(n)}(_T);function AT(e){return AS(e.integerValue||e.doubleValue)}function DT(e){return XS(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var OT=ur((function e(t,n){or(this,e),this.field=t,this.transform=n}));var LT=ur((function e(t,n){or(this,e),this.version=t,this.transformResults=n})),MT=function(){function e(t,n){or(this,e),this.updateTime=t,this.exists=n}return ur(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function FT(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var jT=ur((function e(){or(this,e)}));function UT(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new JT(e.key,MT.none()):new WT(e.key,e.data,MT.none());var n,r=e.data,i=oC.empty(),a=new ES(fI.comparator),o=cr(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new HT(e.key,i,new CS(a.toArray()),MT.none())}function qT(e,t,n){e instanceof WT?function(e,t,n){var r=e.value.clone(),i=KT(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof HT?function(e,t,n){if(FT(e.precondition,t)){var r=KT(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(GT(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function VT(e,t,n,r){return e instanceof WT?function(e,t,n,r){if(!FT(e.precondition,t))return n;var i=e.value.clone(),a=QT(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof HT?function(e,t,n,r){if(!FT(e.precondition,t))return n;var i=QT(e.fieldTransforms,r,t),a=t.data;return a.setAll(GT(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return FT(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function zT(e,t){var n,r=null,i=cr(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=IT(a.transform,o||null);null!=s&&(null===r&&(r=oC.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function BT(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&aI(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof CT&&t instanceof CT||e instanceof NT&&t instanceof NT?aI(e.elements,t.elements,zS):e instanceof PT&&t instanceof PT?zS(e.gt,t.gt):e instanceof ST&&t instanceof ST}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var WT=function(e){fr(n,e);var t=vr(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return or(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return ur(n,[{key:"getFieldMask",value:function(){return null}}]),n}(jT),HT=function(e){fr(n,e);var t=vr(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return or(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return ur(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(jT);function GT(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function KT(e,t,n){var r=new Map;BE(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,ET(o,s,n[i]))}return r}function QT(e,t,n){var r,i=new Map,a=cr(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,xT(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var YT,XT,JT=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return ur(n,[{key:"getFieldMask",value:function(){return null}}]),n}(jT),$T=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return ur(n,[{key:"getFieldMask",value:function(){return null}}]),n}(jT),ZT=function(){function e(t,n,r,i){or(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return ur(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&qT(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=cr(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=VT(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=cr(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=VT(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=fT();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=UT(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(uI.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),mT())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&aI(this.mutations,e.mutations,(function(e,t){return BT(e,t)}))&&aI(this.baseMutations,e.baseMutations,(function(e,t){return BT(e,t)}))}}]),e}(),eN=function(){function e(t,n,r,i){or(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return ur(e,null,[{key:"from",value:function(t,n,r){BE(t.mutations.length===r.length);for(var i=pT,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),tN=function(){function e(t,n){or(this,e),this.largestBatchId=t,this.mutation=n}return ur(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),nN=ur((function e(t,n){or(this,e),this.count=t,this.unchangedNames=n}));function rN(e){switch(e){default:return zE();case HE.CANCELLED:case HE.UNKNOWN:case HE.DEADLINE_EXCEEDED:case HE.RESOURCE_EXHAUSTED:case HE.INTERNAL:case HE.UNAVAILABLE:case HE.UNAUTHENTICATED:return!1;case HE.INVALID_ARGUMENT:case HE.NOT_FOUND:case HE.ALREADY_EXISTS:case HE.PERMISSION_DENIED:case HE.FAILED_PRECONDITION:case HE.ABORTED:case HE.OUT_OF_RANGE:case HE.UNIMPLEMENTED:case HE.DATA_LOSS:return!0}}function iN(e){if(void 0===e)return UE("GRPC error has no .code"),HE.UNKNOWN;switch(e){case YT.OK:return HE.OK;case YT.CANCELLED:return HE.CANCELLED;case YT.UNKNOWN:return HE.UNKNOWN;case YT.DEADLINE_EXCEEDED:return HE.DEADLINE_EXCEEDED;case YT.RESOURCE_EXHAUSTED:return HE.RESOURCE_EXHAUSTED;case YT.INTERNAL:return HE.INTERNAL;case YT.UNAVAILABLE:return HE.UNAVAILABLE;case YT.UNAUTHENTICATED:return HE.UNAUTHENTICATED;case YT.INVALID_ARGUMENT:return HE.INVALID_ARGUMENT;case YT.NOT_FOUND:return HE.NOT_FOUND;case YT.ALREADY_EXISTS:return HE.ALREADY_EXISTS;case YT.PERMISSION_DENIED:return HE.PERMISSION_DENIED;case YT.FAILED_PRECONDITION:return HE.FAILED_PRECONDITION;case YT.ABORTED:return HE.ABORTED;case YT.OUT_OF_RANGE:return HE.OUT_OF_RANGE;case YT.UNIMPLEMENTED:return HE.UNIMPLEMENTED;case YT.DATA_LOSS:return HE.DATA_LOSS;default:return zE()}}(XT=YT||(YT={}))[XT.OK=0]="OK",XT[XT.CANCELLED=1]="CANCELLED",XT[XT.UNKNOWN=2]="UNKNOWN",XT[XT.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",XT[XT.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",XT[XT.NOT_FOUND=5]="NOT_FOUND",XT[XT.ALREADY_EXISTS=6]="ALREADY_EXISTS",XT[XT.PERMISSION_DENIED=7]="PERMISSION_DENIED",XT[XT.UNAUTHENTICATED=16]="UNAUTHENTICATED",XT[XT.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",XT[XT.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",XT[XT.ABORTED=10]="ABORTED",XT[XT.OUT_OF_RANGE=11]="OUT_OF_RANGE",XT[XT.UNIMPLEMENTED=12]="UNIMPLEMENTED",XT[XT.INTERNAL=13]="INTERNAL",XT[XT.UNAVAILABLE=14]="UNAVAILABLE",XT[XT.DATA_LOSS=15]="DATA_LOSS";var aN=function(){function e(){or(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return ur(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return oN}},{key:"getOrCreateInstance",value:function(){return null===oN&&(oN=new e),oN}}]),e}(),oN=null;function sN(){return new TextEncoder}var uN=new AE([4294967295,4294967295],0);function cN(e){var t=sN().encode(e),n=new PE;return n.update(t),new Uint8Array(n.digest())}function lN(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new AE([n,r],0),new AE([i,a],0)]}var hN=function(){function e(t,n,r){if(or(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fN("Invalid padding: ".concat(n));if(r<0)throw new fN("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new fN("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new fN("Invalid padding when bitmap length is 0: ".concat(n));this.It=8*t.length-n,this.Tt=AE.fromNumber(this.It)}return ur(e,[{key:"Et",value:function(e,t,n){var r=e.add(t.multiply(AE.fromNumber(n)));return 1===r.compare(uN)&&(r=new AE([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(e){if(0===this.It)return!1;for(var t=nr(lN(cN(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);if(!this.At(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.It)for(var t=nr(lN(cN(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),fN=function(e){fr(n,e);var t=vr(n);function n(){var e;return or(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return ur(n)}(gr(Error)),dN=function(){function e(t,n,r,i,a){or(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return ur(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,pN.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(uI.min(),i,new wS(iI),sT(),mT())}}]),e}(),pN=function(){function e(t,n,r,i,a){or(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return ur(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,mT(),mT(),mT())}}]),e}(),vN=ur((function e(t,n,r,i){or(this,e),this.Pt=t,this.removedTargetIds=n,this.key=r,this.bt=i})),mN=ur((function e(t,n){or(this,e),this.targetId=t,this.Vt=n})),gN=ur((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NS.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;or(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),yN=function(){function e(){or(this,e),this.St=0,this.Dt=wN(),this.Ct=NS.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return ur(e,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=mT(),t=mT(),n=mT();return this.Dt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:zE()}})),new pN(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=wN()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),e}(),kN=function(){function e(t){or(this,e),this.Gt=t,this.Qt=new Map,this.jt=sT(),this.zt=bN(),this.Wt=new wS(iI)}return ur(e,[{key:"Ht",value:function(e){var t,n=cr(e.Pt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.bt&&e.bt.isFoundDocument()?this.Jt(r,e.bt):this.Yt(r,e.key,e.bt)}}catch(s){n.e(s)}finally{n.f()}var i,a=cr(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Yt(o,e.key,e.bt)}}catch(s){a.e(s)}finally{a.f()}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Zt(n);switch(e.state){case 0:t.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||t.removeTarget(n);break;case 3:t.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),r.$t(e.resumeToken));break;default:zE()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,r){n.te(r)&&t(r)}))}},{key:"ne",value:function(e){var t,n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){var a=i.target;if(FC(a))if(0===r){var o=new dI(a.path);this.Yt(n,o,uC.newNoDocument(o,uI.min()))}else BE(1===r);else{var s=this.ie(n);if(s!==r){var u=this.re(e,s);if(0!==u){this.ee(n);var c=2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,c)}null===(t=aN.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,s,u,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(u=null===(s=null==l?void 0:l.bits)||void 0===s?void 0:s.padding)&&void 0!==u?u:0}),c}(u,s,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,s=r.bits,u=s.bitmap,c=void 0===u?"":u,l=s.padding,h=void 0===l?0:l,f=r.hashCount,d=void 0===f?0:f;try{a=DS(c).toUint8Array()}catch(e){if(e instanceof TS)return qE("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new hN(a,h,d)}catch(e){return qE(e instanceof fN?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:i!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,r=this.Gt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.vt(o)||(n.Yt(e,r,null),i++)})),i}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(r,i){var a=t.se(i);if(a){if(r.current&&FC(a.target)){var o=new dI(a.target.path);null!==t.jt.get(o)||t.ae(i,o)||t.Yt(i,o,uC.newNoDocument(o,e))}r.Mt&&(n.set(i,r.Ot()),r.Ft())}}));var r=mT();this.zt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.se(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var i=new dN(e,n,this.Wt,this.jt,r);return this.jt=sT(),this.zt=bN(),this.Wt=new wS(iI),i}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new yN,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new ES(iI),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||jE("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new yN),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),e}();function bN(){return new wS(dI.comparator)}function wN(){return new wS(dI.comparator)}var _N={asc:"ASCENDING",desc:"DESCENDING"},xN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EN={and:"AND",or:"OR"},IN=ur((function e(t,n){or(this,e),this.databaseId=t,this.useProto3Json=n}));function SN(e,t){return e.useProto3Json||qI(t)?t:{value:t}}function CN(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function TN(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function NN(e,t){return CN(e,t.toTimestamp())}function RN(e){return BE(!!e),uI.fromTimestamp(function(e){var t=PS(e);return new sI(t.seconds,t.nanos)}(e))}function PN(e,t){return function(e){return new lI(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function AN(e){var t=lI.fromString(e);return BE(tR(t)),t}function DN(e,t){return PN(e.databaseId,t.path)}function ON(e,t){var n=AN(t);if(n.get(1)!==e.databaseId.projectId)throw new GE(HE.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new GE(HE.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new dI(jN(n))}function LN(e,t){return PN(e.databaseId,t)}function MN(e){var t=AN(e);return 4===t.length?lI.emptyPath():jN(t)}function FN(e){return new lI(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function jN(e){return BE(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function UN(e,t,n){return{name:DN(e,t),fields:n.value.mapValue.fields}}function qN(e,t,n){var r=ON(e,t.name),i=RN(t.updateTime),a=t.createTime?RN(t.createTime):uI.min(),o=new oC({mapValue:{fields:t.fields}}),s=uC.newFoundDocument(r,i,a,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function VN(e,t){return"found"in t?function(e,t){BE(!!t.found),t.found.name,t.found.updateTime;var n=ON(e,t.found.name),r=RN(t.found.updateTime),i=t.found.createTime?RN(t.found.createTime):uI.min(),a=new oC({mapValue:{fields:t.found.fields}});return uC.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){BE(!!t.missing),BE(!!t.readTime);var n=ON(e,t.missing),r=RN(t.readTime);return uC.newNoDocument(n,r)}(e,t):zE()}function zN(e,t){var n;if(t instanceof WT)n={update:UN(e,t.key,t.value)};else if(t instanceof JT)n={delete:DN(e,t.key)};else if(t instanceof HT)n={update:UN(e,t.key,t.data),updateMask:eR(t.fieldMask)};else{if(!(t instanceof $T))return zE();n={verify:DN(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof ST)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof CT)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof NT)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof PT)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw zE()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:NN(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:zE()}(e,t.precondition)),n}function BN(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?MT.updateTime(RN(e.updateTime)):void 0!==e.exists?MT.exists(e.exists):MT.none()}(t.currentDocument):MT.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)BE("REQUEST_TIME"===t.setToServerValue),n=new ST;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new CT(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new NT(i)}else"increment"in t?n=new PT(e,t.increment):zE();var a=fI.fromServerFormat(t.fieldPath);return new OT(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=ON(e,t.update.name),a=new oC({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new CS(t.map((function(e){return fI.fromServerFormat(e)})))}(t.updateMask);return new HT(i,a,o,n,r)}return new WT(i,a,n,r)}if(t.delete){var s=ON(e,t.delete);return new JT(s,n)}if(t.verify){var u=ON(e,t.verify);return new $T(u,n)}return zE()}function WN(e,t){return{documents:[LN(e,t.path)]}}function HN(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=LN(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=LN(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return ZN(mC.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:JN(e.field),direction:QN(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=SN(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function GN(e){var t=MN(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){BE(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=KN(e);return t instanceof mC&&kC(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new fC($N(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return qI(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new cC(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new cC(n,t)}(n.endAt)),zC(t,i,s,o,u,"F",c,l)}function KN(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=$N(e.unaryFilter.field);return vC.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=$N(e.unaryFilter.field);return vC.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=$N(e.unaryFilter.field);return vC.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=$N(e.unaryFilter.field);return vC.create(i,"!=",{nullValue:"NULL_VALUE"});default:return zE()}}(e):void 0!==e.fieldFilter?function(e){return vC.create($N(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zE()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return mC.create(e.compositeFilter.filters.map((function(e){return KN(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return zE()}}(e.compositeFilter.op))}(e):zE()}function QN(e){return _N[e]}function YN(e){return xN[e]}function XN(e){return EN[e]}function JN(e){return{fieldPath:e.canonicalString()}}function $N(e){return fI.fromServerFormat(e.fieldPath)}function ZN(e){return e instanceof vC?function(e){if("=="===e.op){if($S(e.value))return{unaryFilter:{field:JN(e.field),op:"IS_NAN"}};if(JS(e.value))return{unaryFilter:{field:JN(e.field),op:"IS_NULL"}}}else if("!="===e.op){if($S(e.value))return{unaryFilter:{field:JN(e.field),op:"IS_NOT_NAN"}};if(JS(e.value))return{unaryFilter:{field:JN(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:JN(e.field),op:YN(e.op),value:e.value}}}(e):e instanceof mC?function(e){var t=e.getFilters().map((function(e){return ZN(e)}));return 1===t.length?t[0]:{compositeFilter:{op:XN(e.op),filters:t}}}(e):zE()}function eR(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function tR(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var nR=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:uI.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:uI.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:NS.EMPTY_BYTE_STRING,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;or(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=u}return ur(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),rR=ur((function e(t){or(this,e),this.fe=t}));function iR(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:aR(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:DN(e,t.key),fields:t.data.value.mapValue.fields,updateTime:CN(e,t.version.toTimestamp()),createTime:CN(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:oR(t.version)};else{if(!t.isUnknownDocument())return zE();r.unknownDocument={path:n.path.toArray(),version:oR(t.version)}}return r}function aR(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function oR(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function sR(e){var t=new sI(e.seconds,e.nanoseconds);return uI.fromTimestamp(t)}function uR(e,t){for(var n=(t.baseMutations||[]).map((function(t){return BN(e.fe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return BN(e.fe,t)})),s=sI.fromMillis(t.localWriteTimeMs);return new ZT(t.batchId,s,n,o)}function cR(e){var t,n,r=sR(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?sR(e.lastLimboFreeSnapshotVersion):uI.min();return void 0!==e.query.documents?(BE(1===(n=e.query).documents.length),t=YC(BC(MN(n.documents[0])))):t=function(e){return YC(GN(e))}(e.query),new nR(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,NS.fromBase64String(e.resumeToken))}function lR(e,t){var n,r=oR(t.snapshotVersion),i=oR(t.lastLimboFreeSnapshotVersion);n=FC(t.target)?WN(e.fe,t.target):HN(e.fe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:LC(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function hR(e){var t=GN({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?JC(t,t.limit,"L"):t}function fR(e,t){return new tN(t.largestBatchId,BN(e.fe,t.overlayMutation))}function dR(e,t){var n=t.path.lastSegment();return[e,BI(t.path.popLast()),n]}function pR(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:oR(r.readTime),documentKey:BI(r.documentKey.path),largestBatchId:r.largestBatchId}}var vR=function(){function e(){or(this,e)}return ur(e,[{key:"getBundleMetadata",value:function(e,t){return mR(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:sR(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return mR(e).put({bundleId:(n=t).id,createTime:oR(RN(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return gR(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:hR(t.bundledQuery),readTime:sR(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return gR(e).put(function(e){return{name:e.name,readTime:oR(RN(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function mR(e){return gS(e,"bundles")}function gR(e){return gS(e,"namedQueries")}var yR=function(){function e(t,n){or(this,e),this.serializer=t,this.userId=n}return ur(e,[{key:"getOverlay",value:function(e,t){var n=this;return kR(e).get(dR(this.userId,t)).next((function(e){return e?fR(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=hT();return CI.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new tN(t,a);i.push(r.we(e,o))})),CI.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(BI(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(kR(e).J("collectionPathOverlayIndex",i))})),CI.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=hT(),a=BI(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return kR(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=cr(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=fR(r.serializer,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=hT(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return kR(e).X({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=fR(a.serializer,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"we",value:function(e,t){return kR(e).put(function(e,t,n){var r=nr(dR(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:zN(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"de",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function kR(e){return gS(e,"documentOverlays")}var bR=function(){function e(){or(this,e)}return ur(e,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(AS(e.integerValue));else if("doubleValue"in e){var n=AS(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),VI(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie("".concat(r.seconds||"")),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(DS(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?tC(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):zE()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Te(a,t),this.me(n[a],t)}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var r,i=cr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.me(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),dI.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),e}();function wR(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function _R(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=wR(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}bR.Ve=new bR;var xR=function(){function e(){or(this,e),this.buffer=new Uint8Array(1024),this.position=0}return ur(e,[{key:"Se",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.De(n.value),n=t.next();this.Ce()}},{key:"xe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ne(n.value),n=t.next();this.ke()}},{key:"Me",value:function(e){var t,n=cr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{var a=r.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ce()}},{key:"$e",value:function(e){var t,n=cr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{var a=r.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ke()}},{key:"Oe",value:function(e){var t=this.Fe(e),n=_R(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Le",value:function(e){var t=this.Fe(e),n=_R(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"qe",value:function(){this.Ue(255),this.Ue(255)}},{key:"Ke",value:function(){this.Ge(255),this.Ge(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Qe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Fe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"De",value:function(e){var t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}},{key:"Ne",value:function(e){var t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}},{key:"Ce",value:function(){this.Ue(0),this.Ue(1)}},{key:"ke",value:function(){this.Ge(0),this.Ge(1)}},{key:"Ue",value:function(e){this.Be(1),this.buffer[this.position++]=e}},{key:"Ge",value:function(e){this.Be(1),this.buffer[this.position++]=~e}},{key:"Be",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),ER=function(){function e(t){or(this,e),this.je=t}return ur(e,[{key:"Ae",value:function(e){this.je.Se(e)}},{key:"Ie",value:function(e){this.je.Me(e)}},{key:"pe",value:function(e){this.je.Oe(e)}},{key:"ge",value:function(){this.je.qe()}}]),e}(),IR=function(){function e(t){or(this,e),this.je=t}return ur(e,[{key:"Ae",value:function(e){this.je.xe(e)}},{key:"Ie",value:function(e){this.je.$e(e)}},{key:"pe",value:function(e){this.je.Le(e)}},{key:"ge",value:function(){this.je.Ke()}}]),e}(),SR=function(){function e(){or(this,e),this.je=new xR,this.ze=new ER(this.je),this.We=new IR(this.je)}return ur(e,[{key:"seed",value:function(e){this.je.seed(e)}},{key:"He",value:function(e){return 0===e?this.ze:this.We}},{key:"Qe",value:function(){return this.je.Qe()}},{key:"reset",value:function(){this.je.reset()}}]),e}(),CR=function(){function e(t,n,r,i){or(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return ur(e,[{key:"Je",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function TR(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=NR(e.arrayValue,t.arrayValue))?n:0!==(n=NR(e.directionalValue,t.directionalValue))?n:dI.comparator(e.documentKey,t.documentKey)}function NR(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var RR=function(){function e(t){or(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];var n,r=cr(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ze=i:this.Xe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return ur(e,[{key:"tn",value:function(e){BE(e.collectionGroup===this.collectionId);var t=vI(e);if(void 0!==t&&!this.en(t))return!1;for(var n=mI(e),r=new Set,i=0,a=0;i<n.length&&this.en(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){var o=n[i];if(!this.nn(this.Ze,o)||!this.sn(this.Ye[a++],o))return!1}++i}for(;i<n.length;++i){var s=n[i];if(a>=this.Ye.length||!this.sn(this.Ye[a++],s))return!1}return!0}},{key:"en",value:function(e){var t,n=cr(this.Xe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function PR(e){var t,n;if(BE(e instanceof vC||e instanceof mC),e instanceof vC){if(e instanceof RC){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return vC.create(e.field,"==",t)})))||[];return mC.create(r,"or")}return e}var i=e.filters.map((function(e){return PR(e)}));return mC.create(i,e.op)}function AR(e){if(0===e.getFilters().length)return[];var t=MR(PR(e));return BE(LR(t)),DR(t)||OR(t)?[t]:t.getFilters()}function DR(e){return e instanceof vC}function OR(e){return e instanceof mC&&kC(e)}function LR(e){return DR(e)||OR(e)||function(e){if(e instanceof mC&&yC(e)){var t,n=cr(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!DR(r)&&!OR(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function MR(e){if(BE(e instanceof vC||e instanceof mC),e instanceof vC)return e;if(1===e.filters.length)return MR(e.filters[0]);var t=e.filters.map((function(e){return MR(e)})),n=mC.create(t,e.op);return LR(n=UR(n))?n:(BE(n instanceof mC),BE(gC(n)),BE(n.filters.length>1),n.filters.reduce((function(e,t){return FR(e,t)})))}function FR(e,t){var n;return BE(e instanceof vC||e instanceof mC),BE(t instanceof vC||t instanceof mC),n=e instanceof vC?t instanceof vC?function(e,t){return mC.create([e,t],"and")}(e,t):jR(e,t):t instanceof vC?jR(t,e):function(e,t){if(BE(e.filters.length>0&&t.filters.length>0),gC(e)&&gC(t))return xC(e,t.getFilters());var n=yC(e)?e:t,r=yC(e)?t:e,i=n.filters.map((function(e){return FR(e,r)}));return mC.create(i,"or")}(e,t),UR(n)}function jR(e,t){if(gC(t))return xC(t,e.getFilters());var n=t.filters.map((function(t){return FR(e,t)}));return mC.create(n,"or")}function UR(e){if(BE(e instanceof vC||e instanceof mC),e instanceof vC)return e;var t=e.getFilters();if(1===t.length)return UR(t[0]);if(bC(e))return e;var n=t.map((function(e){return UR(e)})),r=[];return n.forEach((function(t){t instanceof vC?r.push(t):t instanceof mC&&(t.op===e.op?r.push.apply(r,mi(t.filters)):r.push(t))})),1===r.length?r[0]:mC.create(r,e.op)}var qR=function(){function e(){or(this,e),this.rn=new VR}return ur(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),CI.resolve()}},{key:"getCollectionParents",value:function(e,t){return CI.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return CI.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return CI.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return CI.resolve(null)}},{key:"getIndexType",value:function(e,t){return CI.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return CI.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return CI.resolve(null)}},{key:"getMinOffset",value:function(e,t){return CI.resolve(wI.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return CI.resolve(wI.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return CI.resolve()}},{key:"updateIndexEntries",value:function(e,t){return CI.resolve()}}]),e}(),VR=function(){function e(){or(this,e),this.index={}}return ur(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ES(lI.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new ES(lI.comparator)).toArray()}}]),e}(),zR=new Uint8Array(0),BR=function(){function e(t,n){or(this,e),this.user=t,this.databaseId=n,this.on=new VR,this.un=new aT((function(e){return LC(e)}),(function(e,t){return MC(e,t)})),this.uid=t.uid||""}return ur(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:BI(i)};return WR(e).put(a)}return CI.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[oI(t),""],!1,!0);return WR(e).j(r).next((function(e){var r,i=cr(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(GI(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=GR(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=KR(e);return a.next((function(e){o.put(pR(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=GR(e),r=KR(e),i=HR(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=HR(e),i=!0,a=new Map;return CI.forEach(this.cn(t),(function(t){return n.an(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=mT(),o=[];return CI.forEach(a,(function(i,a){var s;jE("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(LC(t)));var u=function(e,t){var n=vI(t);if(void 0===n)return null;var r,i=cr(jC(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=cr(mI(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=cr(jC(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=cr(mI(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?UC(e,o.fieldPath,e.startAt):qC(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new cC(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=cr(mI(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?qC(e,o.fieldPath,e.endAt):UC(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new cC(r,i)}(a,i),f=n.hn(i,a,l),d=n.hn(i,a,h),p=n.ln(i,a,c),v=n.fn(i.indexId,u,f,l.inclusive,d,h.inclusive,p);return CI.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=dI.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return CI.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:AR(mC.create(e.filters,"and")).map((function(t){return OC(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"fn",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,i.length),c=u/(null!=t?t.length:1),l=[],h=function(){var u=t?s.dn(t[f/c]):zR,h=s.wn(e,u,n[f%c],r),d=s._n(e,u,i[f%c],a),p=o.map((function(t){return s.wn(e,u,t,!0)}));l.push.apply(l,mi(s.createRange(h,d,p)))},f=0;f<u;++f)h();return l}},{key:"wn",value:function(e,t,n,r){var i=new CR(e,dI.empty(),t,n);return r?i:i.Je()}},{key:"_n",value:function(e,t,n,r){var i=new CR(e,dI.empty(),t,n);return r?i.Je():i}},{key:"an",value:function(e,t){var n=new RR(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=cr(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return CI.forEach(i,(function(t){return n.an(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new ES(fI.comparator),r=!1,i=cr(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=cr(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var s=a.value;s.field.isKeyField()||("array-contains"===s.op||"array-contains-any"===s.op?r=!0:n=n.add(s.field))}}catch(h){o.e(h)}finally{o.f()}}}catch(h){i.e(h)}finally{i.f()}var u,c=cr(e.orderBy);try{for(c.s();!(u=c.n()).done;){var l=u.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(h){c.e(h)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"mn",value:function(e,t){var n,r=new SR,i=cr(mI(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.He(a.kind);bR.Ve._e(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Qe()}},{key:"dn",value:function(e){var t=new SR;return bR.Ve._e(e,t.He(0)),t.Qe()}},{key:"gn",value:function(e,t){var n=new SR;return bR.Ve._e(QS(this.databaseId,t),n.He(function(e){var t=mI(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new SR);var i,a=0,o=cr(mI(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=cr(r);try{for(l.s();!(s=l.n()).done;){var h=s.value;if(this.yn(t,u.fieldPath)&&XS(c))r=this.pn(r,u,c);else{var f=h.He(u.kind);bR.Ve._e(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.In(r)}},{key:"hn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"In",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Qe();return t}},{key:"pn",value:function(e,t,n){var r,i=mi(e),a=[],o=cr(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=cr(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,h=new SR;h.seed(l.Qe()),bR.Ve._e(u,h.He(t.kind)),a.push(h)}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"yn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof vC&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=GR(e),i=KR(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return CI.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new yI(t.sequenceNumber,new wI(sR(t.readTime),new dI(GI(t.documentKey)),t.largestBatchId)):yI.empty(),r=e.fields.map((function(e){var t=nr(e,2),n=t[0],r=t[1];return new gI(fI.fromServerFormat(n),r)}));return new pI(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:iI(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=GR(e),a=KR(e);return this.Tn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return CI.forEach(t,(function(t){return a.put(pR(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return CI.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?CI.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),CI.forEach(a,(function(r){return n.En(e,t,r).next((function(t){var a=n.An(i,r);return t.isEqual(a)?CI.resolve():n.vn(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return HR(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Pn",value:function(e,t,n,r){return HR(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}},{key:"En",value:function(e,t,n){var r=HR(e),i=new ES(TR);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(function(e,r){i=i.add(new CR(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"An",value:function(e,t){var n=new ES(TR),r=this.mn(t,e);if(null==r)return n;var i=vI(t);if(null!=i){var a=e.data.field(i.fieldPath);if(XS(a)){var o,s=cr(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new CR(t.indexId,e.key,this.dn(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new CR(t.indexId,e.key,zR,r));return n}},{key:"vn",value:function(e,t,n,r,i){var a=this;jE("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=SS(a),u=SS(o);s||u;){var c=!1,l=!1;if(s&&u){var h=n(s,u);h<0?l=!0:h>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=SS(o)):l?(i(s),s=SS(a)):(s=SS(a),u=SS(o))}}(r,i,TR,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.Pn(e,t,n,r))})),CI.waitFor(o)}},{key:"Tn",value:function(e){var t=1;return KR(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return TR(e,t)})).filter((function(e,t,n){return!t||0!==TR(e,n[t-1])}));var r=[];r.push(e);var i,a=cr(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=TR(o,e),u=TR(o,t);if(0===s)r[0]=e.Je();else if(s>0&&u<0)r.push(o),r.push(o.Je());else if(u>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];var h=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,zR,[]],f=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,zR,[]];c.push(IDBKeyRange.bound(h,f))}return c}},{key:"bn",value:function(e,t){return TR(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(QR)}},{key:"getMinOffset",value:function(e,t){var n=this;return CI.mapArray(this.cn(t),(function(t){return n.an(e,t).next((function(e){return e||zE()}))})).next(QR)}}]),e}();function WR(e){return gS(e,"collectionParents")}function HR(e){return gS(e,"indexEntries")}function GR(e){return gS(e,"indexConfiguration")}function KR(e){return gS(e,"indexState")}function QR(e){BE(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;_I(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new wI(t.readTime,t.documentKey,n)}var YR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},XR=function(){function e(t,n,r){or(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return ur(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function JR(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.X({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){BE(1===s)})));var c,l=[],h=cr(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=YI(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return CI.waitFor(a).next((function(){return l}))}function $R(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw zE();t=e.noDocument}return JSON.stringify(t).length}XR.DEFAULT_COLLECTION_PERCENTILE=10,XR.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,XR.DEFAULT=new XR(41943040,XR.DEFAULT_COLLECTION_PERCENTILE,XR.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),XR.DISABLED=new XR(-1,0,0);var ZR=function(){function e(t,n,r,i){or(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}return ur(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tP(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=nP(e),o=tP(e);return o.add({}).next((function(s){BE("number"==typeof s);var u,c=new ZT(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return zN(e.fe,t)})),i=n.mutations.map((function(t){return zN(e.fe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),h=[],f=new ES((function(e,t){return iI(e.canonicalString(),t.canonicalString())})),d=cr(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=YI(i.userId,p.key.path,s);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(a.put(v,XI))}}catch(m){d.e(m)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Vn[s]=c.keys()})),CI.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return tP(e).get(t).next((function(e){return e?(BE(e.userId===n.userId),uR(n.serializer,e)):null}))}},{key:"Sn",value:function(e,t){var n=this;return this.Vn[t]?CI.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return tP(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(BE(t.batchId>=r),a=uR(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return tP(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return tP(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return uR(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=QI(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return nP(e).X({range:i},(function(r,i,o){var s=nr(r,3),u=s[0],c=s[1],l=s[2],h=GI(c);if(u===n.userId&&t.path.isEqual(h))return tP(e).get(l).next((function(e){if(!e)throw zE();BE(e.userId===n.userId),a.push(uR(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new ES(iI),i=[];return t.forEach((function(t){var a=QI(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=nP(e).X({range:o},(function(e,i,a){var o=nr(e,3),s=o[0],u=o[1],c=o[2],l=GI(u);s===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(s)})),CI.waitFor(i).next((function(){return n.Dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=QI(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new ES(iI);return nP(e).X({range:o},(function(e,t,a){var o=nr(e,3),u=o[0],c=o[1],l=o[2],h=GI(c);u===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(l)):a.done()})).next((function(){return n.Dn(e,s)}))}},{key:"Dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(tP(e).get(t).next((function(e){if(null===e)throw zE();BE(e.userId===n.userId),r.push(uR(n.serializer,e))})))})),CI.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return JR(e.ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),CI.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.Vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return CI.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return nP(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=GI(e[1]);i.push(a)}else r.done()})).next((function(){BE(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return eP(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return rP(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"de",value:function(t,n,r,i){return BE(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function eP(e,t,n){var r=QI(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return nP(e).X({range:a,Y:!0},(function(e,n,r){var a=nr(e,3),s=a[0],u=a[1];a[2];s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function tP(e){return gS(e,"mutations")}function nP(e){return gS(e,"documentMutations")}function rP(e){return gS(e,"mutationQueues")}var iP=function(){function e(t){or(this,e),this.Nn=t}return ur(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new e(0)}},{key:"Mn",value:function(){return new e(-1)}}]),e}(),aP=function(){function e(t,n){or(this,e),this.referenceDelegate=t,this.serializer=n}return ur(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.$n(e).next((function(n){var r=new iP(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.$n(e).next((function(e){return uI.fromTimestamp(new sI(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.$n(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.$n(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Fn(e,t).next((function(){return n.$n(e).next((function(r){return r.targetCount+=1,n.Bn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Fn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return oP(e).delete(t.targetId)})).next((function(){return n.$n(e)})).next((function(t){return BE(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return oP(e).X((function(o,s){var u=cR(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return CI.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return oP(e).X((function(e,n){var r=cR(n);t(r)}))}},{key:"$n",value:function(e){return sP(e).get("targetGlobalKey").next((function(e){return BE(null!==e),e}))}},{key:"On",value:function(e,t){return sP(e).put("targetGlobalKey",t)}},{key:"Fn",value:function(e,t){return oP(e).put(lR(this.serializer,t))}},{key:"Bn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.$n(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=LC(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return oP(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=cR(n);MC(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=uP(e);return t.forEach((function(t){var o=BI(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),CI.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=uP(e);return CI.forEach(t,(function(t){var a=BI(t.path);return CI.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=uP(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=uP(e),i=mT();return r.X({range:n,Y:!0},(function(e,t,n){var r=GI(e[1]),a=new dI(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=BI(t.path),r=IDBKeyRange.bound([n],[oI(n)],!1,!0),i=0;return uP(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=nr(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"le",value:function(e,t){return oP(e).get(t).next((function(e){return e?cR(e):null}))}}]),e}();function oP(e){return gS(e,"targets")}function sP(e){return gS(e,"targetGlobal")}function uP(e){return gS(e,"targetDocuments")}function cP(e,t){var n=nr(e,2),r=n[0],i=n[1],a=nr(t,2),o=a[0],s=a[1],u=iI(r,o);return 0===u?iI(i,s):u}var lP=function(){function e(t){or(this,e),this.Ln=t,this.buffer=new ES(cP),this.qn=0}return ur(e,[{key:"Un",value:function(){return++this.qn}},{key:"Kn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();cP(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),hP=function(){function e(t,n,r){or(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return ur(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"Qn",value:function(e){var t=this;jE("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!AI(e.t0)){e.next=12;break}jE("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,II(e.t0);case 14:return e.next=16,t.Qn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),fP=function(){function e(t,n){or(this,e),this.jn=t,this.params=n}return ur(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return CI.resolve(UI.ct);var r=new lP(t);return this.jn.forEachTarget(e,(function(e){return r.Kn(e.sequenceNumber)})).next((function(){return n.jn.Wn(e,(function(e){return r.Kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(jE("LruGarbageCollector","Garbage collection skipped; disabled"),CI.resolve(YR)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(jE("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),YR):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(jE("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),FE()<=xi.DEBUG&&jE("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),CI.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function dP(e,t){return new fP(e,t)}var pP=function(){function e(t,n){or(this,e),this.db=t,this.garbageCollector=dP(this,n)}return ur(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.Wn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Wn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return vP(e,n)}},{key:"removeReference",value:function(e,t,n){return vP(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return vP(e,t)}},{key:"Xn",value:function(e,t){return function(e,t){var n=!1;return rP(e).Z((function(r){return eP(e,r,t).next((function(e){return e&&(n=!0),CI.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,s){if(s<=t){var u=n.Xn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,uI.min()),uP(e).delete([0,BI(o.path)])}))}));i.push(u)}})).next((function(){return CI.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return vP(e,t)}},{key:"Yn",value:function(e,t){var n,r=uP(e),i=UI.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=nr(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==UI.ct&&t(new dI(GI(n)),i),i=u,n=s):i=UI.ct})).next((function(){i!==UI.ct&&t(new dI(GI(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function vP(e,t){return uP(e).put(function(e,t){return{targetId:0,path:BI(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var mP=function(){function e(){or(this,e),this.changes=new aT((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return ur(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,uC.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?CI.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),gP=function(){function e(t){or(this,e),this.serializer=t}return ur(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return wP(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return wP(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],aR(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=uC.newInvalidDocument(t);return wP(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(_P(t))},(function(e,i){r=n.ts(t,i)})).next((function(){return r}))}},{key:"es",value:function(e,t){var n=this,r={size:0,document:uC.newInvalidDocument(t)};return wP(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(_P(t))},(function(e,i){r={document:n.ts(t,i),size:$R(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=sT();return this.ns(e,t,(function(e,t){var i=n.ts(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ss",value:function(e,t){var n=this,r=sT(),i=new wS(dI.comparator);return this.ns(e,t,(function(e,t){var a=n.ts(e,t);r=r.insert(e,a),i=i.insert(e,$R(t))})).next((function(){return{documents:r,rs:i}}))}},{key:"ns",value:function(e,t,n){if(t.isEmpty())return CI.resolve();var r=new ES(EP);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(_P(r.first()),_P(r.last())),a=r.getIterator(),o=a.getNext();return wP(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=dI.fromSegments([].concat(mi(t.prefixPath),[t.collectionGroup,t.documentId]));o&&EP(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(_P(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),aR(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wP(e).j(IDBKeyRange.bound(o,s,!0)).next((function(e){var n,a=sT(),o=cr(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=i.ts(dI.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);u.isFoundDocument()&&(tT(t,u)||r.has(u.key))&&(a=a.insert(u.key,u))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=sT(),o=xP(t,n),s=xP(t,wI.max());return wP(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.ts(dI.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new kP(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return bP(e).get("remoteDocumentGlobalKey").next((function(e){return BE(!!e),e}))}},{key:"Zn",value:function(e,t){return bP(e).put("remoteDocumentGlobalKey",t)}},{key:"ts",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=qN(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=dI.fromSegments(t.noDocument.path),i=sR(t.noDocument.readTime);n=uC.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return zE();var a=dI.fromSegments(t.unknownDocument.path),o=sR(t.unknownDocument.version);n=uC.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new sI(e[0],e[1]);return uI.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(uI.min()))return n}return uC.newInvalidDocument(e)}}]),e}();function yP(e){return new gP(e)}var kP=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this)).os=e,i.trackRemovals=r,i.us=new aT((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return ur(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new ES((function(e,t){return iI(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.us.get(a);if(n.push(t.os.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=iR(t.os.serializer,o);i=i.add(a.path.popLast());var c=$R(u);r+=c-s.size,n.push(t.os.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=iR(t.os.serializer,o.convertToNoDocument(uI.min()));n.push(t.os.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.os.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.os.updateMetadata(e,r)),CI.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.os.es(e,t).next((function(e){return n.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.os.ss(e,t).next((function(e){var t=e.documents;return e.rs.forEach((function(e,r){n.us.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(mP);function bP(e){return gS(e,"remoteDocumentGlobal")}function wP(e){return gS(e,"remoteDocumentsV14")}function _P(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function xP(e,t){var n=t.documentKey.path.toArray();return[e,aR(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function EP(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=iI(n[a],r[a]))return i;return(i=iI(n.length,r.length))||((i=iI(n[n.length-2],r[r.length-2]))||iI(n[n.length-1],r[r.length-1]))}var IP=ur((function e(t,n){or(this,e),this.overlayedDocument=t,this.mutatedFields=n})),SP=function(){function e(t,n,r,i){or(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return ur(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&VT(r.mutation,e,CS.empty(),sI.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,mT()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mT(),i=hT();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=cT();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=hT();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,mT())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=sT(),a=dT(),o=dT();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof HT)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),VT(o.mutation,t,o.mutation.getFieldMask(),sI.now())):a.set(t.key,CS.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new IP(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=dT(),i=new wS((function(e,t){return e-t})),a=mT();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=cr(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||CS.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||mT()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=fT();c.forEach((function(e){if(!a.has(e)){var n=UT(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return CI.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return dI.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):KC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):CI.resolve(hT()),s=-1,u=a;return o.next((function(t){return CI.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?CI.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,mT())})).next((function(e){return{batchId:s,changes:lT(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new dI(t)).next((function(e){var t=cT();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=cT();return this.indexManager.getCollectionParents(e,i).next((function(o){return CI.forEach(o,(function(o){var s=function(e,t){return new VC(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,uC.newInvalidDocument(r)))}));var n=cT();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&VT(a.mutation,i,CS.empty(),sI.now()),tT(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),CP=function(){function e(t){or(this,e),this.serializer=t,this.cs=new Map,this.hs=new Map}return ur(e,[{key:"getBundleMetadata",value:function(e,t){return CI.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:RN(n.createTime)}),CI.resolve()}},{key:"getNamedQuery",value:function(e,t){return CI.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:hR(e.bundledQuery),readTime:RN(e.readTime)}}(t)),CI.resolve()}}]),e}(),TP=function(){function e(){or(this,e),this.overlays=new wS(dI.comparator),this.ls=new Map}return ur(e,[{key:"getOverlay",value:function(e,t){return CI.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=hT();return CI.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.we(e,t,i)})),CI.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ls.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ls.delete(n)),CI.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=hT(),i=t.length+1,a=new dI(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return CI.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new wS((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=hT(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=hT(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return CI.resolve(u)}},{key:"we",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new tN(t,n));var a=this.ls.get(t);void 0===a&&(a=mT(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),e}(),NP=function(){function e(){or(this,e),this.fs=new ES(RP.ds),this.ws=new ES(RP._s)}return ur(e,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new RP(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new RP(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new dI(new lI([])),r=new RP(n,e),i=new RP(n,e+1),a=[];return this.ws.forEachInRange([r,i],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new dI(new lI([])),n=new RP(t,e),r=new RP(t,e+1),i=mT();return this.ws.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new RP(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),RP=function(){function e(t,n){or(this,e),this.key=t,this.As=n}return ur(e,null,[{key:"ds",value:function(e,t){return dI.comparator(e.key,t.key)||iI(e.As,t.As)}},{key:"_s",value:function(e,t){return iI(e.As,t.As)||dI.comparator(e.key,t.key)}}]),e}(),PP=function(){function e(t,n){or(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new ES(RP.ds)}return ur(e,[{key:"checkEmpty",value:function(e){return CI.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new ZT(i,t,n,r);this.mutationQueue.push(a);var o,s=cr(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Rs=this.Rs.add(new RP(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return CI.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return CI.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.bs(n),i=r<0?0:r;return CI.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return CI.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return CI.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new RP(t,0),i=new RP(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.Ps(e.As);a.push(t)})),CI.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new ES(iI);return t.forEach((function(e){var t=new RP(e,0),i=new RP(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.As)}))})),CI.resolve(this.Vs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;dI.isDocumentKey(i)||(i=i.child(""));var a=new RP(new dI(i),0),o=new ES(iI);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),a),CI.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ps(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;BE(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return CI.forEach(t.mutations,(function(i){var a=new RP(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new RP(t,0),r=this.Rs.firstAfterOrEqual(n);return CI.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,CI.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),AP=function(){function e(t){or(this,e),this.Ds=t,this.docs=new wS(dI.comparator),this.size=0}return ur(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return CI.resolve(n?n.document.mutableCopy():uC.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=sT();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():uC.newInvalidDocument(e))})),CI.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=sT(),a=t.path,o=new dI(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||_I(bI(l),n)<=0||(r.has(l.key)||tT(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return CI.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){zE()}},{key:"Cs",value:function(e,t){return CI.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new DP(this)}},{key:"getSize",value:function(e){return CI.resolve(this.size)}}]),e}(),DP=function(e){fr(n,e);var t=vr(n);function n(e){var r;return or(this,n),(r=t.call(this)).os=e,r}return ur(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.os.addEntry(e,i)):t.os.removeEntry(r)})),CI.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),n}(mP),OP=function(){function e(t){or(this,e),this.persistence=t,this.xs=new aT((function(e){return LC(e)}),MC),this.lastRemoteSnapshotVersion=uI.min(),this.highestTargetId=0,this.Ns=0,this.ks=new NP,this.targetCount=0,this.Ms=iP.kn()}return ur(e,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),CI.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return CI.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return CI.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),CI.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),CI.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new iP(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,CI.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),CI.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,CI.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.xs.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.xs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),CI.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return CI.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return CI.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),CI.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),CI.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),CI.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return CI.resolve(n)}},{key:"containsKey",value:function(e,t){return CI.resolve(this.ks.containsKey(t))}}]),e}(),LP=function(){function e(t,n){var r=this;or(this,e),this.$s={},this.overlays={},this.Os=new UI(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new OP(this),this.indexManager=new qR,this.remoteDocumentCache=new AP((function(e){return r.referenceDelegate.Ls(e)})),this.serializer=new rR(n),this.qs=new CP(this.serializer)}return ur(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new TP,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new PP(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;jE("MemoryPersistence","Starting transaction:",e);var i=new MP(this.Os.next());return this.referenceDelegate.Us(),n(i).next((function(e){return r.referenceDelegate.Ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return CI.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),MP=function(e){fr(n,e);var t=vr(n);function n(e){var r;return or(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return ur(n)}(EI),FP=function(){function e(t){or(this,e),this.persistence=t,this.Qs=new NP,this.js=null}return ur(e,[{key:"Ws",get:function(){if(this.js)return this.js;throw zE()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),CI.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),CI.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),CI.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ws.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return CI.forEach(this.Ws,(function(r){var i=dI.fromPath(r);return t.Hs(e,i).next((function(e){e||n.removeEntry(i,uI.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return CI.or([function(){return CI.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(t){return new e(t)}}]),e}(),jP=function(){function e(t){or(this,e),this.serializer=t}return ur(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new TI("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KI,{unique:!0}),e.createObjectStore("documentMutations")}(e),UP(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=CI.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),UP(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:uI.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KI,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return CI.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ys(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Xs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Zs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ti(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ei(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:uS});t.createIndex("collectionPathOverlayIndex",cS,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",lS,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:JI});t.createIndex("documentKeyIndex",$I),t.createIndex("collectionGroupIndex",ZI)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:iS}).createIndex("sequenceNumberIndex",aS,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:oS}).createIndex("documentKeyIndex",sS,{unique:!1})}(e)}))),o}},{key:"Xs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=$R(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Ys",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return CI.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return CI.forEach(r,(function(r){BE(r.userId===n.userId);var i=uR(t.serializer,r);return JR(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Zs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new lI(n),o=function(e){return[0,BI(e)]}(a);r.push(t.get(o).next((function(n){return n?CI.resolve():function(n){return t.put({targetId:0,path:BI(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return CI.waitFor(r)}))}))}},{key:"ti",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:rS});var n=t.store("collectionParents"),r=new VR,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:BI(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new lI(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=nr(e,3),r=(n[0],n[1]),a=(n[2],GI(r));return i(a.popLast())}))}))}},{key:"ei",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=cR(r),a=lR(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new dI(lI.fromString(i.document.name).popFirst(5)):i.noDocument?dI.fromSegments(i.noDocument.path):i.unknownDocument?dI.fromSegments(i.unknownDocument.path):zE()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(s))})).next((function(){return CI.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=yP(this.serializer),a=new LP(FP.zs,this.serializer.fe);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:mT();uR(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),CI.forEach(r,(function(e,r){var o=new OE(r),s=yR.de(n.serializer,o),u=a.getIndexManager(o),c=ZR.de(o,n.serializer,u,a.referenceDelegate);return new SP(i,c,s,u).recalculateAndSaveOverlaysForDocumentKeys(new mS(t,UI.ct),e).next()}))}))}}]),e}();function UP(e){e.createObjectStore("targetDocuments",{keyPath:tS}).createIndex("documentTargetsIndex",nS,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",eS,{unique:!0}),e.createObjectStore("targetGlobal")}var qP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",VP=function(){function e(t,n,r,i,a,o,s,u,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(or(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=s,this.ri=c,this.oi=l,this.ui=h,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=function(e){return Promise.resolve()},!e.D())throw new GE(HE.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pP(this,i),this.di=n+"main",this.serializer=new rR(u),this.wi=new NI(this.di,this.ui,new jP(this.serializer)),this.Bs=new aP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=yP(this.serializer),this.qs=new vR,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&UE("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return ur(e,[{key:"start",value:function(){var e=this;return this.mi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new GE(HE.FAILED_PRECONDITION,qP);return e.gi(),e.yi(),e.pi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Bs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new UI(t,e.ri)})).then((function(){e.Fs=!0})).catch((function(t){return e.wi&&e.wi.close(),Promise.reject(t)}))}},{key:"Ii",value:function(e){var t=this;return this.fi=function(){var n=yi(pi().mark((function n(r){return pi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.wi.B(function(){var t=yi(pi().mark((function t(n){return pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.mi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"mi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return BP(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ti(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.fi(!1)})))}))})).next((function(){return e.Ei(t)})).next((function(n){return e.isPrimary&&!n?e.Ai(t).next((function(){return!1})):!!n&&e.vi(t).next((function(){return!0}))}))})).catch((function(t){if(AI(t))return jE("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return jE("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.fi(t)})),e.isPrimary=t}))}},{key:"Ti",value:function(e){var t=this;return zP(e).get("owner").next((function(e){return CI.resolve(t.Ri(e))}))}},{key:"Pi",value:function(e){return BP(e).delete(this.clientId)}},{key:"bi",value:function(){var e=yi(pi().mark((function e(){var t,n,r,i,a=this;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=gS(e,"clientMetadata");return t.j().next((function(e){var n=a.Si(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return CI.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=cr(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Di(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(){var e=this;this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.mi().then((function(){return e.bi()})).then((function(){return e.pi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ei",value:function(e){var t=this;return this.oi?CI.resolve(!0):zP(e).get("owner").next((function(n){if(null!==n&&t.Vi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new GE(HE.FAILED_PRECONDITION,qP);return!1}}return!(!t.networkEnabled||!t.inForeground)||BP(e).j().next((function(e){return void 0===t.Si(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&jE("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=yi(pi().mark((function e(){var t=this;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),e.next=7,this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new mS(e,UI.ct);return t.Ai(n).next((function(){return t.Pi(n)}))}));case 7:this.wi.close(),this.Mi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Si",value:function(e,t){var n=this;return e.filter((function(e){return n.Vi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"$i",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return BP(t).j().next((function(t){return e.Si(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Fs}},{key:"getMutationQueue",value:function(e,t){return ZR.de(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new BR(e,this.serializer.fe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return yR.de(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;jE("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=15===(i=this.ui)?vS:14===i?pS:13===i?dS:12===i?fS:11===i?hS:void zE();return this.wi.runTransaction(e,o,s,(function(i){return a=new mS(i,r.Os?r.Os.next():UI.ct),"readwrite-primary"===t?r.Ti(a).next((function(e){return!!e||r.Ei(a)})).next((function(t){if(!t)throw UE("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.fi(!1)})),new GE(HE.FAILED_PRECONDITION,xI);return n(a)})).next((function(e){return r.vi(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return zP(e).get("owner").next((function(e){if(null!==e&&t.Vi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.Ri(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new GE(HE.FAILED_PRECONDITION,qP)}))}},{key:"vi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zP(e).put("owner",t)}},{key:"Ai",value:function(e){var t=this,n=zP(e);return n.get("owner").next((function(e){return t.Ri(e)?(jE("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):CI.resolve()}))}},{key:"Vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(UE("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.mi()}))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}},{key:"yi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;!Fr()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"ki",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return jE("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return UE("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(tp){UE("Failed to set zombie client id.",tp)}}},{key:"Mi",value:function(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(tp){}}},{key:"Di",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return NI.D()}}]),e}();function zP(e){return gS(e,"owner")}function BP(e){return gS(e,"clientMetadata")}function WP(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var HP=function(){function e(t,n,r,i){or(this,e),this.targetId=t,this.fromCache=n,this.Fi=r,this.Bi=i}return ur(e,null,[{key:"Li",value:function(t,n){var r,i=mT(),a=mT(),o=cr(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),GP=function(){function e(){or(this,e),this.qi=!1}return ur(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ki(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.Qi(e,t)}))}},{key:"Ki",value:function(e,t){var n=this;if(WC(t))return CI.resolve(null);var r=YC(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=JC(t,null,"F"),r=YC(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=mT.apply(void 0,mi(i));return n.Ui.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ji(t,i);return n.zi(t,o,a,r.readTime)?n.Ki(e,JC(t,null,"F")):n.Wi(e,o,t,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return WC(t)||r.isEqual(uI.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.zi(t,o,n,r)?i.Qi(e,t):(FE()<=xi.DEBUG&&jE("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),eT(t)),i.Wi(e,o,t,kI(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new ES(rT(e));return t.forEach((function(t,r){tT(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Qi",value:function(e,t){return FE()<=xi.DEBUG&&jE("QueryEngine","Using full collection scan to execute query:",eT(t)),this.Ui.getDocumentsMatchingQuery(e,t,wI.min())}},{key:"Wi",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),KP=function(){function e(t,n,r,i){or(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new wS(iI),this.Yi=new aT((function(e){return LC(e)}),MC),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(r)}return ur(e,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SP(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function QP(e,t,n,r){return new KP(e,t,n,r)}function YP(e,t){return XP.apply(this,arguments)}function XP(){return XP=yi(pi().mark((function e(t,n){var r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=WE(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.tr(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=mT(),u=cr(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,h=cr(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=cr(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,g=cr(v.mutations);try{for(g.s();!(m=g.n()).done;){var y=m.value;s=s.add(y.key)}}catch(k){g.e(k)}finally{g.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{er:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),XP.apply(this,arguments)}function JP(e,t){var n=WE(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=CI.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);BE(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=mT(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function $P(e){var t=WE(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function ZP(e,t){var n=WE(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(NS.EMPTY_BYTE_STRING,uI.min()).withLastLimboFreeSnapshotVersion(uI.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.Bs.updateTargetData(e,c))}}));var s=sT(),u=mT();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(eA(e,a,t.documentUpdates).next((function(e){s=e.nr,u=e.sr}))),!r.isEqual(uI.min())){var c=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return CI.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Ji=i,e}))}function eA(e,t,n){var r=mT(),i=mT();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=sT();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(uI.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):jE("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:r,sr:i}}))}function tA(e,t){var n=WE(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function nA(e,t){var n=WE(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Bs.getTargetData(e,t).next((function(i){return i?(r=i,CI.resolve(r)):n.Bs.allocateTargetId(e).next((function(i){return r=new nR(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function rA(e,t,n){return iA.apply(this,arguments)}function iA(){return iA=yi(pi().mark((function e(t,n,r){var i,a,o;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=WE(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),AI(e.t1)){e.next=12;break}throw e.t1;case 12:jE("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),iA.apply(this,arguments)}function aA(e,t,n){var r=WE(e),i=uI.min(),a=mT();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=WE(e),i=r.Yi.get(n);return void 0!==i?CI.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,YC(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:uI.min(),n?a:mT())})).next((function(e){return uA(r,nT(t),e),{documents:e,ir:a}}))}))}function oA(e,t){var n=WE(e),r=WE(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.le(e,t).next((function(e){return e?e.target:null}))}))}function sA(e,t){var n=WE(e),r=n.Xi.get(t)||uI.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Zi.getAllFromCollectionGroup(e,t,kI(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return uA(n,t,e),e}))}function uA(e,t,n){var r=e.Xi.get(t)||uI.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}function cA(e,t,n,r){return lA.apply(this,arguments)}function lA(){return lA=yi(pi().mark((function e(t,n,r,i){var a,o,s,u,c,l,h,f,d,p;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=WE(t),o=mT(),s=sT(),u=cr(r);try{for(u.s();!(c=u.n()).done;)l=c.value,h=n.rr(l.metadata.name),l.document&&(o=o.add(h)),(f=n.ur(l)).setReadTime(n.cr(l.metadata.readTime)),s=s.insert(h,f)}catch(v){u.e(v)}finally{u.f()}return d=a.Zi.newChangeBuffer({trackRemovals:!0}),e.next=7,nA(a,function(e){return YC(BC(lI.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return eA(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return a.Bs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Bs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)})).next((function(){return t.nr}))}))})));case 9:case"end":return e.stop()}}),e)}))),lA.apply(this,arguments)}function hA(e,t){return fA.apply(this,arguments)}function fA(){return fA=yi(pi().mark((function e(t,n){var r,i,a,o=arguments;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:mT(),e.next=3,nA(t,YC(hR(n.bundledQuery)));case 3:return i=e.sent,a=WE(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=RN(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.qs.saveNamedQuery(e,n);var o=i.withResumeToken(NS.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.Bs.updateTargetData(e,o).next((function(){return a.Bs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Bs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.qs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),fA.apply(this,arguments)}function dA(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function pA(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function vA(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var mA=function(){function e(t,n,r,i){or(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return ur(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new GE(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(UE("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),gA=function(){function e(t,n,r){or(this,e),this.targetId=t,this.state=n,this.error=r}return ur(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new GE(i.error.code,i.error.message))),a?new e(t,i.state,r):(UE("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),yA=function(){function e(t,n){or(this,e),this.clientId=t,this.activeTargetIds=n}return ur(e,null,[{key:"ar",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=yT(),o=0;i&&o<r.activeTargetIds.length;++o)i=zI(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(UE("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),kA=function(){function e(t,n){or(this,e),this.clientId=t,this.onlineState=n}return ur(e,null,[{key:"ar",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(UE("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),bA=function(){function e(){or(this,e),this.activeTargetIds=yT()}return ur(e,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),wA=function(){function e(t,n,r,i,a){or(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new wS(iI),this.started=!1,this.yr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=dA(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new bA),this.Tr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return ur(e,[{key:"start",value:function(){var e=yi(pi().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,f=this;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.$i();case 2:t=e.sent,n=cr(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.wr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(dA(this.persistenceKey,i)))&&(o=yA.ar(i,a))&&(this.gr=this.gr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Pr(),(s=this.storage.getItem(this.vr))&&(u=this.br(s))&&this.Vr(u),c=cr(this.yr);try{for(c.s();!(l=c.n()).done;)h=l.value,this.mr(h)}catch(d){c.e(d)}finally{c.f()}this.yr=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ir,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Sr(this.gr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.gr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Dr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Dr(e,t,n),this.Cr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(vA(this.persistenceKey,e));if(n){var r=gA.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Nr.dr(e),this.Pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Nr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(vA(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.kr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Cr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Mr(e)}},{key:"notifyBundleLoaded",value:function(e){this.$r(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return jE("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){jE("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){jE("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"mr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(jE("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void UE("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(yi(pi().mark((function e(){var r,i,a,o,s,u,c;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Tr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.Fr(r,null));case 6:if(!(i=t.Br(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Fr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Er.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Lr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.qr(a));case 16:e.next=41;break;case 18:if(!t.Ar.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ur(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.vr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.br(n.newValue))){e.next=30;break}return e.abrupt("return",t.Vr(s));case 30:e.next=41;break;case 32:if(n.key!==t.Ir){e.next=37;break}u=function(e){var t=UI.ct;if(null!=e)try{var n=JSON.parse(e);BE("number"==typeof n),t=n}catch(e){UE("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==UI.ct&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return c=t.Gr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Qr(e)})));case 41:e.next=44;break;case 43:t.yr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Nr",get:function(){return this.gr.get(this.wr)}},{key:"Pr",value:function(){this.setItem(this.pr,this.Nr.hr())}},{key:"Dr",value:function(e,t,n){var r=new mA(this.currentUser,e,t,n),i=pA(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}},{key:"Cr",value:function(e){var t=pA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Mr",value:function(e){var t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}},{key:"kr",value:function(e,t,n){var r=vA(this.persistenceKey,e),i=new gA(e,t,n);this.setItem(r,i.hr())}},{key:"$r",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Tr.exec(e);return t?t[1]:null}},{key:"Br",value:function(e,t){var n=this.Or(e);return yA.ar(n,t)}},{key:"Lr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return mA.ar(new OE(i),r,t)}},{key:"Ur",value:function(e,t){var n=this.Ar.exec(e),r=Number(n[1]);return gA.ar(r,t)}},{key:"br",value:function(e){return kA.ar(e)}},{key:"Gr",value:function(e){return JSON.parse(e)}},{key:"qr",value:function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.jr(t.batchId,t.state,t.error));case 2:jE("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Kr",value:function(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}},{key:"Fr",value:function(e,t){var n=this,r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Wr(o,s).then((function(){n.gr=r}))}},{key:"Vr",value:function(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Sr",value:function(e){var t=yT();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),_A=function(){function e(){or(this,e),this.Hr=new bA,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return ur(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new bA,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),xA=function(){function e(){or(this,e)}return ur(e,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),EA=function(){function e(){var t=this;or(this,e),this.Xr=function(){return t.Zr()},this.eo=function(){return t.no()},this.so=[],this.io()}return ur(e,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){jE("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=cr(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){jE("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=cr(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),IA=null;function SA(){return null===IA?IA=268435456+Math.round(2147483648*Math.random()):IA++,"0x"+IA.toString(16)}var CA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},TA=function(){function e(t){or(this,e),this.ro=t.ro,this.oo=t.oo}return ur(e,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),e}(),NA="WebChannelConnection",RA=function(e){fr(n,e);var t=vr(n);function n(e){var r;return or(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return ur(n,[{key:"Ao",value:function(e,t,n,r){var i=SA();return new Promise((function(a,o){var s=new RE;s.setWithCredentials(!0),s.listenOnce(IE.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case EE.NO_ERROR:var t=s.getResponseJson();jE(NA,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case EE.TIMEOUT:jE(NA,"RPC '".concat(e,"' ").concat(i," timed out")),o(new GE(HE.DEADLINE_EXCEEDED,"Request time out"));break;case EE.HTTP_ERROR:var n=s.getStatus();if(jE(NA,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(HE).indexOf(t)>=0?t:HE.UNKNOWN}(u.status);o(new GE(c,u.message))}else o(new GE(HE.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new GE(HE.UNAVAILABLE,"Connection failed."));break;default:zE()}}finally{jE(NA,"RPC '".concat(e,"' ").concat(i," completed."))}}));var u=JSON.stringify(r);jE(NA,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=SA(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=_E(),o=xE(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(s.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(s.xmlHttpFactory=new TE({})),this.Eo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var c=i.join("");jE(NA,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);var l=a.createWebChannel(c,s),h=!1,f=!1,d=new TA({ro:function(t){f?jE(NA,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(jE(NA,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),h=!0),jE(NA,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,NE.EventType.OPEN,(function(){f||jE(NA,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,NE.EventType.CLOSE,(function(){f||(f=!0,jE(NA,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.wo())})),p(l,NE.EventType.ERROR,(function(t){f||(f=!0,qE(NA,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.wo(new GE(HE.UNAVAILABLE,"The operation could not be completed")))})),p(l,NE.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];BE(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){jE(NA,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=YT[e];if(void 0!==t)return iN(t)}(s),c=o.message;void 0===u&&(u=HE.INTERNAL,c="Unknown error status: "+s+" with message "+o.message),f=!0,d.wo(new GE(u,c)),l.close()}else jE(NA,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d._o(i)}})),p(o,SE.STAT_EVENT,(function(t){t.stat===CE.PROXY?jE(NA,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===CE.NOPROXY&&jE(NA,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.fo()}),0),d}}]),n}(function(){function e(t){or(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return ur(e,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,r,i){var a=SA(),o=this.To(e,t);jE("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={};return this.Eo(s,r,i),this.Ao(e,o,s,n).then((function(t){return jE("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw qE("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+LE,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=CA[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function PA(){return"undefined"!=typeof window?window:null}function AA(){return"undefined"!=typeof document?document:null}function DA(e){return new IN(e,!0)}var OA=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;or(this,e),this.ii=t,this.timerId=n,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return ur(e,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&jE("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),e}(),LA=function(){function e(t,n,r,i,a,o,s,u){or(this,e),this.ii=t,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new OA(t,n)}return ur(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(){var e=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():n&&n.code===HE.RESOURCE_EXHAUSTED?(UE(n.toString()),UE("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===HE.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.ao(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=nr(t,2),i=r[0],a=r[1];e.Fo===n&&e.Zo(i,a)}),(function(n){t((function(){var t=new GE(HE.UNKNOWN,"Fetching auth token failed: "+n.message);return e.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){r((function(){return n.state=2,n.Lo=n.ii.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Ko()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.ao((function(e){r((function(){return n.tu(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.qo.No(yi(pi().mark((function t(){return pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"tu",value:function(e){return jE("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Fo===e?n():(jE("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),MA=function(e){fr(n,e);var t=vr(n);function n(e,r,i,a,o,s){var u;return or(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u}return ur(n,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:zE()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(BE(void 0===t||"string"==typeof t),NS.fromBase64String(t||"")):(BE(void 0===t||t instanceof Uint8Array),NS.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?HE.UNKNOWN:iN(e.code);return new GE(t,e.message||"")}(o);n=new gN(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=ON(e,u.document.name),l=RN(u.document.updateTime),h=u.document.createTime?RN(u.document.createTime):uI.min(),f=new oC({mapValue:{fields:u.document.fields}}),d=uC.newFoundDocument(c,l,h,f),p=u.targetIds||[],v=u.removedTargetIds||[];n=new vN(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var g=ON(e,m.document),y=m.readTime?RN(m.readTime):uI.min(),k=uC.newNoDocument(g,y),b=m.removedTargetIds||[];n=new vN([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=ON(e,w.document),x=w.removedTargetIds||[];n=new vN([],x,_,null)}else{if(!("filter"in t))return zE();t.filter;var E=t.filter;E.targetId;var I=E.count,S=void 0===I?0:I,C=E.unchangedNames,T=new nN(S,C),N=E.targetId;n=new mN(N,T)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return uI.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?uI.min():t.readTime?RN(t.readTime):uI.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=FN(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=FC(r)?{documents:WN(e,r)}:{query:HN(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=TN(e,t.resumeToken);var i=SN(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(uI.min())>0){n.readTime=CN(e,t.snapshotVersion.toTimestamp());var a=SN(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zE()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=FN(this.serializer),t.removeTarget=e,this.Wo(t)}}]),n}(LA),FA=function(e){fr(n,e);var t=vr(n);function n(e,r,i,a,o,s){var u;return or(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u.ru=!1,u}return ur(n,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,Ya(dr(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(BE(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=function(e,t){return e&&e.length>0?(BE(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?RN(e.updateTime):RN(t);return n.isEqual(uI.min())&&(n=RN(t)),new LT(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=RN(e.commitTime);return this.listener.cu(n,t)}return BE(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=FN(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return zN(t.serializer,e)}))};this.Wo(n)}}]),n}(LA),jA=function(e){fr(n,e);var t=vr(n);function n(e,r,i,a){var o;return or(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.lu=!1,o}return ur(n,[{key:"fu",value:function(){if(this.lu)throw new GE(HE.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(e,t,n){var r=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=nr(i,2),o=a[0],s=a[1];return r.connection.Io(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===HE.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new GE(HE.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var i=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=nr(a,2),s=o[0],u=o[1];return i.connection.vo(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===HE.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new GE(HE.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),n}(function(){return ur((function e(){or(this,e)}))}());var UA=function(){function e(t,n){or(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return ur(e,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(UE(t),this.mu=!1):jE("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),qA=ur((function e(t,n,r,i,a){var o=this;or(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr((function(e){r.enqueueAndForget(yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=JA(o),!e.t0){e.next=5;break}return jE("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=WE(t)).vu.add(4),e.next=4,BA(n);case 4:return n.bu.set("Unknown"),n.vu.delete(4),e.next=8,VA(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.bu=new UA(r,i)}));function VA(e){return zA.apply(this,arguments)}function zA(){return zA=yi(pi().mark((function e(t){var n,r,i;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!JA(t)){e.next=18;break}n=cr(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),zA.apply(this,arguments)}function BA(e){return WA.apply(this,arguments)}function WA(){return WA=yi(pi().mark((function e(t){var n,r,i;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=cr(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),WA.apply(this,arguments)}function HA(e,t){var n=WE(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),XA(n)?YA(n):SD(n).Ko()&&KA(n,t))}function GA(e,t){var n=WE(e),r=SD(n);n.Au.delete(t),r.Ko()&&QA(n,t),0===n.Au.size&&(r.Ko()?r.jo():JA(n)&&n.bu.set("Unknown"))}function KA(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(uI.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}SD(e).su(t)}function QA(e,t){e.Vu.qt(t),SD(e).iu(t)}function YA(e){e.Vu=new kN({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),SD(e).start(),e.bu.gu()}function XA(e){return JA(e)&&!SD(e).Uo()&&e.Au.size>0}function JA(e){return 0===WE(e).vu.size}function $A(e){e.Vu=void 0}function ZA(e){return eD.apply(this,arguments)}function eD(){return eD=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Au.forEach((function(e,n){KA(t,e)}));case 1:case"end":return e.stop()}}),e)}))),eD.apply(this,arguments)}function tD(e,t){return nD.apply(this,arguments)}function nD(){return nD=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$A(t),XA(t)?(t.bu.Iu(n),YA(t)):t.bu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),nD.apply(this,arguments)}function rD(e,t,n){return iD.apply(this,arguments)}function iD(){return iD=yi(pi().mark((function e(t,n,r){var i;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bu.set("Online"),!(n instanceof gN&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=yi(pi().mark((function e(t,n){var r,i,a,o;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=cr(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Au.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Au.delete(o),t.Vu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),jE("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,aD(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof vN?t.Vu.Ht(n):n instanceof mN?t.Vu.ne(n):t.Vu.Xt(n),r.isEqual(uI.min())){e.next=29;break}return e.prev=14,e.next=17,$P(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Au.get(t);if(r){e.Au.set(t,r.withResumeToken(NS.EMPTY_BYTE_STRING,r.snapshotVersion)),QA(e,t);var i=new nR(r.target,t,n,r.sequenceNumber);KA(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),jE("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,aD(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),iD.apply(this,arguments)}function aD(e,t,n){return oD.apply(this,arguments)}function oD(){return oD=yi(pi().mark((function e(t,n,r){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(AI(n)){e.next=2;break}throw n;case 2:return t.vu.add(1),e.next=5,BA(t);case 5:t.bu.set("Offline"),r||(r=function(){return $P(t.localStore)}),t.asyncQueue.enqueueRetryable(yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jE("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.vu.delete(1),e.next=6,VA(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),oD.apply(this,arguments)}function sD(e,t){return t().catch((function(n){return aD(e,n,t)}))}function uD(e){return cD.apply(this,arguments)}function cD(){return cD=yi(pi().mark((function e(t){var n,r,i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=WE(t),r=CD(n),i=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;case 2:if(!lD(n)){e.next=19;break}return e.prev=3,e.next=6,tA(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Eu.length&&r.jo(),e.abrupt("break",19);case 10:i=a.batchId,hD(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,aD(n,e.t0);case 17:e.next=2;break;case 19:fD(n)&&dD(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),cD.apply(this,arguments)}function lD(e){return JA(e)&&e.Eu.length<10}function hD(e,t){e.Eu.push(t);var n=CD(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function fD(e){return JA(e)&&!CD(e).Uo()&&e.Eu.length>0}function dD(e){CD(e).start()}function pD(e){return vD.apply(this,arguments)}function vD(){return vD=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:CD(t).hu();case 1:case"end":return e.stop()}}),e)}))),vD.apply(this,arguments)}function mD(e){return gD.apply(this,arguments)}function gD(){return gD=yi(pi().mark((function e(t){var n,r,i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=CD(t),r=cr(t.Eu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.uu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),gD.apply(this,arguments)}function yD(e,t,n){return kD.apply(this,arguments)}function kD(){return kD=yi(pi().mark((function e(t,n,r){var i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Eu.shift(),a=eN.from(i,n,r),e.next=3,sD(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,uD(t);case 5:case"end":return e.stop()}}),e)}))),kD.apply(this,arguments)}function bD(e,t){return wD.apply(this,arguments)}function wD(){return wD=yi(pi().mark((function e(t,n){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&CD(t).ou,!e.t0){e.next=4;break}return e.next=4,function(){var e=yi(pi().mark((function e(t,n){var r,i;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!rN(i=n.code)||i===HE.ABORTED){e.next=7;break}return r=t.Eu.shift(),CD(t).Qo(),e.next=5,sD(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,uD(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:fD(t)&&dD(t);case 5:case"end":return e.stop()}}),e)}))),wD.apply(this,arguments)}function _D(e,t){return xD.apply(this,arguments)}function xD(){return xD=yi(pi().mark((function e(t,n){var r,i;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=WE(t)).asyncQueue.verifyOperationInProgress(),jE("RemoteStore","RemoteStore received new credentials"),i=JA(r),r.vu.add(3),e.next=6,BA(r);case 6:return i&&r.bu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.vu.delete(3),e.next=12,VA(r);case 12:case"end":return e.stop()}}),e)}))),xD.apply(this,arguments)}function ED(e,t){return ID.apply(this,arguments)}function ID(){return ID=yi(pi().mark((function e(t,n){var r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=WE(t),!n){e.next=7;break}return r.vu.delete(2),e.next=5,VA(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.vu.add(2),e.next=12,BA(r);case 12:r.bu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),ID.apply(this,arguments)}function SD(e){return e.Su||(e.Su=function(e,t,n){var r=WE(e);return r.fu(),new MA(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:ZA.bind(null,e),ao:tD.bind(null,e),nu:rD.bind(null,e)}),e.Ru.push(function(){var t=yi(pi().mark((function t(n){return pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Su.Qo(),XA(e)?YA(e):e.bu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Su.stop();case 6:$A(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}function CD(e){return e.Du||(e.Du=function(e,t,n){var r=WE(e);return r.fu(),new FA(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:pD.bind(null,e),ao:bD.bind(null,e),au:mD.bind(null,e),cu:yD.bind(null,e)}),e.Ru.push(function(){var t=yi(pi().mark((function t(n){return pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Du.Qo(),t.next=4,uD(e);case 4:t.next=9;break;case 6:return t.next=8,e.Du.stop();case 8:e.Eu.length>0&&(jE("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Du}var TD=function(){function e(t,n,r,i,a){or(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new KE,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return ur(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new GE(HE.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function ND(e,t){if(UE("AsyncQueue","".concat(t,": ").concat(e)),AI(e))return new GE(HE.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var RD=function(){function e(t){or(this,e),this.comparator=t?function(e,n){return t(e,n)||dI.comparator(e.key,n.key)}:function(e,t){return dI.comparator(e.key,t.key)},this.keyedMap=cT(),this.sortedSet=new wS(this.comparator)}return ur(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),PD=function(){function e(){or(this,e),this.Cu=new wS(dI.comparator)}return ur(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):zE():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),AD=function(){function e(t,n,r,i,a,o,s,u,c){or(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=c}return ur(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$C(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,RD.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),DD=ur((function e(){or(this,e),this.Nu=void 0,this.listeners=[]})),OD=ur((function e(){or(this,e),this.queries=new aT((function(e){return ZC(e)}),$C),this.onlineState="Unknown",this.ku=new Set}));function LD(e,t){return MD.apply(this,arguments)}function MD(){return MD=yi(pi().mark((function e(t,n){var r,i,a,o,s;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=WE(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new DD),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=ND(e.t0,"Initialization of query '".concat(eT(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Mu(r.onlineState),o.Nu&&n.$u(o.Nu)&&VD(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),MD.apply(this,arguments)}function FD(e,t){return jD.apply(this,arguments)}function jD(){return jD=yi(pi().mark((function e(t,n){var r,i,a,o,s;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=WE(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),jD.apply(this,arguments)}function UD(e,t){var n,r=WE(e),i=!1,a=cr(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=cr(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.$u(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.Nu=o}}}catch(h){a.e(h)}finally{a.f()}i&&VD(r)}function qD(e,t,n){var r=WE(e),i=r.queries.get(t);if(i){var a,o=cr(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function VD(e){e.ku.forEach((function(e){e.next()}))}var zD=function(){function e(t,n,r){or(this,e),this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}return ur(e,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=cr(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new AD(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=AD.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),e}(),BD=function(){function e(t,n){or(this,e),this.Gu=t,this.byteLength=n}return ur(e,[{key:"Qu",value:function(){return"metadata"in this.Gu}}]),e}(),WD=function(){function e(t){or(this,e),this.serializer=t}return ur(e,[{key:"rr",value:function(e){return ON(this.serializer,e)}},{key:"ur",value:function(e){return e.metadata.exists?qN(this.serializer,e.document,!1):uC.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}},{key:"cr",value:function(e){return RN(e)}}]),e}(),HD=function(){function e(t,n,r){or(this,e),this.ju=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=GD(t)}return ur(e,[{key:"zu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;var n=lI.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Wu",value:function(e){var t,n=new Map,r=new WD(this.serializer),i=cr(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.rr(a.metadata.name),u=cr(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||mT()).add(s);n.set(c,l)}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=yi(pi().mark((function e(){var t,n,r,i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cA(this.localStore,new WD(this.serializer),this.documents,this.ju.id);case 2:t=e.sent,n=this.Wu(this.documents),r=cr(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,hA(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function GD(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var KD=ur((function e(t){or(this,e),this.key=t})),QD=ur((function e(t){or(this,e),this.key=t})),YD=function(){function e(t,n){or(this,e),this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=mT(),this.mutatedKeys=mT(),this.tc=rT(t),this.ec=new RD(this.tc)}return ur(e,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,r=t?t.ic:new PD,i=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=tT(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.rc(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.tc(h,u)>0||c&&n.tc(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:s,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zE()}};return n(e)-n(t)}(e.type,t.type)||r.tc(e.doc,t.doc)})),this.oc(n);var o=t?this.uc():[],s=0===this.Zu.size&&this.current?1:0,u=s!==this.Xu;return this.Xu=s,0!==a.length||u?{snapshot:new AD(this.query,e.ec,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new PD,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=mT(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new QD(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new KD(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=mT();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return AD.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),e}(),XD=ur((function e(t,n,r){or(this,e),this.query=t,this.targetId=n,this.view=r})),JD=ur((function e(t){or(this,e),this.key=t,this.fc=!1})),$D=function(){function e(t,n,r,i,a,o){or(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new aT((function(e){return ZC(e)}),$C),this._c=new Map,this.mc=new Set,this.gc=new wS(dI.comparator),this.yc=new Map,this.Ic=new NP,this.Tc={},this.Ec=new Map,this.Ac=iP.Mn(),this.onlineState="Unknown",this.vc=void 0}return ur(e,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),e}();function ZD(e,t){return eO.apply(this,arguments)}function eO(){return eO=yi(pi().mark((function e(t,n){var r,i,a,o,s,u;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=GO(t),!(o=r.wc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.lc(),e.next=15;break;case 6:return e.next=8,nA(r.localStore,YC(n));case 8:return s=e.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,tO(r,n,i,"current"===u,s.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&HA(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),eO.apply(this,arguments)}function tO(e,t,n,r,i){return nO.apply(this,arguments)}function nO(){return nO=yi(pi().mark((function e(t,n,r,i,a){var o,s,u,c,l,h;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=yi(pi().mark((function e(t,n,r,i){var a,o,s;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sc(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,aA(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(_O(t,n.targetId,s.cc),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,aA(t.localStore,n,!0);case 3:return o=e.sent,s=new YD(n,o.ir),u=s.sc(o.documents),c=pN.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=s.applyChanges(u,t.isPrimaryClient,c),_O(t,r,l.cc),h=new XD(n,r,s),e.abrupt("return",(t.wc.set(n,h),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),nO.apply(this,arguments)}function rO(e,t){return iO.apply(this,arguments)}function iO(){return iO=yi(pi().mark((function e(t,n){var r,i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=WE(t),i=r.wc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!$C(e,n)}))),void r.wc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,rA(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),GA(r.remoteStore,i.targetId),bO(r,i.targetId)})).catch(II);case 9:e.next=14;break;case 11:return bO(r,i.targetId),e.next=14,rA(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),iO.apply(this,arguments)}function aO(e,t,n){return oO.apply(this,arguments)}function oO(){return oO=yi(pi().mark((function e(t,n,r){var i,a,o;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=KO(t),e.prev=1,e.next=4,function(e,t){var n,r,i=WE(e),a=sI.now(),o=t.reduce((function(e,t){return e.add(t.key)}),mT());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=sT(),u=mT();return i.Zi.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=cr(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=zT(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new HT(c.key,l,sC(l.value.mapValue),MT.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:lT(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Tc[e.currentUser.toKey()];r||(r=new wS(iI)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,IO(i,a.changes);case 9:return e.next=11,uD(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=ND(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),oO.apply(this,arguments)}function sO(e,t){return uO.apply(this,arguments)}function uO(){return uO=yi(pi().mark((function e(t,n){var r,i;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=WE(t),e.prev=1,e.next=4,ZP(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.yc.get(t);n&&(BE(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?BE(n.fc):e.removedDocuments.size>0&&(BE(n.fc),n.fc=!1))})),e.next=8,IO(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,II(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),uO.apply(this,arguments)}function cO(e,t,n){var r=WE(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wc.forEach((function(e,n){var r=n.view.Mu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=WE(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=cr(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Mu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&VD(n)}(r.eventManager,t),i.length&&r.dc.nu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function lO(e,t,n){return hO.apply(this,arguments)}function hO(){return hO=yi(pi().mark((function e(t,n,r){var i,a,o,s,u,c;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=WE(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.yc.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new wS(dI.comparator)).insert(o,uC.newNoDocument(o,uI.min())),u=mT().add(o),c=new dN(uI.min(),new Map,new wS(iI),s,u),e.next=9,sO(i,c);case 9:i.gc=i.gc.remove(o),i.yc.delete(n),EO(i),e.next=16;break;case 14:return e.next=16,rA(i.localStore,n,!1).then((function(){return bO(i,n,r)})).catch(II);case 16:case"end":return e.stop()}}),e)}))),hO.apply(this,arguments)}function fO(e,t){return dO.apply(this,arguments)}function dO(){return dO=yi(pi().mark((function e(t,n){var r,i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=WE(t),i=n.batch.batchId,e.prev=1,e.next=4,JP(r.localStore,n);case 4:return a=e.sent,kO(r,i,null),yO(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,IO(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,II(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),dO.apply(this,arguments)}function pO(e,t,n){return vO.apply(this,arguments)}function vO(){return vO=yi(pi().mark((function e(t,n,r){var i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=WE(t),e.prev=1,e.next=4,function(e,t){var n=WE(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return BE(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,kO(i,n,r),yO(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,IO(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,II(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),vO.apply(this,arguments)}function mO(e,t){return gO.apply(this,arguments)}function gO(){return gO=yi(pi().mark((function e(t,n){var r,i,a,o;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return JA((r=WE(t)).remoteStore)||jE("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=WE(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ec.get(i)||[]).push(n),r.Ec.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=ND(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),gO.apply(this,arguments)}function yO(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function kO(e,t,n){var r=WE(e),i=r.Tc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function bO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=cr(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wc.delete(a),n&&e.dc.Pc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||wO(e,t)}))}function wO(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(GA(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),EO(e))}function _O(e,t,n){var r,i=cr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof KD?(e.Ic.addReference(a.key,t),xO(e,a)):a instanceof QD?(jE("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||wO(e,a.key)):zE()}}catch(o){i.e(o)}finally{i.f()}}function xO(e,t){var n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(jE("SyncEngine","New document in limbo: "+n),e.mc.add(r),EO(e))}function EO(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new dI(lI.fromString(t)),r=e.Ac.next();e.yc.set(r,new JD(n)),e.gc=e.gc.insert(n,r),HA(e.remoteStore,new nR(YC(BC(n.path)),r,"TargetPurposeLimboResolution",UI.ct))}}function IO(e,t,n){return SO.apply(this,arguments)}function SO(){return SO=yi(pi().mark((function e(t,n,r){var i,a,o,s;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=WE(t),a=[],o=[],s=[],e.t0=i.wc.isEmpty(),e.t0){e.next=9;break}return i.wc.forEach((function(e,t){s.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=HP.Li(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.dc.nu(a),e.next=9,function(){var e=yi(pi().mark((function e(t,n){var r,i,a,o,s,u,c,l;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=WE(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return CI.forEach(n,(function(t){return CI.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return CI.forEach(t.Bi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),AI(e.t0)){e.next=10;break}throw e.t0;case 10:jE("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=cr(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.Ji.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(s,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),SO.apply(this,arguments)}function CO(e,t){return TO.apply(this,arguments)}function TO(){return TO=yi(pi().mark((function e(t,n){var r,i;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=WE(t)).currentUser.isEqual(n)){e.next=11;break}return jE("SyncEngine","User change. New user:",n.toKey()),e.next=5,YP(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ec.forEach((function(e){e.forEach((function(e){e.reject(new GE(HE.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,IO(r,i.er);case 11:case"end":return e.stop()}}),e)}))),TO.apply(this,arguments)}function NO(e,t){var n=WE(e),r=n.yc.get(t);if(r&&r.fc)return mT().add(r.key);var i=mT(),a=n._c.get(t);if(!a)return i;var o,s=cr(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.wc.get(u);i=i.unionWith(c.view.nc)}}catch(l){s.e(l)}finally{s.f()}return i}function RO(e,t){return PO.apply(this,arguments)}function PO(){return PO=yi(pi().mark((function e(t,n){var r,i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=WE(t),e.next=3,aA(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.hc(i),e.abrupt("return",(r.isPrimaryClient&&_O(r,n.targetId,a.cc),a));case 6:case"end":return e.stop()}}),e)}))),PO.apply(this,arguments)}function AO(e,t){return DO.apply(this,arguments)}function DO(){return DO=yi(pi().mark((function e(t,n){var r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=WE(t),e.abrupt("return",sA(r.localStore,n).then((function(e){return IO(r,e)})));case 2:case"end":return e.stop()}}),e)}))),DO.apply(this,arguments)}function OO(e,t,n,r){return LO.apply(this,arguments)}function LO(){return LO=yi(pi().mark((function e(t,n,r,i){var a,o;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=WE(t),e.next=3,function(e,t){var n=WE(e),r=WE(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Sn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):CI.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,uD(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(kO(a,n,i||null),yO(a,n),function(e,t){WE(WE(e).mutationQueue).Cn(t)}(a.localStore,n)):zE();case 11:return e.next=13,IO(a,o);case 13:e.next=16;break;case 15:jE("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),LO.apply(this,arguments)}function MO(e,t){return FO.apply(this,arguments)}function FO(){return FO=yi(pi().mark((function e(t,n){var r,i,a,o,s,u,c,l;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GO(r=WE(t)),KO(r),!0!==n||!0===r.vc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,jO(r,i.toArray());case 5:return a=e.sent,r.vc=!0,e.next=9,ED(r.remoteStore,!0);case 9:o=cr(a);try{for(o.s();!(s=o.n()).done;)u=s.value,HA(r.remoteStore,u)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.vc){e.next=25;break}return c=[],l=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return bO(r,t),rA(r.localStore,t,!0)})),GA(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,jO(r,c);case 21:return function(e){var t=WE(e);t.yc.forEach((function(e,n){GA(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new wS(dI.comparator)}(r),r.vc=!1,e.next=25,ED(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),FO.apply(this,arguments)}function jO(e,t,n){return UO.apply(this,arguments)}function UO(){return UO=yi(pi().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,d,p,v,m,g;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=WE(t),a=[],o=[],s=cr(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(h=i._c.get(c))||0===h.length){e.next=34;break}return e.next=11,nA(i.localStore,YC(h[0]));case 11:l=e.sent,f=cr(h),e.prev=13,f.s();case 15:if((d=f.n()).done){e.next=24;break}return p=d.value,v=i.wc.get(p),e.next=20,RO(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,oA(i.localStore,c);case 36:return g=e.sent,e.next=39,nA(i.localStore,g);case 39:return l=e.sent,e.next=42,tO(i,qO(g),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.dc.nu(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),UO.apply(this,arguments)}function qO(e){return zC(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function VO(e){var t=WE(e);return WE(WE(t.localStore).persistence).$i()}function zO(e,t,n,r){return BO.apply(this,arguments)}function BO(){return BO=yi(pi().mark((function e(t,n,r,i){var a,o,s,u;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=WE(t)).vc){e.next=3;break}return e.abrupt("return",void jE("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a._c.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,sA(a.localStore,nT(o[0]));case 10:return s=e.sent,u=dN.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,NS.EMPTY_BYTE_STRING),e.next=14,IO(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,rA(a.localStore,n,!0);case 17:return bO(a,n,i),e.abrupt("break",20);case 19:zE();case 20:case"end":return e.stop()}}),e)}))),BO.apply(this,arguments)}function WO(e,t,n){return HO.apply(this,arguments)}function HO(){return HO=yi(pi().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=GO(t)).vc){e.next=45;break}a=cr(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i._c.has(s)){e.next=10;break}return jE("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,oA(i.localStore,s);case 12:return u=e.sent,e.next=15,nA(i.localStore,u);case 15:return c=e.sent,e.next=18,tO(i,qO(u),c.targetId,!1,c.resumeToken);case 18:HA(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=cr(r),e.prev=30,f=pi().mark((function e(){var t;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,rA(i.localStore,t,!1).then((function(){GA(i.remoteStore,t),bO(i,t)})).catch(II);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),HO.apply(this,arguments)}function GO(e){var t=WE(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=sO.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=NO.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=lO.bind(null,t),t.dc.nu=UD.bind(null,t.eventManager),t.dc.Pc=qD.bind(null,t.eventManager),t}function KO(e){var t=WE(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=fO.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=pO.bind(null,t),t}function QO(e,t,n){var r=WE(e);(function(){var e=yi(pi().mark((function e(t,n,r){var i,a,o,s,u;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=WE(e),r=RN(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.qs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(GD(i)),a=new HD(i,t.localStore,n.serializer),e.next=15,n.bc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.zu(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.bc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,IO(t,u.Ju,void 0);case 31:return e.next=33,function(e,t){var n=WE(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.qs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.Hu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(qE("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var YO=function(){function e(){or(this,e),this.synchronizeTabs=!1}return ur(e,[{key:"initialize",value:function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=DA(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return QP(this.persistence,new GP,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new LP(FP.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new _A}},{key:"terminate",value:function(){var e=yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),XO=function(e){fr(n,e);var t=vr(n);function n(e,r,i){var a;return or(this,n),(a=t.call(this)).Vc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return ur(n,[{key:"initialize",value:function(){var e=yi(pi().mark((function e(t){var r=this;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ya(dr(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Vc.initialize(this,t);case 4:return e.next=6,KO(this.Vc.syncEngine);case 6:return e.next=8,uD(this.Vc.remoteStore);case 8:return e.next=10,this.persistence.Ii((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return QP(this.persistence,new GP,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new hP(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new jI(t,this.persistence);return new FI(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=WP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?XR.withCacheSize(this.cacheSizeBytes):XR.DEFAULT;return new VP(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,PA(),AA(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new _A}}]),n}(YO),JO=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this,e,r,!1)).Vc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return ur(n,[{key:"initialize",value:function(){var e=yi(pi().mark((function e(t){var r,i=this;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ya(dr(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Vc.syncEngine,e.t0=this.sharedClientState instanceof wA,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={jr:OO.bind(null,r),zr:zO.bind(null,r),Wr:WO.bind(null,r),$i:VO.bind(null,r),Qr:AO.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ii(function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MO(i.Vc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=PA();if(!wA.D(t))throw new GE(HE.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=WP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wA(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(XO),$O=function(){function e(){or(this,e)}return ur(e,[{key:"initialize",value:function(){var e=yi(pi().mark((function e(t,n){var r=this;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return cO(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=CO.bind(null,this.syncEngine),e.next=12,ED(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new OD}},{key:"createDatastore",value:function(e){var t,n=DA(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new RA(t));return function(e,t,n,r){return new jA(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return cO(o.syncEngine,e,0)},a=EA.D()?new EA:new xA,new qA(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new $D(e,t,n,r,i,a);return o&&(s.vc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=WE(t),jE("RemoteStore","RemoteStore shutting down."),n.vu.add(5),e.next=5,BA(n);case 5:n.Pu.shutdown(),n.bu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function ZO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return yi(pi().mark((function r(){var i;return pi().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var eL=function(){function e(t){or(this,e),this.observer=t,this.muted=!1}return ur(e,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):UE("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),tL=function(){function e(t,n){var r=this;or(this,e),this.Cc=t,this.serializer=n,this.metadata=new KE,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((function(e){e&&e.Qu()?r.metadata.resolve(e.Gu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(function(e){return r.metadata.reject(e)}))}return ur(e,[{key:"close",value:function(){return this.Cc.cancel()}},{key:"getMetadata",value:function(){var e=yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){var e=yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Nc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=yi(pi().mark((function e(){var t,n,r,i;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.kc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.xc.decode(t),r=Number(n),isNaN(r)&&this.Mc("length string (".concat(n,") is not valid number")),e.next=9,this.$c(r);case 9:return i=e.sent,e.abrupt("return",new BD(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"kc",value:function(){var e=yi(pi().mark((function e(){var t,n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.Fc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.Mc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$c",value:function(){var e=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Fc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Mc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mc",value:function(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Fc",value:function(){var e=yi(pi().mark((function e(){var t,n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),nL=function(){function e(t){or(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return ur(e,[{key:"lookup",value:function(){var e=yi(pi().mark((function e(t){var n,r=this;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new GE(HE.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=yi(pi().mark((function e(t,n){var r,i,a,o,s,u;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=WE(t),i=FN(r.serializer)+"/documents",a={documents:n.map((function(e){return DN(r.serializer,e)}))},e.next=5,r.vo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=VN(r.serializer,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());BE(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new JT(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=yi(pi().mark((function e(){var t,n=this;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=dI.fromPath(t);n.mutations.push(new $T(r,n.precondition(r)))})),e.next=7,function(){var e=yi(pi().mark((function e(t,n){var r,i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=WE(t),i=FN(r.serializer)+"/documents",a={writes:n.map((function(e){return zN(r.serializer,e)}))},e.next=3,r.Io("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw zE();t=uI.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new GE(HE.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(uI.min())?MT.exists(!1):MT.updateTime(t):MT.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(uI.min()))throw new GE(HE.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return MT.updateTime(t)}return MT.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),rL=function(){function e(t,n,r,i,a){or(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new OA(this.asyncQueue,"transaction_retry")}return ur(e,[{key:"run",value:function(){this.Bc-=1,this.Lc()}},{key:"Lc",value:function(){var e=this;this.qo.No(yi(pi().mark((function t(){var n,r;return pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new nL(e.datastore),(r=e.qc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Uc(t)}))}))})).catch((function(t){e.Uc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"qc",value:function(e){try{var t=this.updateFunction(e);return!qI(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Uc",value:function(e){var t=this;this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Lc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!rN(t)}return!1}}]),e}(),iL=function(){function e(t,n,r,i){var a=this;or(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=OE.UNAUTHENTICATED,this.clientId=rI.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jE("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return jE("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return ur(e,[{key:"getConfiguration",value:function(){var e=yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new GE(HE.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new KE;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(yi(pi().mark((function n(){var r;return pi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=ND(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function aL(e,t){return oL.apply(this,arguments)}function oL(){return oL=yi(pi().mark((function e(t,n){var r,i;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),jE("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,YP(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),oL.apply(this,arguments)}function sL(e,t){return uL.apply(this,arguments)}function uL(){return uL=yi(pi().mark((function e(t,n){var r,i;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,lL(t);case 3:return r=e.sent,jE("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return _D(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return _D(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),uL.apply(this,arguments)}function cL(e){return"FirebaseError"===e.name?e.code===HE.FAILED_PRECONDITION||e.code===HE.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function lL(e){return hL.apply(this,arguments)}function hL(){return hL=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return jE("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,aL(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),cL(n=e.t0)){e.next=13;break}throw n;case 13:return qE("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,aL(t,new YO);case 16:e.next=21;break;case 18:return jE("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,aL(t,new YO);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),hL.apply(this,arguments)}function fL(e){return dL.apply(this,arguments)}function dL(){return dL=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return jE("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,sL(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return jE("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,sL(t,new $O);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),dL.apply(this,arguments)}function pL(e){return lL(e).then((function(e){return e.persistence}))}function vL(e){return lL(e).then((function(e){return e.localStore}))}function mL(e){return fL(e).then((function(e){return e.remoteStore}))}function gL(e){return fL(e).then((function(e){return e.syncEngine}))}function yL(e){return fL(e).then((function(e){return e.datastore}))}function kL(e){return bL.apply(this,arguments)}function bL(){return bL=yi(pi().mark((function e(t){var n,r;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fL(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=ZD.bind(null,n.syncEngine),r.onUnlisten=rO.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),bL.apply(this,arguments)}function wL(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new KE;return e.asyncQueue.enqueueAndForget(yi(pi().mark((function i(){return pi().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new eL({next:function(a){t.enqueueAndForget((function(){return FD(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new GE(HE.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new GE(HE.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new zD(BC(n.path),a,{includeMetadataChanges:!0,Ku:!0});return LD(e,o)},i.next=3,kL(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function _L(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new KE;return e.asyncQueue.enqueueAndForget(yi(pi().mark((function i(){return pi().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new eL({next:function(n){t.enqueueAndForget((function(){return FD(e,o)})),n.fromCache&&"server"===r.source?i.reject(new GE(HE.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new zD(n,a,{includeMetadataChanges:!0,Ku:!0});return LD(e,o)},i.next=3,kL(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function xL(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var EL=new Map;function IL(e,t,n){if(!n)throw new GE(HE.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function SL(e,t,n,r){if(!0===t&&!0===r)throw new GE(HE.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function CL(e){if(!dI.isDocumentKey(e))throw new GE(HE.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function TL(e){if(dI.isDocumentKey(e))throw new GE(HE.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function NL(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":zE()}function RL(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new GE(HE.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=NL(e);throw new GE(HE.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function PL(e,t){if(t<=0)throw new GE(HE.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var AL=function(){function e(t){var n,r;if(or(this,e),void 0===t.host){if(void 0!==t.ssl)throw new GE(HE.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new GE(HE.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}SL("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xL(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new GE(HE.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new GE(HE.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new GE(HE.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return ur(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),DL=function(){function e(t,n,r,i){or(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AL({}),this._settingsFrozen=!1}return ur(e,[{key:"app",get:function(){if(!this._app)throw new GE(HE.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new GE(HE.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AL(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new YE;switch(e.type){case"firstParty":return new ZE(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new GE(HE.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=EL.get(e);t&&(jE("ComponentProvider","Removing Datastore"),EL.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function OL(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=RL(e,DL))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&qE("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var s,u;if("string"==typeof i.mockUserToken)s=i.mockUserToken,u=OE.MOCK_USER;else{s=Or(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new GE(HE.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new OE(c)}e._authCredentials=new XE(new QE(s,u))}}var LL=function(){function e(t,n,r){or(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return ur(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new FL(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),ML=function(){function e(t,n,r){or(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return ur(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),FL=function(e){fr(n,e);var t=vr(n);function n(e,r,i){var a;return or(this,n),(a=t.call(this,e,r,BC(i)))._path=i,a.type="collection",a}return ur(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new LL(this.firestore,null,new dI(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(ML);function jL(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=di(e),IL("collection","path",t),e instanceof DL){var a=lI.fromString.apply(lI,[t].concat(r));return TL(a),new FL(e,null,a)}if(!(e instanceof LL||e instanceof FL))throw new GE(HE.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(lI.fromString.apply(lI,[t].concat(r)));return TL(o),new FL(e.firestore,null,o)}function UL(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=di(e),1===arguments.length&&(t=rI.A()),IL("doc","path",t),e instanceof DL){var a=lI.fromString.apply(lI,[t].concat(r));return CL(a),new LL(e,null,new dI(a))}if(!(e instanceof LL||e instanceof FL))throw new GE(HE.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(lI.fromString.apply(lI,[t].concat(r)));return CL(o),new LL(e.firestore,e instanceof FL?e.converter:null,new dI(o))}function qL(e,t){return e=di(e),t=di(t),(e instanceof LL||e instanceof FL)&&(t instanceof LL||t instanceof FL)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function VL(e,t){return e=di(e),t=di(t),e instanceof ML&&t instanceof ML&&e.firestore===t.firestore&&$C(e._query,t._query)&&e.converter===t.converter}var zL=function(){function e(){var t=this;or(this,e),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new OA(this,"async_queue_retry"),this.Xc=function(){var e=AA();e&&jE("AsyncQueue","Visibility state changed to "+e.visibilityState),t.qo.Mo()};var n=AA();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}return ur(e,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=AA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new KE;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var e=yi(pi().mark((function e(){var t=this;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Qc.length){e.next=14;break}return e.prev=1,e.next=4,this.Qc[0]();case 4:this.Qc.shift(),this.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),AI(e.t0)){e.next=12;break}throw e.t0;case 12:jE("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Qc.length>0&&this.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){t.Wc=e,t.Hc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw UE("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var i=TD.createAndSchedule(this,e,t,n,(function(e){return r.na(e)}));return this.zc.push(i),i}},{key:"Zc",value:function(){this.Wc&&zE()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var e=yi(pi().mark((function e(){var t;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Gc,e.next=3,t;case 3:if(t!==this.Gc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(e){var t,n=cr(this.zc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=cr(t.zc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),e}();function BL(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=cr(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var WL=function(){function e(){or(this,e),this._progressObserver={},this._taskCompletionResolver=new KE,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return ur(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),HL=function(e){fr(n,e);var t=vr(n);function n(e,r,i,a){var o;return or(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new zL,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return ur(n,[{key:"_terminate",value:function(){return this._firestoreClient||KL(this),this._firestoreClient.terminate()}}]),n}(DL);function GL(e){return e._firestoreClient||KL(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function KL(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new FS(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,xL(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new iL(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function QL(e,t,n){var r=new KE;return e.asyncQueue.enqueue(yi(pi().mark((function i(){var a;return pi().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,aL(e,n);case 3:return i.next=5,sL(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),cL(a=i.t0)){i.next=13;break}throw a;case 13:qE("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function YL(e){return function(e){return e.asyncQueue.enqueue(yi(pi().mark((function t(){var n,r;return pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pL(e);case 2:return n=t.sent,t.next=5,mL(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=WE(e);return t.vu.delete(0),VA(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(GL(e=RL(e,HL)))}function XL(e){return function(e){return e.asyncQueue.enqueue(yi(pi().mark((function t(){var n,r;return pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pL(e);case 2:return n=t.sent,t.next=5,mL(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=WE(t)).vu.add(0),e.next=4,BA(n);case 4:n.bu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(GL(e=RL(e,HL)))}function JL(e,t){var n=GL(e=RL(e,HL)),r=new WL;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new tL(e,t)}(function(e,t){if(e instanceof Uint8Array)return ZO(e,t);if(e instanceof ArrayBuffer)return ZO(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?sN().encode(e):e),t)}(n,DA(t));e.asyncQueue.enqueueAndForget(yi(pi().mark((function t(){return pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=QO,t.next=3,gL(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function $L(e,t){return function(e,t){return e.asyncQueue.enqueue(yi(pi().mark((function n(){return pi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=WE(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.qs.getNamedQuery(e,t)}))},n.next=3,vL(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(GL(e=RL(e,HL)),t).then((function(t){return t?new ML(e,null,t.query):null}))}function ZL(e){if(e._initialized||e._terminated)throw new GE(HE.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var eM=function(){function e(t){or(this,e),this._byteString=t}return ur(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(NS.fromBase64String(t))}catch(t){throw new GE(HE.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(NS.fromUint8Array(t))}}]),e}(),tM=function(){function e(){or(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new GE(HE.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fI(n)}return ur(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var nM=ur((function e(t){or(this,e),this._methodName=t})),rM=function(){function e(t,n){if(or(this,e),!isFinite(t)||t<-90||t>90)throw new GE(HE.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new GE(HE.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return ur(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return iI(this._lat,e._lat)||iI(this._long,e._long)}}]),e}(),iM=/^__.*__$/,aM=function(){function e(t,n,r){or(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ur(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new HT(e,this.data,this.fieldMask,t,this.fieldTransforms):new WT(e,this.data,t,this.fieldTransforms)}}]),e}(),oM=function(){function e(t,n,r){or(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ur(e,[{key:"toMutation",value:function(e,t){return new HT(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function sM(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zE()}}var uM=function(){function e(t,n,r,i,a,o){or(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return ur(e,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return TM(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(sM(this.ca)&&iM.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),cM=function(){function e(t,n,r){or(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||DA(t)}return ur(e,[{key:"ya",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new uM({ca:e,methodName:t,ga:n,path:fI.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function lM(e){var t=e._freezeSettings(),n=DA(e._databaseId);return new cM(e._databaseId,!!t.ignoreUndefinedProperties,n)}function hM(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,i);EM("Data must be an object, but it was:",o,r);var s,u,c=_M(r,o);if(a.merge)s=new CS(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=cr(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=IM(t,l.value,n);if(!o.contains(d))throw new GE(HE.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));NM(h,d)||h.push(d)}}catch(p){f.e(p)}finally{f.f()}s=new CS(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new aM(new oC(c),s,u)}var fM=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.apply(this,arguments)}return ur(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(nM);function dM(e,t,n){return new uM({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var pM=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.apply(this,arguments)}return ur(n,[{key:"_toFieldTransform",value:function(e){return new OT(e.path,new ST)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(nM),vM=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this,e)).pa=r,i}return ur(n,[{key:"_toFieldTransform",value:function(e){var t=dM(this,e,!0),n=this.pa.map((function(e){return wM(e,t)})),r=new CT(n);return new OT(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(nM),mM=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this,e)).pa=r,i}return ur(n,[{key:"_toFieldTransform",value:function(e){var t=dM(this,e,!0),n=this.pa.map((function(e){return wM(e,t)})),r=new NT(n);return new OT(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(nM),gM=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this,e)).Ia=r,i}return ur(n,[{key:"_toFieldTransform",value:function(e){var t=new PT(e.serializer,wT(e.serializer,this.Ia));return new OT(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(nM);function yM(e,t,n,r){var i=e.ya(1,t,n);EM("Data must be an object, but it was:",i,r);var a=[],o=oC.empty();kS(r,(function(e,r){var s=CM(t,e,n);r=di(r);var u=i.da(s);if(r instanceof fM)a.push(s);else{var c=wM(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new CS(a);return new oM(o,s,i.fieldTransforms)}function kM(e,t,n,r,i,a){var o=e.ya(1,t,n),s=[IM(t,r,n)],u=[i];if(a.length%2!=0)throw new GE(HE.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(IM(t,a[c])),u.push(a[c+1]);for(var l=[],h=oC.empty(),f=s.length-1;f>=0;--f)if(!NM(l,s[f])){var d=s[f],p=u[f];p=di(p);var v=o.da(d);if(p instanceof fM)l.push(d);else{var m=wM(p,v);null!=m&&(l.push(d),h.set(d,m))}}var g=new CS(l);return new oM(h,g,o.fieldTransforms)}function bM(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return wM(n,e.ya(r?4:3,t))}function wM(e,t){if(xM(e=di(e)))return EM("Unsupported field value:",t,e),_M(e,t);if(e instanceof nM)return function(e,t){if(!sM(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=cr(e);try{for(a.s();!(n=a.n()).done;){var o=wM(n.value,t.wa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=di(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return wT(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=sI.fromDate(e);return{timestampValue:CN(t.serializer,n)}}if(e instanceof sI){var r=new sI(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:CN(t.serializer,r)}}if(e instanceof rM)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof eM)return{bytesValue:TN(t.serializer,e._byteString)};if(e instanceof LL){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:PN(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(NL(e)))}(e,t)}function _M(e,t){var n={};return bS(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):kS(e,(function(e,r){var i=wM(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function xM(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof sI||e instanceof rM||e instanceof eM||e instanceof LL||e instanceof nM)}function EM(e,t,n){if(!xM(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=NL(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function IM(e,t,n){if((t=di(t))instanceof tM)return t._internalPath;if("string"==typeof t)return CM(e,t);throw TM("Field path arguments must be of type string or ",e,!1,void 0,n)}var SM=new RegExp("[~\\*/\\[\\]]");function CM(e,t,n){if(t.search(SM)>=0)throw TM("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return mr(tM,mi(t.split(".")))._internalPath}catch(pX){throw TM("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function TM(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new GE(HE.INVALID_ARGUMENT,s+e+u)}function NM(e,t){return e.some((function(e){return e.isEqual(t)}))}var RM=function(){function e(t,n,r,i,a){or(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return ur(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new LL(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new PM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(AM("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),PM=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.apply(this,arguments)}return ur(n,[{key:"data",value:function(){return Ya(dr(n.prototype),"data",this).call(this)}}]),n}(RM);function AM(e,t){return"string"==typeof t?CM(e,t):t instanceof tM?t._internalPath:t._delegate._internalPath}function DM(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new GE(HE.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var OM=ur((function e(){or(this,e)})),LM=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.apply(this,arguments)}return ur(n)}(OM);function MM(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof OM&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof jM})).length,n=e.filter((function(e){return e instanceof FM})).length;if(t>1||t>0&&n>0)throw new GE(HE.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,s=cr(n);try{for(s.s();!(o=s.n()).done;){e=o.value._apply(e)}}catch(u){s.e(u)}finally{s.f()}return e}var FM=function(e){fr(n,e);var t=vr(n);function n(e,r,i){var a;return or(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return ur(n,[{key:"_apply",value:function(e){var t=this._parse(e);return XM(e._query,t),new ML(e.firestore,e.converter,XC(e._query,t))}},{key:"_parse",value:function(e){var t=lM(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new GE(HE.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){YM(o,a);var u,c=[],l=cr(o);try{for(l.s();!(u=l.n()).done;){var h=u.value;c.push(QM(r,e,h))}}catch(f){l.e(f)}finally{l.f()}s={arrayValue:{values:c}}}else s=QM(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||YM(o,a),s=bM(n,"where",o,"in"===a||"not-in"===a);return vC.create(i,a,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(LM);var jM=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return ur(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:mC.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=cr(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;XM(r,a),r=XC(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new ML(e.firestore,e.converter,XC(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(OM);var UM=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return ur(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new GE(HE.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new GE(HE.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new fC(t,n);return function(e,t){if(null===HC(e)){var n=GC(e);null!==n&&JM(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new ML(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new VC(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(LM);var qM=function(e){fr(n,e);var t=vr(n);function n(e,r,i){var a;return or(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return ur(n,[{key:"_apply",value:function(e){return new ML(e.firestore,e.converter,JC(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(LM);var VM=function(e){fr(n,e);var t=vr(n);function n(e,r,i){var a;return or(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return ur(n,[{key:"_apply",value:function(e){var t=KM(e,this.type,this._docOrFields,this._inclusive);return new ML(e.firestore,e.converter,function(e,t){return new VC(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(LM);function zM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return VM._create("startAt",t,!0)}function BM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return VM._create("startAfter",t,!1)}var WM=function(e){fr(n,e);var t=vr(n);function n(e,r,i){var a;return or(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return ur(n,[{key:"_apply",value:function(e){var t=KM(e,this.type,this._docOrFields,this._inclusive);return new ML(e.firestore,e.converter,function(e,t){return new VC(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(LM);function HM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return WM._create("endBefore",t,!1)}function GM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return WM._create("endAt",t,!0)}function KM(e,t,n,r){if(n[0]=di(n[0]),n[0]instanceof RM)return function(e,t,n,r,i){if(!r)throw new GE(HE.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=cr(QC(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(QS(t,r.key));else{var c=r.data.field(u.field);if(OS(c))throw new GE(HE.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new GE(HE.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){s.e(h)}finally{s.f()}return new cC(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=lM(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new GE(HE.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new GE(HE.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!KC(e)&&-1!==c.indexOf("/"))throw new GE(HE.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(lI.fromString(c));if(!dI.isDocumentKey(l))throw new GE(HE.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new dI(l);s.push(QS(t,h))}else{var f=bM(n,r,c);s.push(f)}}return new cC(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function QM(e,t,n){if("string"==typeof(n=di(n))){if(""===n)throw new GE(HE.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KC(t)&&-1!==n.indexOf("/"))throw new GE(HE.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(lI.fromString(n));if(!dI.isDocumentKey(r))throw new GE(HE.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return QS(e,new dI(r))}if(n instanceof LL)return QS(e,n._key);throw new GE(HE.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(NL(n),"."))}function YM(e,t){if(!Array.isArray(e)||0===e.length)throw new GE(HE.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function XM(e,t){if(t.isInequality()){var n=GC(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new GE(HE.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=HC(e);null!==i&&JM(e,r,i)}var a=function(e,t){var n,r=cr(e);try{for(r.s();!(n=r.n()).done;){var i,a=cr(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new GE(HE.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new GE(HE.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function JM(e,t,n){if(!n.isEqual(t))throw new GE(HE.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var $M=function(){function e(){or(this,e)}return ur(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(VS(e)){case 0:return null;case 1:return e.booleanValue;case 2:return AS(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(DS(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw zE()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return kS(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new rM(AS(e.latitude),AS(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=LS(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(MS(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=PS(e);return new sI(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=lI.fromString(e);BE(tR(n));var r=new jS(n.get(1),n.get(3)),i=new dI(n.popFirst(5));return r.isEqual(t)||UE("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function ZM(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var eF=function(e){fr(n,e);var t=vr(n);function n(e){var r;return or(this,n),(r=t.call(this)).firestore=e,r}return ur(n,[{key:"convertBytes",value:function(e){return new eM(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new LL(this.firestore,null,t)}}]),n}($M);var tF=function(){function e(t,n){or(this,e),this.hasPendingWrites=t,this.fromCache=n}return ur(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),nF=function(e){fr(n,e);var t=vr(n);function n(e,r,i,a,o,s){var u;return or(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return ur(n,[{key:"exists",value:function(){return Ya(dr(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new rF(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(AM("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(RM),rF=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.apply(this,arguments)}return ur(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ya(dr(n.prototype),"data",this).call(this,e)}}]),n}(nF),iF=function(){function e(t,n,r,i){or(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new tF(i.hasPendingWrites,i.fromCache),this.query=r}return ur(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new rF(n._firestore,n._userDataWriter,r.key,r,new tF(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new GE(HE.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new rF(e._firestore,e._userDataWriter,t.doc.key,t.doc,new tF(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new rF(e._firestore,e._userDataWriter,t.doc.key,t.doc,new tF(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:aF(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function aF(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zE()}}function oF(e,t){return e instanceof nF&&t instanceof nF?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof iF&&t instanceof iF&&e._firestore===t._firestore&&VL(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var sF=function(e){fr(n,e);var t=vr(n);function n(e){var r;return or(this,n),(r=t.call(this)).firestore=e,r}return ur(n,[{key:"convertBytes",value:function(e){return new eM(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new LL(this.firestore,null,t)}}]),n}($M);function uF(e){e=RL(e,LL);var t=RL(e.firestore,HL),n=GL(t),r=new sF(t);return function(e,t){var n=new KE;return e.asyncQueue.enqueueAndForget(yi(pi().mark((function r(){return pi().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=yi(pi().mark((function e(t,n,r){var i,a;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=WE(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new GE(HE.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=ND(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,vL(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new nF(t,r,e._key,n,new tF(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function cF(e){e=RL(e,ML);var t=RL(e.firestore,HL),n=GL(t),r=new sF(t);return function(e,t){var n=new KE;return e.asyncQueue.enqueueAndForget(yi(pi().mark((function r(){return pi().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=yi(pi().mark((function e(t,n,r){var i,a,o,s,u;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,aA(t,n,!0);case 3:i=e.sent,a=new YD(n,i.ir),o=a.sc(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=ND(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,vL(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new iF(t,r,e,n)}))}function lF(e,t,n){e=RL(e,LL);var r=RL(e.firestore,HL),i=ZM(e.converter,t,n);return vF(r,[hM(lM(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,MT.none())])}function hF(e,t,n){e=RL(e,LL);for(var r=RL(e.firestore,HL),i=lM(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return vF(r,[("string"==typeof(t=di(t))||t instanceof tM?kM(i,"updateDoc",e._key,t,n,o):yM(i,"updateDoc",e._key,t)).toMutation(e._key,MT.exists(!0))])}function fF(e){return vF(RL(e.firestore,HL),[new JT(e._key,MT.none())])}function dF(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=di(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||BL(n[u])||(s=n[u],u++);var c,l,h,f={includeMetadataChanges:s.includeMetadataChanges};if(BL(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof LL)l=RL(e.firestore,HL),h=BC(e._key.path),c={next:function(t){n[u]&&n[u](mF(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=RL(e,ML);l=RL(p.firestore,HL),h=p._query;var v=new sF(l);c={next:function(e){n[u]&&n[u](new iF(l,v,p,e))},error:n[u+1],complete:n[u+2]},DM(e._query)}return function(e,t,n,r){var i=new eL(r),a=new zD(t,i,n);return e.asyncQueue.enqueueAndForget(yi(pi().mark((function t(){return pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=LD,t.next=3,kL(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Dc(),e.asyncQueue.enqueueAndForget(yi(pi().mark((function t(){return pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=FD,t.next=3,kL(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(GL(l),h,f,c)}function pF(e,t){return function(e,t){var n=new eL(t);return e.asyncQueue.enqueueAndForget(yi(pi().mark((function t(){return pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){WE(e).ku.add(t),t.next()},t.next=3,kL(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Dc(),e.asyncQueue.enqueueAndForget(yi(pi().mark((function t(){return pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){WE(e).ku.delete(t)},t.next=3,kL(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(GL(e=RL(e,HL)),BL(t)?t:{next:t})}function vF(e,t){return function(e,t){var n=new KE;return e.asyncQueue.enqueueAndForget(yi(pi().mark((function r(){return pi().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=aO,r.next=3,gL(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(GL(e),t)}function mF(e,t,n){var r=n.docs.get(t._key),i=new sF(e);return new nF(e,i,t._key,r,new tF(n.hasPendingWrites,n.fromCache),t.converter)}var gF={maxAttempts:5},yF=function(){function e(t,n){or(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=lM(t)}return ur(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=kF(e,this._firestore),i=ZM(r.converter,t,n),a=hM(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,MT.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=kF(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=di(t))||t instanceof tM?kM(this._dataReader,"WriteBatch.update",i._key,t,n,o):yM(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,MT.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=kF(e,this._firestore);return this._mutations=this._mutations.concat(new JT(t._key,MT.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new GE(HE.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function kF(e,t){if((e=di(e)).firestore!==t)throw new GE(HE.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var bF=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this,e,r))._firestore=e,i}return ur(n,[{key:"get",value:function(e){var t=this,r=kF(e,this._firestore),i=new sF(this._firestore);return Ya(dr(n.prototype),"get",this).call(this,e).then((function(e){return new nF(t._firestore,i,r._key,e._document,new tF(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){or(this,e),this._firestore=t,this._transaction=n,this._dataReader=lM(t)}return ur(e,[{key:"get",value:function(e){var t=this,n=kF(e,this._firestore),r=new eF(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return zE();var i=e[0];if(i.isFoundDocument())return new RM(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new RM(t._firestore,r,n._key,null,n.converter);throw zE()}))}},{key:"set",value:function(e,t,n){var r=kF(e,this._firestore),i=ZM(r.converter,t,n),a=hM(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=kF(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=di(t))||t instanceof tM?kM(this._dataReader,"Transaction.update",i._key,t,n,o):yM(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=kF(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function wF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new vM("arrayUnion",t)}function _F(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new mM("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){LE=e}(va),ua(new ki("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new HL(new JE(e.getProvider("auth-internal")),new tI(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new GE(HE.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jS(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),wa(DE,"3.13.0",e),wa(DE,"3.13.0","esm2017")}();function xF(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new GE("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function EF(){if("undefined"===typeof Uint8Array)throw new GE("unimplemented","Uint8Arrays are not available in this environment.")}function IF(){if("undefined"==typeof atob)throw new GE("unimplemented","Blobs are unavailable in Firestore in this environment.")}var SF=function(){function e(t){or(this,e),this._delegate=t}return ur(e,[{key:"toBase64",value:function(){return IF(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return EF(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return IF(),new e(eM.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return EF(),new e(eM.fromUint8Array(t))}}]),e}();function CF(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=cr(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var TF=function(){function e(){or(this,e)}return ur(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){ZL(e=RL(e,HL));var n=GL(e);if(n._uninitializedComponentsProvider)throw new GE(HE.FAILED_PRECONDITION,"SDK cache is already specified.");qE("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new $O;return QL(n,i,new XO(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){ZL(e=RL(e,HL));var t=GL(e);if(t._uninitializedComponentsProvider)throw new GE(HE.FAILED_PRECONDITION,"SDK cache is already specified.");qE("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new $O;return QL(t,r,new JO(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new GE(HE.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new KE;return e._queue.enqueueAndForgetEvenWhileRestricted(yi(pi().mark((function n(){return pi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=yi(pi().mark((function e(t){var n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(NI.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,NI.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(WP(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),NF=function(){function e(t,n,r){var i=this;or(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof jS||(this._appCompat=t)}return ur(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||qE("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};OL(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return YL(this._delegate)}},{key:"disableNetwork",value:function(){return XL(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&SL("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new KE;return e.asyncQueue.enqueueAndForget(yi(pi().mark((function n(){return pi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=mO,n.next=3,gL(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(GL(e=RL(e,HL)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return pF(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new GE("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new BF(this,jL(this._delegate,e))}catch(t){throw LF(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new OF(this,UL(this._delegate,e))}catch(t){throw LF(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new qF(this,function(e,t){if(e=RL(e,DL),IL("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new GE(HE.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new ML(e,null,function(e){return new VC(lI.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw LF(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=RL(e,HL);var r=Object.assign(Object.assign({},gF),n);return function(e){if(e.maxAttempts<1)throw new GE(HE.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new KE;return e.asyncQueue.enqueueAndForget(yi(pi().mark((function i(){var a;return pi().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,yL(e);case 2:a=i.sent,new rL(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(GL(e),(function(n){return t(new bF(e,n))}),r)}(this._delegate,(function(n){return e(new PF(t,n))}))}},{key:"batch",value:function(){var e=this;return GL(this._delegate),new AF(new yF(this._delegate,(function(t){return vF(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return JL(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return $L(this._delegate,e).then((function(e){return e?new qF(t,e):null}))}}]),e}(),RF=function(e){fr(n,e);var t=vr(n);function n(e){var r;return or(this,n),(r=t.call(this)).firestore=e,r}return ur(n,[{key:"convertBytes",value:function(e){return new SF(new eM(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return OF.forKey(t,this.firestore,null)}}]),n}($M);var PF=function(){function e(t,n){or(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new RF(t)}return ur(e,[{key:"get",value:function(e){var t=this,n=WF(e);return this._delegate.get(n).then((function(e){return new jF(t._firestore,new nF(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=WF(e);return n?(xF("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=WF(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=WF(e);return this._delegate.delete(t),this}}]),e}(),AF=function(){function e(t){or(this,e),this._delegate=t}return ur(e,[{key:"set",value:function(e,t,n){var r=WF(e);return n?(xF("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=WF(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=WF(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),DF=function(){function e(t,n,r){or(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return ur(e,[{key:"fromFirestore",value:function(e,t){var n=new rF(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new UF(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new RF(t),n),i.set(n,a)),a}}]),e}();DF.INSTANCES=new WeakMap;var OF=function(){function e(t,n){or(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new RF(t)}return ur(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new BF(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new BF(this.firestore,jL(this._delegate,e))}catch(t){throw LF(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=di(e))instanceof LL&&qL(this._delegate,e)}},{key:"set",value:function(e,t){t=xF("DocumentReference.set",t);try{return t?lF(this._delegate,e,t):lF(this._delegate,e)}catch(n){throw LF(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?hF(this._delegate,e):hF.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw LF(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return fF(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=MF(n),a=FF(n,(function(t){return new jF(e.firestore,new nF(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return dF(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?uF(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=RL(e,LL);var t=RL(e.firestore,HL);return wL(GL(t),e._key,{source:"server"}).then((function(n){return mF(t,e,n)}))}(this._delegate):function(e){e=RL(e,LL);var t=RL(e.firestore,HL);return wL(GL(t),e._key).then((function(n){return mF(t,e,n)}))}(this._delegate),t.then((function(e){return new jF(n.firestore,new nF(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(DF.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new GE("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new LL(n._delegate,r,new dI(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new LL(n._delegate,r,t))}}]),e}();function LF(e,t,n){return e.message=e.message.replace(t,n),e}function MF(e){var t,n=cr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!CF(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function FF(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=CF(e[0])?e[0]:CF(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var jF=function(){function e(t,n){or(this,e),this._firestore=t,this._delegate=n}return ur(e,[{key:"ref",get:function(){return new OF(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return oF(this._delegate,e._delegate)}}]),e}(),UF=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.apply(this,arguments)}return ur(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||zE()}(void 0!==t),t}}]),n}(jF),qF=function(){function e(t,n){or(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new RF(t)}return ur(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,MM(this._delegate,function(e,t,n){var r=t,i=AM("where",e);return FM._create(i,r,n)}(t,n,r)))}catch(i){throw LF(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,MM(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=AM("orderBy",e);return UM._create(n,t)}(t,n)))}catch(r){throw LF(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,MM(this._delegate,function(e){return PL("limit",e),qM._create("limit",e,"F")}(t)))}catch(n){throw LF(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,MM(this._delegate,function(e){return PL("limitToLast",e),qM._create("limitToLast",e,"L")}(t)))}catch(n){throw LF(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,MM(this._delegate,zM.apply(void 0,arguments)))}catch(t){throw LF(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,MM(this._delegate,BM.apply(void 0,arguments)))}catch(t){throw LF(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,MM(this._delegate,HM.apply(void 0,arguments)))}catch(t){throw LF(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,MM(this._delegate,GM.apply(void 0,arguments)))}catch(t){throw LF(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return VL(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?cF(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=RL(e,ML);var t=RL(e.firestore,HL),n=GL(t),r=new sF(t);return _L(n,e._query,{source:"server"}).then((function(n){return new iF(t,r,e,n)}))}(this._delegate):function(e){e=RL(e,ML);var t=RL(e.firestore,HL),n=GL(t),r=new sF(t);return DM(e._query),_L(n,e._query).then((function(n){return new iF(t,r,e,n)}))}(this._delegate),t.then((function(e){return new zF(n.firestore,new iF(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=MF(n),a=FF(n,(function(t){return new zF(e.firestore,new iF(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return dF(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(DF.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),VF=function(){function e(t,n){or(this,e),this._firestore=t,this._delegate=n}return ur(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new UF(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),zF=function(){function e(t,n){or(this,e),this._firestore=t,this._delegate=n}return ur(e,[{key:"query",get:function(){return new qF(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new UF(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new VF(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new UF(n._firestore,r))}))}},{key:"isEqual",value:function(e){return oF(this._delegate,e._delegate)}}]),e}(),BF=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return ur(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new OF(this.firestore,e):null}},{key:"doc",value:function(e){try{return new OF(this.firestore,void 0===e?UL(this._delegate):UL(this._delegate,e))}catch(t){throw LF(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=RL(e.firestore,HL),r=UL(e),i=ZM(e.converter,t);return vF(n,[hM(lM(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,MT.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new OF(t.firestore,e)}))}},{key:"isEqual",value:function(e){return qL(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(DF.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(qF);function WF(e){return RL(e,LL)}var HF=function(){function e(){or(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=mr(tM,n)}return ur(e,[{key:"isEqual",value:function(e){return(e=di(e))instanceof tM&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(fI.keyField().canonicalString())}}]),e}(),GF=function(){function e(t){or(this,e),this._delegate=t}return ur(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new pM("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new fM("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=wF.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=_F.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new gM("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),KF={Firestore:NF,GeoPoint:rM,Timestamp:sI,Blob:SF,Transaction:PF,WriteBatch:AF,DocumentReference:OF,DocumentSnapshot:jF,Query:qF,QueryDocumentSnapshot:UF,QuerySnapshot:zF,CollectionReference:BF,FieldPath:HF,FieldValue:GF,setLogLevel:function(e){!function(e){ME.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new ki("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},KF)))}(e,(function(e,t){return new NF(e,t,new TF)})),e.registerVersion("@firebase/firestore-compat","0.3.12")}(Ka);Ka.initializeApp({apiKey:"AIzaSyDE-Cl5RxG1byLc4pjoBxD3aXWO3wi43P8",authDomain:"diary-6211f.firebaseapp.com",projectId:"diary-6211f",storageBucket:"diary-6211f.appspot.com",messagingSenderId:"765031385372",appId:"1:765031385372:web:9b72a3164df87c4c9712d9",measurementId:"G-5VWBRJH7V4"});var QF,YF=Ka.firestore(),XF="firebasestorage.googleapis.com",JF="storageBucket",$F=function(e){fr(n,e);var t=vr(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return or(this,n),(i=t.call(this,ZF(e),"Firebase Storage: ".concat(r," (").concat(ZF(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(lr(i),n.prototype),i}return ur(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return ZF(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Br);function ZF(e){return"storage/"+e}function ej(){return new $F(QF.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function tj(){return new $F(QF.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function nj(){return new $F(QF.CANCELED,"User canceled the upload/download.")}function rj(){return new $F(QF.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ij(e){return new $F(QF.INVALID_ARGUMENT,e)}function aj(){return new $F(QF.APP_DELETED,"The Firebase app was deleted.")}function oj(e){return new $F(QF.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function sj(e,t){return new $F(QF.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function uj(e){throw new $F(QF.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(QF||(QF={}));var cj,lj=function(){function e(t,n){or(this,e),this.bucket=t,this.path_=n}return ur(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new $F(QF.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===XF?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(t);if(h){var f=h[l.indices.bucket],d=h[l.indices.path];d||(d=""),r=new e(f,d),l.postModify(r);break}}if(null==r)throw function(e){return new $F(QF.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),hj=function(){function e(t){or(this,e),this.promise_=Promise.reject(t)}return ur(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function fj(e){return"string"===typeof e||e instanceof String}function dj(e){return pj()&&e instanceof Blob}function pj(){return"undefined"!==typeof Blob&&!Fr()}function vj(e,t,n,r){if(r<t)throw ij("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw ij("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function mj(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function gj(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function yj(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(cj||(cj={}));var kj=function(){function e(t,n,r,i,a,o,s,u,c,l,h){var f=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];or(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){f.resolve_=e,f.reject_=t,f.start_()}))}return ur(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(u){i(u)}else if(null!==a){var s=ej();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else{if(n.canceled)i(e.appDelete_?aj():nj());else i(tj())}};this.canceled_?t(0,new bj(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function f(){a&&clearTimeout(a)}function d(e){if(c)f();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return f(),void l.call.apply(l,[null,e].concat(n));var a;if(u()||o)return f(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),h(a)}}var p=!1;function v(e){p||(p=!0,f(),c||(null!==i?(e||(s=2),clearTimeout(i),h(0)):e||(s=1)))}return h(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new bj(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===cj.NO_ERROR,a=r.getStatus();if(!n||yj(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===cj.ABORT;t(!1,new bj(!1,null,o))}else{var s=-1!==e.successCodes_.indexOf(a);t(!0,new bj(s,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),bj=ur((function e(t,n,r){or(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function wj(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function _j(){for(var e=wj(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(pj())return new Blob(n);throw new $F(QF.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function xj(e){if("undefined"===typeof atob)throw t="base-64",new $F(QF.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var Ej={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Ij=ur((function e(t,n){or(this,e),this.data=t,this.contentType=n||null}));function Sj(e,t){switch(e){case Ej.RAW:return new Ij(Cj(t));case Ej.BASE64:case Ej.BASE64URL:return new Ij(Tj(e,t));case Ej.DATA_URL:return new Ij(function(e){var t=new Nj(e);return t.base64?Tj(Ej.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw sj(Ej.DATA_URL,"Malformed data URL.")}return Cj(t)}(t.rest)}(t),new Nj(t).contentType)}throw ej()}function Cj(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Tj(e,t){switch(e){case Ej.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw sj(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Ej.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw sj(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=xj(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw sj(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var Nj=ur((function e(t){or(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw sj(Ej.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){var n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}));var Rj=function(){function e(t,n){or(this,e);var r=0,i="";dj(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return ur(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(dj(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(pj()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(_j.apply(null,i))}var a=n.map((function(e){return fj(e)?Sj(Ej.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function Pj(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Aj(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Dj(e,t){return t}var Oj=ur((function e(t,n,r,i){or(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Dj})),Lj=null;function Mj(){if(Lj)return Lj;var e=[];e.push(new Oj("bucket")),e.push(new Oj("generation")),e.push(new Oj("metageneration")),e.push(new Oj("name","fullPath",!0));var t=new Oj("name");t.xform=function(e,t){return function(e){return!fj(e)||e.length<2?e:Aj(e)}(t)},e.push(t);var n=new Oj("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Oj("timeCreated")),e.push(new Oj("updated")),e.push(new Oj("md5Hash",null,!0)),e.push(new Oj("cacheControl",null,!0)),e.push(new Oj("contentDisposition",null,!0)),e.push(new Oj("contentEncoding",null,!0)),e.push(new Oj("contentLanguage",null,!0)),e.push(new Oj("contentType",null,!0)),e.push(new Oj("metadata","customMetadata",!0)),Lj=e}function Fj(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new lj(n,r);return t._makeStorageReference(i)}})}(r,e),r}function jj(e,t,n){var r=Pj(t);return null===r?null:Fj(e,r,n)}function Uj(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var qj="prefixes",Vj="items";function zj(e,t,n){var r=Pj(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[qj]){var i,a=cr(n[qj]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),s=e._makeStorageReference(new lj(t,o));r.prefixes.push(s)}}catch(f){a.e(f)}finally{a.f()}}if(n[Vj]){var u,c=cr(n[Vj]);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=e._makeStorageReference(new lj(t,l.name));r.items.push(h)}}catch(f){c.e(f)}finally{c.f()}}return r}(e,t,r)}var Bj=ur((function e(t,n,r,i){or(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function Wj(e){if(!e)throw ej()}function Hj(e,t){return function(n,r){var i=jj(e,r,t);return Wj(null!==i),i}}function Gj(e,t){return function(n,r){var i=jj(e,r,t);return Wj(null!==i),function(e,t,n,r){var i=Pj(t);if(null===i)return null;if(!fj(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return mj("/b/"+o(i)+"/o/"+o(a),n,r)+gj({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Kj(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new $F(QF.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new $F(QF.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new $F(QF.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new $F(QF.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Qj(e){var t=Kj(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new $F(QF.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function Yj(e,t,n){var r=mj(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Bj(r,"GET",Hj(e,n),i);return a.errorHandler=Qj(t),a}function Xj(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=mj(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,u=new Bj(o,"GET",function(e,t){return function(n,r){var i=zj(e,t,r);return Wj(null!==i),i}}(e,t.bucket),s);return u.urlParams=a,u.errorHandler=Kj(t),u}function Jj(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function $j(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=Jj(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Uj(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=Rj.getBlob(c,r,l);if(null===h)throw rj();var f={name:u.fullPath},d=mj(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new Bj(d,"POST",Hj(e,n),p);return v.urlParams=f,v.headers=o,v.body=h.uploadData(),v.errorHandler=Kj(t),v}var Zj=ur((function e(t,n,r,i){or(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function eU(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){Wj(!1)}return Wj(!!n&&-1!==(t||["active"]).indexOf(n)),n}var tU=262144;function nU(e,t,n,r,i,a,o,s){var u=new Zj(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new $F(QF.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(u.current)},p=r.slice(h,f);if(null===p)throw rj();var v=t.maxUploadRetryTime,m=new Bj(n,"POST",(function(e,n){var i,o=eU(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===o?Hj(t,a)(e,n):null,new Zj(s,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=s||null,m.errorHandler=Kj(e),m}var rU={STATE_CHANGED:"state_changed"},iU={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function aU(e){switch(e){case"running":case"pausing":case"canceling":return iU.RUNNING;case"paused":return iU.PAUSED;case"success":return iU.SUCCESS;case"canceled":return iU.CANCELED;default:return iU.ERROR}}var oU=ur((function e(t,n,r){or(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function sU(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var uU=null,cU=function(){function e(){var t=this;or(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=cj.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=cj.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=cj.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return ur(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw uj("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw uj("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw uj("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw uj("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw uj("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),lU=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.apply(this,arguments)}return ur(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(cU);function hU(){return uU?uU():new lU}var fU=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;or(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=Mj(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(QF.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(yj(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=tj()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(QF.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return ur(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=nr(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=Jj(t,r,i),s={name:o.fullPath},u=mj(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=Uj(o,n),h=e.maxUploadRetryTime,f=new Bj(u,"POST",(function(e){var t;eU(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){Wj(!1)}return Wj(fj(t)),t}),h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=Kj(t),f}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,hU,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new Bj(n,"POST",(function(e){var t=eU(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){Wj(!1)}n||Wj(!1);var i=Number(n);return Wj(!isNaN(i)),new Zj(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=Kj(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,hU,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=tU*this._chunkMultiplier,n=new Zj(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=nU(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(u){return e._error=u,void e._transition("error")}var s=e._ref.storage._makeRequest(o,hU,i,a,!1);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(tU*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=Yj(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,hU,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=$j(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,hU,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=nj(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=aU(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new oU(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(aU(this._state)){case iU.SUCCESS:sU(this._resolve.bind(null,this.snapshot))();break;case iU.CANCELED:case iU.ERROR:sU(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(aU(this._state)){case iU.RUNNING:case iU.PAUSED:e.next&&sU(e.next.bind(e,this.snapshot))();break;case iU.SUCCESS:e.complete&&sU(e.complete.bind(e))();break;default:e.error&&sU(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),dU=function(){function e(t,n){or(this,e),this._service=t,this._location=n instanceof lj?n:lj.makeFromUrl(n,t.host)}return ur(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new lj(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return Aj(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new lj(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw oj(e)}}]),e}();function pU(e,t,n){return vU.apply(this,arguments)}function vU(){return(vU=yi(pi().mark((function e(t,n,r){var i,a,o,s;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,mU(t,o);case 3:if(s=e.sent,(i=n.prefixes).push.apply(i,mi(s.prefixes)),(a=n.items).push.apply(a,mi(s.items)),null==s.nextPageToken){e.next=9;break}return e.next=9,pU(t,n,s.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mU(e,t){null!=t&&"number"===typeof t.maxResults&&vj("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=Xj(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,hU)}function gU(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=mj(t.fullServerUrl(),e.host,e._protocol),a=Uj(n,r),o=e.maxOperationRetryTime,s=new Bj(i,"PATCH",Hj(e,r),o);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=a,s.errorHandler=Qj(t),s}(e.storage,e._location,t,Mj());return e.storage.makeRequestWithTokens(n,hU)}function yU(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=mj(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Bj(r,"GET",Gj(e,n),i);return a.errorHandler=Qj(t),a}(e.storage,e._location,Mj());return e.storage.makeRequestWithTokens(t,hU).then((function(e){if(null===e)throw new $F(QF.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function kU(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=mj(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Bj(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Qj(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,hU)}function bU(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new lj(e._location.bucket,n);return new dU(e.storage,r)}function wU(e,t){if(e instanceof EU){var n=e;if(null==n._bucket)throw new $F(QF.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+JF+"' property when initializing the app?");var r=new dU(n,n._bucket);return null!=t?wU(r,t):r}return void 0!==t?bU(e,t):e}function _U(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof EU)return new dU(e,t);throw ij("To use ref(service, url), the first argument must be a Storage instance.")}return wU(e,t)}function xU(e,t){var n=null===t||void 0===t?void 0:t[JF];return null==n?null:lj.makeFromBucketSpec(n,e)}var EU=function(){function e(t,n,r,i,a){or(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=XF,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?lj.makeFromBucketSpec(i,this._host):xU(this._host,this.app.options)}return ur(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=lj.makeFromBucketSpec(this._url,e):this._bucket=xU(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){vj("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){vj("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=yi(pi().mark((function e(){var t,n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=yi(pi().mark((function e(){var t,n;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new dU(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new hj(aj());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=gj(e.urlParams),u=e.url+s,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new kj(u,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=yi(pi().mark((function e(t,n){var r,i,a,o;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=nr(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),IU="@firebase/storage",SU="0.11.2",CU="storage";function TU(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new fU(e,new Rj(t),n)}(e=di(e),t,n)}function NU(e){return function(e){e._throwIfRoot("getMetadata");var t=Yj(e.storage,e._location,Mj());return e.storage.makeRequestWithTokens(t,hU)}(e=di(e))}function RU(e){return function(e){var t={prefixes:[],items:[]};return pU(e,t).then((function(){return t}))}(e=di(e))}function PU(e,t){return _U(e=di(e),t)}function AU(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:Or(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function DU(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new EU(r,i,a,n,va)}ua(new ki(CU,DU,"PUBLIC").setMultipleInstances(!0)),wa(IU,SU,""),wa(IU,SU,"esm2017");var OU=function(){function e(t,n,r){or(this,e),this._delegate=t,this.task=n,this.ref=r}return ur(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),LU=function(){function e(t,n){or(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return ur(e,[{key:"snapshot",get:function(){return new OU(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new OU(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new OU(e,i,i._ref))}:{next:t.next?function(e){return t.next(new OU(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),MU=function(){function e(t,n){or(this,e),this._delegate=t,this._service=n}return ur(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new FU(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new FU(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),FU=function(){function e(t,n){or(this,e),this._delegate=t,this.storage=n}return ur(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return bU(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new LU(TU(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ej.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=Sj(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new LU(new fU(this._delegate,new Rj(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return RU(this._delegate).then((function(t){return new MU(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return mU(e=di(e),t)}(this._delegate,e||void 0).then((function(e){return new MU(e,t.storage)}))}},{key:"getMetadata",value:function(){return NU(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return gU(e=di(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return yU(di(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),kU(di(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw oj(e)}}]),e}(),jU=function(){function e(t,n){or(this,e),this.app=t,this._delegate=n}return ur(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(UU(e))throw ij("ref() expected a child path but got a URL, use refFromURL instead.");return new FU(PU(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!UU(e))throw ij("refFromURL() expected a full URL but got a child path, use ref() instead.");try{lj.makeFromUrl(e,this._delegate.host)}catch(t){throw ij("refFromUrl() expected a valid full URL but got an invalid one.")}return new FU(PU(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};AU(this._delegate,e,t,n)}}]),e}();function UU(e){return/^[A-Za-z]+:\/\//.test(e)}function qU(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new jU(r,i)}!function(e){var t={TaskState:iU,TaskEvent:rU,StringFormat:Ej,Storage:jU,Reference:FU};e.INTERNAL.registerComponent(new ki("storage-compat",qU,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.2")}(Ka);Ka.initializeApp({apiKey:"AIzaSyDE-Cl5RxG1byLc4pjoBxD3aXWO3wi43P8",authDomain:"diary-6211f.firebaseapp.com",projectId:"diary-6211f",storageBucket:"diary-6211f.appspot.com",messagingSenderId:"765031385372",appId:"1:765031385372:web:9b72a3164df87c4c9712d9",measurementId:"G-5VWBRJH7V4"}),Ka.storage();var VU="@firebase/database",zU="0.14.4",BU="";function WU(e){BU=e}var HU=function(){function e(t){or(this,e),this.domStorage_=t,this.prefix_="firebase:"}return ur(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Kr(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Gr(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),GU=function(){function e(){or(this,e),this.cache_={},this.isInMemoryStorage=!0}return ur(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Yr(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),KU=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new HU(t)}}catch(n){}return new GU},QU=KU("localStorage"),YU=KU("sessionStorage"),XU=new Ri("@firebase/database"),JU=function(){var e=1;return function(){return e++}}(),$U=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,wr(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new ii;n.update(t);var r=n.digest();return Er.encodeByteArray(r)},ZU=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?Kr(r):r,t+=" "}return t},eq=null,tq=!0,nq=function(e,t){wr(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(XU.logLevel=xi.VERBOSE,eq=XU.log.bind(XU),t&&YU.set("logging_enabled",!0)):"function"===typeof e?eq=e:(eq=null,YU.remove("logging_enabled"))},rq=function(){if(!0===tq&&(tq=!1,null===eq&&!0===YU.get("logging_enabled")&&nq(!0)),eq){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=ZU.apply(null,t);eq(r)}},iq=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];rq.apply(void 0,[e].concat(n))}},aq=function(){var e="FIREBASE INTERNAL ERROR: "+ZU.apply(void 0,arguments);XU.error(e)},oq=function(){var e="FIREBASE FATAL ERROR: ".concat(ZU.apply(void 0,arguments));throw XU.error(e),new Error(e)},sq=function(){var e="FIREBASE WARNING: "+ZU.apply(void 0,arguments);XU.warn(e)},uq=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},cq="[MIN_NAME]",lq="[MAX_NAME]",hq=function(e,t){if(e===t)return 0;if(e===cq||t===lq)return-1;if(t===cq||e===lq)return 1;var n=kq(e),r=kq(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},fq=function(e,t){return e===t?0:e<t?-1:1},dq=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Kr(t))},pq=function e(t){if("object"!==typeof t||null===t)return Kr(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=Kr(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},vq=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function mq(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var gq=function(e){wr(!uq(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var yq=new RegExp("^-?(0*)\\d{1,10}$"),kq=function(e){if(yq.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},bq=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw sq("Exception was thrown by user callback.",e),t}),Math.floor(0))}},wq=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},_q=function(){function e(t,n){var r=this;or(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return ur(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){sq('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),xq=function(){function e(t,n,r){var i=this;or(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return ur(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(rq("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',sq(e)}}]),e}(),Eq=function(){function e(t){or(this,e),this.accessToken=t}return ur(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();Eq.OWNER="owner";var Iq="5",Sq=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Cq="ac",Tq="websocket",Nq="long_polling",Rq=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];or(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=QU.get("host:"+t)||this._host}return ur(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&QU.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function Pq(e,t,n){var r;if(wr("string"===typeof t,"typeof type must == string"),wr("object"===typeof n,"typeof params must == object"),t===Tq)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Nq)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return mq(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var Aq=function(){function e(){or(this,e),this.counters_={}}return ur(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Yr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Nr(void 0,this.counters_)}}]),e}(),Dq={},Oq={};function Lq(e){var t=e.toString();return Dq[t]||(Dq[t]=new Aq),Dq[t]}var Mq=function(){function e(t){or(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return ur(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&bq((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),1;n.currentResponseNum++};this.pendingResponses[this.currentResponseNum]&&!r(););}}]),e}(),Fq="start",jq=function(){function e(t,n,r,i,a,o,s){var u=this;or(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=iq(t),this.stats_=Lq(n),this.urlFn=function(e){return u.appCheckToken&&(e[Cq]=u.appCheckToken),Pq(n,Nq,e)}}return ur(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Mq(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Vr()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Uq((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Fq)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[Fq]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=Iq,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[Cq]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&Sq.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=Kr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Sr(t),r=vq(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Vr()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=Kr(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Vr()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Uq=function(){function e(t,n,r,i){if(or(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Vr())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=JU(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){rq("frame writing exception"),s.stack&&rq(s.stack),rq(s)}}}return ur(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Vr()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){rq("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||rq("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),qq=null;"undefined"!==typeof MozWebSocket?qq=MozWebSocket:"undefined"!==typeof WebSocket&&(qq=WebSocket);var Vq=function(){function e(t,n,r,i,a,o,s){or(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=iq(this.connId),this.stats_=Lq(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return ur(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,QU.set("previous_websocket_failure",!0);try{var r;if(Vr()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(Iq,"/").concat(BU,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/notebook",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDE-Cl5RxG1byLc4pjoBxD3aXWO3wi43P8",REACT_APP_FIREBASE_AUTH_DOMAIN:"diary-6211f.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"diary-6211f",REACT_APP_FIREBASE_STORAGE_BUCKET:"diary-6211f.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"765031385372",REACT_APP_FIREBASE_APP_ID:"1:765031385372:web:9b72a3164df87c4c9712d9",REACT_APP_FIREBASE_MEASUMENT_ID:"G-5VWBRJH7V4"},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new qq(this.connURL,[],r)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){QU.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Gr(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(wr(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=Kr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=vq(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=Iq,!Vr()&&"undefined"!==typeof location&&location.hostname&&Sq.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[Cq]=r),i&&(a.p=i),Pq(e,Tq,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==qq&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return QU.isInMemoryStorage||!0===QU.get("previous_websocket_failure")}}]),e}();Vq.responsesRequiredToBeHealthy=2,Vq.healthyTimeout=3e4;var zq=function(){function e(t){or(this,e),this.initTransports_(t)}return ur(e,[{key:"initTransports_",value:function(t){var n=Vq&&Vq.isAvailable(),r=n&&!Vq.previouslyFailed();if(t.webSocketOnly&&(n||sq("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Vq];else{var i,a=this.transports_=[],o=cr(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[jq,Vq]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();zq.globalTransportInitialized_=!1;var Bq=function(){function e(t,n,r,i,a,o,s,u,c,l){or(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=iq("c:"+this.id+":"),this.transportManager_=new zq(n),this.log_("Connection created"),this.start_()}return ur(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=wq((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=dq("t",e),n=dq("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=dq("t",e),n=dq("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=dq("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?aq("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):aq("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Iq!==n&&sq("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),wq((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):wq((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(QU.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),Wq=function(){function e(){or(this,e)}return ur(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Hq=function(){function e(t){or(this,e),this.allowedEvents_=t,this.listeners_={},wr(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return ur(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=mi(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){wr(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Gq=function(e){fr(n,e);var t=vr(n);function n(){var e;return or(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Mr()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return ur(n,[{key:"getInitialEvent",value:function(e){return wr("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Hq),Kq=32,Qq=768,Yq=function(){function e(t,n){if(or(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return ur(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Xq(){return new Yq("")}function Jq(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function $q(e){return e.pieces_.length-e.pieceNum_}function Zq(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Yq(e.pieces_,t)}function eV(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function tV(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function nV(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Yq(t,0)}function rV(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Yq)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Yq(n,0)}function iV(e){return e.pieceNum_>=e.pieces_.length}function aV(e,t){var n=Jq(e),r=Jq(t);if(null===n)return t;if(n===r)return aV(Zq(e),Zq(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function oV(e,t){for(var n=tV(e,0),r=tV(t,0),i=0;i<n.length&&i<r.length;i++){var a=hq(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function sV(e,t){if($q(e)!==$q(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function uV(e,t){var n=e.pieceNum_,r=t.pieceNum_;if($q(e)>$q(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var cV=ur((function e(t,n){or(this,e),this.errorPrefix_=n,this.parts_=tV(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=fi(this.parts_[r]);lV(this)}));function lV(e){if(e.byteLength_>Qq)throw new Error(e.errorPrefix_+"has a key path longer than "+Qq+" bytes ("+e.byteLength_+").");if(e.parts_.length>Kq)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Kq+") or object contains a cycle "+hV(e))}function hV(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var fV=function(e){fr(n,e);var t=vr(n);function n(){var e,r,i;return or(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return ur(n,[{key:"getInitialEvent",value:function(e){return wr("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Hq),dV=1e3,pV=function(e){fr(n,e);var t=vr(n);function n(e,r,i,a,o,s,u,c){var l;if(or(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=iq("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=dV,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Vr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return fV.getInstance().on("visible",l.onVisible_,lr(l)),-1===e.host.indexOf("fblocal")&&Gq.getInstance().on("online",l.onOnline_,lr(l)),l}return ur(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Kr(i)),wr(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new Dr,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),wr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),wr(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Qr(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Qr(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),wr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+Kr(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):aq("Unrecognized action received from server: "+Kr(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;wr(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=dV,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=dV,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=dV),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=yi(pi().mark((function e(){var t,r,i,a,o,s,u,c,l,h,f,d,p,v,m=this;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,i())},l=function(e){wr(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:c,sendRequest:l},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:f=e.sent,d=nr(f,2),p=d[0],v=d[1],s?rq("getToken() completed but was canceled"):(rq("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=v&&v.token,u=new Bq(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){sq(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&sq(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){rq("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){rq("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Jr(this.interruptReasons_)&&(this.reconnectDelay_=dV,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return pq(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Yq(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){rq("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){rq("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=cr(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=cr(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Vr()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+BU.replace(/\./g,"-")]=1,Mr()?e["framework.cordova"]=1:Ur()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Gq.getInstance().currentlyOnline();return Jr(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Yr(e,"w")){var n=Xr(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();sq("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(Wq);pV.nextPersistentConnectionId_=0,pV.nextConnectionId_=0;var vV,mV=function(){function e(t,n){or(this,e),this.name=t,this.node=n}return ur(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),gV=function(){function e(){or(this,e)}return ur(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new mV(cq,e),r=new mV(cq,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return mV.MIN}}]),e}(),yV=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.apply(this,arguments)}return ur(n,[{key:"compare",value:function(e,t){return hq(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw _r("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return mV.MIN}},{key:"maxPost",value:function(){return new mV(lq,vV)}},{key:"makePost",value:function(e,t){return wr("string"===typeof e,"KeyIndex indexValue must always be a string."),new mV(e,vV)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return vV},set:function(e){vV=e}}]),n}(gV),kV=new yV,bV=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;or(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return ur(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),wV=function(){function e(t,n,r,i,a){or(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:EV.EMPTY_NODE,this.right=null!=a?a:EV.EMPTY_NODE}return ur(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return EV.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return EV.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();wV.RED=!0,wV.BLACK=!1;var _V,xV=function(){function e(){or(this,e)}return ur(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new wV(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),EV=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;or(this,e),this.comparator_=t,this.root_=n}return ur(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,wV.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,wV.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new bV(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new bV(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new bV(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new bV(this.root_,null,this.comparator_,!0,e)}}]),e}();function IV(e,t){return hq(e.name,t.name)}function SV(e,t){return hq(e,t)}EV.EMPTY_NODE=new xV;var CV,TV,NV,RV=function(e){return"number"===typeof e?"number:"+gq(e):"string:"+e},PV=function(e){if(e.isLeafNode()){var t=e.val();wr("string"===typeof t||"number"===typeof t||"object"===typeof t&&Yr(t,".sv"),"Priority must be a string or number.")}else wr(e===_V||e.isEmpty(),"priority of unexpected type.");wr(e===_V||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},AV=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;or(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,wr(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),PV(this.priorityNode_)}return ur(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return iV(t)?this:".priority"===Jq(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Jq(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(wr(".priority"!==r||1===$q(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Zq(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+RV(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?gq(this.value_):this.value_,this.lazyHash_=$U(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(wr(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return wr(i>=0,"Unknown leaf type: "+n),wr(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return CV},set:function(e){CV=e}}]),e}();AV.VALUE_TYPE_ORDER=["object","boolean","number","string"];var DV,OV,LV=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.apply(this,arguments)}return ur(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?hq(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return mV.MIN}},{key:"maxPost",value:function(){return new mV(lq,new AV("[PRIORITY-POST]",NV))}},{key:"makePost",value:function(e,t){var n=TV(e);return new mV(t,new AV("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(gV),MV=new LV,FV=Math.log(2),jV=function(){function e(t){or(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/FV,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return ur(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),UV=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new wV(o,a.node,wV.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new wV(o,a.node,wV.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],h=n?n(l):l;u(new wV(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,wV.BLACK):(s(h,wV.BLACK),s(h,wV.RED))}return a}(new jV(e.length));return new EV(r||t,a)},qV={},VV=function(){function e(t,n){or(this,e),this.indexes_=t,this.indexSet_=n}return ur(e,[{key:"get",value:function(e){var t=Xr(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof EV?t:null}},{key:"hasIndex",value:function(e){return Yr(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){wr(t!==kV,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(mV.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?UV(i,t.getCompare()):qV;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e($r(this.indexes_,(function(e,i){var a=Xr(r.indexSet_,i);if(wr(a,"Missing index implementation for "+i),e===qV){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(mV.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),UV(o,a.getCompare())}return qV}var c=n.get(t.name),l=e;return c&&(l=l.remove(new mV(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e($r(this.indexes_,(function(e){if(e===qV)return e;var r=n.get(t.name);return r?e.remove(new mV(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return wr(qV&&MV,"ChildrenNode.ts has not been loaded"),DV=DV||new e({".priority":qV},{".priority":MV})}}]),e}(),zV=function(){function e(t,n,r){or(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&PV(this.priorityNode_),this.children_.isEmpty()&&wr(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return ur(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||OV}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?OV:t}},{key:"getChild",value:function(e){var t=Jq(e);return null===t?this:this.getImmediateChild(t).getChild(Zq(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(wr(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new mV(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?OV:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=Jq(e);if(null===n)return t;wr(".priority"!==Jq(e)||1===$q(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Zq(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(MV,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+RV(this.getPriority().val())+":"),this.forEachChild(MV,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":$U(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new mV(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new mV(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new mV(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,mV.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,mV.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===BV?-1:0}},{key:"withIndex",value:function(t){if(t===kV||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===kV||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(MV),r=t.getIterator(MV),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===kV?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return OV||(OV=new e(new EV(SV),null,VV.Default))}}]),e}();zV.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var BV=new(function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.call(this,new EV(SV),zV.EMPTY_NODE,VV.Default)}return ur(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return zV.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(zV));Object.defineProperties(mV,{MIN:{value:new mV(cq,zV.EMPTY_NODE)},MAX:{value:new mV(lq,BV)}}),yV.__EMPTY_NODE=zV.EMPTY_NODE,AV.__childrenNodeConstructor=zV,_V=BV,function(e){NV=e}(BV);var WV=!0;function HV(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return zV.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),wr(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new AV(e,HV(t));if(e instanceof Array||!WV){var n=zV.EMPTY_NODE;return mq(e,(function(t,r){if(Yr(e,t)&&"."!==t.substring(0,1)){var i=HV(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(HV(t))}var r=[],i=!1;if(mq(e,(function(e,t){if("."!==e.substring(0,1)){var n=HV(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new mV(e,n)))}})),0===r.length)return zV.EMPTY_NODE;var a=UV(r,IV,(function(e){return e.name}),SV);if(i){var o=UV(r,MV.getCompare());return new zV(a,HV(t),new VV({".priority":o},{".priority":MV}))}return new zV(a,HV(t),VV.Default)}!function(e){TV=e}(HV);var GV=function(e){fr(n,e);var t=vr(n);function n(e){var r;return or(this,n),(r=t.call(this)).indexPath_=e,wr(!iV(e)&&".priority"!==Jq(e),"Can't create PathIndex with empty path or .priority key"),r}return ur(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?hq(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=HV(e),r=zV.EMPTY_NODE.updateChild(this.indexPath_,n);return new mV(t,r)}},{key:"maxPost",value:function(){var e=zV.EMPTY_NODE.updateChild(this.indexPath_,BV);return new mV(lq,e)}},{key:"toString",value:function(){return tV(this.indexPath_,0).join("/")}}]),n}(gV),KV=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.apply(this,arguments)}return ur(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?hq(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return mV.MIN}},{key:"maxPost",value:function(){return mV.MAX}},{key:"makePost",value:function(e,t){var n=HV(e);return new mV(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(gV),QV=new KV;function YV(e){return{type:"value",snapshotNode:e}}function XV(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function JV(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function $V(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var ZV=function(){function e(t){or(this,e),this.index_=t}return ur(e,[{key:"updateChild",value:function(e,t,n,r,i,a){wr(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(JV(t,o)):wr(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(XV(t,n)):a.trackChildChange($V(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(MV,(function(e,r){t.hasChild(e)||n.trackChildChange(JV(e,r))})),t.isLeafNode()||t.forEachChild(MV,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange($V(t,r,i))}else n.trackChildChange(XV(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?zV.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),ez=function(){function e(t){or(this,e),this.indexedFilter_=new ZV(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return ur(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new mV(t,n))||(n=zV.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=zV.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(zV.EMPTY_NODE);var i=this;return t.forEachChild(MV,(function(e,t){i.matches(new mV(e,t))||(r=r.updateImmediateChild(e,zV.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),tz=function(){function e(t){var n=this;or(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new ez(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return ur(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new mV(t,n))||(n=zV.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=zV.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=zV.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;r=r.updateImmediateChild(o.name,o.node),a++}}}else{var s;r=(r=t.withIndex(this.index_)).updatePriority(zV.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var u=0;s.hasNext();){var c=s.getNext();u<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?u++:r=r.updateImmediateChild(c.name,zV.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;wr(s.numChildren()===this.limit_,"");var u=new mV(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange($V(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(JV(t,h));var p=s.updateImmediateChild(t,zV.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(XV(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,u)>=0?(null!=i&&(i.trackChildChange(JV(c.name,c.node)),i.trackChildChange(XV(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,zV.EMPTY_NODE)):e}}]),e}(),nz=function(){function e(){or(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=MV}return ur(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return wr(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return wr(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:cq}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return wr(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return wr(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:lq}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return wr(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===MV}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function rz(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function iz(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function az(e,t){var n=e.copy();return n.index_=t,n}function oz(e){var t,n={};if(e.isDefault())return n;if(e.index_===MV?t="$priority":e.index_===QV?t="$value":e.index_===kV?t="$key":(wr(e.index_ instanceof GV,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Kr(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=Kr(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+Kr(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=Kr(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+Kr(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function sz(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==MV&&(t.i=e.index_.toString()),t}var uz=function(e){fr(n,e);var t=vr(n);function n(e,r,i,a){var o;return or(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=iq("p:rest:"),o.listens_={},o}return ur(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=oz(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Xr(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=oz(e._queryParams),r=e._path.toString(),i=new Dr;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=nr(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+ti(n);t.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=Gr(c.responseText)}catch(n){sq("Failed to parse JSON response for "+u+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&sq("Got unsuccessful REST response for "+u+" Status: "+c.status),r(c.status);r=null}},c.open("GET",u,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(wr(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(Wq),cz=function(){function e(){or(this,e),this.rootNode_=zV.EMPTY_NODE}return ur(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function lz(){return{value:null,children:new Map}}function hz(e,t,n){if(iV(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Jq(t);e.children.has(r)||e.children.set(r,lz()),hz(e.children.get(r),t=Zq(t),n)}}function fz(e,t){if(iV(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(MV,(function(t,n){hz(e,new Yq(t),n)})),fz(e,t)}if(e.children.size>0){var r=Jq(t);if(t=Zq(t),e.children.has(r))fz(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function dz(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){dz(r,new Yq(t.toString()+"/"+e),n)}))}var pz,vz=function(){function e(t){or(this,e),this.collection_=t,this.last_=null}return ur(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&mq(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),mz=function(){function e(t,n){or(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new vz(t);var r=1e4+2e4*Math.random();wq(this.reportStats_.bind(this),Math.floor(r))}return ur(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;mq(t,(function(t,i){i>0&&Yr(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),wq(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function gz(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(pz||(pz={}));var yz,kz=function(){function e(t,n,r){or(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=pz.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return ur(e,[{key:"operationForChild",value:function(t){if(iV(this.path)){if(null!=this.affectedTree.value)return wr(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Yq(t));return new e(Xq(),n,this.revert)}return wr(Jq(this.path)===t,"operationForChild called for unrelated child."),new e(Zq(this.path),this.affectedTree,this.revert)}}]),e}(),bz=function(){function e(t,n){or(this,e),this.source=t,this.path=n,this.type=pz.LISTEN_COMPLETE}return ur(e,[{key:"operationForChild",value:function(t){return iV(this.path)?new e(this.source,Xq()):new e(this.source,Zq(this.path))}}]),e}(),wz=function(){function e(t,n,r){or(this,e),this.source=t,this.path=n,this.snap=r,this.type=pz.OVERWRITE}return ur(e,[{key:"operationForChild",value:function(t){return iV(this.path)?new e(this.source,Xq(),this.snap.getImmediateChild(t)):new e(this.source,Zq(this.path),this.snap)}}]),e}(),_z=function(){function e(t,n,r){or(this,e),this.source=t,this.path=n,this.children=r,this.type=pz.MERGE}return ur(e,[{key:"operationForChild",value:function(t){if(iV(this.path)){var n=this.children.subtree(new Yq(t));return n.isEmpty()?null:n.value?new wz(this.source,Xq(),n.value):new e(this.source,Xq(),n)}return wr(Jq(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Zq(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),xz=function(){function e(t,n,r){or(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return ur(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(iV(e))return this.isFullyInitialized()&&!this.filtered_;var t=Jq(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),Ez=ur((function e(t){or(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function Iz(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw _r("Should only compare child_ events.");var r=new mV(t.childName,t.snapshotNode),i=new mV(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Sz(e,t){return{eventCache:e,serverCache:t}}function Cz(e,t,n,r){return Sz(new xz(t,n,r),e.serverCache)}function Tz(e,t,n,r){return Sz(e.eventCache,new xz(t,n,r))}function Nz(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Rz(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Pz=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(yz||(yz=new EV(fq)),yz);or(this,e),this.value=t,this.children=n}return ur(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Xq(),value:this.value};if(iV(e))return null;var n=Jq(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Zq(e),t);return null!=i?{path:rV(new Yq(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(iV(t))return this;var n=Jq(t),r=this.children.get(n);return null!==r?r.subtree(Zq(t)):new e(null)}},{key:"set",value:function(t,n){if(iV(t))return new e(n,this.children);var r=Jq(t),i=(this.children.get(r)||new e(null)).set(Zq(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(iV(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Jq(t),r=this.children.get(n);if(r){var i,a=r.remove(Zq(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(iV(e))return this.value;var t=Jq(e),n=this.children.get(t);return n?n.get(Zq(e)):null}},{key:"setTree",value:function(t,n){if(iV(t))return n;var r,i=Jq(t),a=(this.children.get(i)||new e(null)).setTree(Zq(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Xq(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(rV(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Xq(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(iV(e))return null;var i=Jq(e),a=this.children.get(i);return a?a.findOnPath_(Zq(e),rV(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Xq(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(iV(t))return this;this.value&&r(n,this.value);var i=Jq(t),a=this.children.get(i);return a?a.foreachOnPath_(Zq(t),rV(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Xq(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(rV(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return mq(t,(function(e,t){n=n.set(new Yq(e),t)})),n}}]),e}(),Az=function(){function e(t){or(this,e),this.writeTree_=t}return ur(e,null,[{key:"empty",value:function(){return new e(new Pz(null))}}]),e}();function Dz(e,t,n){if(iV(t))return new Az(new Pz(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=aV(i,t);return a=a.updateChild(o,n),new Az(e.writeTree_.set(i,a))}var s=new Pz(n),u=e.writeTree_.setTree(t,s);return new Az(u)}function Oz(e,t,n){var r=e;return mq(n,(function(e,n){r=Dz(r,rV(t,e),n)})),r}function Lz(e,t){if(iV(t))return Az.empty();var n=e.writeTree_.setTree(t,new Pz(null));return new Az(n)}function Mz(e,t){return null!=Fz(e,t)}function Fz(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(aV(n.path,t)):null}function jz(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(MV,(function(e,n){t.push(new mV(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new mV(e,n.value))})),t}function Uz(e,t){if(iV(t))return e;var n=Fz(e,t);return new Az(null!=n?new Pz(n):e.writeTree_.subtree(t))}function qz(e){return e.writeTree_.isEmpty()}function Vz(e,t){return zz(Xq(),e.writeTree_,t)}function zz(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(wr(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=zz(rV(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(rV(e,".priority"),r)),n}function Bz(e,t){return nB(t,e)}function Wz(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));wr(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&Hz(s,r.path)?i=!1:uV(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=Kz(e.allWrites,Gz,Xq()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=Lz(e.visibleWrites,r.path):mq(r.children,(function(t){e.visibleWrites=Lz(e.visibleWrites,rV(r.path,t))}));return!0}return!1}function Hz(e,t){if(e.snap)return uV(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&uV(rV(e.path,n),t))return!0;return!1}function Gz(e){return e.visible}function Kz(e,t,n){for(var r=Az.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)uV(n,o)?r=Dz(r,s=aV(n,o),a.snap):uV(o,n)&&(s=aV(o,n),r=Dz(r,Xq(),a.snap.getChild(s)));else{if(!a.children)throw _r("WriteRecord should have .snap or .children");if(uV(n,o))r=Oz(r,s=aV(n,o),a.children);else if(uV(o,n))if(iV(s=aV(o,n)))r=Oz(r,Xq(),a.children);else{var u=Xr(a.children,Jq(s));if(u){var c=u.getChild(Zq(s));r=Dz(r,Xq(),c)}}}}}return r}function Qz(e,t,n,r,i){if(r||i){var a=Uz(e.visibleWrites,t);if(!i&&qz(a))return n;if(i||null!=n||Mz(a,Xq())){return Vz(Kz(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(uV(e.path,t)||uV(t,e.path))}),t),n||zV.EMPTY_NODE)}return null}var o=Fz(e.visibleWrites,t);if(null!=o)return o;var s=Uz(e.visibleWrites,t);return qz(s)?n:null!=n||Mz(s,Xq())?Vz(s,n||zV.EMPTY_NODE):null}function Yz(e,t,n,r){return Qz(e.writeTree,e.treePath,t,n,r)}function Xz(e,t){return function(e,t,n){var r=zV.EMPTY_NODE,i=Fz(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(MV,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=Uz(e.visibleWrites,t);return n.forEachChild(MV,(function(e,t){var n=Vz(Uz(a,new Yq(e)),t);r=r.updateImmediateChild(e,n)})),jz(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return jz(Uz(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Jz(e,t,n,r){return function(e,t,n,r,i){wr(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=rV(t,n);if(Mz(e.visibleWrites,a))return null;var o=Uz(e.visibleWrites,a);return qz(o)?i.getChild(n):Vz(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function $z(e,t){return function(e,t){return Fz(e.visibleWrites,t)}(e.writeTree,rV(e.treePath,t))}function Zz(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=Uz(e.visibleWrites,t),c=Fz(u,Xq());if(null!=c)s=c;else{if(null==n)return[];s=Vz(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function eB(e,t,n){return function(e,t,n,r){var i=rV(t,n),a=Fz(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?Vz(Uz(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function tB(e,t){return nB(rV(e.treePath,t),e.writeTree)}function nB(e,t){return{treePath:e,writeTree:t}}var rB=function(){function e(){or(this,e),this.changeMap=new Map}return ur(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;wr("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),wr(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,$V(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,JV(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,XV(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw _r("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,$V(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),iB=new(function(){function e(){or(this,e)}return ur(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),aB=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;or(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return ur(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new xz(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return eB(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Rz(this.viewCache_),i=Zz(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function oB(e,t,n,r,i){var a,o,s=new rB;if(n.type===pz.OVERWRITE){var u=n;u.source.fromUser?a=cB(e,t,u.path,u.snap,r,i,s):(wr(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!iV(u.path),a=uB(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===pz.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=rV(n,r);lB(t,Jq(c))&&(s=cB(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=rV(n,r);lB(t,Jq(c))||(s=cB(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(wr(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=fB(e,t,c.path,c.children,r,i,o,s))}else if(n.type===pz.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=$z(r,n))return t;var s,u=new aB(r,t,i),c=t.eventCache.getNode();if(iV(n)||".priority"===Jq(n)){var l;if(t.serverCache.isFullyInitialized())l=Yz(r,Rz(t));else{var h=t.serverCache.getNode();wr(h instanceof zV,"serverChildren would be complete if leaf node"),l=Xz(r,h)}s=e.filter.updateFullNode(c,l,a)}else{var f=Jq(n),d=eB(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(c,f,d,Zq(n),u,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,zV.EMPTY_NODE,Zq(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Yz(r,Rz(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=$z(r,Xq()),Cz(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=$z(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(iV(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return uB(e,t,n,u.getNode().getChild(n),i,a,s,o);if(iV(n)){var c=new Pz(null);return u.getNode().forEachChild(kV,(function(e,t){c=c.set(new Yq(e),t)})),fB(e,t,n,c,i,a,s,o)}return t}var l=new Pz(null);return r.foreach((function(e,t){var r=rV(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),fB(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==pz.LISTEN_COMPLETE)throw _r("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=Tz(t,a.getNode(),a.isFullyInitialized()||iV(n),a.isFiltered());return sB(e,o,n,r,iB,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Nz(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(YV(Nz(t)))}}(t,a,h),{viewCache:a,changes:h}}function sB(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=$z(r,n))return t;if(iV(n))if(wr(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=Rz(t),l=Xz(r,c instanceof zV?c:zV.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=Yz(r,Rz(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=Jq(n);if(".priority"===f){wr(1===$q(n),"Can't have a priority with additional path components");var d=u.getNode(),p=Jz(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,m=Zq(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var g=Jz(r,n,u.getNode(),s);v=null!=g?u.getNode().getImmediateChild(f).updateChild(m,g):u.getNode().getImmediateChild(f)}else v=eB(r,f,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),f,v,m,i,a):u.getNode()}}return Cz(t,o,u.isFullyInitialized()||iV(n),e.filter.filtersNodes())}function uB(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(iV(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=Jq(n);if(!c.isCompleteForPath(n)&&$q(n)>1)return t;var d=Zq(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,iB,null)}var v=Tz(t,u,c.isFullyInitialized()||iV(n),l.filtersNodes());return sB(e,v,n,i,new aB(i,v,a),s)}function cB(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new aB(i,t,a);if(iV(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=Cz(t,u,!0,e.filter.filtersNodes());else{var h=Jq(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=Cz(t,u,c.isFullyInitialized(),c.isFiltered());else{var f,d=Zq(n),p=c.getNode().getImmediateChild(h);if(iV(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===eV(d)&&v.getChild(nV(d)).isEmpty()?v:v.updateChild(d,r):zV.EMPTY_NODE}if(p.equals(f))s=t;else s=Cz(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function lB(e,t){return e.eventCache.isCompleteForChild(t)}function hB(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function fB(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=iV(n)?r:new Pz(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=hB(0,t.serverCache.getNode().getImmediateChild(n),r);c=uB(e,c,new Yq(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!u){var h=hB(0,t.serverCache.getNode().getImmediateChild(n),r);c=uB(e,c,new Yq(n),h,i,a,o,s)}})),c}var dB,pB=function(){function e(t,n){or(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new ZV(i.getIndex()),o=(r=i).loadsAllData()?new ZV(r.getIndex()):r.hasLimit()?new tz(r):new ez(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,c=a.updateFullNode(zV.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(zV.EMPTY_NODE,u.getNode(),null),h=new xz(c,s.isFullyInitialized(),a.filtersNodes()),f=new xz(l,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=Sz(f,h),this.eventGenerator_=new Ez(this.query_)}return ur(e,[{key:"query",get:function(){return this.query_}}]),e}();function vB(e,t){var n=Rz(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!iV(t)&&!n.getImmediateChild(Jq(t)).isEmpty())?n.getChild(t):null}function mB(e){return 0===e.eventRegistrations_.length}function gB(e,t,n){var r=[];if(n){wr(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function yB(e,t,n,r){t.type===pz.MERGE&&null!==t.source.queryId&&(wr(Rz(e.viewCache_),"We should always have a full cache before handling merges"),wr(Nz(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=oB(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,wr(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),wr(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),wr(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,kB(e,s.changes,s.viewCache.eventCache.getNode(),null)}function kB(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Iz(e,i,"child_removed",t,r,n),Iz(e,i,"child_added",t,r,n),Iz(e,i,"child_moved",a,r,n),Iz(e,i,"child_changed",t,r,n),Iz(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var bB,wB=ur((function e(){or(this,e),this.views=new Map}));function _B(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return wr(null!=a,"SyncTree gave us an op for an invalid query."),yB(a,t,n,r)}var o,s=[],u=cr(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(yB(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function xB(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=Yz(n,i?r:null),u=!1;s?u=!0:r instanceof zV?(s=Xz(n,r),u=!1):(s=zV.EMPTY_NODE,u=!1);var c=Sz(new xz(s,u,!1),new xz(r,i,!1));return new pB(t,c)}return o}function EB(e,t,n,r,i,a){var o=xB(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(MV,(function(e,t){r.push(XV(e,t))})),n.isFullyInitialized()&&r.push(YV(n.getNode())),kB(e,r,n.getNode(),t)}(o,n)}function IB(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],s=RB(e);if("default"===i){var u,c=cr(e.views.entries());try{for(c.s();!(u=c.n()).done;){var l=nr(u.value,2),h=l[0],f=l[1];o=o.concat(gB(f,n,r)),mB(f)&&(e.views.delete(h),f.query._queryParams.loadsAllData()||a.push(f.query))}}catch(p){c.e(p)}finally{c.f()}}else{var d=e.views.get(i);d&&(o=o.concat(gB(d,n,r)),mB(d)&&(e.views.delete(i),d.query._queryParams.loadsAllData()||a.push(d.query)))}return s&&!RB(e)&&a.push(new(wr(dB,"Reference.ts has not been loaded"),dB)(t._repo,t._path)),{removed:a,events:o}}function SB(e){var t,n=[],r=cr(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function CB(e,t){var n,r=null,i=cr(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||vB(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function TB(e,t){if(t._queryParams.loadsAllData())return PB(e);var n=t._queryIdentifier;return e.views.get(n)}function NB(e,t){return null!=TB(e,t)}function RB(e){return null!=PB(e)}function PB(e){var t,n=cr(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var AB=1,DB=ur((function e(t){or(this,e),this.listenProvider_=t,this.syncPointTree_=new Pz(null),this.pendingWriteTree_={visibleWrites:Az.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function OB(e,t,n,r,i){return function(e,t,n,r,i){wr(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Dz(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?BB(e,new wz({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function LB(e,t,n,r){!function(e,t,n,r){wr(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Oz(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=Pz.fromObject(n);return BB(e,new _z({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function MB(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Wz(e.pendingWriteTree_,t)){var i=new Pz(null);return null!=r.snap?i=i.set(Xq(),!0):mq(r.children,(function(e){i=i.set(new Yq(e),!0)})),BB(e,new kz(r.path,i,n))}return[]}function FB(e,t,n){return BB(e,new wz({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function jB(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),s=[];if(o&&("default"===t._queryIdentifier||NB(o,t))){var u=IB(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=u.removed;if(s=u.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),h=e.syncPointTree_.findOnPath(a,(function(e,t){return RB(t)}));if(l&&!h){var f=e.syncPointTree_.subtree(a);if(!f.isEmpty())for(var d=function(e){return e.fold((function(e,t,n){if(t&&RB(t))return[PB(t)];var r=[];return t&&(r=SB(t)),mq(n,(function(e,t){r=r.concat(t)})),r}))}(f),p=0;p<d.length;++p){var v=d[p],m=v.query,g=GB(e,v);e.listenProvider_.startListening($B(m),KB(e,m),g.hashFn,g.onComplete)}}if(!h&&c.length>0&&!r)if(l){e.listenProvider_.stopListening($B(t),null)}else c.forEach((function(t){var n=e.queryToTagMap.get(QB(t));e.listenProvider_.stopListening($B(t),n)}))}!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=QB(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,c)}return s}function UB(e,t,n,r){var i=YB(e,r);if(null!=i){var a=XB(i),o=a.path,s=a.queryId,u=aV(o,t);return JB(e,o,new wz(gz(s),u,n))}return[]}function qB(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=aV(e,i);a=a||CB(t,n),o=o||RB(t)}));var s,u=e.syncPointTree_.get(i);(u?(o=o||RB(u),a=a||CB(u,Xq())):(u=new wB,e.syncPointTree_=e.syncPointTree_.set(i,u)),null!=a)?s=!0:(s=!1,a=zV.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((function(e,t){var n=CB(t,Xq());n&&(a=a.updateImmediateChild(e,n))})));var c=NB(u,t);if(!c&&!t._queryParams.loadsAllData()){var l=QB(t);wr(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=AB++;e.queryToTagMap.set(l,h),e.tagToQueryMap.set(h,l)}var f=EB(u,t,n,Bz(e.pendingWriteTree_,i),a,s);if(!c&&!o&&!r){var d=TB(u,t);f=f.concat(function(e,t,n){var r=t._path,i=KB(e,t),a=GB(e,n),o=e.listenProvider_.startListening($B(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)wr(!RB(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!iV(e)&&t&&RB(t))return[PB(t).query];var r=[];return t&&(r=r.concat(SB(t).map((function(e){return e.query})))),mq(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening($B(l),KB(e,l))}return o}(e,t,d))}return f}function VB(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=CB(n,aV(e,t));if(r)return r}));return Qz(r,t,i,n,!0)}function zB(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=aV(e,n);r=r||CB(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||CB(i,Xq()):(i=new wB,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new xz(r,!0,!1):null;return function(e){return Nz(e.viewCache_)}(xB(i,t,Bz(e.pendingWriteTree_,t._path),a?o.getNode():zV.EMPTY_NODE,a))}function BB(e,t){return WB(t,e.syncPointTree_,null,Bz(e.pendingWriteTree_,Xq()))}function WB(e,t,n,r){if(iV(e.path))return HB(e,t,n,r);var i=t.get(Xq());null==n&&null!=i&&(n=CB(i,Xq()));var a=[],o=Jq(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=tB(r,o);a=a.concat(WB(s,u,c,l))}return i&&(a=a.concat(_B(i,e,r,n))),a}function HB(e,t,n,r){var i=t.get(Xq());null==n&&null!=i&&(n=CB(i,Xq()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=tB(r,t),u=e.operationForChild(t);u&&(a=a.concat(HB(u,i,o,s)))})),i&&(a=a.concat(_B(i,e,r,n))),a}function GB(e,t){var n=t.query,r=KB(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||zV.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=YB(e,n);if(r){var i=XB(r),a=i.path,o=i.queryId,s=aV(a,t);return JB(e,a,new bz(gz(o),s))}return[]}(e,n._path,r):function(e,t){return BB(e,new bz({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return jB(e,n,null,i)}}}function KB(e,t){var n=QB(t);return e.queryToTagMap.get(n)}function QB(e){return e._path.toString()+"$"+e._queryIdentifier}function YB(e,t){return e.tagToQueryMap.get(t)}function XB(e){var t=e.indexOf("$");return wr(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Yq(e.substr(0,t))}}function JB(e,t,n){var r=e.syncPointTree_.get(t);return wr(r,"Missing sync point for query tag that we're tracking"),_B(r,n,Bz(e.pendingWriteTree_,t),null)}function $B(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(wr(bB,"Reference.ts has not been loaded"),bB)(e._repo,e._path):e}var ZB=function(){function e(t){or(this,e),this.node_=t}return ur(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),eW=function(){function e(t,n){or(this,e),this.syncTree_=t,this.path_=n}return ur(e,[{key:"getImmediateChild",value:function(t){var n=rV(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return VB(this.syncTree_,this.path_)}}]),e}(),tW=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},nW=function(e,t,n){return e&&"object"===typeof e?(wr(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?rW(e[".sv"],t,n):"object"===typeof e[".sv"]?iW(e[".sv"],t):void wr(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},rW=function(e,t,n){if("timestamp"===e)return n.timestamp;wr(!1,"Unexpected server value: "+e)},iW=function(e,t,n){e.hasOwnProperty("increment")||wr(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&wr(!1,"Unexpected increment value: "+r);var i=t.node();if(wr(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},aW=function(e,t,n,r){return sW(t,new eW(n,e),r)},oW=function(e,t,n){return sW(e,new ZB(t),n)};function sW(e,t,n){var r,i=e.getPriority().val(),a=nW(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=nW(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new AV(s,HV(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new AV(a))),u.forEachChild(MV,(function(e,i){var a=sW(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var uW=ur((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};or(this,e),this.name=t,this.parent=n,this.node=r}));function cW(e,t){for(var n=t instanceof Yq?t:new Yq(t),r=e,i=Jq(n);null!==i;){var a=Xr(r.node.children,i)||{children:{},childCount:0};r=new uW(i,r,a),i=Jq(n=Zq(n))}return r}function lW(e){return e.node.value}function hW(e,t){e.node.value=t,mW(e)}function fW(e){return e.node.childCount>0}function dW(e,t){mq(e.node.children,(function(n,r){t(new uW(n,e,r))}))}function pW(e,t,n,r){n&&!r&&t(e),dW(e,(function(e){pW(e,t,!0,r)})),n&&r&&t(e)}function vW(e){return new Yq(null===e.parent?e.name:vW(e.parent)+"/"+e.name)}function mW(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===lW(e)&&!fW(e)}(n),i=Yr(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,mW(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,mW(e))}(e.parent,e.name,e)}var gW=/[\[\].#$\/\u0000-\u001F\u007F]/,yW=/[\[\].#$\u0000-\u001F\u007F]/,kW=10485760,bW=function(e){return"string"===typeof e&&0!==e.length&&!gW.test(e)},wW=function(e){return"string"===typeof e&&0!==e.length&&!yW.test(e)},_W=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!uq(e)||e&&"object"===typeof e&&Yr(e,".sv")},xW=function(e,t,n,r){r&&void 0===t||EW(ci(e,"value"),t,n)},EW=function e(t,n,r){var i=r instanceof Yq?new cV(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+hV(i));if("function"===typeof n)throw new Error(t+"contains a function "+hV(i)+" with contents = "+n.toString());if(uq(n))throw new Error(t+"contains "+n.toString()+" "+hV(i));if("string"===typeof n&&n.length>kW/3&&fi(n)>kW)throw new Error(t+"contains a string greater than "+kW+" utf8 bytes "+hV(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(mq(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!bW(n)))throw new Error(t+" contains an invalid key ("+n+") "+hV(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=fi(t),lV(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=fi(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+hV(i)+" in addition to actual children.")}},IW=function(e,t,n,r){if(!r||void 0!==t){var i=ci(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];mq(t,(function(e,t){var r=new Yq(e);if(EW(i,t,rV(n,r)),".priority"===eV(r)&&!_W(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=tV(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!bW(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(oV);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&uV(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},SW=function(e,t,n){if(!n||void 0!==t){if(uq(t))throw new Error(ci(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!_W(t))throw new Error(ci(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},CW=function(e,t,n,r){if((!r||void 0!==n)&&!bW(n))throw new Error(ci(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},TW=function(e,t,n,r){if((!r||void 0!==n)&&!wW(n))throw new Error(ci(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},NW=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),TW(e,t,n,r)},RW=function(e,t){if(".info"===Jq(t))throw new Error(e+" failed = Can't modify data under /.info/")},PW=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!bW(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),wW(e)}(n))throw new Error(ci(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},AW=ur((function e(){or(this,e),this.eventLists_=[],this.recursionDepth_=0}));function DW(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||sV(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function OW(e,t,n){DW(e,n),MW(e,(function(e){return sV(e,t)}))}function LW(e,t,n){DW(e,n),MW(e,(function(e){return uV(e,t)||uV(t,e)}))}function MW(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(FW(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function FW(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();eq&&rq("event: "+n.toString()),bq(r)}}}var jW="repo_interrupt",UW=25,qW=function(){function e(t,n,r,i){or(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new AW,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=lz(),this.transactionQueueTree_=new uW,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return ur(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function VW(e,t,n){if(e.stats_=Lq(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new uz(e.repoInfo_,(function(t,n,r,i){WW(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return HW(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Kr(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new pV(e.repoInfo_,t,(function(t,n,r,i){WW(e,t,n,r,i)}),(function(t){HW(e,t)}),(function(t){!function(e,t){mq(t,(function(t,n){GW(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return Oq[n]||(Oq[n]=t()),Oq[n]}(e.repoInfo_,(function(){return new mz(e.stats_,e.server_)})),e.infoData_=new cz,e.infoSyncTree_=new DB({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=FB(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),GW(e,"connected",!1),e.serverSyncTree_=new DB({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);LW(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function zW(e){var t=e.infoData_.getNode(new Yq(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function BW(e){return tW({timestamp:zW(e)})}function WW(e,t,n,r,i){e.dataUpdateCount++;var a=new Yq(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=$r(n,(function(e){return HV(e)}));o=function(e,t,n,r){var i=YB(e,r);if(i){var a=XB(i),o=a.path,s=a.queryId,u=aV(o,t),c=Pz.fromObject(n);return JB(e,o,new _z(gz(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=HV(n);o=UB(e.serverSyncTree_,a,u,i)}else if(r){var c=$r(n,(function(e){return HV(e)}));o=function(e,t,n){var r=Pz.fromObject(n);return BB(e,new _z({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=HV(n);o=FB(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=rH(e,a)),LW(e.eventQueue_,h,o)}function HW(e,t){GW(e,"connected",t),!1===t&&function(e){ZW(e,"onDisconnectEvents");var t=BW(e),n=lz();dz(e.onDisconnect_,Xq(),(function(r,i){var a=aW(r,i,e.serverSyncTree_,t);hz(n,r,a)}));var r=[];dz(n,Xq(),(function(t,n){r=r.concat(FB(e.serverSyncTree_,t,n));var i=uH(e,t);rH(e,i)})),e.onDisconnect_=lz(),LW(e.eventQueue_,Xq(),r)}(e)}function GW(e,t,n){var r=new Yq("/.info/"+t),i=HV(n);e.infoData_.updateSnapshot(r,i);var a=FB(e.infoSyncTree_,r,i);LW(e.eventQueue_,r,a)}function KW(e){return e.nextWriteId_++}function QW(e,t,n,r,i){ZW(e,"set",{path:t.toString(),value:n,priority:r});var a=BW(e),o=HV(n,r),s=VB(e.serverSyncTree_,t),u=oW(o,s,a),c=KW(e),l=OB(e.serverSyncTree_,t,u,c,!0);DW(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||sq("set at "+t+" failed: "+n);var o=MB(e.serverSyncTree_,c,!a);LW(e.eventQueue_,t,o),eH(e,i,n,r)}));var h=uH(e,t);rH(e,h),LW(e.eventQueue_,h,[])}function YW(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&fz(e.onDisconnect_,t),eH(e,n,r,i)}))}function XW(e,t,n,r){var i=HV(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&hz(e.onDisconnect_,t,i),eH(e,r,n,a)}))}function JW(e,t,n){var r;r=".info"===Jq(t._path)?jB(e.infoSyncTree_,t,n):jB(e.serverSyncTree_,t,n),OW(e.eventQueue_,t._path,r)}function $W(e){e.persistentConnection_&&e.persistentConnection_.interrupt(jW)}function ZW(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];rq.apply(void 0,[t].concat(r))}function eH(e,t,n,r){t&&bq((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function tH(e,t,n){return VB(e.serverSyncTree_,t,n)||zV.EMPTY_NODE}function nH(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||sH(e,t),lW(t)){var n=aH(e,t);wr(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=tH(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];wr(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=aV(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){ZW(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(MB(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);sH(e,cW(e.transactionQueueTree_,t)),nH(e,e.transactionQueueTree_),LW(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)bq(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{sq("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}rH(e,t)}}),o)}(e,vW(t),n)}else fW(t)&&dW(t,(function(t){nH(e,t)}))}function rH(e,t){var n=iH(e,t),r=vW(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u,c=t[a],l=aV(n,c.path),h=!1;if(wr(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,s=c.abortReason,i=i.concat(MB(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=UW)h=!0,s="maxretry",i=i.concat(MB(e.serverSyncTree_,c.currentWriteId,!0));else{var f=tH(e,c.path,o);c.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){EW("transaction failed: Data returned ",d,c.path);var p=HV(d);"object"===typeof d&&null!=d&&Yr(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=c.currentWriteId,m=BW(e),g=oW(p,f,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=g,c.currentWriteId=KW(e),o.splice(o.indexOf(v),1),i=(i=i.concat(OB(e.serverSyncTree_,c.path,g,c.currentWriteId,c.applyLocally))).concat(MB(e.serverSyncTree_,v,!0))}else h=!0,s="nodata",i=i.concat(MB(e.serverSyncTree_,c.currentWriteId,!0))}LW(e.eventQueue_,n,i),i=[],h&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===s?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(s),!1,null)}))))},u=0;u<t.length;u++)s(u);sH(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)bq(r[c]);nH(e,e.transactionQueueTree_)}(e,aH(e,n),r),r}function iH(e,t){var n,r=e.transactionQueueTree_;for(n=Jq(t);null!==n&&void 0===lW(r);)r=cW(r,n),n=Jq(t=Zq(t));return r}function aH(e,t){var n=[];return oH(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function oH(e,t,n){var r=lW(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);dW(t,(function(t){oH(e,t,n)}))}function sH(e,t){var n=lW(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,hW(t,n.length>0?n:void 0)}dW(t,(function(t){sH(e,t)}))}function uH(e,t){var n=vW(iH(e,t)),r=cW(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){cH(e,t)})),cH(e,r),pW(r,(function(t){cH(e,t)})),n}function cH(e,t){var n=lW(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(wr(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(wr(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(MB(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?hW(t,void 0):n.length=a+1,LW(e.eventQueue_,vW(t),i);for(var s=0;s<r.length;s++)bq(r[s])}}var lH=function(e,t){var n=hH(e),r=n.namespace;"firebase.com"===n.domain&&oq(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||oq("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&sq("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Rq(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Yq(n.pathString)}},hH=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=cr(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):sq("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},fH="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",dH=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=fH.charAt(n%64),n=Math.floor(n/64);wr(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=fH.charAt(t[r]);return wr(20===o.length,"nextPushId: Length should be 20."),o}}(),pH=function(){function e(t,n,r,i){or(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return ur(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+Kr(this.snapshot.exportVal())}}]),e}(),vH=function(){function e(t,n,r){or(this,e),this.eventRegistration=t,this.error=n,this.path=r}return ur(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),mH=function(){function e(t,n){or(this,e),this.snapshotCallback=t,this.cancelCallback=n}return ur(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return wr(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),gH=function(){function e(t,n){or(this,e),this._repo=t,this._path=n}return ur(e,[{key:"cancel",value:function(){var e=new Dr;return YW(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){RW("OnDisconnect.remove",this._path);var e=new Dr;return XW(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){RW("OnDisconnect.set",this._path),xW("OnDisconnect.set",e,this._path,!1);var t=new Dr;return XW(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){RW("OnDisconnect.setWithPriority",this._path),xW("OnDisconnect.setWithPriority",e,this._path,!1),SW("OnDisconnect.setWithPriority",t,!1);var n=new Dr;return function(e,t,n,r,i){var a=HV(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&hz(e.onDisconnect_,t,a),eH(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){RW("OnDisconnect.update",this._path),IW("OnDisconnect.update",e,this._path,!1);var t=new Dr;return function(e,t,n,r){if(Jr(n))return rq("onDisconnect().update() called with empty data.  Don't do anything."),void eH(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&mq(n,(function(n,r){var i=HV(r);hz(e.onDisconnect_,rV(t,n),i)})),eH(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),yH=function(){function e(t,n,r,i){or(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return ur(e,[{key:"key",get:function(){return iV(this._path)?null:eV(this._path)}},{key:"ref",get:function(){return new _H(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=sz(this._queryParams),t=pq(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return sz(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=di(t))instanceof e))return!1;var n=this._repo===t._repo,r=sV(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function kH(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function bH(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===kV){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==cq)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==lq)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===MV){if(null!=t&&!_W(t)||null!=n&&!_W(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(wr(e.getIndex()instanceof GV||e.getIndex()===QV,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function wH(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var _H=function(e){fr(n,e);var t=vr(n);function n(e,r){return or(this,n),t.call(this,e,r,new nz,!1)}return ur(n,[{key:"parent",get:function(){var e=nV(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(yH),xH=function(){function e(t,n,r){or(this,e),this._node=t,this.ref=n,this._index=r}return ur(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new Yq(t),r=SH(this.ref,t);return new e(this._node.getChild(n),r,MV)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,SH(n.ref,r),MV))}))}},{key:"hasChild",value:function(e){var t=new Yq(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function EH(e,t){return(e=di(e))._checkNotDeleted("ref"),void 0!==t?SH(e._root,t):e._root}function IH(e,t){(e=di(e))._checkNotDeleted("refFromURL");var n=lH(t,e._repo.repoInfo_.nodeAdmin);PW("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||oq("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),EH(e,n.path.toString())}function SH(e,t){return null===Jq((e=di(e))._path)?NW("child","path",t,!1):TW("child","path",t,!1),new _H(e._repo,rV(e._path,t))}function CH(e,t){e=di(e),RW("set",e._path),xW("set",t,e._path,!1);var n=new Dr;return QW(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function TH(e,t){IW("update",t,e._path,!1);var n=new Dr;return function(e,t,n,r){ZW(e,"update",{path:t.toString(),value:n});var i=!0,a=BW(e),o={};if(mq(n,(function(n,r){i=!1,o[n]=aW(rV(t,n),HV(r),e.serverSyncTree_,a)})),i)rq("update() called with empty data.  Don't do anything."),eH(0,r,"ok",void 0);else{var s=KW(e),u=LB(e.serverSyncTree_,t,o,s);DW(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||sq("update at "+t+" failed: "+n);var o=MB(e.serverSyncTree_,s,!a),u=o.length>0?rH(e,t):t;LW(e.eventQueue_,u,o),eH(0,r,n,i)})),mq(n,(function(n){var r=uH(e,rV(t,n));rH(e,r)})),LW(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function NH(e){e=di(e);var t=new mH((function(){})),n=new RH(t);return function(e,t,n){var r=zB(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=HV(r).withIndex(t._queryParams.getIndex());if(qB(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=FB(e.serverSyncTree_,t._path,a);else{var o=KB(e.serverSyncTree_,t);i=UB(e.serverSyncTree_,t._path,a,o)}return LW(e.eventQueue_,t._path,i),jB(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return ZW(e,"get for query "+Kr(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new xH(t,new _H(e._repo,e._path),e._queryParams.getIndex())}))}var RH=function(){function e(t){or(this,e),this.callbackContext=t}return ur(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new pH("value",this,new xH(e.snapshotNode,new _H(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new vH(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),PH=function(){function e(t,n){or(this,e),this.eventType=t,this.callbackContext=n}return ur(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new vH(this,e,t):null}},{key:"createEvent",value:function(e,t){wr(null!=e.childName,"Child events should have a childName.");var n=SH(new _H(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new pH(e.type,this,new xH(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function AH(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,s=function(t,n){JW(e._repo,e,c),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new mH(n,a||void 0),c="value"===t?new RH(u):new PH(t,u);return function(e,t,n){var r;r=".info"===Jq(t._path)?qB(e.infoSyncTree_,t,n):qB(e.serverSyncTree_,t,n),OW(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return JW(e._repo,e,c)}}function DH(e,t,n,r){return AH(e,"value",t,n,r)}function OH(e,t,n,r){return AH(e,"child_added",t,n,r)}function LH(e,t,n,r){return AH(e,"child_changed",t,n,r)}function MH(e,t,n,r){return AH(e,"child_moved",t,n,r)}function FH(e,t,n,r){return AH(e,"child_removed",t,n,r)}function jH(e,t,n){var r=null,i=n?new mH(n):null;"value"===t?r=new RH(i):t&&(r=new PH(t,i)),JW(e._repo,e,r)}var UH=ur((function e(){or(this,e)})),qH=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this))._value=e,i._key=r,i}return ur(n,[{key:"_apply",value:function(e){xW("endAt",this._value,e._path,!0);var t=iz(e._queryParams,this._value,this._key);if(wH(t),bH(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new yH(e._repo,e._path,t,e._orderByCalled)}}]),n}(UH);var VH=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this))._value=e,i._key=r,i}return ur(n,[{key:"_apply",value:function(e){xW("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===kV||n?iz(e,t,n):iz(e,t,cq)).endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(wH(t),bH(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new yH(e._repo,e._path,t,e._orderByCalled)}}]),n}(UH);var zH=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this))._value=e,i._key=r,i}return ur(n,[{key:"_apply",value:function(e){xW("startAt",this._value,e._path,!0);var t=rz(e._queryParams,this._value,this._key);if(wH(t),bH(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new yH(e._repo,e._path,t,e._orderByCalled)}}]),n}(UH);var BH=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this))._value=e,i._key=r,i}return ur(n,[{key:"_apply",value:function(e){xW("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===kV||n?rz(e,t,n):rz(e,t,lq)).startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(wH(t),bH(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new yH(e._repo,e._path,t,e._orderByCalled)}}]),n}(UH);var WH=function(e){fr(n,e);var t=vr(n);function n(e){var r;return or(this,n),(r=t.call(this))._limit=e,r}return ur(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new yH(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(UH);var HH=function(e){fr(n,e);var t=vr(n);function n(e){var r;return or(this,n),(r=t.call(this))._limit=e,r}return ur(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new yH(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(UH);var GH=function(e){fr(n,e);var t=vr(n);function n(e){var r;return or(this,n),(r=t.call(this))._path=e,r}return ur(n,[{key:"_apply",value:function(e){kH(e,"orderByChild");var t=new Yq(this._path);if(iV(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new GV(t),r=az(e._queryParams,n);return bH(r),new yH(e._repo,e._path,r,!0)}}]),n}(UH);var KH=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.apply(this,arguments)}return ur(n,[{key:"_apply",value:function(e){kH(e,"orderByKey");var t=az(e._queryParams,kV);return bH(t),new yH(e._repo,e._path,t,!0)}}]),n}(UH);var QH=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.apply(this,arguments)}return ur(n,[{key:"_apply",value:function(e){kH(e,"orderByPriority");var t=az(e._queryParams,MV);return bH(t),new yH(e._repo,e._path,t,!0)}}]),n}(UH);var YH=function(e){fr(n,e);var t=vr(n);function n(){return or(this,n),t.apply(this,arguments)}return ur(n,[{key:"_apply",value:function(e){kH(e,"orderByValue");var t=az(e._queryParams,QV);return bH(t),new yH(e._repo,e._path,t,!0)}}]),n}(UH);var XH=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this))._value=e,i._key=r,i}return ur(n,[{key:"_apply",value:function(e){if(xW("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new qH(this._value,this._key)._apply(new zH(this._value,this._key)._apply(e))}}]),n}(UH);function JH(e){for(var t=di(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){t=o[a]._apply(t)}return t}!function(e){wr(!dB,"__referenceConstructor has already been defined"),dB=e}(_H),function(e){wr(!bB,"__referenceConstructor has already been defined"),bB=e}(_H);var $H="FIREBASE_DATABASE_EMULATOR_HOST",ZH={},eG=!1;function tG(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||oq("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),rq("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=lH(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/notebook",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDE-Cl5RxG1byLc4pjoBxD3aXWO3wi43P8",REACT_APP_FIREBASE_AUTH_DOMAIN:"diary-6211f.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"diary-6211f",REACT_APP_FIREBASE_STORAGE_BUCKET:"diary-6211f.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"765031385372",REACT_APP_FIREBASE_APP_ID:"1:765031385372:web:9b72a3164df87c4c9712d9",REACT_APP_FIREBASE_MEASUMENT_ID:"G-5VWBRJH7V4"}[$H]),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=lH(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new Eq(Eq.OWNER):new xq(e.name,e.options,t);PW("Invalid Firebase Database URL",s),iV(s.path)||oq("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=ZH[t.name];i||(i={},ZH[t.name]=i);var a=i[e.toURLString()];a&&oq("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new qW(e,eG,n,r),i[e.toURLString()]=a,a}(u,e,l,new _q(e.name,n));return new nG(h,e)}var nG=function(){function e(t,n){or(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return ur(e,[{key:"_repo",get:function(){return this._instanceStarted||(VW(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new _H(this._repo,Xq())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=ZH[t];n&&n[e.key]===e||oq("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),$W(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&oq("Cannot call "+e+" on a deleted database.")}}]),e}();function rG(){zq.IS_TRANSPORT_INITIALIZED&&sq("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function iG(){rG(),jq.forceDisallow()}function aG(){rG(),Vq.forceDisallow(),jq.forceAllow()}function oG(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=di(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&oq("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&oq('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Eq(Eq.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:Or(r.mockUserToken,e.app.options.projectId);a=new Eq(o)}!function(e,t,n,r){e.repoInfo_=new Rq("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,a)}function sG(e){var t;(e=di(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(jW)}function uG(e,t){nq(e,t)}var cG={".sv":"timestamp"};var lG=function(){function e(t,n){or(this,e),this.committed=t,this.snapshot=n}return ur(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function hG(e,t,n){var r;if(e=di(e),RW("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new Dr,o=DH(e,(function(){}));return function(e,t,n,r,i,a){ZW(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:JU(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=tH(e,t,void 0);o.currentInputSnapshot=s;var u=o.update(s.val());if(void 0===u)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{EW("transaction failed: Data returned ",u,o.path),o.status=0;var c,l=cW(e.transactionQueueTree_,t),h=lW(l)||[];h.push(o),hW(l,h),"object"===typeof u&&null!==u&&Yr(u,".priority")?(c=Xr(u,".priority"),wr(_W(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(VB(e.serverSyncTree_,t)||zV.EMPTY_NODE).getPriority().val();var f=BW(e),d=HV(u,c),p=oW(d,s,f);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=KW(e);var v=OB(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);LW(e.eventQueue_,t,v),nH(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new xH(r,new _H(e._repo,e._path),MV),a.resolve(new lG(n,i)))}),o,i),a.promise}pV.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},pV.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){WU(va),ua(new ki("database",(function(e,t){var n=t.instanceIdentifier;return tG(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),wa(VU,zU,e),wa(VU,zU,"esm2017")}();var fG=new Ri("@firebase/database-compat"),dG=function(e){var t="FIREBASE WARNING: "+e;fG.warn(t)},pG=function(){function e(t){or(this,e),this._delegate=t}return ur(e,[{key:"cancel",value:function(e){ui("OnDisconnect.cancel",0,1,arguments.length),li("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){ui("OnDisconnect.remove",0,1,arguments.length),li("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){ui("OnDisconnect.set",1,2,arguments.length),li("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){ui("OnDisconnect.setWithPriority",2,3,arguments.length),li("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(ui("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,dG("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}li("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),vG=function(){function e(t,n){or(this,e),this.committed=t,this.snapshot=n}return ur(e,[{key:"toJSON",value:function(){return ui("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),mG=function(){function e(t,n){or(this,e),this._database=t,this._delegate=n}return ur(e,[{key:"val",value:function(){return ui("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return ui("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return ui("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return ui("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return ui("DataSnapshot.child",0,1,arguments.length),t=String(t),TW("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return ui("DataSnapshot.hasChild",1,1,arguments.length),TW("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return ui("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return ui("DataSnapshot.forEach",1,1,arguments.length),li("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return ui("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return ui("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return ui("DataSnapshot.ref",0,0,arguments.length),new yG(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),gG=function(){function e(t,n){or(this,e),this.database=t,this._delegate=n}return ur(e,[{key:"on",value:function(t,n,r,i){var a,o=this;ui("Query.on",2,4,arguments.length),li("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=function(e,t){n.call(s.context,new mG(o.database,e),t)};u.userCallback=n,u.context=s.context;var c=null===(a=s.cancel)||void 0===a?void 0:a.bind(s.context);switch(t){case"value":return DH(this._delegate,u,c),n;case"child_added":return OH(this._delegate,u,c),n;case"child_removed":return FH(this._delegate,u,c),n;case"child_changed":return LH(this._delegate,u,c),n;case"child_moved":return MH(this._delegate,u,c),n;default:throw new Error(ci("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(ui("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(ci(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),li("Query.off","callback",t,!0),hi("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,jH(this._delegate,e,r)}else jH(this._delegate,e)}},{key:"get",value:function(){var e=this;return NH(this._delegate).then((function(t){return new mG(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;ui("Query.once",1,4,arguments.length),li("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),s=new Dr,u=function(e,t){var r=new mG(a.database,e);n&&n.call(o.context,r,t),s.resolve(r)};u.userCallback=n,u.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),s.reject(e)};switch(t){case"value":DH(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":OH(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":FH(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":LH(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":MH(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(ci("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}},{key:"limitToFirst",value:function(t){return ui("Query.limitToFirst",1,1,arguments.length),new e(this.database,JH(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new WH(e)}(t)))}},{key:"limitToLast",value:function(t){return ui("Query.limitToLast",1,1,arguments.length),new e(this.database,JH(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new HH(e)}(t)))}},{key:"orderByChild",value:function(t){return ui("Query.orderByChild",1,1,arguments.length),new e(this.database,JH(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return TW("orderByChild","path",e,!1),new GH(e)}(t)))}},{key:"orderByKey",value:function(){return ui("Query.orderByKey",0,0,arguments.length),new e(this.database,JH(this._delegate,new KH))}},{key:"orderByPriority",value:function(){return ui("Query.orderByPriority",0,0,arguments.length),new e(this.database,JH(this._delegate,new QH))}},{key:"orderByValue",value:function(){return ui("Query.orderByValue",0,0,arguments.length),new e(this.database,JH(this._delegate,new YH))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ui("Query.startAt",0,2,arguments.length),new e(this.database,JH(this._delegate,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return CW("startAt","key",t,!0),new zH(e,t)}(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ui("Query.startAfter",0,2,arguments.length),new e(this.database,JH(this._delegate,function(e,t){return CW("startAfter","key",t,!0),new BH(e,t)}(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ui("Query.endAt",0,2,arguments.length),new e(this.database,JH(this._delegate,function(e,t){return CW("endAt","key",t,!0),new qH(e,t)}(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ui("Query.endBefore",0,2,arguments.length),new e(this.database,JH(this._delegate,function(e,t){return CW("endBefore","key",t,!0),new VH(e,t)}(t,n)))}},{key:"equalTo",value:function(t,n){return ui("Query.equalTo",1,2,arguments.length),new e(this.database,JH(this._delegate,function(e,t){return CW("equalTo","key",t,!0),new XH(e,t)}(t,n)))}},{key:"toString",value:function(){return ui("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return ui("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(ui("Query.isEqual",1,1,arguments.length),!(t instanceof e)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new yG(this.database,new _H(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,li(e,"cancel",r.cancel,!0),r.context=n,hi(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(ci(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),yG=function(e){fr(n,e);var t=vr(n);function n(e,r){var i;return or(this,n),(i=t.call(this,e,new yH(r._repo,r._path,new nz,!1))).database=e,i._delegate=r,i}return ur(n,[{key:"getKey",value:function(){return ui("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return ui("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,SH(this._delegate,e))}},{key:"getParent",value:function(){ui("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return ui("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){ui("Reference.set",1,2,arguments.length),li("Reference.set","onComplete",t,!0);var n=CH(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(ui("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,dG("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}RW("Reference.update",this._delegate._path),li("Reference.update","onComplete",t,!0);var i=TH(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){ui("Reference.setWithPriority",2,3,arguments.length),li("Reference.setWithPriority","onComplete",n,!0);var r=function(e,t,n){if(RW("setWithPriority",e._path),xW("setWithPriority",t,e._path,!1),SW("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new Dr;return QW(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){ui("Reference.remove",0,1,arguments.length),li("Reference.remove","onComplete",e,!0);var t,n=(t=this._delegate,RW("remove",t._path),CH(t,null));return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n}},{key:"transaction",value:function(e,t,n){var r=this;ui("Reference.transaction",1,3,arguments.length),li("Reference.transaction","transactionUpdate",e,!1),li("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(ci(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);var i=hG(this._delegate,e,{applyLocally:n}).then((function(e){return new vG(e.committed,new mG(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){ui("Reference.setPriority",1,2,arguments.length),li("Reference.setPriority","onComplete",t,!0);var n=function(e,t){e=di(e),RW("setPriority",e._path),SW("setPriority",t,!1);var n=new Dr;return QW(e._repo,rV(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;ui("Reference.push",0,2,arguments.length),li("Reference.push","onComplete",t,!0);var i=function(e,t){e=di(e),RW("push",e._path),xW("push",t,e._path,!0);var n,r=zW(e._repo),i=dH(r),a=SH(e,i),o=SH(e,i);return n=null!=t?CH(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return RW("Reference.onDisconnect",this._delegate._path),new pG(new gH(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(gG),kG=function(){function e(t,n){var r=this;or(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:iG,forceLongPolling:aG}}return ur(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};oG(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(ui("database.ref",0,1,arguments.length),e instanceof yG){var t=IH(this._delegate,e.toString());return new yG(this,t)}var n=EH(this._delegate,e);return new yG(this,n)}},{key:"refFromURL",value:function(e){ui("database.refFromURL",1,1,arguments.length);var t=IH(this._delegate,e);return new yG(this,t)}},{key:"goOffline",value:function(){return ui("database.goOffline",0,0,arguments.length),function(e){(e=di(e))._checkNotDeleted("goOffline"),$W(e._repo)}(this._delegate)}},{key:"goOnline",value:function(){return ui("database.goOnline",0,0,arguments.length),sG(this._delegate)}}]),e}();kG.ServerValue={TIMESTAMP:cG,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var bG=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,s=void 0!==o&&o;WU(r);var u=new wi("auth-internal",new Ei("database-standalone"));return u.setComponent(new ki("auth-internal",(function(){return i}),"PRIVATE")),{instance:new kG(tG(t,u,void 0,n,s),t),namespace:a}}}),wG=kG.ServerValue;!function(e){e.INTERNAL.registerComponent(new ki("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new kG(i,r)}),"PUBLIC").setServiceProps({Reference:yG,Query:gG,Database:kG,DataSnapshot:mG,enableLogging:uG,INTERNAL:bG,ServerValue:wG}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.3.4")}(Ka);Ka.initializeApp({apiKey:"AIzaSyDE-Cl5RxG1byLc4pjoBxD3aXWO3wi43P8",authDomain:"diary-6211f.firebaseapp.com",projectId:"diary-6211f",storageBucket:"diary-6211f.appspot.com",messagingSenderId:"765031385372",appId:"1:765031385372:web:9b72a3164df87c4c9712d9",measurementId:"G-5VWBRJH7V4"});var _G=Ka.database();function xG(e,t){if(null==e)return{};var n,r,i=rg(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var EG=n(694),IG=n.n(EG),SG=["xxl","xl","lg","md","sm","xs"],CG=t.createContext({prefixes:{},breakpoints:SG,minBreakpoint:"xs"});CG.Consumer,CG.Provider;function TG(e,n){var r=(0,t.useContext)(CG).prefixes;return e||r[n]||n}var NG=["className","bsPrefix","as"],RG=t.forwardRef((function(e,t){var n=e.className,r=e.bsPrefix,i=e.as,a=void 0===i?"div":i,o=xG(e,NG);return r=TG(r,"card-body"),(0,ap.jsx)(a,Ai({ref:t,className:IG()(n,r)},o))}));RG.displayName="CardBody";var PG=RG,AG=["className","bsPrefix","as"],DG=t.forwardRef((function(e,t){var n=e.className,r=e.bsPrefix,i=e.as,a=void 0===i?"div":i,o=xG(e,AG);return r=TG(r,"card-footer"),(0,ap.jsx)(a,Ai({ref:t,className:IG()(n,r)},o))}));DG.displayName="CardFooter";var OG=DG,LG=t.createContext(null);LG.displayName="CardHeaderContext";var MG=LG,FG=["bsPrefix","className","as"],jG=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.as,o=void 0===a?"div":a,s=xG(e,FG),u=TG(r,"card-header"),c=(0,t.useMemo)((function(){return{cardHeaderBsPrefix:u}}),[u]);return(0,ap.jsx)(MG.Provider,{value:c,children:(0,ap.jsx)(o,Ai(Ai({ref:n},s),{},{className:IG()(i,u)}))})}));jG.displayName="CardHeader";var UG=jG,qG=["bsPrefix","className","variant","as"],VG=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.variant,a=e.as,o=void 0===a?"img":a,s=xG(e,qG),u=TG(n,"card-img");return(0,ap.jsx)(o,Ai({ref:t,className:IG()(i?"".concat(u,"-").concat(i):u,r)},s))}));VG.displayName="CardImg";var zG=VG,BG=["className","bsPrefix","as"],WG=t.forwardRef((function(e,t){var n=e.className,r=e.bsPrefix,i=e.as,a=void 0===i?"div":i,o=xG(e,BG);return r=TG(r,"card-img-overlay"),(0,ap.jsx)(a,Ai({ref:t,className:IG()(n,r)},o))}));WG.displayName="CardImgOverlay";var HG=WG,GG=["className","bsPrefix","as"],KG=t.forwardRef((function(e,t){var n=e.className,r=e.bsPrefix,i=e.as,a=void 0===i?"a":i,o=xG(e,GG);return r=TG(r,"card-link"),(0,ap.jsx)(a,Ai({ref:t,className:IG()(n,r)},o))}));KG.displayName="CardLink";var QG=KG,YG=function(e){return t.forwardRef((function(t,n){return(0,ap.jsx)("div",Ai(Ai({},t),{},{ref:n,className:IG()(t.className,e)}))}))},XG=["className","bsPrefix","as"],JG=YG("h6"),$G=t.forwardRef((function(e,t){var n=e.className,r=e.bsPrefix,i=e.as,a=void 0===i?JG:i,o=xG(e,XG);return r=TG(r,"card-subtitle"),(0,ap.jsx)(a,Ai({ref:t,className:IG()(n,r)},o))}));$G.displayName="CardSubtitle";var ZG=$G,eK=["className","bsPrefix","as"],tK=t.forwardRef((function(e,t){var n=e.className,r=e.bsPrefix,i=e.as,a=void 0===i?"p":i,o=xG(e,eK);return r=TG(r,"card-text"),(0,ap.jsx)(a,Ai({ref:t,className:IG()(n,r)},o))}));tK.displayName="CardText";var nK=tK,rK=["className","bsPrefix","as"],iK=YG("h5"),aK=t.forwardRef((function(e,t){var n=e.className,r=e.bsPrefix,i=e.as,a=void 0===i?iK:i,o=xG(e,rK);return r=TG(r,"card-title"),(0,ap.jsx)(a,Ai({ref:t,className:IG()(n,r)},o))}));aK.displayName="CardTitle";var oK=aK,sK=["bsPrefix","className","bg","text","border","body","children","as"],uK=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.bg,a=e.text,o=e.border,s=e.body,u=void 0!==s&&s,c=e.children,l=e.as,h=void 0===l?"div":l,f=xG(e,sK),d=TG(n,"card");return(0,ap.jsx)(h,Ai(Ai({ref:t},f),{},{className:IG()(r,d,i&&"bg-".concat(i),a&&"text-".concat(a),o&&"border-".concat(o)),children:u?(0,ap.jsx)(PG,{children:c}):c}))}));uK.displayName="Card";var cK=Object.assign(uK,{Img:zG,Title:oK,Subtitle:ZG,Body:PG,Link:QG,Text:nK,Header:UG,Footer:OG,ImgOverlay:HG});n(176);function lK(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function hK(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function fK(e,n){return Object.keys(n).reduce((function(r,i){var o,s=r,u=s[lK(i)],c=s[i],l=rg(s,[lK(i),i].map(hK)),h=n[i],f=function(e,n,r){var i=(0,t.useRef)(void 0!==e),a=(0,t.useState)(n),o=a[0],s=a[1],u=void 0!==e,c=i.current;return i.current=u,!u&&c&&o!==n&&s(n),[u?e:o,(0,t.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r&&r.apply(void 0,[e].concat(n)),s(e)}),[r])]}(c,u,e[h]),d=f[0],p=f[1];return a({},l,((o={})[i]=d,o[h]=p,o))}),e)}function dK(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function pK(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function vK(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}dK.__suppressDeprecationWarning=!0,pK.__suppressDeprecationWarning=!0,vK.__suppressDeprecationWarning=!0;var mK=function(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e}),[e]),n};function gK(e){var n=mK(e);return(0,t.useCallback)((function(){return n.current&&n.current.apply(n,arguments)}),[n])}var yK=["className","bsPrefix","as"],kK=YG("h4");kK.displayName="DivStyledAsH4";var bK=t.forwardRef((function(e,t){var n=e.className,r=e.bsPrefix,i=e.as,a=void 0===i?kK:i,o=xG(e,yK);return r=TG(r,"alert-heading"),(0,ap.jsx)(a,Ai({ref:t,className:IG()(n,r)},o))}));bK.displayName="AlertHeading";var wK=bK;"undefined"!==typeof n.g&&n.g.navigator&&n.g.navigator.product,new WeakMap;var _K=["as","disabled"];function xK(e){var t=e.tagName,n=e.disabled,r=e.href,i=e.target,a=e.rel,o=e.role,s=e.onClick,u=e.tabIndex,c=void 0===u?0:u,l=e.type;t||(t=null!=r||null!=i||null!=a?"a":"button");var h={tagName:t};if("button"===t)return[{type:l||"button",disabled:n},h];var f=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==s||s(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:n?void 0:c,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?a:void 0,onClick:f,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),f(e))}},h]}var EK=t.forwardRef((function(e,t){var n=e.as,r=e.disabled,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,_K),a=nr(xK(Object.assign({tagName:n,disabled:r},i)),2),o=a[0],s=a[1].tagName;return(0,ap.jsx)(s,Object.assign({},i,o,{ref:t}))}));EK.displayName="Button";var IK=["onKeyDown"];var SK=t.forwardRef((function(e,t){var n,r=e.onKeyDown,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,IK),a=nr(xK(Object.assign({tagName:"a"},i)),1)[0],o=gK((function(e){a.onKeyDown(e),null==r||r(e)}));return(n=i.href)&&"#"!==n.trim()&&"button"!==i.role?(0,ap.jsx)("a",Object.assign({ref:t},i,{onKeyDown:r})):(0,ap.jsx)("a",Object.assign({ref:t},i,a,{onKeyDown:o}))}));SK.displayName="Anchor";var CK=SK,TK=["className","bsPrefix","as"],NK=t.forwardRef((function(e,t){var n=e.className,r=e.bsPrefix,i=e.as,a=void 0===i?CK:i,o=xG(e,TK);return r=TG(r,"alert-link"),(0,ap.jsx)(a,Ai({ref:t,className:IG()(n,r)},o))}));NK.displayName="AlertLink";var RK=NK,PK=!1,AK=t.createContext(null),DK="unmounted",OK="exited",LK="entering",MK="entered",FK="exiting",jK=function(e){function n(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=OK,r.appearStatus=LK):i=MK:i=t.unmountOnExit||t.mountOnEnter?DK:OK,r.state={status:i},r.nextCallback=null,r}fm(n,e),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===DK?{status:OK}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==LK&&n!==MK&&(t=LK):n!==LK&&n!==MK||(t=FK)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===LK){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:i.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===OK&&this.setState({status:DK})},r.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[i.findDOMNode(this),r],o=a[0],s=a[1],u=this.getTimeouts(),c=r?u.appear:u.enter;!e&&!n||PK?this.safeSetState({status:MK},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,s),this.safeSetState({status:LK},(function(){t.props.onEntering(o,s),t.onTransitionEnd(c,(function(){t.safeSetState({status:MK},(function(){t.props.onEntered(o,s)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:i.findDOMNode(this);t&&!PK?(this.props.onExit(r),this.safeSetState({status:FK},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:OK},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:OK},(function(){e.props.onExited(r)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:i.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=a[0],s=a[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===DK)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,rg(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(AK.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},n}(t.Component);function UK(){}jK.contextType=AK,jK.propTypes={},jK.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:UK,onEntering:UK,onEntered:UK,onExit:UK,onExiting:UK,onExited:UK},jK.UNMOUNTED=DK,jK.EXITED=OK,jK.ENTERING=LK,jK.ENTERED=MK,jK.EXITING=FK;var qK=jK;function VK(e){var t=function(e){return e&&e.ownerDocument||document}(e);return t&&t.defaultView||window}var zK=/([A-Z])/g;var BK=/^ms-/;function WK(e){return function(e){return e.replace(zK,"-$1").toLowerCase()}(e).replace(BK,"-ms-")}var HK=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var GK=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(WK(t))||function(e,t){return VK(e).getComputedStyle(e,t)}(e).getPropertyValue(WK(t));Object.keys(t).forEach((function(i){var a=t[i];a||0===a?!function(e){return!(!e||!HK.test(e))}(i)?n+=WK(i)+": "+a+";":r+=i+"("+a+") ":e.style.removeProperty(WK(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n},KK=!("undefined"===typeof window||!window.document||!window.document.createElement),QK=!1,YK=!1;try{var XK={get passive(){return QK=!0},get once(){return YK=QK=!0}};KK&&(window.addEventListener("test",XK,XK),window.removeEventListener("test",XK,!0))}catch(o$){}var JK=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!YK){var i=r.once,a=r.capture,o=n;!YK&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,a),n.call(this,r)},n.__once=o),e.addEventListener(t,o,QK?r:a)}e.addEventListener(t,n,r)};var $K=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var ZK=function(e,t,n,r){return JK(e,t,n,r),function(){$K(e,t,n,r)}};function eQ(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),a=ZK(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),a()}}function tQ(e,t,n,r){null==n&&(n=function(e){var t=GK(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=eQ(e,n,r),a=ZK(e,"transitionend",t);return function(){i(),a()}}function nQ(e,t){var n=GK(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function rQ(e,t){var n=nQ(e,"transitionDuration"),r=nQ(e,"transitionDelay"),i=tQ(e,(function(n){n.target===e&&(i(),t(n))}),n+r)}var iQ=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var aQ=function(e,n){return(0,t.useMemo)((function(){return function(e,t){var n=iQ(e),r=iQ(t);return function(e){n&&n(e),r&&r(e)}}(e,n)}),[e,n])};var oQ,sQ=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],uQ=t.forwardRef((function(e,n){var r=e.onEnter,a=e.onEntering,o=e.onEntered,s=e.onExit,u=e.onExiting,c=e.onExited,l=e.addEndListener,h=e.children,f=e.childRef,d=xG(e,sQ),p=(0,t.useRef)(null),v=aQ(p,f),m=function(e){var t;v((t=e)&&"setState"in t?i.findDOMNode(t):null!=t?t:null)},g=function(e){return function(t){e&&p.current&&e(p.current,t)}},y=(0,t.useCallback)(g(r),[r]),k=(0,t.useCallback)(g(a),[a]),b=(0,t.useCallback)(g(o),[o]),w=(0,t.useCallback)(g(s),[s]),_=(0,t.useCallback)(g(u),[u]),x=(0,t.useCallback)(g(c),[c]),E=(0,t.useCallback)(g(l),[l]);return(0,ap.jsx)(qK,Ai(Ai({ref:n},d),{},{onEnter:y,onEntered:b,onEntering:k,onExit:w,onExited:x,onExiting:_,addEndListener:E,nodeRef:p,children:"function"===typeof h?function(e,t){return h(e,Ai(Ai({},t),{},{ref:m}))}:t.cloneElement(h,{ref:m})}))})),cQ=uQ,lQ=["className","children","transitionClasses","onEnter"],hQ=(ar(oQ={},LK,"show"),ar(oQ,MK,"show"),oQ),fQ=t.forwardRef((function(e,n){var r=e.className,i=e.children,a=e.transitionClasses,o=void 0===a?{}:a,s=e.onEnter,u=Ai({in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},xG(e,lQ)),c=(0,t.useCallback)((function(e,t){!function(e){e.offsetHeight}(e),null==s||s(e,t)}),[s]);return(0,ap.jsx)(cQ,Ai(Ai({ref:n,addEndListener:rQ},u),{},{onEnter:c,childRef:i.ref,children:function(e,n){return t.cloneElement(i,Ai(Ai({},n),{},{className:IG()("fade",r,i.props.className,hQ[e],o[e])}))}}))}));fQ.displayName="Fade";var dQ=fQ,pQ=n(7),vQ=n.n(pQ),mQ=["className","variant","aria-label"],gQ={"aria-label":vQ().string,onClick:vQ().func,variant:vQ().oneOf(["white"])},yQ=t.forwardRef((function(e,t){var n=e.className,r=e.variant,i=e["aria-label"],a=void 0===i?"Close":i,o=xG(e,mQ);return(0,ap.jsx)("button",Ai({ref:t,type:"button",className:IG()("btn-close",r&&"btn-close-".concat(r),n),"aria-label":a},o))}));yQ.displayName="CloseButton",yQ.propTypes=gQ;var kQ=yQ,bQ=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],wQ=t.forwardRef((function(e,t){var n=fK(e,{show:"onClose"}),r=n.bsPrefix,i=n.show,a=void 0===i||i,o=n.closeLabel,s=void 0===o?"Close alert":o,u=n.closeVariant,c=n.className,l=n.children,h=n.variant,f=void 0===h?"primary":h,d=n.onClose,p=n.dismissible,v=n.transition,m=void 0===v?dQ:v,g=xG(n,bQ),y=TG(r,"alert"),k=gK((function(e){d&&d(!1,e)})),b=!0===m?dQ:m,w=(0,ap.jsxs)("div",Ai(Ai({role:"alert"},b?void 0:g),{},{ref:t,className:IG()(c,y,f&&"".concat(y,"-").concat(f),p&&"".concat(y,"-dismissible")),children:[p&&(0,ap.jsx)(kQ,{onClick:k,"aria-label":s,variant:u}),l]}));return b?(0,ap.jsx)(b,Ai(Ai({unmountOnExit:!0},g),{},{ref:void 0,in:a,children:w})):a?w:null}));wQ.displayName="Alert";var _Q=Object.assign(wQ,{Link:RK,Heading:wK}),xQ=["as","className","type","tooltip"],EQ={type:vQ().string,tooltip:vQ().bool,as:vQ().elementType},IQ=t.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,i=e.className,a=e.type,o=void 0===a?"valid":a,s=e.tooltip,u=void 0!==s&&s,c=xG(e,xQ);return(0,ap.jsx)(r,Ai(Ai({},c),{},{ref:t,className:IG()(i,"".concat(o,"-").concat(u?"tooltip":"feedback"))}))}));IQ.displayName="Feedback",IQ.propTypes=EQ;var SQ=IQ,CQ=t.createContext({}),TQ=["id","bsPrefix","className","type","isValid","isInvalid","as"],NQ=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.className,o=e.type,s=void 0===o?"checkbox":o,u=e.isValid,c=void 0!==u&&u,l=e.isInvalid,h=void 0!==l&&l,f=e.as,d=void 0===f?"input":f,p=xG(e,TQ),v=(0,t.useContext)(CQ).controlId;return i=TG(i,"form-check-input"),(0,ap.jsx)(d,Ai(Ai({},p),{},{ref:n,type:s,id:r||v,className:IG()(a,i,c&&"is-valid",h&&"is-invalid")}))}));NQ.displayName="FormCheckInput";var RQ=NQ,PQ=["bsPrefix","className","htmlFor"],AQ=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.htmlFor,o=xG(e,PQ),s=(0,t.useContext)(CQ).controlId;return r=TG(r,"form-check-label"),(0,ap.jsx)("label",Ai(Ai({},o),{},{ref:n,htmlFor:a||s,className:IG()(i,r)}))}));AQ.displayName="FormCheckLabel";var DQ=AQ;var OQ=["id","bsPrefix","bsSwitchPrefix","inline","reverse","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],LQ=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.bsSwitchPrefix,o=e.inline,s=void 0!==o&&o,u=e.reverse,c=void 0!==u&&u,l=e.disabled,h=void 0!==l&&l,f=e.isValid,d=void 0!==f&&f,p=e.isInvalid,v=void 0!==p&&p,m=e.feedbackTooltip,g=void 0!==m&&m,y=e.feedback,k=e.feedbackType,b=e.className,w=e.style,_=e.title,x=void 0===_?"":_,E=e.type,I=void 0===E?"checkbox":E,S=e.label,C=e.children,T=e.as,N=void 0===T?"input":T,R=xG(e,OQ);i=TG(i,"form-check"),a=TG(a,"form-switch");var P=(0,t.useContext)(CQ).controlId,A=(0,t.useMemo)((function(){return{controlId:r||P}}),[P,r]),D=!C&&null!=S&&!1!==S||function(e,n){return t.Children.toArray(e).some((function(e){return t.isValidElement(e)&&e.type===n}))}(C,DQ),O=(0,ap.jsx)(RQ,Ai(Ai({},R),{},{type:"switch"===I?"checkbox":I,ref:n,isValid:d,isInvalid:v,disabled:h,as:N}));return(0,ap.jsx)(CQ.Provider,{value:A,children:(0,ap.jsx)("div",{style:w,className:IG()(b,D&&i,s&&"".concat(i,"-inline"),c&&"".concat(i,"-reverse"),"switch"===I&&a),children:C||(0,ap.jsxs)(ap.Fragment,{children:[O,D&&(0,ap.jsx)(DQ,{title:x,children:S}),y&&(0,ap.jsx)(SQ,{type:k,tooltip:g,children:y})]})})})}));LQ.displayName="FormCheck";var MQ=Object.assign(LQ,{Input:RQ,Label:DQ}),FQ=(n(391),["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"]),jQ=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.type,a=e.size,o=e.htmlSize,s=e.id,u=e.className,c=e.isValid,l=void 0!==c&&c,h=e.isInvalid,f=void 0!==h&&h,d=e.plaintext,p=e.readOnly,v=e.as,m=void 0===v?"input":v,g=xG(e,FQ),y=(0,t.useContext)(CQ).controlId;return r=TG(r,"form-control"),(0,ap.jsx)(m,Ai(Ai({},g),{},{type:i,size:o,ref:n,readOnly:p,id:s||y,className:IG()(u,d?"".concat(r,"-plaintext"):r,a&&"".concat(r,"-").concat(a),"color"===i&&"".concat(r,"-color"),l&&"is-valid",f&&"is-invalid")}))}));jQ.displayName="FormControl";var UQ=Object.assign(jQ,{Feedback:SQ}),qQ=["className","bsPrefix","as"],VQ=t.forwardRef((function(e,t){var n=e.className,r=e.bsPrefix,i=e.as,a=void 0===i?"div":i,o=xG(e,qQ);return r=TG(r,"form-floating"),(0,ap.jsx)(a,Ai({ref:t,className:IG()(n,r)},o))}));VQ.displayName="FormFloating";var zQ=VQ,BQ=["controlId","as"],WQ=t.forwardRef((function(e,n){var r=e.controlId,i=e.as,a=void 0===i?"div":i,o=xG(e,BQ),s=(0,t.useMemo)((function(){return{controlId:r}}),[r]);return(0,ap.jsx)(CQ.Provider,{value:s,children:(0,ap.jsx)(a,Ai(Ai({},o),{},{ref:n}))})}));WQ.displayName="FormGroup";var HQ=WQ,GQ=["as","bsPrefix","className"],KQ=["className"];function QQ(e){var n=e.as,r=e.bsPrefix,i=e.className,a=xG(e,GQ);r=TG(r,"col");var o=(0,t.useContext)(CG).breakpoints,s=(0,t.useContext)(CG).minBreakpoint,u=[],c=[];return o.forEach((function(e){var t,n,i,o=a[e];delete a[e],"object"===typeof o&&null!=o?(t=o.span,n=o.offset,i=o.order):t=o;var l=e!==s?"-".concat(e):"";t&&u.push(!0===t?"".concat(r).concat(l):"".concat(r).concat(l,"-").concat(t)),null!=i&&c.push("order".concat(l,"-").concat(i)),null!=n&&c.push("offset".concat(l,"-").concat(n))})),[Ai(Ai({},a),{},{className:IG().apply(void 0,[i].concat(u,c))}),{as:n,bsPrefix:r,spans:u}]}var YQ=t.forwardRef((function(e,t){var n=nr(QQ(e),2),r=n[0],i=r.className,a=xG(r,KQ),o=n[1],s=o.as,u=void 0===s?"div":s,c=o.bsPrefix,l=o.spans;return(0,ap.jsx)(u,Ai(Ai({},a),{},{ref:t,className:IG()(i,!l.length&&c)}))}));YQ.displayName="Col";var XQ=YQ,JQ=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],$Q=t.forwardRef((function(e,n){var r=e.as,i=void 0===r?"label":r,a=e.bsPrefix,o=e.column,s=void 0!==o&&o,u=e.visuallyHidden,c=void 0!==u&&u,l=e.className,h=e.htmlFor,f=xG(e,JQ),d=(0,t.useContext)(CQ).controlId;a=TG(a,"form-label");var p="col-form-label";"string"===typeof s&&(p="".concat(p," ").concat(p,"-").concat(s));var v=IG()(l,a,c&&"visually-hidden",s&&p);return h=h||d,s?(0,ap.jsx)(XQ,Ai({ref:n,as:"label",className:v,htmlFor:h},f)):(0,ap.jsx)(i,Ai({ref:n,className:v,htmlFor:h},f))}));$Q.displayName="FormLabel";var ZQ=$Q,eY=["bsPrefix","className","id"],tY=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.id,o=xG(e,eY),s=(0,t.useContext)(CQ).controlId;return r=TG(r,"form-range"),(0,ap.jsx)("input",Ai(Ai({},o),{},{type:"range",ref:n,className:IG()(i,r),id:a||s}))}));tY.displayName="FormRange";var nY=tY,rY=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],iY=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.size,a=e.htmlSize,o=e.className,s=e.isValid,u=void 0!==s&&s,c=e.isInvalid,l=void 0!==c&&c,h=e.id,f=xG(e,rY),d=(0,t.useContext)(CQ).controlId;return r=TG(r,"form-select"),(0,ap.jsx)("select",Ai(Ai({},f),{},{size:a,ref:n,className:IG()(o,r,i&&"".concat(r,"-").concat(i),u&&"is-valid",l&&"is-invalid"),id:h||d}))}));iY.displayName="FormSelect";var aY=iY,oY=["bsPrefix","className","as","muted"],sY=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?"small":i,o=e.muted,s=xG(e,oY);return n=TG(n,"form-text"),(0,ap.jsx)(a,Ai(Ai({},s),{},{ref:t,className:IG()(r,n,o&&"text-muted")}))}));sY.displayName="FormText";var uY=sY,cY=t.forwardRef((function(e,t){return(0,ap.jsx)(MQ,Ai(Ai({},e),{},{ref:t,type:"switch"}))}));cY.displayName="Switch";var lY=Object.assign(cY,{Input:MQ.Input,Label:MQ.Label}),hY=["bsPrefix","className","children","controlId","label"],fY=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.children,a=e.controlId,o=e.label,s=xG(e,hY);return n=TG(n,"form-floating"),(0,ap.jsxs)(HQ,Ai(Ai({ref:t,className:IG()(r,n),controlId:a},s),{},{children:[i,(0,ap.jsx)("label",{htmlFor:a,children:o})]}))}));fY.displayName="FloatingLabel";var dY=fY,pY=["className","validated","as"],vY={_ref:vQ().any,validated:vQ().bool,as:vQ().elementType},mY=t.forwardRef((function(e,t){var n=e.className,r=e.validated,i=e.as,a=void 0===i?"form":i,o=xG(e,pY);return(0,ap.jsx)(a,Ai(Ai({},o),{},{ref:t,className:IG()(n,r&&"was-validated")}))}));mY.displayName="Form",mY.propTypes=vY;var gY=Object.assign(mY,{Group:HQ,Control:UQ,Floating:zQ,Check:MQ,Switch:lY,Label:ZQ,Text:uY,Range:nY,Select:aY,FloatingLabel:dY}),yY=["as","bsPrefix","variant","size","active","disabled","className"],kY=t.forwardRef((function(e,t){var n=e.as,r=e.bsPrefix,i=e.variant,a=void 0===i?"primary":i,o=e.size,s=e.active,u=void 0!==s&&s,c=e.disabled,l=void 0!==c&&c,h=e.className,f=xG(e,yY),d=TG(r,"btn"),p=nr(xK(Ai({tagName:n,disabled:l},f)),2),v=p[0],m=p[1].tagName;return(0,ap.jsx)(m,Ai(Ai(Ai({},v),f),{},{ref:t,disabled:l,className:IG()(h,d,u&&"active",a&&"".concat(d,"-").concat(a),o&&"".concat(d,"-").concat(o),f.href&&l&&"disabled")}))}));kY.displayName="Button";var bY=kY;function wY(){var e=(0,t.useRef)(),n=sp().resetPassword,r=nr((0,t.useState)(""),2),i=r[0],a=r[1],o=nr((0,t.useState)(""),2),s=o[0],u=o[1],c=nr((0,t.useState)(!1),2),l=c[0],h=c[1],f=nv();function d(){return(d=yi(pi().mark((function t(r){return pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.prev=1,u(""),a(""),h(!0),t.next=7,n(e.current.value);case 7:u("Check your inbox for further instructions"),alert("Val: "+e.current.value),f("/login"),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),a("Failed to reset password"),alert("Val: "+e.current.value);case 16:h(!1);case 17:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}return(0,ap.jsxs)("div",{children:[(0,ap.jsx)(cK,{children:(0,ap.jsxs)(cK.Body,{children:[(0,ap.jsx)("h2",{className:"text-center mb-4",children:"Password Reset"}),i&&(0,ap.jsx)(_Q,{variant:"danger",children:i}),s&&(0,ap.jsx)(_Q,{variant:"success",children:s}),(0,ap.jsxs)(gY,{onSubmit:function(e){return d.apply(this,arguments)},children:[(0,ap.jsxs)(gY.Group,{id:"email",children:[(0,ap.jsx)(gY.Label,{children:"Email"}),(0,ap.jsx)(gY.Control,{type:"email",ref:e,required:!0})]}),(0,ap.jsx)(bY,{disabled:l,className:"w-100",type:"submit",children:"Reset Password"})]}),(0,ap.jsxs)("div",{className:"w-100 text-center mt-3",children:["No need to change password?",(0,ap.jsx)(Pv,{to:"/",element:(0,ap.jsx)($J,{}),children:"Login"})]})]})}),(0,ap.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",(0,ap.jsx)(Pv,{to:"/signup",element:(0,ap.jsx)(ZJ,{}),children:"Sign Up"})]})]})}var _Y=function(){var e=(0,t.useRef)(window.innerWidth),n=(0,t.useRef)(window.innerHeight),r=nr((0,t.useState)("10%"),2),i=r[0],a=r[1],o=nr((0,t.useState)("10%"),2),s=(o[0],o[1]),u=nr((0,t.useState)("100%"),2),c=u[0],l=u[1],h=nr((0,t.useState)("0px"),2),f=(h[0],h[1]),d=nr((0,t.useState)("0px"),2),p=d[0],v=d[1],m=nr((0,t.useState)("big"),2),g=m[0],y=m[1];return(0,t.useEffect)((function(){if(n.current>e.current){l("100%"),f("0%"),v("0%"),a("5%"),s("5%"),y("large");var t=document.getElementById("stayConnectedId");t.getAttribute("hidden");t.setAttribute("hidden","hidden")}else l("67%")})),(0,ap.jsx)("center",{children:(0,ap.jsx)("div",{className:"ui vertical footer segment form-page",style:{width:c,paddingRight:p},children:(0,ap.jsxs)("div",{className:"ui container",style:{marginLeft:"0px"},children:[(0,ap.jsx)("div",{id:"stayConnectedId",children:(0,ap.jsx)("h1",{id:"connect",className:"ui header",children:"Stay Connected"})}),(0,ap.jsxs)("div",{id:"links",children:[(0,ap.jsx)("a",{href:"https://www.linkedin.com/in/emmanuel-kofi-agyapong-783807bb/",id:"linkedinIcon",children:(0,ap.jsx)("button",{className:"ui circular linkedin icon button","data-tooltip":"Checkout my LinkedIn.","data-position":"top center",style:{marginRight:i},children:(0,ap.jsx)("i",{className:g+" linkedin icon"})})}),(0,ap.jsx)("a",{href:"https://github.com/TheWizard91",id:"githubIcon",children:(0,ap.jsx)("button",{className:"ui circular yellow github icon button","data-tooltip":"Checkout my Github repos.","data-position":"top center",style:{marginRight:i,marginLeft:i},children:(0,ap.jsx)("i",{className:g+" github alternate icon"})})}),(0,ap.jsx)("a",{href:"https://github.com/TheWizard91",id:"emailIcon",children:(0,ap.jsx)("button",{className:"ui circular green envelop icon button","data-tooltip":"Send me an email.","data-position":"top center",style:{marginLeft:i},children:(0,ap.jsx)("i",{className:g+" envelope icon"})})})]})]})})})};function xY(e){var n=e.children,r=e.className,i=e.clearing,o=e.content,u=e.fitted,c=e.hidden,h=e.horizontal,f=e.inverted,d=e.section,p=e.vertical,v=s("ui",l(i,"clearing"),l(u,"fitted"),l(c,"hidden"),l(h,"horizontal"),l(f,"inverted"),l(d,"section"),l(p,"vertical"),"divider",r),m=g(xY,e),k=y(xY,e);return t.createElement(k,a({},m,{className:v}),Bn(n)?o:n)}xY.handledProps=["as","children","className","clearing","content","fitted","hidden","horizontal","inverted","section","vertical"],xY.propTypes={};var EY=xY,IY=function(e,t){return"number"===typeof e||"string"===typeof e?e:e[t]},SY=([].concat(At(u),At(u).map(Number),Sm(u)),["browse","browse right","drop","fade","fade up","fade down","fade left","fade right","fly up","fly down","fly left","fly right","horizontal flip","vertical flip","scale","slide up","slide down","slide left","slide right","swing up","swing down","swing left","swing right","zoom"]),CY=([].concat(SY,["jiggle","flash","shake","pulse","tada","bounce","glow"]),Wv([].concat(["american sign language interpreting","assistive listening systems","audio description","blind","braille","closed captioning","closed captioning outline","deaf","low vision","phone volume","question circle","question circle outline","sign language","tty","universal access","wheelchair"],["angle double down","angle double left","angle double right","angle double up","angle down","angle left","angle right","angle up","arrow alternate circle down","arrow alternate circle down outline","arrow alternate circle left","arrow alternate circle left outline","arrow alternate circle right","arrow alternate circle right outline","arrow alternate circle up","arrow alternate circle up outline","arrow circle down","arrow circle left","arrow circle right","arrow circle up","arrow down","arrow left","arrow right","arrow up","arrows alternate","arrows alternate horizontal","arrows alternate vertical","caret down","caret left","caret right","caret square down","caret square down outline","caret square left","caret square left outline","caret square right","caret square right outline","caret square up","caret square up outline","caret up","cart arrow down","chart line","chevron circle down","chevron circle left","chevron circle right","chevron circle up","chevron down","chevron left","chevron right","chevron up","cloud download","cloud upload","download","exchange","expand arrows alternate","external alternate","external square alternate","hand point down","hand point down outline","hand point left","hand point left outline","hand point right","hand point right outline","hand point up","hand point up outline","hand pointer","hand pointer outline","history","level down alternate","level up alternate","location arrow","long arrow alternate down","long arrow alternate left","long arrow alternate right","long arrow alternate up","mouse pointer","play","random","recycle","redo","redo alternate","reply","reply all","retweet","share","share square","share square outline","sign-in","sign-out","sign-in alternate","sign-out alternate","sort","sort alphabet down","sort alphabet up","sort amount down","sort amount up","sort down","sort numeric down","sort numeric up","sort up","sync","sync alternate","text height","text width","undo","undo alternate","upload","zoom-in","zoom-out"],["audio description","backward","circle","circle outline","closed captioning","closed captioning outline","compress","eject","expand","expand arrows alternate","fast backward","fast forward","file audio","file audio outline","file video","file video outline","film","forward","headphones","microphone","microphone slash","music","pause","pause circle","pause circle outline","phone volume","play","play circle","play circle outline","podcast","random","redo","redo alternate","rss","rss square","step backward","step forward","stop","stop circle","stop circle outline","sync","sync alternate","undo","undo alternate","video","volume down","volume off","volume up"],["address book","address book outline","address card","address card outline","archive","balance scale","birthday cake","book","briefcase","building","building outline","bullhorn","bullseye","calculator","calendar","calendar outline","calendar alternate","calendar alternate outline","certificate","chart area","chart bar","chart bar outline","chart line","chart pie","clipboard","clipboard outline","coffee","columns","compass","compass outline","copy","copy outline","copyright","copyright outline","cut","edit","edit outline","envelope","envelope outline","envelope open","envelope open outline","envelope square","eraser","fax","file","file outline","file alternate","file alternate outline","folder","folder outline","folder open","folder open outline","globe","industry","paperclip","paste","pen square","pencil alternate","percent","phone","phone square","phone volume","registered","registered outline","save","save outline","sitemap","sticky note","sticky note outline","suitcase","table","tag","tags","tasks","thumbtack","trademark"],["chess","chess bishop","chess board","chess king","chess knight","chess pawn","chess queen","chess rook","square full"],["archive","barcode","bath","bug","code","code branch","coffee","file","file outline","file alternate","file alternate outline","file code","file code outline","filter","fire extinguisher","folder","folder outline","folder open","folder open outline","keyboard","keyboard outline","microchip","qrcode","shield alternate","sitemap","terminal","user secret","window close","window close outline","window maximize","window maximize outline","window minimize","window minimize outline","window restore","window restore outline"],["address book","address book outline","address card","address card outline","american sign language interpreting","assistive listening systems","at","bell","bell outline","bell slash","bell slash outline","bullhorn","comment","comment outline","comment alternate","comment alternate outline","comments","comments outline","envelope","envelope outline","envelope open","envelope open outline","envelope square","fax","inbox","language","microphone","microphone slash","mobile","mobile alternate","paper plane","paper plane outline","phone","phone square","phone volume","rss","rss square","tty","wifi"],["desktop","download","hdd","hdd outline","headphones","keyboard","keyboard outline","laptop","microchip","mobile","mobile alternate","plug","power off","print","save","save outline","server","tablet","tablet alternate","tv","upload"],["dollar sign","euro sign","lira sign","money bill alternate","money bill alternate outline","pound sign","ruble sign","rupee sign","shekel sign","won sign","yen sign"],["bell","bell outline","bell slash","bell slash outline","calendar","calendar outline","calendar alternate","calendar alternate outline","calendar check","calendar check outline","calendar minus","calendar minus outline","calendar plus","calendar plus outline","calendar times","calendar times outline","clock","clock outline","hourglass","hourglass outline","hourglass end","hourglass half","hourglass start","stopwatch"],["adjust","clone","clone outline","copy","copy outline","crop","crosshairs","cut","edit","edit outline","eraser","eye","eye dropper","eye slash","eye slash outline","object group","object group outline","object ungroup","object ungroup outline","paint brush","paste","pencil alternate","save","save outline","tint"],["align center","align justify","align left","align right","bold","clipboard","clipboard outline","clone","clone outline","columns","copy","copy outline","cut","edit","edit outline","eraser","file","file outline","file alternate","file alternate outline","font","heading","i cursor","indent","italic","linkify","list","list alternate","list alternate outline","list ol","list ul","outdent","paper plane","paper plane outline","paperclip","paragraph","paste","pencil alternate","print","quote left","quote right","redo","redo alternate","reply","reply all","share","strikethrough","subscript","superscript","sync","sync alternate","table","tasks","text height","text width","th","th large","th list","trash","trash alternate","trash alternate outline","underline","undo","undo alternate","unlink"],["archive","clone","clone outline","copy","copy outline","cut","file","file outline","file alternate","file alternate outline","file archive","file archive outline","file audio","file audio outline","file code","file code outline","file excel","file excel outline","file image","file image outline","file pdf","file pdf outline","file powerpoint","file powerpoint outline","file video","file video outline","file word","file word outline","folder","folder outline","folder open","folder open outline","paste","save","save outline","sticky note","sticky note outline"],["genderless","mars","mars double","mars stroke","mars stroke horizontal","mars stroke vertical","mercury","neuter","transgender","transgender alternate","venus","venus double","venus mars"],["hand lizard","hand lizard outline","hand paper","hand paper outline","hand peace","hand peace outline","hand point down","hand point down outline","hand point left","hand point left outline","hand point right","hand point right outline","hand point up","hand point up outline","hand pointer","hand pointer outline","hand rock","hand rock outline","hand scissors","hand scissors outline","hand spock","hand spock outline","handshake","handshake outline","thumbs down","thumbs down outline","thumbs up","thumbs up outline"],["ambulance","h square","heart","heart outline","heartbeat","hospital","hospital outline","medkit","plus square","plus square outline","stethoscope","user md","wheelchair"],["adjust","bolt","camera","camera retro","clone","clone outline","compress","expand","eye","eye dropper","eye slash","eye slash outline","file image","file image outline","film","id badge","id badge outline","id card","id card outline","image","image outline","images","images outline","sliders horizontal","tint"],["ban","barcode","bars","beer","bell","bell outline","bell slash","bell slash outline","bug","bullhorn","bullseye","calculator","calendar","calendar outline","calendar alternate","calendar alternate outline","calendar check","calendar check outline","calendar minus","calendar minus outline","calendar plus","calendar plus outline","calendar times","calendar times outline","certificate","check","check circle","check circle outline","check square","check square outline","circle","circle outline","clipboard","clipboard outline","clone","clone outline","cloud","cloud download","cloud upload","coffee","cog","cogs","copy","copy outline","cut","database","dot circle","dot circle outline","download","edit","edit outline","ellipsis horizontal","ellipsis vertical","envelope","envelope outline","envelope open","envelope open outline","eraser","exclamation","exclamation circle","exclamation triangle","external alternate","external square alternate","eye","eye slash","eye slash outline","file","file outline","file alternate","file alternate outline","filter","flag","flag outline","flag checkered","folder","folder outline","folder open","folder open outline","frown","frown outline","hashtag","heart","heart outline","history","home","i cursor","info","info circle","language","magic","meh","meh outline","microphone","microphone slash","minus","minus circle","minus square","minus square outline","paste","pencil alternate","plus","plus circle","plus square","plus square outline","qrcode","question","question circle","question circle outline","quote left","quote right","redo","redo alternate","reply","reply all","rss","rss square","save","save outline","search","search minus","search plus","share","share alternate","share alternate square","share square","share square outline","shield alternate","sign-in","sign-out","signal","sitemap","sliders horizontal","smile","smile outline","sort","sort alphabet down","sort alphabet up","sort amount down","sort amount up","sort down","sort numeric down","sort numeric up","sort up","star","star outline","star half","star half outline","sync","sync alternate","thumbs down","thumbs down outline","thumbs up","thumbs up outline","times","times circle","times circle outline","toggle off","toggle on","trash","trash alternate","trash alternate outline","trophy","undo","undo alternate","upload","user","user outline","user circle","user circle outline","wifi"],["box","boxes","clipboard check","clipboard list","dolly","dolly flatbed","pallet","shipping fast","truck","warehouse"],["ambulance","anchor","balance scale","bath","bed","beer","bell","bell outline","bell slash","bell slash outline","bicycle","binoculars","birthday cake","blind","bomb","book","bookmark","bookmark outline","briefcase","building","building outline","car","coffee","crosshairs","dollar sign","eye","eye slash","eye slash outline","fighter jet","fire","fire extinguisher","flag","flag outline","flag checkered","flask","gamepad","gavel","gift","glass martini","globe","graduation cap","h square","heart","heart outline","heartbeat","home","hospital","hospital outline","image","image outline","images","images outline","industry","info","info circle","key","leaf","lemon","lemon outline","life ring","life ring outline","lightbulb","lightbulb outline","location arrow","low vision","magnet","male","map","map outline","map marker","map marker alternate","map pin","map signs","medkit","money bill alternate","money bill alternate outline","motorcycle","music","newspaper","newspaper outline","paw","phone","phone square","phone volume","plane","plug","plus","plus square","plus square outline","print","recycle","road","rocket","search","search minus","search plus","ship","shopping bag","shopping basket","shopping cart","shower","street view","subway","suitcase","tag","tags","taxi","thumbtack","ticket alternate","tint","train","tree","trophy","truck","tty","umbrella","university","utensil spoon","utensils","wheelchair","wifi","wrench"],["ambulance","band aid","dna","first aid","heart","heart outline","heartbeat","hospital","hospital outline","hospital symbol","pills","plus","stethoscope","syringe","thermometer","user md","weight"],["ambulance","anchor","archive","balance scale","bath","bed","beer","bell","bell outline","bicycle","binoculars","birthday cake","bomb","book","bookmark","bookmark outline","briefcase","bug","building","building outline","bullhorn","bullseye","bus","calculator","calendar","calendar outline","calendar alternate","calendar alternate outline","camera","camera retro","car","clipboard","clipboard outline","cloud","coffee","cog","cogs","compass","compass outline","copy","copy outline","cube","cubes","cut","envelope","envelope outline","envelope open","envelope open outline","eraser","eye","eye dropper","fax","fighter jet","file","file outline","file alternate","file alternate outline","film","fire","fire extinguisher","flag","flag outline","flag checkered","flask","futbol","futbol outline","gamepad","gavel","gem","gem outline","gift","glass martini","globe","graduation cap","hdd","hdd outline","headphones","heart","heart outline","home","hospital","hospital outline","hourglass","hourglass outline","image","image outline","images","images outline","industry","key","keyboard","keyboard outline","laptop","leaf","lemon","lemon outline","life ring","life ring outline","lightbulb","lightbulb outline","lock","lock open","magic","magnet","map","map outline","map marker","map marker alternate","map pin","map signs","medkit","microchip","microphone","mobile","mobile alternate","money bill alternate","money bill alternate outline","moon","moon outline","motorcycle","newspaper","newspaper outline","paint brush","paper plane","paper plane outline","paperclip","paste","paw","pencil alternate","phone","plane","plug","print","puzzle piece","road","rocket","save","save outline","search","shield alternate","shopping bag","shopping basket","shopping cart","shower","snowflake","snowflake outline","space shuttle","star","star outline","sticky note","sticky note outline","stopwatch","subway","suitcase","sun","sun outline","tablet","tablet alternate","tachometer alternate","tag","tags","taxi","thumbtack","ticket alternate","train","trash","trash alternate","trash alternate outline","tree","trophy","truck","tv","umbrella","university","unlock","unlock alternate","utensil spoon","utensils","wheelchair","wrench"],["bell","bell outline","bookmark","bookmark outline","bullhorn","camera","camera retro","cart arrow down","cart plus","certificate","credit card","credit card outline","gem","gem outline","gift","handshake","handshake outline","heart","heart outline","key","shopping bag","shopping basket","shopping cart","star","star outline","tag","tags","thumbs down","thumbs down outline","thumbs up","thumbs up outline","trophy"],["bookmark","bookmark outline","calendar","calendar outline","certificate","circle","circle outline","cloud","comment","comment outline","file","file outline","folder","folder outline","heart","heart outline","map marker","play","square","square outline","star","star outline"],["asterisk","certificate","circle notch","cog","compass","compass outline","crosshairs","life ring","life ring outline","snowflake","snowflake outline","spinner","sun","sun outline","sync"],["baseball ball","basketball ball","bowling ball","football ball","futbol","futbol outline","golf ball","hockey puck","quidditch","table tennis","volleyball ball"],["ban","battery empty","battery full","battery half","battery quarter","battery three quarters","bell","bell outline","bell slash","bell slash outline","calendar","calendar outline","calendar alternate","calendar alternate outline","calendar check","calendar check outline","calendar minus","calendar minus outline","calendar plus","calendar plus outline","calendar times","calendar times outline","cart arrow down","cart plus","exclamation","exclamation circle","exclamation triangle","eye","eye slash","eye slash outline","file","file outline","file alternate","file alternate outline","folder","folder outline","folder open","folder open outline","info","info circle","lock","lock open","minus","minus circle","minus square","minus square outline","plus","plus circle","plus square","plus square outline","question","question circle","question circle outline","shield alternate","shopping cart","sign in alternate","sign out alternate","thermometer empty","thermometer full","thermometer half","thermometer quarter","thermometer three quarters","thumbs down","thumbs down outline","thumbs up","thumbs up outline","toggle off","toggle on","unlock","unlock alternate"],["address book","address book outline","address card","address card outline","bed","blind","child","female","frown","frown outline","id badge","id badge outline","id card","id card outline","male","meh","meh outline","power off","smile","smile outline","street view","user","user outline","user circle","user circle outline","user md","user plus","user secret","user times","users","wheelchair"],["ambulance","bicycle","bus","car","fighter jet","motorcycle","paper plane","paper plane outline","plane","rocket","ship","shopping cart","space shuttle","subway","taxi","train","truck","wheelchair"],["archive","book","bookmark","bookmark outline","edit","edit outline","envelope","envelope outline","envelope open","envelope open outline","eraser","file","file outline","file alternate","file alternate outline","folder","folder outline","folder open","folder open outline","keyboard","keyboard outline","newspaper","newspaper outline","paper plane","paper plane outline","paperclip","paragraph","pen square","pencil alternate","quote left","quote right","sticky note","sticky note outline","thumbtack"],["500px","accessible","accusoft","adn","adversal","affiliatetheme","algolia","amazon","amazon pay","amilia","android","angellist","angrycreative","angular","app store","app store ios","apper","apple","apple pay","asymmetrik","audible","autoprefixer","avianex","aviato","aws","bandcamp","behance","behance square","bimobject","bitbucket","bitcoin","bity","black tie","blackberry","blogger","blogger b","bluetooth","bluetooth b","btc","buromobelexperte","buysellads","cc amazon pay","cc amex","cc apple pay","cc diners club","cc discover","cc jcb","cc mastercard","cc paypal","cc stripe","cc visa","centercode","chrome","cloudscale","cloudsmith","cloudversify","codepen","codiepie","connectdevelop","contao","cpanel","creative commons","css3","css3 alternate","cuttlefish","d and d","dashcube","delicious","deploydog","deskpro","deviantart","digg","digital ocean","discord","discourse","dochub","docker","draft2digital","dribbble","dribbble square","dropbox","drupal","dyalog","earlybirds","edge","elementor","ember","empire","envira","erlang","ethereum","etsy","expeditedssl","facebook","facebook f","facebook messenger","facebook square","firefox","first order","firstdraft","flickr","flipboard","fly","font awesome","font awesome alternate","font awesome flag","fonticons","fonticons fi","fort awesome","fort awesome alternate","forumbee","foursquare","free code camp","freebsd","get pocket","gg","gg circle","git","git square","github","github alternate","github square","gitkraken","gitlab","gitter","glide","glide g","gofore","goodreads","goodreads g","google","google drive","google play","google plus","google plus g","google plus square","google wallet","gratipay","grav","gripfire","grunt","gulp","hacker news","hacker news square","hips","hire a helper","hooli","hotjar","houzz","html5","hubspot","imdb","instagram","internet explorer","ioxhost","itunes","itunes note","jenkins","joget","joomla","js","js square","jsfiddle","keycdn","kickstarter","kickstarter k","korvue","laravel","lastfm","lastfm square","leanpub","less","linechat","linkedin","linkedin alternate","linode","linux","lyft","magento","maxcdn","medapps","medium","medium m","medrt","meetup","microsoft","mix","mixcloud","mizuni","modx","monero","napster","nintendo switch","node","node js","npm","ns8","nutritionix","odnoklassniki","odnoklassniki square","opencart","openid","opera","optin monster","osi","page4","pagelines","palfed","patreon","paypal","periscope","phabricator","phoenix framework","php","pied piper","pied piper alternate","pied piper pp","pinterest","pinterest p","pinterest square","playstation","product hunt","pushed","python","qq","quinscape","quora","ravelry","react","rebel","redriver","reddit","reddit alien","reddit square","rendact","renren","replyd","resolving","rocketchat","rockrms","safari","sass","schlix","scribd","searchengin","sellcast","sellsy","servicestack","shirtsinbulk","simplybuilt","sistrix","skyatlas","skype","slack","slack hash","slideshare","snapchat","snapchat ghost","snapchat square","soundcloud","speakap","spotify","stack exchange","stack overflow","staylinked","steam","steam square","steam symbol","sticker mule","strava","stripe","stripe s","studiovinari","stumbleupon","stumbleupon circle","superpowers","supple","telegram","telegram plane","tencent weibo","themeisle","trello","tripadvisor","tumblr","tumblr square","twitch","twitter","twitter square","typo3","uber","uikit","uniregistry","untappd","usb","ussunnah","vaadin","viacoin","viadeo","viadeo square","viber","vimeo","vimeo square","vimeo v","vine","vk","vnv","vuejs","wechat","weibo","weixin","whatsapp","whatsapp square","whmcs","wikipedia w","windows","wordpress","wordpress simple","wpbeginner","wpexplorer","wpforms","xbox","xing","xing square","y combinator","yahoo","yandex","yandex international","yelp","yoast","youtube","youtube square"]))),TY=Wv([].concat(CY,["chess rock","ordered list","unordered list","user doctor","shield","puzzle","add circle","add square","add to calendar","add to cart","add user","add","alarm mute","alarm","ald","als","announcement","area chart","area graph","arrow down cart","asexual","asl interpreting","asl","assistive listening devices","attach","attention","balance","bar","bathtub","battery four","battery high","battery low","battery one","battery three","battery two","battery zero","birthday","block layout","bluetooth alternative","broken chain","browser","call square","call","cancel","cart","cc","chain","chat","checked calendar","checkmark","circle notched","close","cny","cocktail","commenting","computer","configure","content","deafness","delete calendar","delete","detective","discussions","doctor","dollar","dont","drivers license","dropdown","emergency","envira gallery","erase","eur","euro","eyedropper","factory","favorite","feed","female homosexual","file text","file text outline","find","first aid","fork","game","gay","gbp","google plus circle","google plus official","grab","graduation","grid layout","group","h","hand victory","handicap","hard of hearing","header","help circle","help","heterosexual","hide","hotel","hourglass four","hourglass full","hourglass one","hourglass three","hourglass two","idea","ils","in cart","inr","intergender","intersex","jpy","krw","lab","law","legal","lesbian","lightning","like","line graph","linkedin square","linkify","lira","list layout","magnify","mail forward","mail outline","mail square","mail","male homosexual","man","marker","mars alternate","mars horizontal","mars vertical","microsoft edge","military","ms edge","mute","new pied piper","non binary transgender","numbered list","options","other gender horizontal","other gender vertical","other gender","payment","paypal card","pencil square","photo","picture","pie chart","pie graph","pied piper hat","pin","plus cart","point","pointing down","pointing left","pointing right","pointing up","pound","power cord","power","privacy","r circle","rain","record","refresh","remove circle","remove from calendar","remove user","remove","repeat","rmb","rouble","rub","ruble","rupee","s15","selected radio","send","setting","settings","shekel","sheqel","shipping","shop","shuffle","shutdown","sidebar","signing","signup","sliders","soccer","sort alphabet ascending","sort alphabet descending","sort ascending","sort content ascending","sort content descending","sort descending","sort numeric ascending","sort numeric descending","sound","spy","stripe card","student","talk","target","teletype","television","text cursor","text telephone","theme","thermometer","thumb tack","time","tm","toggle down","toggle left","toggle right","toggle up","translate","travel","treatment","triangle down","triangle left","triangle right","triangle up","try","unhide","unlinkify","unmute","usd","user cancel","user close","user delete","user x","vcard","video camera","video play","volume control phone","wait","warning circle","warning sign","warning","wi-fi","winner","wizard","woman","won","wordpress beginner","wordpress forms","world","write square","x","yen","zip","zoom in","zoom out","zoom","bitbucket square","checkmark box","circle thin","cloud download","cloud upload","compose","conversation","credit card alternative","currency","dashboard","diamond","disk","exchange","external share","external square","external","facebook official","food","hourglass zero","level down","level up","log out","meanpath","money","move","pencil","protect","radio","remove bookmark","resize horizontal","resize vertical","sign in","sign out","spoon","star half empty","star half full","ticket","times rectangle","write","youtube play"])),NY=(Wv([].concat(TY,["left dropdown"])),Object.prototype.hasOwnProperty);var RY=function(e,t){return null!=e&&NY.call(e,t)};var PY=function(e,t){return null!=e&&Nn(e,t,RY)};var AY=function(e,t){var n={};return t=Mn(t,3),jn(e,(function(e,r,i){sy(n,r,t(e,r,i))})),n};var DY=function(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r};var OY=function(e,t,n,r){return Un(e,(function(e,i,a){t(r,e,n(e),a)})),r};var LY=function(e,t){return function(n,r){var i=He(n)?DY:OY,a=t?t():{};return i(n,e,Mn(r,2),a)}}((function(e,t,n){sy(e,n,t)})),MY=function(e){return LY(Lk(t.Children.toArray(e),t.isValidElement),"key")},FY=function(e,t,n){return PY(n,e)?n[e]:t[e]},jY=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n={},r=function(e,t){var n={},r=[];return Pm(At(e),(function(e){PY(t,e)?r.length&&(n[e]=r,r=[]):r.push(e)})),[n,r]}(e,t),i=r[0],a=r[1];return Pm(At(t),(function(r){PY(i,r)&&Pm(i[r],(function(r){n[r]=FY(r,e,t)})),n[r]=FY(r,e,t)})),Pm(a,(function(r){n[r]=FY(r,e,t)})),n};function UY(e,n,r){void 0===r&&(r={});var i=e.key,a=r,o=a.animation,s=a.directional,u=a.duration,c=a.transitionOnMount,l=void 0!==c&&c,h=a.visible,f=void 0===h||h;return t.createElement(JY,{animation:o,directional:s,duration:u,key:i,onHide:n,reactKey:i,transitionOnMount:l,visible:f},e)}UY.handledProps=[];var qY=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={handleOnHide:function(e,n){var r=n.reactKey;t.setState((function(e){var t=a({},e.children);return delete t[r],{children:t}}))}},t}return fm(n,e),n.getDerivedStateFromProps=function(e,n){var r=e.animation,i=e.duration,a=e.directional,o=n.children;if("undefined"===typeof o)return{children:AY(MY(e.children),(function(e){return UY(e,n.handleOnHide,{animation:r,duration:i,directional:a})}))};var s=MY(e.children),u=jY(o,s);return Pm(u,(function(e,c){var l=PY(o,c),h=PY(s,c),f=o[c],d=!Cn(f,"props.visible");if(!h||l&&!d)if(h||!l||d){var p=f.props,v=p.visible,m=p.transitionOnMount;u[c]=UY(e,n.handleOnHide,{animation:r,duration:i,directional:a,transitionOnMount:m,visible:v})}else u[c]=t.cloneElement(f,{visible:!1});else u[c]=UY(e,n.handleOnHide,{animation:r,duration:i,directional:a,transitionOnMount:!0})})),{children:u}},n.prototype.render=function(){var e=this.state.children,r=y(n,this.props),i=g(n,this.props);return t.createElement(r,i,Sm(e))},n}(t.Component);qY.handledProps=["animation","as","children","directional","duration"],qY.propTypes={},qY.defaultProps={as:t.Fragment,animation:"fade",duration:500};var VY,zY,BY="INITIAL",WY="ENTERED",HY="ENTERING",GY="EXITED",KY="EXITING",QY="UNMOUNTED";var YY=((VY={})[WY]="show",VY[GY]="hide",VY),XY=((zY={})[HY]="show",zY[KY]="hide",zY),JY=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={status:BY},t.handleStart=function(e){var n=t.props.duration,r=YY[e],i=IY(n,r);t.timeoutId=setTimeout((function(){return t.setState({status:e})}),i)},t.updateStatus=function(e){if(e.status!==t.state.status&&(clearTimeout(t.timeoutId),t.state.nextStatus&&t.handleStart(t.state.nextStatus)),!e.animating&&t.state.animating&&Zm(t.props,"onStart",null,a({},t.props,{status:t.state.status})),e.animating&&!t.state.animating){var n=t.state.status===WY?"onShow":"onHide";Zm(t.props,"onComplete",null,a({},t.props,{status:t.state.status})),Zm(t.props,n,null,a({},t.props,{status:t.state.status}))}},t.computeClasses=function(){var e=t.props,n=e.animation,r=e.directional,i=e.children,a=t.state,o=a.animating,u=a.status,c=Cn(i,"props.className");return(tm(r)?Tm(SY,n):r)?s(n,c,l(o,"animating"),l(u===HY,"in"),l(u===KY,"out"),l(u===GY,"hidden"),l(u!==GY,"visible"),"transition"):s(n,c,l(o,"animating transition"))},t.computeStyle=function(){var e=t.props,n=e.children,r=e.duration,i=t.state.status,o=Cn(n,"props.style"),s=XY[i];return a({},o,{animationDuration:s&&IY(r,s)+"ms"})},t}fm(n,e),n.getDerivedStateFromProps=function(e,t){var n=function(e){var t=e.mountOnShow,n=e.status,r=e.transitionOnMount,i=e.visible,a=e.unmountOnHide;if(i){if(n===BY)return r?{animating:!0,status:HY,nextStatus:WY}:{animating:!1,status:WY,nextStatus:void 0};if(n===QY)return{animating:!0,status:HY,nextStatus:WY};if(n===GY||n===KY)return{animating:!0,status:HY,nextStatus:WY};if(n===HY)return{};if(n===WY)return{animating:!1,status:WY,nextStatus:void 0}}if(n===BY)return t||a?{animating:!1,status:QY,nextStatus:void 0}:{animating:!1,status:GY,nextStatus:void 0};if(n===WY||n===HY)return{animating:!0,status:KY,nextStatus:a?QY:GY};if(n===KY)return{};if(n===GY)return{animating:!1,status:GY,nextStatus:void 0};if(n===QY)return{animating:!1,status:QY,nextStatus:void 0};throw new Error("Transition:computeStatuses(): an unexpected status transition: { visible: "+i+", status: "+n+" }")}({mountOnShow:e.mountOnShow,status:t.status,transitionOnMount:e.transitionOnMount,visible:e.visible,unmountOnHide:e.unmountOnHide});return n};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus({})},r.componentDidUpdate=function(e,t){this.updateStatus(t)},r.componentWillUnmount=function(){clearTimeout(this.timeoutId)},r.render=function(){var e=this.props.children;return this.state.status===QY?null:(0,t.cloneElement)(e,{className:this.computeClasses(),style:this.computeStyle()})},n}(t.Component);JY.INITIAL=BY,JY.ENTERED=WY,JY.ENTERING=HY,JY.EXITED=GY,JY.EXITING=KY,JY.UNMOUNTED=QY,JY.Group=qY,JY.handledProps=["animation","children","directional","duration","mountOnShow","onComplete","onHide","onShow","onStart","reactKey","transitionOnMount","unmountOnHide","visible"],JY.propTypes={},JY.defaultProps={animation:"fade",duration:500,visible:!0,mountOnShow:!0,transitionOnMount:!1,unmountOnHide:!1};var $Y=function(e){var t=e.onChange,n=e.src;return(0,ap.jsxs)("label",{htmlFor:"photo-upload",className:"custom-file-upload fas",children:[(0,ap.jsx)("div",{className:"img-wrap img-upload",children:(0,ap.jsx)("img",{for:"photo-upload",src:n})}),(0,ap.jsx)("input",{id:"photo-upload",type:"file",onChange:t})]})},ZY=function(e){var t=e.onChange,n=e.value;return(0,ap.jsxs)("div",{className:"field",children:[(0,ap.jsx)("label",{htmlFor:"name",children:"name:"}),(0,ap.jsx)("input",{id:"name",type:"text",onChange:t,maxlength:"25",value:n,placeholder:"Alexa",required:!0})]})},eX=function(e){var t=e.onChange,n=e.value;return(0,ap.jsxs)("div",{className:"field",children:[(0,ap.jsx)("label",{htmlFor:"status",children:"status:"}),(0,ap.jsx)("input",{id:"status",type:"text",onChange:t,maxLength:"35",value:n,placeholder:"It's a nice day!",required:!0})]})},tX=function(e){var t=e.onSubmit,n=e.src,r=e.name,i=e.status;return(0,ap.jsx)("div",{className:"cards",children:(0,ap.jsxs)("form",{class:"my_form",onSubmit:t,children:[(0,ap.jsx)("h1",{children:"Profile Card"}),(0,ap.jsx)("label",{className:"custom-file-upload fas",children:(0,ap.jsx)("div",{className:"img-wrap",children:(0,ap.jsx)("img",{for:"photo-upload",src:n})})}),(0,ap.jsx)("div",{className:"name",children:r}),(0,ap.jsx)("div",{className:"status",children:i}),(0,ap.jsx)("button",{class:"my_button",type:"submit",className:"edit",children:"Edit Profile "})]})})},nX=function(e){var t=e.onSubmit,n=e.children;return(0,ap.jsx)("div",{className:"cards",children:(0,ap.jsxs)("form",{class:"my_form",onSubmit:t,children:[(0,ap.jsx)("h1",{children:"Profile Card"}),n,(0,ap.jsx)("button",{class:"my_button",type:"submit",className:"save",children:"Save "})]})})},rX=(t.Component,$Y);var iX=function(e){var n=e.post,r=e.time,i=e.post_id,a=e.post_image,o=e.likes,s=e.favorites,u=e.current_user_firstname,c=e.current_user_lastname,l=e.current_user_profile_image,h=e.current_user_id,f=nr((0,t.useState)({postID:[]}),2),d=(f[0],f[1],nr((0,t.useState)({visible:!1}),2)),p=d[0],v=d[1],m=nr((0,t.useState)(),2),g=m[0],y=(m[1],nr((0,t.useState)(),2)),k=y[0],b=(y[1],(0,t.useRef)("https://emmanuelcodes.netlify.app/profile_image.7e798b21.jpg"),nr((0,t.useState)(n),2)),w=b[0],_=b[1],x=nr((0,t.useState)(r),2),E=x[0],I=(x[1],nr((0,t.useState)(o),2)),S=I[0],C=I[1],T=nr((0,t.useState)(s),2),N=T[0],R=T[1],P=nr((0,t.useState)(a),2),A=(P[0],P[1],nr((0,t.useState)(u),2)),D=(A[0],A[1],nr((0,t.useState)(c),2)),O=(D[0],D[1],nr((0,t.useState)(l),2)),L=(O[0],O[1],nr((0,t.useState)(h),2)),M=(L[0],L[1],nr((0,t.useState)(i),2)),F=M[0],j=(M[1],UL(YF,"posts",i)),U=(0,t.useRef)("#34CCAD"),q=(0,t.useRef)("#000000"),V=(0,t.useRef)("#edf756"),z=(0,t.useRef)("#d0bdf4"),B=(0,t.useRef)("#a28089"),W=(0,t.useRef)("#a0d2eb"),H=(0,t.useRef)("#FFFFF0"),G=nr((0,t.useState)(1),2),K=G[0],Q=G[1],Y=nr((0,t.useState)("#000000"),1)[0],X=nr((0,t.useState)("black"),2),J=X[0],$=X[1],Z=nr((0,t.useState)(1),2),ee=Z[0],te=Z[1],ne=nr((0,t.useState)("black"),2),re=ne[0],ie=ne[1],ae=nr((0,t.useState)(1),2),oe=ae[0],se=ae[1],ue=nv(),ce=((0,t.useRef)("https://semantic-ui.com/images/avatar2/small/patrick.png"),function(e,t){var n=t.name;t.value;switch(n){case"delete":!function(){le.apply(this,arguments)}();break;case"likes":fe();break;case"start":he();break;case"user":de()}});function le(){return(le=yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("delete button is clicked!"),e.next=3,fF(j);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var he=function(){se(oe+1),oe%2===1?(ie(U.current),R(N+1),hF(j,{favorites:1},{merge:!0}).then((function(){return console.log("favorites updated")}))):(ie(q.current),R(N-1),hF(j,{favorites:0},{merge:!0}).then((function(){return console.log("favorites updated")})))},fe=function(){te(ee+1),ee%2===1?($(U.current),C(S+1),hF(j,{likes:1},{merge:!0}).then((function(){return console.log("likes updated")}))):($(q.current),C(S-1),hF(j,{likes:0},{merge:!0}).then((function(){return console.log("likes updated")})))},de=function(){ue("image-uploader")};return(0,t.useEffect)((function(){v(!1),$(S>0?U.current:q.current),ie(N>0?U.current:q.current)}),[]),(0,ap.jsx)("div",{children:(0,ap.jsxs)($g,{className:"ui centered card",id:"livePostCardview",style:{width:"100%",borderRadius:"1em",borderWidth:"medium",borderColor:"red",backgroundColor:"#e5eaf5"},children:[(0,ap.jsxs)("div",{className:"content",children:[(0,ap.jsx)(oy,{name:"delete",value:"del",className:"right floated ui circular times pastel gray icon button","data-tooltip":"Delete.","data-position":"top center",style:{color:Y,backgroundColor:B.current},onClick:ce,children:(0,ap.jsx)("i",{className:"times icon"})}),(0,ap.jsx)(oy,{name:"likes",value:"heart",className:"right floated ui circular pastel gray icon button","data-tooltip":"Like.","data-position":"top center",style:{color:J,backgroundColor:z.current},onClick:ce,children:(0,ap.jsx)("i",{className:"like icon"})}),(0,ap.jsx)(oy,{name:"star",value:"favorites",className:"right floated ui circular pastel gray icon button","data-tooltip":"Favorite.","data-position":"top center",style:{color:re,backgroundColor:V.current},onClick:he,children:(0,ap.jsx)("i",{className:"star icon"})}),(0,ap.jsx)(oy,{name:"user",value:"user_name",className:"left floated ui circular pastel gray icon button",style:{color:H.current,backgroundColor:"black"},onClick:ce,children:(0,ap.jsx)("i",{className:"user icon"})}),(0,ap.jsx)("div",{className:"ui left floated text",style:{width:"fit-content"},children:E}),(0,ap.jsx)("p",{}),(0,ap.jsx)("div",{className:"description",children:w}),(0,ap.jsx)(EY,{iverted:!0,horizontal:!0,color:"#a28089",children:"Edit Post Or Reply"}),(0,ap.jsx)(JY,{visible:p,animation:"scale",duration:500,children:(0,ap.jsx)("textarea",{id:"input-element",className:"ui segment",type:"text",value:g,name:"message",style:{width:"100%"},onChange:function(e){e.preventDefault(),K%2===0&&_(e.target.value),hF(j,{post:e.target.value},{merge:!0}).then((function(){return console.log("post updated")}))},placeholder:"Type anything..."})})]}),(0,ap.jsxs)("div",{children:[(0,ap.jsx)(oy,{className:"ui circular icon button",style:{backgroundColor:W.current,width:"fit-item",color:"#1E90FF",marginBottom:"10px"},value:F,onClick:function(e){e.preventDefault(),v(!p),Q(K+1)},"data-tooltip":"Edit.","data-position":"top center",content:p?"Hide":"Show",children:(0,ap.jsx)("i",{className:"edit icon"})}),(0,ap.jsx)(oy,{className:"ui circular icon button",style:{backgroundColor:W.current,width:"fit-item",color:"#1E90FF",marginBottom:"10px"},value:F,onClick:function(e){e.preventDefault(),console.log("reply"),k%2===0&&_(e.target.value),hF(j,{post:e.target.value},{merge:!0}).then((function(){return console.log("post updated")}))},"data-tooltip":"Reply.","data-position":"top center",content:p?"Hide":"Show",children:(0,ap.jsx)("i",{className:"reply icon"})})]})]})})},aX=n(610);var oX=function(e){var n=e.u_firstname,r=e.u_lastname,i=e.u_profile_image,a=e.u_id,o=nr((0,t.useState)(""),2),s=(o[0],o[1],nr((0,t.useState)(!1),2)),u=(s[0],s[1],nv(),(0,t.useRef)(null)),c=nr((0,t.useState)(),2),l=(c[0],c[1],nr((0,t.useState)("Date"),2)),h=l[0],f=l[1],d=nr((0,t.useState)("Post goes here"),2),p=(d[0],d[1]),v=nr((0,t.useState)(),2),m=(v[0],v[1]),g=nr((0,t.useState)(),2),y=(g[0],g[1]),k=nr((0,t.useState)(),2),b=(k[0],k[1]),w=nr((0,t.useState)({user_firstname:n}),2),_=w[0],x=w[1],E=nr((0,t.useState)({user_lastname:r}),2),I=E[0],S=E[1],C=nr((0,t.useState)({user_profile_image:i}),2),T=(C[0],C[1]),N=nr((0,t.useState)({user_id:a}),2),R=N[0],P=N[1],A=nr((0,t.useState)({postsDictionary:{}}),2),D=A[0],O=A[1],L=nr((0,t.useState)({postsFromFirebase:[]}),2),M=L[0],F=(L[1],nr((0,t.useState)(),2)),j=(F[0],F[1],(0,aX.v4)()),U=(0,t.useRef)(window.innerWidth),q=(0,t.useRef)(window.innerHeight),V=((0,t.useRef)(),(0,t.useRef)("ui grid"),(0,t.useRef)("row"),(0,t.useRef)("300px")),z=(0,t.useRef)("5%"),B=(0,t.useRef)("ui center aligned icon header"),W=(0,t.useRef)("sticky note outline"),H=nr((0,t.useState)("800px"),2),G=H[0],K=(H[1],nr((0,t.useState)(),2)),Q=K[0],Y=K[1],X=nr((0,t.useState)(),2),J=X[0],$=X[1],Z=(0,t.useRef)("80%"),ee=nr((0,t.useState)(),2),te=ee[0],ne=ee[1],re=nr((0,t.useState)(),2),ie=re[0],ae=re[1],oe=nr((0,t.useState)("big"),2),se=(oe[0],oe[1],nr((0,t.useState)("15px"),2)),ue=(se[0],se[1],nr((0,t.useState)(),2)),ce=(ue[0],ue[1]),le=nr((0,t.useState)(),2),he=le[0],fe=le[1],de=nr((0,t.useState)(),2),pe=(de[0],de[1],nr((0,t.useState)(),2)),ve=(pe[0],pe[1]),me=((0,t.useRef)("palegreen"),(0,t.useRef)("black"),nr((0,t.useState)(),2)),ge=(me[0],me[1],nr((0,t.useState)(),2)),ye=(ge[0],ge[1],nr((0,t.useState)(),2)),ke=(ye[0],ye[1],nr((0,t.useState)(),2)),be=(ke[0],ke[1],nr((0,t.useState)(),2)),we=(be[0],be[1],nr((0,t.useState)(),2)),_e=(we[0],we[1],nr((0,t.useState)(!1),2)),xe=(_e[0],_e[1],nr((0,t.useState)(!1),2)),Ee=(xe[0],xe[1],nr((0,t.useState)(!1),2)),Ie=(Ee[0],Ee[1],nr((0,t.useState)(!1),2)),Se=(Ie[0],Ie[1],nr((0,t.useState)(!1),2)),Ce=(Se[0],Se[1],nr((0,t.useState)(!1),2)),Te=(Ce[0],Ce[1],nr((0,t.useState)(),2)),Ne=Te[0],Re=Te[1],Pe=nr((0,t.useState)(),2),Ae=Pe[0],De=Pe[1],Oe=nr((0,t.useState)(),2),Le=Oe[0],Me=Oe[1],Fe=nr((0,t.useState)(),2),je=(Fe[0],Fe[1],nr((0,t.useState)(),2)),Ue=(je[0],je[1],(0,t.useRef)("#1E90FF"),(0,t.useRef)("#FFFAFA")),qe=((0,t.useRef)("#F0EFE7"),nr((0,t.useState)(),2)),Ve=(qe[0],qe[1],nr((0,t.useState)(),2)),ze=(Ve[0],Ve[1],nr((0,t.useState)(),2));ze[0],ze[1],(0,t.useEffect)((function(){var e=U.current,t=q.current;console.log("In notes"),e<t+200?(fe("inline"),ce("none"),Y(1),$(6),ne(10),ae("large"),Re("90%"),De("100%"),Me("20px")):(fe("none"),ce("inline"),ae("huge"),Y(2),$(6),ne(10),ve("2.4%"),ve("3.3%"),Re("90%"),De("100%"),Me("20px")),YF.collection("posts").get().then((function(e){e.forEach((function(e){D[e.id]=e.data()})),console.log("In notes2"),O(D),Object.keys(D).forEach(function(){var e=yi(pi().mark((function e(t,n){var r,i,a,o,s,u,c,l,h,d;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0!==n&&(r=D[t].time,i=D[t].post,a=D[t].post_id,o=D[t].likes,s=D[t].favorites,u=D[t].firstname,c=D[t].lastname,l=D[t].profile_image,h=D[t].user_id,M.postsFromFirebase.push({time:r,post:i,post_id:a,likes:o,favorites:s,firstname:"current_user_firstname",lastname:"current_user_lastname",profile_image_uri:"current_user_profile_image"}),f(r),p(i),b(a),m(o),y(s),x(u),S(c),T(l),P(h),d=YF.collection("posts"),"",function(){var e=yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.count().get();case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())})).catch((function(e){}))}),[M]);var Be=function(e){e.preventDefault(),console.log("clicked the send button");var t=u.current.value,a=(new Date).toLocaleDateString("en-us",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),o=j.slice(0,8);YF.collection("posts").doc(o).set({post:t,time:a,likes:0,favorites:0,post_id:o,firstname:n,lastname:r,profile_image:i,user_id:R}),p(t),f(a),b(o),y(0),m(0),x(_),S(I),P(R),console.log("p"+JSON.stringify(M)),M.postsFromFirebase.push({time:a,post:t,post_id:o,likes:0,favorites:0,firstname:_,lastname:I,user_id:R})},We=function(e){e.preventDefault(),console.log("post: "+u.current.value)};window.addEventListener("load",(function(){He()}));var He=function(){YF.collection("posts").get().then((function(e){e.forEach((function(e){var t=e.data();console.log(e.id,"=>",t.post)}))})).catch((function(e){console.log("In FetchData: Error getting documents: ",e)}))};return(0,ap.jsxs)(hm,{columns:Q,reversed:"mobile",stackable:!0,children:[(0,ap.jsx)("link",{rel:"stylesheet",href:"/home/emmanuel/Desktop/ReactJSProjects/Diary/frontend/src/styles/notebookComponent.css"}),(0,ap.jsxs)(hm.Row,{id:"outerRow",style:{paddingTop:z.current,height:V.current},stretched:!0,children:[(0,ap.jsx)(hm.Column,{width:J,children:(0,ap.jsx)(Yn,{style:{height:Z.current},children:(0,ap.jsxs)("div",{id:"notebook-element",children:[(0,ap.jsx)("h2",{className:"text-center mb-2",children:(0,ap.jsxs)("h3",{className:B.current,children:[(0,ap.jsx)("i",{className:W.current}),"Write what comes to mind!"]})}),(0,ap.jsx)(hm,{children:(0,ap.jsxs)(hm.Row,{columns:2,children:[(0,ap.jsxs)(hm.Column,{width:13,children:[" ",(0,ap.jsx)("textarea",{rows:"10",id:"input-element",className:"ui segment",type:"text",size:"big",ref:u,name:"message",style:{height:Ne,width:Ae,borderTopLeftRadius:Le,borderTopRightRadius:Le,borderBottomLeftRadius:Le,borderBottomRightRadius:Le},onChange:We,placeholder:"Type anything..."})," "]}),(0,ap.jsx)(hm.Column,{width:3,style:{paddingLeft:"0px"},children:(0,ap.jsx)("div",{id:"mobile-button",children:(0,ap.jsxs)(oy,{className:"ui circular plus icon purple button",type:"submit",value:h,onClick:Be,style:{color:Ue,width:"fit-content",height:"fit-content",marginLeft:"0%",marginTop:"100%",display:he},"data-tooltip":"Press to send note to save on database.","data-position":"top center",children:[" ",(0,ap.jsx)("i",{className:ie+" plus icon"})]})})})]})})]})})}),(0,ap.jsx)(hm.Column,{width:te,style:{height:"100%",overflow:"scroll",maxHeight:G},children:(0,ap.jsxs)(Yn,{style:{backgroundColor:"#F3FDFE"},children:[" ",M.postsFromFirebase.map((function(e){if(null!=e.post&&null!=e.time)return(0,ap.jsx)("div",{style:{marginTop:"15px"},children:(0,ap.jsx)(iX,{post:e.post,time:e.time,post_id:e.post_id,likes:e.likes,favorites:e.favorites,firstname:e.firstname,lastname:e.lastname,profile_image:e.profile_image})})}))]})})]})]})};function sX(e){var n=e.children,r=e.className,i=e.content,o=s("sub header",r),u=g(sX,e),c=y(sX,e);return t.createElement(c,a({},u,{className:o}),Bn(n)?i:n)}sX.handledProps=["as","children","className","content"],sX.propTypes={},sX.create=rm(sX,(function(e){return{content:e}}));var uX=sX;function cX(e){var n=e.children,r=e.className,i=e.content,o=s("content",r),u=g(cX,e),c=y(cX,e);return t.createElement(c,a({},u,{className:o}),Bn(n)?i:n)}cX.handledProps=["as","children","className","content"],cX.propTypes={};var lX=cX;function hX(e){var n=e.attached,r=e.block,i=e.children,o=e.className,u=e.color,c=e.content,d=e.disabled,v=e.dividing,m=e.floated,k=e.icon,b=e.image,w=e.inverted,_=e.size,x=e.sub,E=e.subheader,I=e.textAlign,S=s("ui",u,_,l(r,"block"),l(d,"disabled"),l(v,"dividing"),h(m,"floated"),l(!0===k,"icon"),l(!0===b,"image"),l(w,"inverted"),l(x,"sub"),f(n,"attached"),p(I),"header",o),C=g(hX,e),T=y(hX,e);if(!Bn(i))return t.createElement(T,a({},C,{className:S}),i);var N=Rg.create(k,{autoGenerateKey:!1}),R=Ug.create(b,{autoGenerateKey:!1}),P=uX.create(E,{autoGenerateKey:!1});return N||R?t.createElement(T,a({},C,{className:S}),N||R,(c||P)&&t.createElement(lX,null,c,P)):t.createElement(T,a({},C,{className:S}),c,P)}hX.handledProps=["as","attached","block","children","className","color","content","disabled","dividing","floated","icon","image","inverted","size","sub","subheader","textAlign"],hX.propTypes={},hX.Content=lX,hX.Subheader=uX;var fX=hX;function dX(){return(dX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pX(e,t){return(pX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var vX={"Upload a image":"Suba una imagen","You must edit the image in order to resize it":"Debe editar la imagen para disminuir su tama\xf1o","too large":"muy grande","Open the editor panel":"Abra el panel de edici\xf3n","Download the image":"Descarge la imagen","Control Panel":"Panel de control",Remove:"Quitar",Quality:"Calidad","Max dimensions":"Dimensiones","aspect-ratio":"relaci\xf3n-aspecto","max-width(px)":"max. ancho","max-height(px)":"max. alto",Format:"Formato",Crop:"Recortar","width(px)":"ancho(px)","height(px)":"altura(px)",Save:"Guardar",Contrast:"Contraste",Blur:"Blur",Brightness:"Brillo",Grayscale:"Scala de gris",Saturate:"Saturaci\xf3n",Sepia:"Sepia",Rotate:"Rotar",Undo:"Deshacer"},mX={"Upload a image":"Upload a image","You must edit the image in order to resize it":"You must edit the image in order to resize it","too large":"too large","Open the editor panel":"Open the editor panel","Download the image":"Download the image","Control Panel":"Control Panel",Quality:"Quality","Max dimensions":"Max dimensions","aspect-ratio":"aspect-ratio","max-width(px)":"max-width(px)","max-height(px)":"max-height(px)",Format:"Format",Crop:"Crop","width(px)":"width(px)","height(px)":"height(px)",Remove:"Remove",Save:"Save",Contrast:"Contrast",Blur:"Blur",Brightness:"Brightness",Grayscale:"Grayscale",Saturate:"Saturate",Sepia:"Sepia",Rotate:"Rotate",Undo:"Undo"},gX={"Upload a image":"Charger une image","You must edit the image in order to resize it":"Vous devez \xe9diter l'image pour changer sa taille","too large":"Trop grande","Open the editor panel":"Ouvrir le panneau d'\xe9dition","Download the image":"T\xe9l\xe9charger l'image","Control Panel":"Panneau de commande",Remove:"Supprimer",Quality:"Qualit\xe9","Max dimensions":"Dimensions maximales","aspect-ratio":"rapport de forme","max-width(px)":"largeur max.","max-height(px)":"hauteur max",Format:"Format",Crop:"Recadrer","width(px)":"largeur(px)","height(px)":"hauteur(px)",Save:"Sauvez",Contrast:"Contraste",Blur:"Blur",Brightness:"Luminosit\xe9",Grayscale:"Grayscale",Saturate:"Saturer",Sepia:"Seiche",Undo:"Annuler"},yX={"Upload a image":"Bild hochladen","You must edit the image in order to resize it":"Sie m\xfcssen das Bild bearbeiten, um seine Gr\xf6\xdfe zu \xe4ndern","too large":"zu gro\xdf","Open the editor panel":"Editor-Fenster \xf6ffnen","Download the image":"Bild herunterladen","Control Panel":"Bedienfeld",Quality:"Qualit\xe4t","Max dimensions":"Maximale Gr\xf6\xdfe","aspect-ratio":"Seitenverh\xe4ltnis","max-width(px)":"Max. Breite(px)","max-height(px)":"Max. H\xf6he(px)",Format:"Format",Crop:"Zuschneiden","width(px)":"Breite(px)","height(px)":"H\xf6he(px)",Remove:"Entfernen",Save:"Speichern",Contrast:"Kontrast",Blur:"Blur",Brightness:"Helligkeit",Grayscale:"Graustufen",Saturer:"S\xe4ttigen",Sepia:"Tintenfisch",Undo:"Undo"},kX=function(e,t,n,r){return void 0===t&&(t=!1),new Promise((function(i,a){try{var o=document.createElement("img");o.src=e+"",o.crossOrigin="Anonymous";var s=n.quality/100,u=n.maintainAspectRatio;return o.onload=function(){var e,a=document.createElement("canvas"),c=a.getContext("2d"),l=o.width/o.height,h=n.maxWidth,f=n.maxHeight;null!=r&&r.getDimFromImage&&(h=o.width,f=o.height),u?(a.width=h,a.height=h/l,t&&(a.width=f*l,a.height=f)):(a.width=h,a.height=f),n.basicFilters&&(c.filter=(e=n.basicFilters,Object.keys(e).map((function(t){return["blur"].includes(t)?t+"("+e[t]+"px)":t+"("+e[t]+")"})).join(""))),c.drawImage(o,0,0,a.width,a.height);var d=a.toDataURL("image/"+n.format,s);i({dataUri:d,width:a.width,height:a.height})},Promise.resolve()}catch(e){return Promise.reject(e)}})).then((function(e){return n.maxHeight=e.height,n.maxWidth=e.width,{imageUri:e.dataUri,state:bX(n,e.dataUri)}}))},bX=function(e,t){return e.arrayCopiedImages.length<=25?e.arrayCopiedImages.push({lastImage:t,width:e.maxWidth,height:e.maxHeight,quality:e.quality,format:e.format,originImageSrc:e.originImageSrc,basicFilters:e.basicFilters}):e.arrayCopiedImages[e.arrayCopiedImages.length-1]={lastImage:t,width:e.maxWidth,height:e.maxHeight,quality:e.quality,format:e.format,originImageSrc:e.originImageSrc,basicFilters:e.basicFilters},JSON.parse(JSON.stringify(e))};function wX(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var _X=(0,t.memo)((function(e){var n=e.activeIndex,r=void 0===n?0:n,i=e.children,a=e.backgroundColor,o=void 0===a?"inherit":a,s=e.color,u=void 0===s?"#428CFF":s,c=e.indicatorStyle,l=void 0===c?"bottomLine":c,h=e.onTabChange,f=void 0===h?function(e){}:h,d=e.transitionMs,p=void 0===d?375:d,v=e.borderLine,m=void 0!==v&&v,g=e.fontColor,y=void 0===g?"inherit":g,k=e.lazy,b=void 0!==k&&k,w=(0,t.useState)([]),_=w[0],x=w[1],E=(0,t.useState)(r),I=E[0],S=E[1],C=(0,t.useRef)(null);(0,t.useEffect)((function(){var e=i instanceof Array?i:[i];!function(e){try{e.map((function(e){if(!e.props.name)throw new Error("Inside of TabContainer component only can be rendered TabItem component, and its need a name prop");return!0}))}catch(e){throw new Error("The TabContainer Component must has a TabItem as child component")}}(e);var t=e.map((function(e){return{label:e.props.name,icon:e.props.icon,disabled:e.props.disabled}}));if(r>t.length-1||r<0)throw new Error("Invalid range for activeIndex "+r);x(t)}),[i]),(0,t.useEffect)((function(){var e,t,n=i instanceof Array?i:[i];if(r>n.length-1||r<0)throw new Error("Invalid range for activeIndex "+r);S(null!==(e=n[r])&&void 0!==e&&null!==(t=e.props)&&void 0!==t&&t.disabled?0:r)}),[r]),(0,t.useEffect)((function(){_&&_.length&&f(I)}),[I]);var T=i instanceof Array?i:[i];return t.createElement("div",{ref:C,className:"tab-pp"},t.createElement("div",{className:"header",style:{backgroundColor:o,borderBottom:m?"1px solid #323232":"undet"}},_.map((function(e,n){return t.createElement("button",{onClick:function(){e.disabled||S(n)},key:e.label,style:{color:n!=I||"simple"!==l&&"bottomLine"!==l?y:u,backgroundColor:n==I&&"button"===l?u:"inherit"},className:n==I?"itemlabel "+l+" active":"itemlabel",disabled:e.disabled},e.icon," ",e.label,"bottomLine"===l&&t.createElement("div",{style:{backgroundColor:u}}))}))),t.createElement("div",{className:"body"},T.map((function(e,n){return n<I?t.createElement("div",{style:{transform:"translate3d(-100%, 0px, 0px)",height:"0px",overflow:"hidden",transition:"transform "+p/1e3+"s ease"},key:n,className:"body-content"},!b&&e):n>I?t.createElement("div",{style:{transform:"translate3d(100%, 0px, 0px)",height:"0px",overflow:"hidden",transition:"transform "+p/1e3+"s ease"},key:n,className:"body-content"},!b&&e):t.createElement("div",{style:{visibility:"inherit",overflow:"auto",height:"auto",position:"relative",transition:"transform "+p/1e3+"s ease"},key:n,className:"body-content"},e)}))))})),xX=(0,t.memo)((function(e){return t.createElement("div",{style:{padding:"1rem 0.5rem"}},e.children)})),EX=["onInputChangedEnd","onChangedDelayed","onChangedValue","delayMs"],IX=(0,t.memo)((function(e){var n=e.onInputChangedEnd,r=e.onChangedDelayed,i=e.onChangedValue,a=e.delayMs,o=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}(e,EX),s=(0,t.useState)(e.value),u=s[0],c=s[1],l=(0,t.useRef)(),h=(0,t.useRef)(!0);function f(t){["checkbox","radio"].includes(e.type)?(c(t.target.checked),i&&i(t.target.checked)):(c(t.target.value),i&&i(t.target.value))}return(0,t.useRef)(!1),(0,t.useEffect)((function(){if(r){if(!h.current)return clearTimeout(l.current),l.current=setTimeout((function(){clearTimeout(l.current),r(u)}),a||100),function(){clearTimeout(l.current)};h.current=!1}}),[u]),t.createElement(t.Fragment,null,n&&t.createElement("input",Object.assign({},o,{className:null==o?void 0:o.className,style:o.style,value:e.value,onChange:f,onBlur:function(e){n(e.target.value)},onKeyDown:function(e){"Enter"==e.key&&n(u)}})),!n&&t.createElement("input",Object.assign({},o,{className:null==o?void 0:o.className,style:o.style,value:e.value,onChange:f})))})),SX={contrast:1,blur:0,brightness:1,grayscale:0,invert:0,saturate:1,sepia:0},CX=(0,t.memo)((function(e){var n=e.labels,r=e.color,i=e.initialState,a=void 0===i?SX:i,o=e.changeFilter,s=void 0===o?function(){}:o,u=(0,t.useState)(a),c=u[0],l=u[1];return(0,t.useEffect)((function(){l(a?JSON.parse(JSON.stringify(dX({},c,a))):SX)}),[a]),t.createElement("div",null,t.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"}},t.createElement("p",{className:"item-panel"},n.Contrast),t.createElement("p",{className:"item-panel"},(+c.contrast).toFixed(2))),t.createElement("div",{className:"flex-row-start"},t.createElement(IX,{className:"input-range",onChangedDelayed:function(e){s(dX({},c,{contrast:e}))},delayMs:100,onChangedValue:function(e){l(dX({},c,{contrast:e}))},style:{maxWidth:"100%",width:"100%",color:r},type:"range",min:"0",max:"5",step:"0.01",value:c.contrast})),t.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"}},t.createElement("p",{className:"item-panel"},n.Brightness),t.createElement("p",{className:"item-panel"},(+c.brightness).toFixed(2))),t.createElement("div",{className:"flex-row-start"},t.createElement(IX,{className:"input-range",onChangedDelayed:function(e){s(dX({},c,{brightness:e}))},onChangedValue:function(e){l(dX({},c,{brightness:e}))},style:{maxWidth:"100%",width:"100%",color:r},type:"range",min:"0",max:"5",step:"0.01",value:c.brightness})),t.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"}},t.createElement("p",{className:"item-panel"},n.Grayscale),t.createElement("p",{className:"item-panel"},(+c.grayscale).toFixed(2))),t.createElement("div",{className:"flex-row-start"},t.createElement(IX,{className:"input-range",onChangedDelayed:function(e){s(dX({},c,{grayscale:e}))},onChangedValue:function(e){l(dX({},c,{grayscale:e}))},style:{maxWidth:"100%",width:"100%",color:r},type:"range",min:"0",max:"5",step:"0.01",value:c.grayscale})),t.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"}},t.createElement("p",{className:"item-panel"},n.Saturate),t.createElement("p",{className:"item-panel"},(+c.saturate).toFixed(2))),t.createElement("div",{className:"flex-row-start"},t.createElement(IX,{className:"input-range",onChangedDelayed:function(e){s(dX({},c,{saturate:e}))},onChangedValue:function(e){l(dX({},c,{saturate:e}))},style:{maxWidth:"100%",width:"100%",color:r},type:"range",min:"0",max:"5",step:"0.01",value:c.saturate})),t.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"}},t.createElement("p",{className:"item-panel"},n.Sepia),t.createElement("p",{className:"item-panel"},(+c.sepia).toFixed(2))),t.createElement("div",{className:"flex-row-start"},t.createElement(IX,{className:"input-range",onChangedDelayed:function(e){s(dX({},c,{sepia:e}))},onChangedValue:function(e){l(dX({},c,{sepia:e}))},style:{maxWidth:"100%",width:"100%",color:r},type:"range",min:"0",max:"5",step:"0.01",value:c.sepia})),t.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"}},t.createElement("p",{className:"item-panel"},n.Blur),t.createElement("p",{className:"item-panel"},(+c.blur).toFixed(2))),t.createElement("div",{className:"flex-row-start"},t.createElement(IX,{className:"input-range",onChangedDelayed:function(e){s(dX({},c,{blur:e}))},onChangedValue:function(e){l(dX({},c,{blur:e}))},style:{maxWidth:"100%",width:"100%",color:r},type:"range",min:"0",max:"5",step:"0.01",value:c.blur})))}));!function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;n++)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),i=Math.max(0,16-(r-e)),a=window.setTimeout((function(){t(r+i)}),i);return e=r+i,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),function(){if("function"==typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}(),function(e){try{return new CustomEvent("test"),!1}catch(e){}function t(t,n){n=n||{bubbles:!1,cancelable:!1};var r=document.createEvent("MouseEvent");return r.initMouseEvent(t,n.bubbles,n.cancelable,e,0,0,0,0,0,!1,!1,!1,!1,0,null),r}t.prototype=Event.prototype,e.MouseEvent=t}(window);var TX=function(e,t,n,r){var i=this;function a(e){e.stopPropagation(),document.removeEventListener("mouseup",a),document.removeEventListener("mousemove",o),i.eventBus.dispatchEvent(new CustomEvent("handleend",{detail:{handle:i}}))}function o(e){e.stopPropagation(),i.eventBus.dispatchEvent(new CustomEvent("handlemove",{detail:{mouseX:e.clientX,mouseY:e.clientY}}))}this.position=e,this.constraints=t,this.cursor=n,this.eventBus=r,this.el=document.createElement("div"),this.el.className="croppr-handle",this.el.style.cursor=n,this.el.addEventListener("mousedown",(function(e){e.stopPropagation(),document.addEventListener("mouseup",a),document.addEventListener("mousemove",o),i.eventBus.dispatchEvent(new CustomEvent("handlestart",{detail:{handle:i}}))}))},NX=function(){function e(e,t,n,r){this.x1=e,this.y1=t,this.x2=n,this.y2=r}var t=e.prototype;return t.set=function(e,t,n,r){return void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),this.x1=null==e?this.x1:e,this.y1=null==t?this.y1:t,this.x2=null==n?this.x2:n,this.y2=null==r?this.y2:r,this},t.width=function(){return Math.abs(this.x2-this.x1)},t.height=function(){return Math.abs(this.y2-this.y1)},t.resize=function(e,t,n){void 0===n&&(n=[0,0]);var r=this.x1+this.width()*n[0],i=this.y1+this.height()*n[1];return this.x1=r-e*n[0],this.y1=i-t*n[1],this.x2=this.x1+e,this.y2=this.y1+t,this},t.scale=function(e,t){void 0===t&&(t=[0,0]);var n=this.width()*e,r=this.height()*e;return this.resize(n,r,t),this},t.move=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var n=this.width(),r=this.height();return t=null===t?this.y1:t,this.x1=e=null===e?this.x1:e,this.y1=t,this.x2=e+n,this.y2=t+r,this},t.getRelativePoint=function(e){return void 0===e&&(e=[0,0]),[this.width()*e[0],this.height()*e[1]]},t.getAbsolutePoint=function(e){return void 0===e&&(e=[0,0]),[this.x1+this.width()*e[0],this.y1+this.height()*e[1]]},t.constrainToRatio=function(e,t,n){if(void 0===t&&(t=[0,0]),void 0===n&&(n="height"),null!==e){switch(this.width(),this.height(),n){case"height":default:this.resize(this.width(),this.width()*e,t);break;case"width":this.resize(1*this.height()/e,this.height(),t)}return this}},t.constrainToBoundary=function(e,t,n){void 0===n&&(n=[0,0]);var r=this.getAbsolutePoint(n),i=r[0],a=r[1],o=i,s=a,u=e-i,c=t-a,l=-2*n[1]+1,h=null,f=null;switch(-2*n[0]+1){case-1:h=o;break;case 0:h=2*Math.min(o,u);break;case 1:h=u}switch(l){case-1:f=s;break;case 0:f=2*Math.min(s,c);break;case 1:f=c}if(this.width()>h){var d=h/this.width();this.scale(d,n)}if(this.height()>f){var p=f/this.height();this.scale(p,n)}return this},t.constrainToSize=function(e,t,n,r,i,a){if(void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=[0,0]),void 0===a&&(a=null),a&&(a>1?(e=1*t/a,r*=a):a<1&&(t=e*a,n=1*r/a)),e&&this.width()>e){var o=e,s=null===a?this.height():t;this.resize(o,s,i)}if(t&&this.height()>t){var u=null===a?this.width():e;this.resize(u,t,i)}if(n&&this.width()<n){var c=n,l=null===a?this.height():r;this.resize(c,l,i)}if(r&&this.height()<r){var h=null===a?this.width():n;this.resize(h,r,i)}return this},e}();function RX(e){e.preventDefault();var t=e.changedTouches[0];t.target.dispatchEvent(new MouseEvent({touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"}[e.type],{bubbles:!0,cancelable:!0,view:window,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY}))}var PX=[{position:[0,0],constraints:[1,0,0,1],cursor:"nw-resize"},{position:[.5,0],constraints:[1,0,0,0],cursor:"n-resize"},{position:[1,0],constraints:[1,1,0,0],cursor:"ne-resize"},{position:[1,.5],constraints:[0,1,0,0],cursor:"e-resize"},{position:[1,1],constraints:[0,1,1,0],cursor:"se-resize"},{position:[.5,1],constraints:[0,0,1,0],cursor:"s-resize"},{position:[0,1],constraints:[0,0,1,1],cursor:"sw-resize"},{position:[0,.5],constraints:[0,0,0,1],cursor:"w-resize"}];function AX(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)}var DX=function(e){var t,n;function r(t,n,r){return void 0===r&&(r=!1),e.call(this,t,n,r)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,pX(t,n);var i=r.prototype;return i.getValue=function(t){return e.prototype.getValue.call(this,t)},i.setImage=function(t){return e.prototype.setImage.call(this,t)},i.destroy=function(){return e.prototype.destroy.call(this)},i.moveTo=function(e,t){return this.box.move(e,t),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this},i.resizeTo=function(e,t,n){return void 0===n&&(n=[.5,.5]),this.box.resize(e,t,n),this.box.constrainToBoundary(this.cropperEl.offsetWidth,this.cropperEl.offsetHeight,[.5,.5]),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this},i.scaleBy=function(e,t){return void 0===t&&(t=[.5,.5]),this.box.scale(e,t),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this},i.reset=function(e){return e&&(this.options=dX({},this.options,{newOptions:e})),this.box=this.initializeBox(this.options),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this},i.enableVisibility=function(e){var t=document.querySelector(".croppr-container");if(!t)throw new Error("THere is not any croppr");t.style.display=e?"block":"none"},r}(function(){function e(t,n,r){var i=this;if(void 0===r&&(r=!1),this.options=e.parseOptions(n||{}),!t.nodeName&&null==(t=document.querySelector(t)))throw"Unable to find element.";if(!t.getAttribute("src"))throw"Image src not provided.";this._initialized=!1,this._restore={parent:t.parentNode,element:t},r||(0===t.width||0===t.height?t.onload=function(){i.initialize(t)}:this.initialize(t))}var t=e.prototype;return t.initialize=function(e){this.createDOM(e),this.options.convertToPixels(this.cropperEl),this.attachHandlerEvents(),this.attachRegionEvents(),this.attachOverlayEvents(),this.box=this.initializeBox(this.options),this.redraw(),this._initialized=!0,null!==this.options.onInitialize&&this.options.onInitialize(this)},t.createDOM=function(e){var t;this.containerEl=document.createElement("div"),this.containerEl.className="croppr-container",this.eventBus=this.containerEl,(t=this.containerEl).addEventListener("touchstart",RX),t.addEventListener("touchend",RX),t.addEventListener("touchmove",RX),this.cropperEl=document.createElement("div"),this.cropperEl.className="croppr",this.imageEl=document.createElement("img"),this.imageEl.setAttribute("src",e.getAttribute("src")),this.imageEl.setAttribute("alt",e.getAttribute("alt")),this.imageEl.className="croppr-image",this.imageClippedEl=this.imageEl.cloneNode(),this.imageClippedEl.className="croppr-imageClipped",this.regionEl=document.createElement("div"),this.regionEl.innerHTML=new Array(9).fill(1).map((function(){return'<div style="border: 1px dashed #fafafa"></div>'})).join(""),this.regionEl.className="croppr-region",this.overlayEl=document.createElement("div"),this.overlayEl.className="croppr-overlay";var n=document.createElement("div");n.className="croppr-handleContainer",this.handles=[];for(var r=0;r<PX.length;r++){var i=new TX(PX[r].position,PX[r].constraints,PX[r].cursor,this.eventBus);this.handles.push(i),n.appendChild(i.el)}this.cropperEl.appendChild(this.imageEl),this.cropperEl.appendChild(this.imageClippedEl),this.cropperEl.appendChild(this.regionEl),this.cropperEl.appendChild(this.overlayEl),this.cropperEl.appendChild(n),this.containerEl.appendChild(this.cropperEl),e.parentElement.replaceChild(this.containerEl,e)},t.setImage=function(e){var t=this;return this.imageEl.onload=function(){t.box=t.initializeBox(t.options),t.redraw()},this.imageEl.src=e,this.imageClippedEl.src=e,this},t.destroy=function(){this._restore.parent.replaceChild(this._restore.element,this.containerEl)},t.initializeBox=function(e){var t=new NX(0,0,e.startSize.width,e.startSize.height);t.constrainToRatio(e.aspectRatio,[.5,.5]);var n=e.minSize,r=e.maxSize;t.constrainToSize(r.width,r.height,n.width,n.height,[.5,.5],e.aspectRatio),t.constrainToBoundary(this.cropperEl.offsetWidth,this.cropperEl.offsetHeight,[.5,.5]);var i=this.cropperEl.offsetWidth/2-t.width()/2,a=this.cropperEl.offsetHeight/2-t.height()/2;return t.move(i,a),t},t.redraw=function(){var e=this,t=Math.round(this.box.width()),n=Math.round(this.box.height()),r=Math.round(this.box.x1),i=Math.round(this.box.y1),a=Math.round(this.box.x2),o=Math.round(this.box.y2);window.requestAnimationFrame((function(){e.regionEl.style.transform="translate("+r+"px, "+i+"px)",e.regionEl.style.width=t+"px",e.regionEl.style.height=n+"px",e.imageClippedEl.style.clip="rect("+i+"px, "+a+"px, "+o+"px, "+r+"px)";for(var s=e.box.getAbsolutePoint([.5,.5]),u=s[1]-e.cropperEl.offsetHeight/2>>31,c=-2*((s[0]-e.cropperEl.offsetWidth/2>>31^u)+u+u+4)+8,l=0;l<e.handles.length;l++){var h=e.handles[l],f=i+n*h.position[1]-h.el.offsetHeight/2;h.el.style.transform="translate("+Math.round(r+t*h.position[0]-h.el.offsetWidth/2)+"px, "+Math.round(f)+"px)",h.el.style.zIndex=c==l?5:4}}))},t.attachHandlerEvents=function(){var e=this.eventBus;e.addEventListener("handlestart",this.onHandleMoveStart.bind(this)),e.addEventListener("handlemove",this.onHandleMoveMoving.bind(this)),e.addEventListener("handleend",this.onHandleMoveEnd.bind(this))},t.attachRegionEvents=function(){var e=this.eventBus;function t(t){t.stopPropagation(),e.dispatchEvent(new CustomEvent("regionmove",{detail:{mouseX:t.clientX,mouseY:t.clientY}}))}function n(r){r.stopPropagation(),document.removeEventListener("mouseup",n),document.removeEventListener("mousemove",t),e.dispatchEvent(new CustomEvent("regionend",{detail:{mouseX:r.clientX,mouseY:r.clientY}}))}this.regionEl.addEventListener("mousedown",(function(r){r.stopPropagation(),document.addEventListener("mouseup",n),document.addEventListener("mousemove",t),e.dispatchEvent(new CustomEvent("regionstart",{detail:{mouseX:r.clientX,mouseY:r.clientY}}))})),e.addEventListener("regionstart",this.onRegionMoveStart.bind(this)),e.addEventListener("regionmove",this.onRegionMoveMoving.bind(this)),e.addEventListener("regionend",this.onRegionMoveEnd.bind(this))},t.attachOverlayEvents=function(){var e=this,t=null;function n(t){t.stopPropagation(),e.eventBus.dispatchEvent(new CustomEvent("handlemove",{detail:{mouseX:t.clientX,mouseY:t.clientY}}))}function r(i){i.stopPropagation(),document.removeEventListener("mouseup",r),document.removeEventListener("mousemove",n),1!==e.box.width()||1!==e.box.height()?e.eventBus.dispatchEvent(new CustomEvent("handleend",{detail:{mouseX:i.clientX,mouseY:i.clientY}})):e.box=t}this.overlayEl.addEventListener("mousedown",(function(i){i.stopPropagation(),document.addEventListener("mouseup",r),document.addEventListener("mousemove",n);var a=e.cropperEl.getBoundingClientRect(),o=i.clientX-a.left,s=i.clientY-a.top;t=e.box,e.box=new NX(o,s,o+1,s+1),e.eventBus.dispatchEvent(new CustomEvent("handlestart",{detail:{handle:e.handles[4]}}))}))},t.onHandleMoveStart=function(e){var t=e.detail.handle,n=[1-t.position[0],1-t.position[1]],r=this.box.getAbsolutePoint(n);this.activeHandle={handle:t,originPoint:n,originX:r[0],originY:r[1]},null!==this.options.onCropStart&&this.options.onCropStart(this.getValue())},t.onHandleMoveMoving=function(e){var t=e.detail,n=t.mouseX,r=t.mouseY,i=this.cropperEl.getBoundingClientRect();(n-=i.left)<0?n=0:n>i.width&&(n=i.width),(r-=i.top)<0?r=0:r>i.height&&(r=i.height);var a=this.activeHandle.originPoint.slice(),o=this.activeHandle.originX,s=this.activeHandle.originY,u=this.activeHandle.handle,c=1===u.constraints[0],l=1===u.constraints[1],h=1===u.constraints[2],f=1===u.constraints[3],d=(f||l)&&(c||h),p=f||l?o:this.box.x1,v=f||l?o:this.box.x2,m=c||h?s:this.box.y1,g=c||h?s:this.box.y2;p=f?n:p,v=l?n:v,m=c?r:m,g=h?r:g;var y=!1,k=!1;if((f||l)&&(y=f?n>o:n<o),(c||h)&&(k=c?r>s:r<s),y){var b=p;p=v,v=b,a[0]=1-a[0]}if(k){var w=m;m=g,g=w,a[1]=1-a[1]}var _=new NX(p,m,v,g);if(this.options.aspectRatio){var x=this.options.aspectRatio,E=!1;d?E=r>_.y1+x*_.width()||r<_.y2-x*_.width():(c||h)&&(E=!0),_.constrainToRatio(x,a,E?"width":"height")}var I=this.options.minSize,S=this.options.maxSize;_.constrainToSize(S.width,S.height,I.width,I.height,a,this.options.aspectRatio),_.constrainToBoundary(this.cropperEl.offsetWidth,this.cropperEl.offsetHeight,a),this.box=_,this.redraw(),null!==this.options.onCropMove&&this.options.onCropMove(this.getValue())},t.onHandleMoveEnd=function(e){null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue())},t.onRegionMoveStart=function(e){var t=e.detail,n=t.mouseX,r=t.mouseY,i=this.cropperEl.getBoundingClientRect();this.currentMove={offsetX:(n-=i.left)-this.box.x1,offsetY:(r-=i.top)-this.box.y1},null!==this.options.onCropStart&&this.options.onCropStart(this.getValue())},t.onRegionMoveMoving=function(e){var t=e.detail,n=t.mouseX,r=t.mouseY,i=this.currentMove,a=i.offsetX,o=i.offsetY,s=this.cropperEl.getBoundingClientRect();this.box.move((n-=s.left)-a,(r-=s.top)-o),this.box.x1<0&&this.box.move(0,null),this.box.x2>s.width&&this.box.move(s.width-this.box.width(),null),this.box.y1<0&&this.box.move(null,0),this.box.y2>s.height&&this.box.move(null,s.height-this.box.height()),this.redraw(),null!==this.options.onCropMove&&this.options.onCropMove(this.getValue())},t.onRegionMoveEnd=function(e){null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue())},t.getValue=function(e){if(void 0===e&&(e=null),null===e&&(e=this.options.returnMode),"real"==e){var t=this.imageEl.naturalWidth,n=this.imageEl.naturalHeight,r=this.imageEl.getBoundingClientRect(),i=t/r.width,a=n/r.height;return{x:Math.round(this.box.x1*i),y:Math.round(this.box.y1*a),width:Math.round(this.box.width()*i),height:Math.round(this.box.height()*a)}}if("ratio"==e){var o=this.imageEl.getBoundingClientRect(),s=o.width,u=o.height;return{x:AX(this.box.x1/s,3),y:AX(this.box.y1/u,3),width:AX(this.box.width()/s,3),height:AX(this.box.height()/u,3)}}if("raw"==e)return{x:Math.round(this.box.x1),y:Math.round(this.box.y1),width:Math.round(this.box.width()),height:Math.round(this.box.height())}},e.parseOptions=function(e){var t=null;void 0!==e.aspectRatio&&("number"==typeof e.aspectRatio?t=e.aspectRatio:e.aspectRatio instanceof Array&&(t=e.aspectRatio[1]/e.aspectRatio[0]));var n=null;null!=e.maxSize&&(n={width:e.maxSize[0]||null,height:e.maxSize[1]||null,unit:e.maxSize[2]||"px"});var r=null;null!=e.minSize&&(r={width:e.minSize[0]||null,height:e.minSize[1]||null,unit:e.minSize[2]||"px"});var i=null;null!=e.startSize&&(i={width:e.startSize[0]||null,height:e.startSize[1]||null,unit:e.startSize[2]||"%"});var a=null;"function"==typeof e.onInitialize&&(a=e.onInitialize);var o=null;"function"==typeof e.onCropStart&&(o=e.onCropStart);var s=null;"function"==typeof e.onCropEnd&&(s=e.onCropEnd);var u=null;"function"==typeof e.onUpdate&&(console.warn("Croppr.js: `onUpdate` is deprecated and will be removed in the next major release. Please use `onCropMove` or `onCropEnd` instead."),u=e.onUpdate),"function"==typeof e.onCropMove&&(u=e.onCropMove);var c=null;if(void 0!==e.returnMode){var l=e.returnMode.toLowerCase();if(-1===["real","ratio","raw"].indexOf(l))throw"Invalid return mode.";c=l}var h=function(e,t){return null!==e?e:t};return{aspectRatio:h(t,null),maxSize:h(n,{width:null,height:null}),minSize:h(r,{width:null,height:null}),startSize:h(i,{width:100,height:100,unit:"%"}),returnMode:h(c,"real"),onInitialize:h(a,null),onCropStart:h(o,null),onCropMove:h(u,null),onCropEnd:h(s,null),convertToPixels:function(e){for(var t=e.offsetWidth,n=e.offsetHeight,r=["maxSize","minSize","startSize"],i=0;i<r.length;i++){var a=r[i];null!==this[a]&&("%"==this[a].unit&&(null!==this[a].width&&(this[a].width=this[a].width/100*t),null!==this[a].height&&(this[a].height=this[a].height/100*n)),delete this[a].unit)}}}},e}()),OX=(0,t.memo)((function(e){var n=e.src,r=e.size,i=e.croppUpdate,a=(0,t.useState)(),o=a[0],s=a[1],u=(0,t.useState)({width:150,height:150}),c=u[0],l=u[1],h=(0,t.useRef)(null),f=(0,t.useRef)();return(0,t.useEffect)((function(){r&&(l(dX({},r)),h.current&&h.current.resizeTo(r.width,r.height))}),[r]),(0,t.useEffect)((function(){n&&s(n)}),[n]),(0,t.useEffect)((function(){return f.current&&o&&(h.current=new DX("#croppr",{minSize:[32,32,"px"],startSize:[c.width,c.height,"px"],onInitialize:function(e){i(null==e?void 0:e.getValue())},onCropEnd:function(e){i(e)}})),function(){var e;return null==h||null===(e=h.current)||void 0===e?void 0:e.destroy()}}),[f.current,o]),t.createElement("div",{className:"CropprWrapper"},t.createElement("img",{ref:f,src:o,id:"croppr"}))})),LX={quality:92,maxHeight:1e3,maxWidth:1e3,cropHeight:150,cropWidth:150,maintainAspectRatio:!0,format:"jpeg",arrayCopiedImages:[],originImageSrc:""},MX=(0,t.memo)((function(e){var n=function(e,t){void 0===t&&(t=!1);try{var n=Math.max(Math.min(e,4e3),32),i=dX({},v);if(t){if(i.maxHeight===n)return Promise.resolve();i.maxHeight=n}else{if(i.maxWidth===n)return Promise.resolve();i.maxWidth=n}m(i);var a=wX((function(){return Promise.resolve(r(i,t)).then((function(){}))}),(function(e){console.log("onChangeSize ~ error",e)}));return Promise.resolve(a&&a.then?a.then((function(){})):void 0)}catch(e){return Promise.reject(e)}},r=function(e,t){void 0===t&&(t=!1);try{var n=wX((function(){return Promise.resolve(kX(v.originImageSrc,t,e)).then((function(e){var t=e.state;k(e.imageUri),m(t)}))}),(function(e){console.log("\ud83d\ude80 ~ file: EditImage.tsx ~ line 73 ~ applyChanges ~ error",e)}));return Promise.resolve(n&&n.then?n.then((function(){})):void 0)}catch(e){return Promise.reject(e)}},i=e.labels,a=void 0===i?{}:i,o=e.image,s=void 0===o?"":o,u=e.color,c=void 0===u?"#1e88e5":u,l=e.initialState,h=void 0===l?LX:l,f=e.saveUpdates,d=void 0===f?function(){}:f,p=(0,t.useState)(h),v=p[0],m=p[1],g=(0,t.useState)(""),y=g[0],k=g[1],b=(0,t.useState)(!1),w=b[0],_=b[1],x=(0,t.useState)({width:150,height:150}),E=x[0],I=x[1],S=(0,t.useState)(),C=S[0],T=S[1],N=(0,t.useRef)(!1);function R(e,t){e&&(m(dX({},v,{cropWidth:e})),I(dX({},E,{width:e}))),t&&(m(dX({},v,{cropHeight:t})),I(dX({},E,{height:t})))}function P(e){void 0===e&&(e=!1),_(!1),d(e?{state:v,imageSrc:y}:null)}(0,t.useEffect)((function(){N.current=window.innerWidth<800,m(JSON.parse(JSON.stringify(dX({},v,h))))}),[h]),(0,t.useEffect)((function(){k(s)}),[s]),(0,t.useEffect)((function(){w||I({width:150,height:150})}),[w]);var A=(0,t.useMemo)((function(){return y&&y.length?Math.ceil(3/4*y.length/1024):""}),[y]);function D(e){return JSON.parse(JSON.stringify(e))}return t.createElement("div",{className:"EditImage"},t.createElement("div",{id:"popup",className:"popup"},t.createElement("div",{style:{flexDirection:"row",boxSizing:"border-box",display:"flex",placeContent:"center flex-end",alignItems:"center",padding:"0px 16px"}},t.createElement("button",{className:"icon-btn",onClick:function(){P(!1)}},t.createElement("span",{className:"material-icons"},"clear"))),t.createElement("div",{className:"image-container"},t.createElement("div",{className:"image-holder-full"},!w&&t.createElement("img",{id:"image-full",src:y}),w&&t.createElement(OX,{src:y,size:E,croppUpdate:function(e){T(e),m(dX({},v,{cropHeight:e.height,cropWidth:e.width}))}})),t.createElement("div",{className:"control-panel"},t.createElement(_X,{lazy:!0,borderLine:!0},t.createElement(xX,{name:"Basic"},(!N.current||N.current&&!w)&&t.createElement(t.Fragment,null,t.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"}},t.createElement("p",{className:"item-panel"},a.Quality),t.createElement("p",{className:"item-panel"},v.quality+"%")),t.createElement("div",{className:"flex-row-start"},t.createElement(IX,{readOnly:w,disabled:w,className:"input-range",onChangedDelayed:function(e){try{e=Math.max(Math.min(e,100),1);var t=dX({},v,{quality:e});m(t);var n=wX((function(){return Promise.resolve(r(t,!1)).then((function(){}))}),(function(e){console.log("onUpdateQuality ~ error",e)}));return Promise.resolve(n&&n.then?n.then((function(){})):void 0)}catch(e){return Promise.reject(e)}},onChangedValue:function(e){m(dX({},v,{quality:e}))},style:{maxWidth:"100%",width:"100%",color:c},type:"range",min:1,max:100,value:v.quality})),t.createElement("div",{className:"item-panel",style:{display:"flex",width:"100%",justifyContent:"space-between"}},a["Max dimensions"],t.createElement("div",{style:{display:"flex",alignItems:"center"}},t.createElement("input",{disabled:w,readOnly:w,type:"checkbox",checked:v.maintainAspectRatio,onChange:function(e){return m(dX({},v,{maintainAspectRatio:e.target.checked}))},style:{color:c}}),t.createElement("span",{className:"caption"},a["aspect-ratio"]))),t.createElement("div",{className:"flex-row-start",style:{marginTop:"10px",justifyContent:"space-between"}},t.createElement("div",{className:"form-field",style:{maxWidth:"48%",width:"48%"}},t.createElement("label",null,a["max-width(px)"]),t.createElement(IX,{readOnly:w,disabled:w,placeholder:a["max-width(px)"],value:v.maxWidth,onChangedValue:function(e){return m(dX({},v,{maxWidth:e}))},type:"number",min:0,max:2e3,onInputChangedEnd:function(e){n(e,!1)}})),t.createElement("div",{className:"form-field",style:{maxWidth:"48%",width:"48%"}},t.createElement("label",null,a["max-height(px)"]),t.createElement(IX,{readOnly:w,disabled:w,placeholder:a["max-height(px)"],value:v.maxHeight,onChangedValue:function(e){return m(dX({},v,{maxHeight:e}))},type:"number",min:0,max:2e3,onInputChangedEnd:function(e){n(e,!0)}}))),t.createElement("p",{className:"item-panel"},a.Format),t.createElement("div",{className:"flex-row-start",style:{marginTop:"10px",justifyContent:"space-between"}},t.createElement("div",{className:"form-field",style:{width:"100%"}},t.createElement("select",{disabled:w,value:v.format,onChange:function(e){try{var t=dX({},v,{format:e.target.value}),n=wX((function(){return m(t),Promise.resolve(r(t,!1)).then((function(){}))}),(function(e){console.log("onChangeFormat ~ error",e)}));return Promise.resolve(n&&n.then?n.then((function(){})):void 0)}catch(e){return Promise.reject(e)}}},["webp","jpeg","png"].map((function(e,n){return t.createElement("option",{key:n,value:e},e)})))))),t.createElement("div",{className:"flex-row-start",style:{marginTop:"5px",justifyContent:"space-between"}},t.createElement("span",{style:{display:"flex",alignItems:"center"}},t.createElement("input",{type:"checkbox",onChange:function(e){_(e.target.checked)},checked:w,style:{color:c,marginBottom:"3px"}}),t.createElement("span",{className:"item-panel",style:{marginLeft:"4px"}},a.Crop))),w&&t.createElement(t.Fragment,null,t.createElement("div",{className:"flex-row-start",style:{marginTop:"10px",justifyContent:"space-between"}},t.createElement("div",{className:"form-field",style:{maxWidth:"48%",width:"48%"}},t.createElement("label",null,a["width(px)"]),t.createElement(IX,{type:"number",min:0,value:v.cropWidth,onChangedValue:function(e){return m(dX({},v,{cropWidth:e}))},onInputChangedEnd:function(e){R(+e,null)},placeholder:a["width(px)"]})),t.createElement("div",{className:"form-field",style:{maxWidth:"48%",width:"48%"}},t.createElement("label",null,a["height(px)"]),t.createElement(IX,{type:"number",min:0,value:v.cropHeight,onInputChangedEnd:function(e){R(null,+e)},onChangedValue:function(e){return m(dX({},v,{cropHeight:e}))},placeholder:a["height(px)"]}))),t.createElement("p",{style:{marginBottom:"4px !important"}},t.createElement("button",{title:"Cut the image",className:"icon-btn",onClick:function(){var e=D(v),t=document.createElement("canvas");return new Promise((function(n,r){var i=t.getContext("2d"),a=new Image;a.src=y,a.onload=function(){var r=null==C?void 0:C.width;return t.height=null==C?void 0:C.height,t.width=r,i.drawImage(a,Math.abs(null==C?void 0:C.x),Math.abs(null==C?void 0:C.y),null==C?void 0:C.width,null==C?void 0:C.height,0,0,null==C?void 0:C.width,null==C?void 0:C.height),n(t.toDataURL("image/"+e.format,e.quality))},a.onerror=function(e){r(e)}})).then((function(n){e.maxWidth=t.width,e.maxHeight=t.height,e.originImageSrc=n,e=bX(e,n),m(e),k(n),_(!1)})).catch((function(e){console.log(e)}))}},t.createElement("span",{className:"material-icons"}," crop "))))),t.createElement(xX,{disabled:w,name:"Filters"},t.createElement(CX,{color:c,labels:a,initialState:v.basicFilters,changeFilter:function(e){try{var t=wX((function(){var t=D(v);return t.basicFilters=t.basicFilters?dX({},t.basicFilters,e):e,Promise.resolve(r(t,!1)).then((function(){}))}),(function(e){console.log("\ud83d\ude80 ~ file: EditImage.tsx ~ line 259 ~ onChangeFilters ~ e",e)}));return Promise.resolve(t&&t.then?t.then((function(){})):void 0)}catch(e){return Promise.reject(e)}}}))),t.createElement("button",{title:a.Undo,disabled:v.arrayCopiedImages.length<=1,style:{position:"absolute",right:"10px",top:"30px"},className:"icon-btn",onClick:function(){try{try{var e=D(v);if(e.arrayCopiedImages.length>1){e.arrayCopiedImages.pop();var t=e.arrayCopiedImages[e.arrayCopiedImages.length-1];e=dX({},v,{arrayCopiedImages:e.arrayCopiedImages,maxHeight:t.height,maxWidth:t.width,quality:t.quality,format:t.format,originImageSrc:t.originImageSrc,basicFilters:t.basicFilters}),m(e),k(t.lastImage)}}catch(e){console.log("\ud83d\ude80 ~ file: edit-image.component.ts ~ line 126 ~ EditImageComponent ~ onRestore ~ e",e)}return Promise.resolve()}catch(e){return Promise.reject(e)}}},t.createElement("span",{className:"material-icons"}," refresh ")),t.createElement("div",{className:"flex-row-start",style:{marginTop:"10px",justifyContent:"space-between",alignItems:"center"}},t.createElement("button",{className:"save-btn",onClick:function(){P(!0)}},a.Save),A&&t.createElement("p",{className:"caption image-caption",style:{color:A>120?"#f44336":"unset",fontWeight:A>120?"500":"unset"}},"size: ",A,"Kb \xa0 ",v.format))))))})),FX={language:"en",objectFit:"cover",hideDeleteBtn:!1,hideDownloadBtn:!1,hideEditBtn:!1,hideAddBtn:!1,compressInitial:null},jX={maxHeight:3e3,maxWidth:3e3,cropHeight:150,cropWidth:150,maintainAspectRatio:!0,format:"jpeg",arrayCopiedImages:[],originImageSrc:"",basicFilters:void 0,quality:100};(0,t.memo)((function(e){var n=function(e){try{var t=btoa(e.target.result),n=dX({},f),r=P.current+t;n.originImageSrc=P.current+t;var i=function(){if(C.compressInitial)return n=dX({},n,{quality:Math.min(C.compressInitial||92,100),maintainAspectRatio:!0,format:"jpeg"}),Promise.resolve(kX(n.originImageSrc,!1,n,{getDimFromImage:!0})).then((function(e){d(e.state),m(e.imageUri),k(!0)}));var e=document.createElement("img");e.src=r,e.onload=function(){n.arrayCopiedImages=[],n.maxHeight=e.height,n.maxWidth=e.width,n.format=R.current.split("image/")[1],n.arrayCopiedImages.push({lastImage:r,width:e.width,height:e.height,quality:n.quality,format:R.current.split("image/")[1],originImageSrc:n.originImageSrc}),d(n),m(r),k(!0)}}();return Promise.resolve(i&&i.then?i.then((function(){})):void 0)}catch(e){return Promise.reject(e)}},r=e.config,i=void 0===r?{}:r,a=e.imageSrcProp,o=void 0===a?"":a,s=e.color,u=void 0===s?"#1e88e5":s,c=e.imageChanged,l=void 0===c?function(){}:c,h=(0,t.useState)(dX({},jX)),f=h[0],d=h[1],p=(0,t.useState)(""),v=p[0],m=p[1],g=(0,t.useState)(!1),y=g[0],k=g[1],b=(0,t.useState)(!1),w=b[0],_=b[1],x=(0,t.useState)(mX),E=x[0],I=x[1],S=(0,t.useState)(FX),C=S[0],T=S[1],N=(0,t.useRef)(null),R=(0,t.useRef)(""),P=(0,t.useRef)(""),A=Date.now().toString(20),D=(0,t.useRef)("download");function O(e){var t;e.preventDefault(),null==N||null===(t=N.current)||void 0===t||t.click()}function L(e){var t,r=null===(t=e.target)||void 0===t?void 0:t.files;if(r){var i=r[0];if(D.current=i.name.split(".")[0],R.current=i.type,!R.current.includes("image"))return;if(P.current="data:"+i.type+";base64,",i){d(dX({},f,{format:R.current.split("image/")[1]}));var a=new FileReader;a.onload=n.bind(this),a.readAsBinaryString(i)}}}(0,t.useRef)(!1),(0,t.useEffect)((function(){var e;!function(){var e=document.head;if(!e.querySelector("#ngp-image-picker-icons-id")){var t=document.createElement("link");t.href="https://fonts.googleapis.com/icon?family=Material+Icons",t.rel="stylesheet",t.id="ngp-image-picker-icons-id",e.appendChild(t)}}(),e=dX({},C,i),T(e),null!=i.language&&("en"==i.language&&I(dX({},mX)),"es"==i.language&&I(dX({},vX)),"fr"==i.language&&I(dX({},gX)),"de"==i.language&&I(dX({},yX)))}),[i]),(0,t.useEffect)((function(){!function(){try{var e=function(){if(o)return Promise.resolve(function(e){var t=dX({},f),n=e.split("."),r=n[n.length-1];if(t.format=r=!r||"png"!=r&&"jpeg"!=r&&"webp"!=r?"jpeg":r,null!=i.compressInitial){var a=1;i.compressInitial>=0&&i.compressInitial<=100&&(a=i.compressInitial),t.quality=a}return new Promise((function(n,i){var a=new Image;a.crossOrigin="Anonymous",t.maxHeight=a.height,t.maxWidth=a.width,a.onload=function(){var e=document.createElement("canvas"),i=e.getContext("2d");e.width=1*a.width,e.height=1*a.height,i.drawImage(a,0,0,e.width,e.height),console.log(t.quality);var o=e.toDataURL("image/"+r,t.quality/100);return n({dataUri:o,width:e.width,height:e.height})},a.onerror=function(t){return i(t.message||"Error loading the src = "+e)},a.src=e})).then((function(e){return t=dX({},t,{maxHeight:e.height,maxWidth:e.width}),{imageUri:e.dataUri,state:t}}))}(o)).then((function(e){var t=e.state;t.originImageSrc=o,t.arrayCopiedImages=[{lastImage:e.imageUri,width:t.maxWidth,height:t.maxHeight,quality:t.quality,format:t.format,originImageSrc:o}],m(e.imageUri),d(t),k(!0)}));var e=dX({},f);e.originImageSrc=null,e.arrayCopiedImages=[],k(!1),m(null),d(e)}();Promise.resolve(e&&e.then?e.then((function(){})):void 0)}catch(e){return Promise.reject(e)}}()}),[o]),(0,t.useEffect)((function(){l(v)}),[v]);var M=(0,t.useMemo)((function(){return v&&v.length?Math.ceil(3/4*v.length/1024):""}),[v]);return t.createElement("div",{className:"ReactImagePickerEditor"},!y&&t.createElement("div",{className:"place-image"},t.createElement("div",{className:"image-holder",style:{width:C.width,height:C.height,borderRadius:C.borderRadius,aspectRatio:C.aspectRatio+""}},t.createElement("button",{title:E["Upload a image"],className:"icon-btn image-upload-btn",onClick:O},t.createElement("span",{className:"material-icons"},"add_a_photo")),t.createElement("input",{ref:N,type:"file",style:{display:"none"},id:"filePicker-"+A,onChange:L}))),y&&t.createElement("div",{className:"place-image"},t.createElement("div",{className:"image-holder-loaded",style:{width:C.width,height:C.height,borderRadius:C.borderRadius,aspectRatio:C.aspectRatio+""}},t.createElement("img",{src:v,alt:"image-loaded",style:{borderRadius:C.borderRadius,objectFit:C.objectFit}}),t.createElement("div",{className:"curtain",onClick:O},t.createElement("button",{title:E["Upload a image"]},t.createElement("span",{className:"material-icons"},"add_a_photo"))),t.createElement("input",{ref:N,type:"file",style:{display:"none"},id:"filePicker-"+A,onChange:L})),M&&t.createElement("p",{className:"caption image-caption",style:{color:M>120?"#f44336":"unset",fontWeight:M>120?"500":"unset"}},"size: ",M,"Kb \xa0 ",f.format),t.createElement("div",{style:{flexDirection:"row",boxSizing:"border-box",display:"flex",placeContent:"flex-start",alignItems:"flex-start"},className:"editing-bar-btn"},!C.hideAddBtn&&t.createElement("button",{className:"icon-btn",id:"upload-img",title:E["Upload a image"],onClick:O},t.createElement("span",{className:"material-icons"},"add_a_photo")),!C.hideEditBtn&&t.createElement("button",{className:"icon-btn",id:"edit-img",title:E["Open the editor panel"],onClick:function(){_(!0)}},t.createElement("span",{className:"material-icons"},"edit")),!C.hideDownloadBtn&&t.createElement("a",{id:"download-img",title:E["Download the image"],href:v,download:D.current},t.createElement("span",{className:"material-icons"},"cloud_download")),!C.hideDeleteBtn&&t.createElement("button",{className:"icon-btn",id:"delete-img",title:E.Remove,onClick:function(){return function(){m(null),k(!1);var e=dX({},f,jX);d(e),_(!1)}()}},t.createElement("span",{className:"material-icons"},"delete")))),w&&t.createElement(MX,{saveUpdates:function(e){_(!1),e&&(d(e.state),m(e.imageSrc))},labels:E,color:u,image:v,initialState:f}))}));var UX=function(){var e=sp(),n=e.currentUser,r=e.updatePassword,i=e.updateEmail,a=nr((0,t.useState)(""),2),o=(a[0],a[1]),s=nr((0,t.useState)(!1),2),u=s[0],c=s[1],l=nv(),h=nr((0,t.useState)(),2),f=h[0],d=(h[1],nr((0,t.useState)(),2)),p=d[0],v=(d[1],nr((0,t.useState)(),2)),m=v[0],g=(v[1],nr((0,t.useState)(),2)),y=g[0],k=(g[1],nr((0,t.useState)(),2)),b=k[0],w=(k[1],nr((0,t.useState)(),2)),_=(w[0],w[1],nr((0,t.useState)(),2)),x=(_[0],_[1]),E=nr((0,t.useState)(),2),I=(E[0],E[1]),S=nr((0,t.useState)(),2),C=(S[0],S[1]),T=nr((0,t.useState)(),2),N=(T[0],T[1]),R=nr((0,t.useState)(),2),P=(R[0],R[1]),A=(0,t.useRef)(),D=nr((0,t.useState)([]),2),O=D[0],L=(D[1],nr((0,t.useState)(""),2)),M=(L[0],L[1],(0,t.useRef)(window.innerWidth)),F=(0,t.useRef)(window.innerHeight),j=(0,t.useRef)("10%"),U=(0,t.useRef)("0%"),q=nr((0,t.useState)(),2),V=q[0],z=q[1],B=nr((0,t.useState)(),2),W=B[0],H=B[1],G=function(e){e.preventDefault();switch(e.target.name){case"firstname":console.log("firstname: "+e.target.value);break;case"lastname":console.log("lastname: "+e.target.value);break;case"email":console.log("email: "+e.target.value);break;case"new_password":console.log("new_password: "+e.target.value);break;case"confirm_new_password":console.log("confirm_new_password: "+e.target.value)}};return(0,t.useEffect)((function(){var e=M.current,t=F.current,r=0;console.log("old_image: "+A.current),console.log("width: "+e+" height: "+t),t>e+100?(r=800,z(e*(400/e)+"px"),H(r+"px")):(r=800,z(e*(600/e)+"px"),H(r+"px")),_G.ref(n.uid).get().then((function(e){if(e.exists()){var t=e.val().firstName,n=e.val().lastName,r=e.val().email,i=e.val().password,a=e.val().profileImage;x(t),I(n),C(r),N(i),P(a),O.push(t),O.push(n),O.push(r),O.push(i),O.push(a)}else console.log("No data vailable")})).catch((function(e){console.error(e)}))}),[]),(0,ap.jsx)(hm,{className:"ui container center aligned",textAlign:"center",verticalAlign:"middle",style:{borderColor:"red",transform:"translate("+U.current+","+j.current+")"},children:(0,ap.jsx)(hm.Row,{children:(0,ap.jsx)(hm.Column,{width:6,style:{minWidth:V,maxHeight:W},children:(0,ap.jsxs)($g,{style:{width:"100%"},children:[(0,ap.jsxs)(hb,{onSubmit:function(e){if(e.preventDefault(),y.current.value!==b.current.value)return o("Passwords do not match");var t=[];c(!0),o(""),m.current.value!==n.email&&t.push(i(m.current.value)),y.current.value&&t.push(r(y.current.value)),Promise.all(t).then((function(){l("/login")})).catch((function(){o("Failed to update account")})).finally((function(){c(!1)}))},children:[(0,ap.jsx)(fX,{className:"text-center mb-4",children:"Update Profile"}),(0,ap.jsx)(hb.Field,{id:"first-name",children:(0,ap.jsx)(hb.Input,{name:"firstname",label:"firstname",type:"text",id:"user-first-name",icon:"user",placeholder:"Enter Firstname",onChange:G,ref:f,required:!0})}),(0,ap.jsx)(hb.Field,{id:"last-name",children:(0,ap.jsx)(hb.Input,{name:"lastname",label:"Lastname",type:"text",ref:p,icon:"user",id:"user-first-name",placeholder:"Last Name",onChange:G,required:!0})}),(0,ap.jsx)(hb.Field,{id:"email",children:(0,ap.jsx)(hb.Input,{name:"email",label:"Email",type:"email",icon:"envelope",ref:m,defaultValue:n.email,onChange:G,required:!0})}),(0,ap.jsx)(hb.Field,{id:"password",children:(0,ap.jsx)(hb.Input,{name:"new_password",label:"Passord",placeholder:"Leave blank to keep the same",type:"password",icon:"lock",ref:y,defaultValue:n.password,onChange:G,required:!0})}),(0,ap.jsx)(hb.Field,{id:"password-confirm",children:(0,ap.jsx)(hb.Input,{name:"confirm_new_Password",label:"Password",placeholder:"Confirm the new password",type:"password",icon:"lock",ref:b,onChange:G,required:!0})}),(0,ap.jsx)(oy,{disabled:u,className:"w-100",type:"submit",color:"blue",children:"Update"})]}),(0,ap.jsx)("div",{className:"w-100 text-center mt-2",children:(0,ap.jsx)(Pv,{to:"/mainpage",children:"Cancel"})})]})})})})};var qX=function(){var e=nr((0,t.useState)(),2),n=e[0],r=e[1],i=nr((0,t.useState)(),2),a=i[0],o=i[1],s=nr((0,t.useState)(),2),u=s[0],c=s[1],l=nr((0,t.useState)(),2),h=l[0],f=l[1],d=nr((0,t.useState)(),2),p=d[0],v=d[1],m=nr((0,t.useState)(""),2),g=(m[0],m[1]),y=nr((0,t.useState)({dataFromRealTimeDatabase:[]}),2),k=(y[0],y[1],sp()),b=k.currentUser,w=(k.logout,nr((0,t.useState)(b.uid),1)[0]),_=nv(),x=nr((0,t.useState)(!1),2),E=(x[0],x[1]);function I(){return(I=yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(""),E(!0);try{_("/update-profile")}catch(t){g("failed to log oumint")}E(!1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,t.useEffect)((function(){_G.ref(w).get().then((function(e){if(e.exists()){var t=e.val().firstName,n=e.val().lastName,i=e.val().password,a=e.val().profileImage,s=e.val().email;r(t),o(n),c(i),f(a),v(s)}else console.log("No data available")})).catch((function(e){console.error(e)}))})),(0,ap.jsx)("div",{id:"dashboard",style:{height:"800px",paddingTop:"5%"},children:(0,ap.jsx)("center",{children:(0,ap.jsxs)($g,{color:"blue",style:{width:"firContent",height:"fitContent"},children:[(0,ap.jsx)(Ug,{className:"ui circular big centered image",floated:"center",size:"big",src:h,wrapped:!0,ui:!1}),(0,ap.jsx)($g.Content,{children:(0,ap.jsxs)(hm.Column,{children:[(0,ap.jsxs)(hm.Row,{style:{display:"block"},children:[(0,ap.jsx)("strong",{children:"Firstname: "})," ",n]}),(0,ap.jsxs)(hm.Row,{style:{display:"block"},children:[(0,ap.jsx)("strong",{children:"Lastname: "})," ",a]}),(0,ap.jsxs)(hm.Row,{style:{display:"block"},children:[(0,ap.jsx)("strong",{children:"Email: "})," ",p]}),(0,ap.jsxs)(hm.Row,{style:{display:"block"},children:[(0,ap.jsx)("strong",{children:"Password: "})," ",u]})]})}),(0,ap.jsx)($g.Content,{extra:!0,children:(0,ap.jsx)(oy,{variant:"link",className:"ui blue button",onClick:function(){return I.apply(this,arguments)},"data-tooltip":"Update to database.","data-position":"top center",style:{width:"fitContent"},color:"blue",children:"Update Profile"})})]})})})};var VX=function(){return(0,ap.jsx)("div",{id:"notifications_page_container",children:(0,ap.jsx)("h1",{children:"NotificationsPage"})})};var zX=function(e){var n=e.page,r=e.firstname,i=e.lastname,a=e.profile_image,o=e.id_of_current_user,s=nr((0,t.useState)(""),2),u=(s[0],s[1]),c=nr((0,t.useState)(!1),2),l=(c[0],c[1]),h=nv(),f=sp().logout;function d(){return(d=yi(pi().mark((function e(){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(""),e.prev=1,u(""),l(!0),h("/login"),e.next=7,f();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),u("failed to log out");case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}switch((0,t.useEffect)((function(){})),n){case"home":return(0,ap.jsx)(VX,{});case"settings":return(0,ap.jsx)(UX,{});case"logout":return(0,ap.jsx)("div",{children:(0,ap.jsx)("h1",{children:function(){return d.apply(this,arguments)}()})});default:return(0,ap.jsx)(oX,{u_firstname:r,u_lastname:i,u_profile_image:a,u_id:o})}};function BX(e){var n=e.children,r=e.className,i=e.content,o=s("header",r),u=g(BX,e),c=y(BX,e);return t.createElement(c,a({},u,{className:o}),Bn(n)?i:n)}BX.handledProps=["as","children","className","content"],BX.propTypes={};var WX=BX,HX=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var GX=function(e){return e.match(HX)||[]},KX=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var QX=function(e){return KX.test(e)},YX="\\ud800-\\udfff",XX="\\u2700-\\u27bf",JX="a-z\\xdf-\\xf6\\xf8-\\xff",$X="A-Z\\xc0-\\xd6\\xd8-\\xde",ZX="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",eJ="["+ZX+"]",tJ="\\d+",nJ="["+XX+"]",rJ="["+JX+"]",iJ="[^"+YX+ZX+tJ+XX+JX+$X+"]",aJ="(?:\\ud83c[\\udde6-\\uddff]){2}",oJ="[\\ud800-\\udbff][\\udc00-\\udfff]",sJ="["+$X+"]",uJ="(?:"+rJ+"|"+iJ+")",cJ="(?:"+sJ+"|"+iJ+")",lJ="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",hJ="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",fJ="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",dJ="[\\ufe0e\\ufe0f]?",pJ=dJ+fJ+("(?:\\u200d(?:"+["[^"+YX+"]",aJ,oJ].join("|")+")"+dJ+fJ+")*"),vJ="(?:"+[nJ,aJ,oJ].join("|")+")"+pJ,mJ=RegExp([sJ+"?"+rJ+"+"+lJ+"(?="+[eJ,sJ,"$"].join("|")+")",cJ+"+"+hJ+"(?="+[eJ,sJ+uJ,"$"].join("|")+")",sJ+"?"+uJ+"+"+lJ,sJ+"+"+hJ,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",tJ,vJ].join("|"),"g");var gJ=function(e){return e.match(mJ)||[]};var yJ=function(e,t,n){return e=xn(e),void 0===(t=n?void 0:t)?QX(e)?gJ(e):GX(e):e.match(t)||[]},kJ=RegExp("['\u2019]","g");var bJ=function(e){return function(t){return Fk(yJ(Dk(t).replace(kJ,"")),e,"")}};var wJ=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Vm(e,t,n)};var _J=function(e){return e.split("")},xJ="\\ud800-\\udfff",EJ="["+xJ+"]",IJ="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",SJ="\\ud83c[\\udffb-\\udfff]",CJ="[^"+xJ+"]",TJ="(?:\\ud83c[\\udde6-\\uddff]){2}",NJ="[\\ud800-\\udbff][\\udc00-\\udfff]",RJ="(?:"+IJ+"|"+SJ+")"+"?",PJ="[\\ufe0e\\ufe0f]?",AJ=PJ+RJ+("(?:\\u200d(?:"+[CJ,TJ,NJ].join("|")+")"+PJ+RJ+")*"),DJ="(?:"+[CJ+IJ+"?",IJ,TJ,NJ,EJ].join("|")+")",OJ=RegExp(SJ+"(?="+SJ+")|"+DJ+AJ,"g");var LJ=function(e){return e.match(OJ)||[]};var MJ=function(e){return jy(e)?LJ(e):_J(e)};var FJ=function(e){return function(t){t=xn(t);var n=jy(t)?MJ(t):void 0,r=n?n[0]:t.charAt(0),i=n?wJ(n,1).join(""):t.slice(1);return r[e]()+i}}("toUpperCase"),jJ=bJ((function(e,t,n){return e+(n?" ":"")+FJ(t)})),UJ=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled||Zm(t.props,"onClick",e,t.props)},t}return fm(n,e),n.prototype.render=function(){var e=this.props,r=e.active,i=e.children,o=e.className,u=e.color,c=e.content,h=e.disabled,d=e.fitted,p=e.header,v=e.icon,m=e.link,k=e.name,b=e.onClick,w=e.position,_=s(u,w,l(r,"active"),l(h,"disabled"),l(!0===v||v&&!(k||c),"icon"),l(p,"header"),l(m,"link"),f(d,"fitted"),"item",o),x=y(n,this.props,(function(){if(b)return"a"})),E=g(n,this.props);return Bn(i)?t.createElement(x,a({},E,{className:_,onClick:this.handleClick}),Rg.create(v,{autoGenerateKey:!1}),Bn(c)?jJ(k):c):t.createElement(x,a({},E,{className:_,onClick:this.handleClick}),i)},n}(t.Component);function qJ(e){var n=e.children,r=e.className,i=e.content,o=e.position,u=s(o,"menu",r),c=g(qJ,e),l=y(qJ,e);return t.createElement(l,a({},c,{className:u}),Bn(n)?i:n)}UJ.handledProps=["active","as","children","className","color","content","disabled","fitted","header","icon","index","link","name","onClick","position"],UJ.propTypes={},UJ.create=rm(UJ,(function(e){return{content:e,name:e}})),qJ.handledProps=["as","children","className","content","position"],qJ.propTypes={};var VJ=qJ,zJ=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleItemOverrides=function(e){return{onClick:function(n,r){var i=r.index;t.setState({activeIndex:i}),Zm(e,"onClick",n,r),Zm(t.props,"onItemClick",n,r)}}},t}fm(n,e);var r=n.prototype;return r.renderItems=function(){var e=this,t=this.props.items,n=this.state.activeIndex;return Yg(t,(function(t,r){return UJ.create(t,{defaultProps:{active:parseInt(n,10)===r,index:r},overrideProps:e.handleItemOverrides})}))},r.render=function(){var e=this.props,r=e.attached,i=e.borderless,o=e.children,u=e.className,c=e.color,d=e.compact,p=e.fixed,v=e.floated,k=e.fluid,b=e.icon,w=e.inverted,_=e.pagination,x=e.pointing,E=e.secondary,I=e.size,S=e.stackable,C=e.tabular,T=e.text,N=e.vertical,R=e.widths,P=s("ui",c,I,l(i,"borderless"),l(d,"compact"),l(k,"fluid"),l(w,"inverted"),l(_,"pagination"),l(x,"pointing"),l(E,"secondary"),l(S,"stackable"),l(T,"text"),l(N,"vertical"),f(r,"attached"),f(v,"floated"),f(b,"icon"),f(C,"tabular"),h(p,"fixed"),m(R,"item"),u,"menu"),A=g(n,this.props),D=y(n,this.props);return t.createElement(D,a({},A,{className:P}),Bn(o)?this.renderItems():o)},n}(yg);zJ.handledProps=["activeIndex","as","attached","borderless","children","className","color","compact","defaultActiveIndex","fixed","floated","fluid","icon","inverted","items","onItemClick","pagination","pointing","secondary","size","stackable","tabular","text","vertical","widths"],zJ.propTypes={},zJ.autoControlledProps=["activeIndex"],zJ.Header=WX,zJ.Item=UJ,zJ.Menu=VJ,zJ.create=rm(zJ,(function(e){return{items:e}}));var BJ=zJ;var WJ=function(){return(0,ap.jsx)("div",{children:(0,ap.jsx)("h1",{children:"New"})})};var HJ=function(e){var n=e.is_the_notification_section_visible;return(0,t.useEffect)((function(){})),(0,ap.jsx)(JY,{visible:n,animation:"scale",duration:500,children:(0,ap.jsxs)("div",{id:"show_notifications_in_main_page_container",stryle:{backgroundColor:"#666362"},children:[(0,ap.jsx)(Yn,{inverted:!0,id:"my_segment",color:"red",children:(0,ap.jsx)("p",{children:"something"})}),(0,ap.jsx)(Pv,{to:"/notifications-page",element:(0,ap.jsx)(VX,{}),children:"view all"})]})})};var GJ=function(){return(0,ap.jsx)("div",{id:"image_id",children:(0,ap.jsx)("h1",{children:"Images."})})},KJ=function(e){var n=e.color,r=void 0===n?"currentColor":n,i=e.direction,a=void 0===i?"left":i,o=e.distance,s=void 0===o?"md":o,u=e.duration,c=void 0===u?.4:u,l=e.easing,h=void 0===l?"cubic-bezier(0, 0, 0, 1)":l,f=e.hideOutline,d=void 0===f||f,p=e.label,v=e.lines,m=void 0===v?3:v,g=e.onToggle,y=e.render,k=e.rounded,b=void 0!==k&&k,w=e.size,_=void 0===w?32:w,x=e.toggle,E=e.toggled,I=nr((0,t.useState)(!1),2),S=I[0],C=I[1],T=Math.max(12,Math.min(48,_)),N=Math.round((48-T)/2),R=T/12,P=Math.round(R),A=T/(m*(("lg"===s?.25:"sm"===s?.75:.5)+(3===m?1:1.25))),D=Math.round(A),O=P*m+D*(m-1),L=Math.round((48-O)/2),M=parseFloat((T/(3===m?"lg"===s?4.0425:"sm"===s?5.1625:4.6325:"lg"===s?6.7875:"sm"===s?8.4875:7.6675)-(R-P+(A-D))/(3===m?1:2)/(4/3)).toFixed(2)),F=Math.max(0,c),j={cursor:"pointer",height:"".concat(48,"px"),position:"relative",transition:"".concat(F,"s ").concat(h),userSelect:"none",width:"".concat(48,"px")},U={background:r,height:"".concat(P,"px"),left:"".concat(N,"px"),position:"absolute"};d&&(j.outline="none"),b&&(U.borderRadius="9em");var q=x||C,V=void 0!==E?E:S;return y({barHeight:P,barStyles:U,burgerStyles:j,easing:h,handler:function(){q(!V),"function"===typeof g&&g(!V)},isLeft:"left"===a,isToggled:V,label:p,margin:D,move:M,time:F,topOffset:L,width:T})};function QJ(){return QJ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QJ.apply(this,arguments)}var YJ=function(e){return t.createElement(KJ,QJ({},e,{render:function(e){return t.createElement("div",{className:"hamburger-react","aria-label":e.label,"aria-expanded":e.isToggled,onClick:e.handler,onKeyUp:function(t){return"Enter"===t.key&&e.handler()},role:"button",style:Ai(Ai({},e.burgerStyles),{},{transform:"".concat(e.isToggled?"rotate(".concat(180*(e.isLeft?-1:1),"deg)"):"none")}),tabIndex:0},t.createElement("div",{style:Ai(Ai({},e.barStyles),{},{width:"".concat(e.width,"px"),top:"".concat(e.topOffset,"px"),transition:"".concat(e.time,"s ").concat(e.easing),transform:"".concat(e.isToggled?"rotate(".concat(45*(e.isLeft?-1:1),"deg) translate(").concat(e.move*(e.isLeft?-1:1),"px, ").concat(e.move,"px)"):"none")})}),t.createElement("div",{style:Ai(Ai({},e.barStyles),{},{width:"".concat(e.width,"px"),top:"".concat(e.topOffset+e.barHeight+e.margin,"px"),transition:"".concat(e.time,"s ").concat(e.easing),opacity:"".concat(e.isToggled?"0":"1")})}),t.createElement("div",{style:Ai(Ai({},e.barStyles),{},{width:"".concat(e.width,"px"),top:"".concat(e.topOffset+2*e.barHeight+2*e.margin,"px"),transition:"".concat(e.time,"s ").concat(e.easing),transform:"".concat(e.isToggled?"rotate(".concat(45*(e.isLeft?1:-1),"deg) translate(").concat(e.move*(e.isLeft?-1:1),"px, ").concat(-1*e.move,"px)"):"none")})}))}}))};var XJ=function(){var e=nr((0,t.useState)({visible:!1}),2),n=e[0],r=e[1],i=nr((0,t.useState)(!1),2),a=i[0],o=i[1],s=(0,t.useRef)("#BDB5D5"),u=nr((0,t.useState)({menu_item_button_color:s.current}),2),c=u[0],l=(u[1],nr((0,t.useState)(),2)),h=(l[0],l[1],nr((0,t.useState)(),2)),f=(h[0],h[1],nr((0,t.useState)({is_notifications_button_clicked:!0}),2)),d=f[0],p=f[1],v=nr((0,t.useState)(),2),m=(v[0],v[1],nr((0,t.useState)(),2)),g=m[0],y=m[1],k=nr((0,t.useState)(),2),b=k[0],w=k[1],_=nr((0,t.useState)(),2),x=_[0],E=_[1],I=nr((0,t.useState)(),2),S=I[0],C=(I[1],sp().logout),T=nv(),N=(0,t.useRef)(window.innerWidth),R=(0,t.useRef)(window.innerHeight),P=nr((0,t.useState)(),2),A=(P[0],P[1]),D=(0,t.useRef)("#C5CDD8"),O=((0,t.useRef)("#1E90FF"),(0,t.useRef)("#FFFAFA"),(0,t.useRef)("#F0EFE7"),(0,t.useRef)("#666362"),(0,t.useRef)("large"));(0,t.useEffect)((function(){r(!n),N.current>R.current?(A("80%"),y(2),w(12),E(2)):(A("75%"),y(3),w(10),E(3))}),[a]);var L=function(e,t){var n=t.name;switch(e.preventDefault(),console.log("visibility: "+d),n){case"bell":p(!d);break;case"power_off":C(),T("/");break;case"settings":T("/update-profile");break;case"images":T("/images")}};return(0,ap.jsx)("div",{id:"my_navigation_bar",children:(0,ap.jsxs)(hm,{columns:16,reversed:"mobile",children:[(0,ap.jsx)(hm.Column,{width:x,children:(0,ap.jsx)(YJ,{duration:.8,toggled:a,toggle:o,color:s.current})}),(0,ap.jsxs)(hm.Column,{width:b,style:{display:"inline"},children:[(0,ap.jsx)(JY,{visible:n,animation:"scale",duration:"500",children:(0,ap.jsxs)(BJ,{incon:"labeled",item:4,fluid:!0,secondary:!0,left:!0,horizontal:!0,children:[(0,ap.jsx)(oy,{className:"ui circular icon button",name:"power_off",style:{color:D,backgroundColor:c},onClick:L,children:(0,ap.jsx)(Rg,{name:O.current+" power off"})}),(0,ap.jsx)(oy,{className:"ui circular icon button",name:"images",style:{color:D,backgroundColor:c},onClick:L,children:(0,ap.jsx)(Rg,{name:O.current+" images"})}),(0,ap.jsx)(oy,{className:"ui circular icon button",name:"settings",style:{color:D,backgroundColor:c},onClick:L,children:(0,ap.jsx)(Rg,{name:O.current+" settings"})}),(0,ap.jsx)(oy,{className:"ui circular icon button",name:"bell",style:{color:D,backgroundColor:c},onClick:L,value:S,children:(0,ap.jsx)(Rg,{name:O.current+" bell"})}),(0,ap.jsx)(HJ,{is_the_notification_section_visible:!d})]})})," "]})," ",(0,ap.jsx)(hm.Column,{width:g,children:(0,ap.jsxs)(Rg,{name:"large ui circular icon",style:{marginLeft:"0",borderColor:"red",backgroundColor:"#d4d6bf"},children:[" ","EA"]})}),"  "]})})};var JJ=function(){(0,t.useRef)(null);var e=(0,t.useRef)(window.innerWidth),n=(0,t.useRef)(window.innerHeight),r=nr(t.useState(),2),i=r[0],a=(r[1],nr((0,t.useState)("big"),2)),o=(a[0],a[1]),s=sp(),u=s.currentUser,c=(s.updatePassword,s.updateEmail,s.logout,nr((0,t.useState)(),2)),l=c[0],h=c[1],f=nr((0,t.useState)(),2),d=f[0],p=f[1],v=nr((0,t.useState)(),2),m=v[0],g=v[1],y=nr((0,t.useState)({t_current_user_id:"some_user"}),2),k=y[0],b=y[1],w=nr((0,t.useState)({user_information_query:{}}),2),_=(w[0],w[1],nr((0,t.useState)({fake_id:""}),2));return _[0],_[1],(0,t.useRef)(),(0,t.useEffect)((function(){n.current>e.current&&o("larger"),h("emmanuel"),p("agyapong"),g("None yet"),b("000000"),console.log("id:",k)}),1),(0,ap.jsxs)("div",{id:"mainPageContainer",children:[(0,ap.jsxs)("div",{id:"body",children:[(0,ap.jsx)(XJ,{}),(0,ap.jsx)("div",{id:"subContainer",children:(0,ap.jsx)(zX,{page:i,firstname:l,lastname:d,profile_image:m,id_of_current_user:u.uid})})]}),(0,ap.jsx)(_Y,{})]})};var $J=function(){var e=nr(t.useState(""),2),n=e[0],r=e[1],i=nr(t.useState(""),2),a=i[0],o=i[1],s=sp().login,u=nr((0,t.useState)(""),2),c=(u[0],u[1]),l=nr((0,t.useState)(!1),2),h=l[0],f=l[1],d=nv(),p=(0,t.useRef)("ui dividing header text-center mb-4"),v=nr((0,t.useState)(),2),m=v[0],g=v[1],y=nr((0,t.useState)(),2),k=y[0],b=y[1],w=nr((0,t.useState)(),2),_=w[0],x=w[1],E=(0,t.useRef)("+50%"),I=(0,t.useRef)("0%"),S=(0,t.useRef)("myLocation");function C(){return(C=yi(pi().mark((function e(t){return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,c(""),f(!0),e.next=6,s(n,a);case 6:d("/mainpage"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c("Failed to log in");case 12:f(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return(0,t.useEffect)((function(){var e=window.innerWidth,t=window.innerHeight;if(t>e+100){var n=t*(400/t);g(e*(400/e)+"px"),b(n+"px"),x("Mobile")}else{var r=t*(400/t);g(e*(600/e)+"px"),b(r+"px"),x("Desktop")}}),[]),(0,ap.jsx)("div",{id:"loginId",children:(0,ap.jsx)(hm,{style:{borderColor:"red",transform:"translate("+I.current+","+E.current+")"},className:_,textAlign:"center",verticalAlign:"middle",children:(0,ap.jsx)(hm.Row,{centered:!0,children:(0,ap.jsxs)(hm.Column,{width:6,style:{minWidth:m,maxHeight:k},children:[(0,ap.jsx)($g,{style:{width:"100%"},children:(0,ap.jsx)("div",{children:(0,ap.jsxs)(hb,{size:"big",onSubmit:function(e){return C.apply(this,arguments)},children:[(0,ap.jsx)("h2",{className:p.current,children:" Log In"}),(0,ap.jsx)(hb.Group,{children:(0,ap.jsx)(hb.Field,{width:16,children:(0,ap.jsx)(hb.Input,{label:"Email",icon:"envelope",type:"email",placeholder:"Enter Email...",value:n,onChange:function(e){e.preventDefault(),r(e.target.value)},required:!0})})}),(0,ap.jsx)(hb.Field,{children:(0,ap.jsx)(hb.Input,{label:"password",icon:"lock",type:"password",placeholder:"Ennter Password...",value:a,onChange:function(e){e.preventDefault(),o(e.target.value),console.log("passswordlIs",e.target.value)},required:!0})}),(0,ap.jsx)(oy,{className:"w-100",color:"primary",disabled:h,icon:"login",size:"big",type:"submit",children:"Login"}),(0,ap.jsx)("div",{className:"w-100 text-center mt-2",children:(0,ap.jsx)(Pv,{to:"/forgot-password",element:(0,ap.jsx)(wY,{}),children:"Forgot Password?"})})]},"big")})}),(0,ap.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need a account? ",(0,ap.jsx)(Pv,{to:"/signup",element:(0,ap.jsx)(ZJ,{l:S.current}),children:"Sign Up"})]})]})})})})};var ZJ=function(e){e.l;var n=nr((0,t.useState)(),2),r=n[0],i=n[1],a=nr((0,t.useState)(),2),o=a[0],s=a[1],u=nr((0,t.useState)(),2),c=u[0],l=u[1],h=nr((0,t.useState)(),2),f=h[0],d=h[1],p=nr((0,t.useState)(),2),v=p[0],m=p[1],g=sp(),y=(g.current_user,g.signup),k=g.logout,b=g.setUserId,w=nr((0,t.useState)(""),2),_=(w[0],w[1]),x=nr((0,t.useState)(!1),2),E=x[0],I=x[1],S=nv(),C=nr((0,t.useState)(),2),T=C[0],N=C[1],R=nr((0,t.useState)(),2),P=R[0],A=R[1],D=(0,t.useRef)("10%"),O=(0,t.useRef)("0%"),L=(0,aX.v4)();function M(){return(M=yi(pi().mark((function e(t){var n,i,a,s,u,l;return pi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),f===v){e.next=3;break}return e.abrupt("return",_("Password do not match"));case 3:n=r,i=o,a=c,s=f,u=L.slice(0,8),l=(new Date).toLocaleDateString("en-us",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),j(n,i,a,s,u);try{_(""),I(!0),new Promise((function(e,t){setTimeout((function(){y(c,f),b(),F(n,i,a,s,u,l),console.log("Success!"),e("Success!")}),1e3)})).then((function(e){return k(),S("/")})).catch((function(e){return k()}))}catch(h){_("Failed to create an account")}I(!1);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,t.useEffect)((function(){var e=window.innerWidth;if(window.innerHeight>e+100){N(e*(400/e)+"px"),A("800px")}else{N(e*(600/e)+"px"),A("800px")}}));var F=function(e,t,n,r,i,a){_G.ref(i).set({firstname:e,lastname:t,email:n,password:r,temporary_user_id:i,real_user_id:"working-on-it",profile_image_uri:"https://firebasestorage.googleapis.com/v0/b/thejournal-d14eb.appspot.com/o/storage_of_me%2Fprofile_images%2F1e87a7f1-aced-4dce-a853-fb163ef52b24.jpg?alt=media&token=0bdb1342-01a9-467e-964b-2007ab2dccbc",time:a}).catch(alert)},j=function(e,t,n,i,a){YF.collection("users").doc(r).set({firstname:e,lastname:t,email:n,password:i,temporary_user_id:a,profile_image:"https://firebasestorage.googleapis.com/v0/b/thejournal-d14eb.appspot.com/o/storage_of_me%2Fprofile_images%2F1e87a7f1-aced-4dce-a853-fb163ef52b24.jpg?alt=media&token=0bdb1342-01a9-467e-964b-2007ab2dccbc",message:e+" welcome to Notebook ^,^!"})},U=function(e){switch(e.target.name){case"firstname":console.log("firstname is: "+e.target.value),i(e.target.value);break;case"lastname":console.log("latname is: "+e.target.value),s(e.target.value);break;case"email":console.log("email is: "+e.target.value),l(e.target.value);break;case"password":console.log("password is: "+e.target.value),d(e.target.value);break;case"confirm_password":console.log("confirm_password is: "+e.target.value),m(e.target.value)}};return(0,ap.jsx)("div",{children:(0,ap.jsxs)(hm,{className:"ui container center aligned",textAlign:"center",verticalAlign:"middle",style:{borderColor:"red",transform:"translate("+O.current+","+D.current+")"},children:[(0,ap.jsx)(hm.Row,{children:(0,ap.jsx)(hm.Column,{width:6,style:{minWidth:T,maxHeight:P},children:(0,ap.jsx)($g,{style:{width:"100%"},children:(0,ap.jsxs)(hb,{size:"big",onSubmit:function(e){return M.apply(this,arguments)},children:[(0,ap.jsx)("h2",{className:"text-center mb-4",children:"Sign Up"}),(0,ap.jsx)(hb.Field,{id:"first-name",children:(0,ap.jsx)(hb.Input,{name:"firstname",type:"text",label:"Firstname",placeholder:"Enter Firstname...",icon:"user",onChange:U,value:r,required:!0})}),(0,ap.jsx)(hb.Field,{id:"last-name",children:(0,ap.jsx)(hb.Input,{name:"lastname",type:"text",label:"Lastname",placeholder:"Enter Lastname...",icon:"user",onChange:U,value:o,required:!0})}),(0,ap.jsx)(hb.Field,{id:"email",children:(0,ap.jsx)(hb.Input,{name:"email",type:"email",label:"Email",placeholder:"Enter Email...",icon:"envelope",onChange:U,value:c,required:!0})}),(0,ap.jsx)(hb.Field,{id:"password",children:(0,ap.jsx)(hb.Input,{name:"password",type:"password",label:"Enter Password",placeholder:"Enter Password...",icon:"lock",onChange:U,value:f,required:!0})}),(0,ap.jsx)(hb.Field,{id:"password-confirm",children:(0,ap.jsx)(hb.Input,{name:"confirm_password",type:"password",label:"Confirm Password",placeholder:"Confirm Password...",icon:"lock",onChange:U,value:v,required:!0})}),(0,ap.jsx)(oy,{disabled:E,className:"w-100",color:"blue",size:"big",type:"submit",children:"Sign Up"})]},"big")})})}),(0,ap.jsxs)("div",{className:"w-100 text-center mt-2",children:["Already have an account? ",(0,ap.jsx)(Pv,{to:"/",element:(0,ap.jsx)($J,{}),children:"Log In"})]})]})})},e$=["component"];var t$=function(e){return e.component,xG(e,e$),sp().currentUser?(0,ap.jsx)(gv,{}):(0,ap.jsx)(mv,{to:"/login"})};var n$=function(){var e=nr((0,t.useState)({visible:!0}),2),n=e[0],r=e[1];return(0,ap.jsx)("header",{id:"navHeader",children:(0,ap.jsx)("div",{children:(0,ap.jsx)("h3",{id:"name",children:(0,ap.jsx)(JY,{visible:n,animation:"scale",duiation:500,children:(0,ap.jsx)(oy,{content:n?"Hide":"Show",onClick:function(e){e.preventDefault(),r(!n)},color:"#c0d8c4",children:(0,ap.jsx)(Pv,{to:"/login",element:(0,ap.jsx)($J,{}),children:"Start The App"})})})})})})};var r$=function(){return(0,ap.jsx)("div",{children:(0,ap.jsxs)(Tv,{children:[(0,ap.jsx)(n$,{}),(0,ap.jsx)(up,{children:(0,ap.jsxs)(bv,{children:[(0,ap.jsx)(yv,{path:"/dashboard",element:(0,ap.jsx)(qX,{})}),(0,ap.jsx)(yv,{path:"/",element:(0,ap.jsx)(t$,{}),children:(0,ap.jsx)(yv,{exact:!0,path:"/",element:(0,ap.jsx)($J,{})})}),(0,ap.jsx)(yv,{path:"/update-profile",element:(0,ap.jsx)(UX,{})}),(0,ap.jsx)(yv,{path:"/signup",element:(0,ap.jsx)(ZJ,{})}),(0,ap.jsx)(yv,{path:"/login",element:(0,ap.jsx)($J,{})}),(0,ap.jsx)(yv,{path:"/forgot-password",element:(0,ap.jsx)(wY,{})}),(0,ap.jsx)(yv,{path:"/note",element:(0,ap.jsx)(oX,{})}),(0,ap.jsx)(yv,{path:"/mainpage",element:(0,ap.jsx)(JJ,{})}),(0,ap.jsx)(yv,{path:"/new",element:(0,ap.jsx)(WJ,{})}),(0,ap.jsx)(yv,{path:"/update-profile",element:(0,ap.jsx)(UX,{})}),(0,ap.jsx)(yv,{path:"/notifications-page",element:(0,ap.jsx)(VX,{})}),(0,ap.jsx)(yv,{path:"/images",element:(0,ap.jsx)(GJ,{})}),(0,ap.jsx)(yv,{path:"/image-uploader",element:(0,ap.jsx)(rX,{})})]})})]})})};var i$=function(){return(0,ap.jsx)(hm,{columns:1,stackable:!0,centered:!0,vertical:!0,id:"AppId",children:(0,ap.jsx)("div",{children:(0,ap.jsxs)(Tv,{children:[(0,ap.jsx)(n$,{}),(0,ap.jsx)(up,{children:(0,ap.jsxs)(bv,{children:[(0,ap.jsx)(yv,{path:"/dashboard",element:(0,ap.jsx)(qX,{})}),(0,ap.jsx)(yv,{path:"/",element:(0,ap.jsx)(t$,{}),children:(0,ap.jsx)(yv,{exact:!0,path:"/",element:(0,ap.jsx)($J,{})})}),(0,ap.jsx)(yv,{path:"/update-profile",element:(0,ap.jsx)(UX,{})}),(0,ap.jsx)(yv,{path:"/signup",element:(0,ap.jsx)(ZJ,{})}),(0,ap.jsx)(yv,{path:"/login",element:(0,ap.jsx)($J,{})}),(0,ap.jsx)(yv,{path:"/forgot-password",element:(0,ap.jsx)(wY,{})}),(0,ap.jsx)(yv,{path:"/note",element:(0,ap.jsx)(oX,{})}),(0,ap.jsx)(yv,{path:"/mainpage",element:(0,ap.jsx)(JJ,{})}),(0,ap.jsx)(yv,{path:"/new",element:(0,ap.jsx)(WJ,{})}),(0,ap.jsx)(yv,{path:"/update-profile",element:(0,ap.jsx)(UX,{})}),(0,ap.jsx)(yv,{path:"/notifications-page",element:(0,ap.jsx)(VX,{})}),(0,ap.jsx)(yv,{path:"/images",element:(0,ap.jsx)(GJ,{})}),(0,ap.jsx)(yv,{path:"/image-uploader",element:(0,ap.jsx)(rX,{})})]})})]})})})};var a$=function(){var e=(0,t.useRef)(window.innerWidth),n=(0,t.useRef)(window.innerHeight);return e.current+400<n.current?(0,ap.jsx)(Yn,{style:{height:"100%"},children:(0,ap.jsx)(Jn,{children:(0,ap.jsx)(i$,{})})}):(0,ap.jsx)(Yn,{style:{height:"100%"},children:(0,ap.jsx)(Jn,{children:(0,ap.jsx)(r$,{})})})};i.render((0,ap.jsx)(t.StrictMode,{children:(0,ap.jsx)(a$,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.71ab0dbf.js.map